<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>10 Caractères et chaînes de caractères | Le Epi R Handbook</title>
<meta name="author" content="the handbook team">
<meta name="description" content="Cette page démontre l’utilisation du paquet stringr pour évaluer et manipuler des valeurs de caractères (ou chaînes de caractères, ce que nous appelons “strings” en anglais). Combiner, ordonner,...">
<meta name="generator" content="bookdown 0.34 with bs4_book()">
<meta property="og:title" content="10 Caractères et chaînes de caractères | Le Epi R Handbook">
<meta property="og:type" content="book">
<meta property="og:description" content="Cette page démontre l’utilisation du paquet stringr pour évaluer et manipuler des valeurs de caractères (ou chaînes de caractères, ce que nous appelons “strings” en anglais). Combiner, ordonner,...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="10 Caractères et chaînes de caractères | Le Epi R Handbook">
<meta name="twitter:description" content="Cette page démontre l’utilisation du paquet stringr pour évaluer et manipuler des valeurs de caractères (ou chaînes de caractères, ce que nous appelons “strings” en anglais). Combiner, ordonner,...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.4.2/transition.js"></script><script src="libs/bs3compat-0.4.2/tabs.js"></script><script src="libs/bs3compat-0.4.2/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/htmlwidgets-1.6.2/htmlwidgets.js"></script><link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="libs/datatables-binding-0.28/datatables.js"></script><link href="libs/dt-core-1.13.4/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="libs/dt-core-1.13.4/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="libs/dt-core-1.13.4/js/jquery.dataTables.min.js"></script><link href="libs/nouislider-7.0.10/jquery.nouislider.min.css" rel="stylesheet">
<script src="libs/nouislider-7.0.10/jquery.nouislider.min.js"></script><link href="libs/selectize-0.12.0/selectize.bootstrap3.css" rel="stylesheet">
<script src="libs/selectize-0.12.0/selectize.min.js"></script><link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script><script src="libs/kePrint-0.0.1/kePrint.js"></script><link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<link href="libs/tabwid-1.1.3/tabwid.css" rel="stylesheet">
<script src="libs/tabwid-1.1.3/tabwid.js"></script><link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet">
<script src="libs/leaflet-1.3.1/leaflet.js"></script><link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet">
<script src="libs/proj4-2.6.2/proj4.min.js"></script><script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script><link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet">
<script src="libs/leaflet-binding-2.1.2/leaflet.js"></script><script src="libs/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script><script src="libs/leaflet-providers-plugin-2.1.2/leaflet-providers-plugin.js"></script><script src="libs/viz-1.8.2/viz.js"></script><link href="libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet">
<script src="libs/grViz-binding-1.0.10/grViz.js"></script><script src="libs/d3-4.5.0/d3.min.js"></script><script src="libs/sankey-1/sankey.js"></script><script src="libs/sankeyNetwork-binding-0.4/sankeyNetwork.js"></script><script src="libs/plotly-binding-4.10.1/plotly.js"></script><script src="libs/typedarray-0.1/typedarray.min.js"></script><link href="libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="libs/plotly-main-2.11.1/plotly-latest.min.js"></script><link href="libs/vis-9.1.0/vis-network.min.css" rel="stylesheet">
<script src="libs/vis-9.1.0/vis-network.min.js"></script><script src="libs/visNetwork-binding-2.1.2/visNetwork.js"></script><link href="libs/font-awesome-4.7.0/css/font-awesome.min.css" rel="stylesheet">
<script src="libs/plotly-basic-2.11.1/plotly-basic-2.11.1.min.js"></script><script src="libs/plotly-cartesian-2.11.1/plotly-cartesian-2.11.1.min.js"></script><script src="libs/proj4js-2.3.15/proj4.js"></script><link href="libs/highcharts-9.3.1/css/motion.css" rel="stylesheet">
<script src="libs/highcharts-9.3.1/highcharts.js"></script><script src="libs/highcharts-9.3.1/highcharts-3d.js"></script><script src="libs/highcharts-9.3.1/highcharts-more.js"></script><script src="libs/highcharts-9.3.1/modules/stock.js"></script><script src="libs/highcharts-9.3.1/modules/map.js"></script><script src="libs/highcharts-9.3.1/modules/data.js"></script><script src="libs/highcharts-9.3.1/modules/exporting.js"></script><script src="libs/highcharts-9.3.1/modules/offline-exporting.js"></script><script src="libs/highcharts-9.3.1/modules/drilldown.js"></script><script src="libs/highcharts-9.3.1/modules/item-series.js"></script><script src="libs/highcharts-9.3.1/modules/overlapping-datalabels.js"></script><script src="libs/highcharts-9.3.1/modules/annotations.js"></script><script src="libs/highcharts-9.3.1/modules/export-data.js"></script><script src="libs/highcharts-9.3.1/modules/funnel.js"></script><script src="libs/highcharts-9.3.1/modules/heatmap.js"></script><script src="libs/highcharts-9.3.1/modules/treemap.js"></script><script src="libs/highcharts-9.3.1/modules/sankey.js"></script><script src="libs/highcharts-9.3.1/modules/dependency-wheel.js"></script><script src="libs/highcharts-9.3.1/modules/organization.js"></script><script src="libs/highcharts-9.3.1/modules/solid-gauge.js"></script><script src="libs/highcharts-9.3.1/modules/streamgraph.js"></script><script src="libs/highcharts-9.3.1/modules/sunburst.js"></script><script src="libs/highcharts-9.3.1/modules/vector.js"></script><script src="libs/highcharts-9.3.1/modules/wordcloud.js"></script><script src="libs/highcharts-9.3.1/modules/xrange.js"></script><script src="libs/highcharts-9.3.1/modules/tilemap.js"></script><script src="libs/highcharts-9.3.1/modules/venn.js"></script><script src="libs/highcharts-9.3.1/modules/gantt.js"></script><script src="libs/highcharts-9.3.1/modules/timeline.js"></script><script src="libs/highcharts-9.3.1/modules/parallel-coordinates.js"></script><script src="libs/highcharts-9.3.1/modules/bullet.js"></script><script src="libs/highcharts-9.3.1/modules/coloraxis.js"></script><script src="libs/highcharts-9.3.1/modules/dumbbell.js"></script><script src="libs/highcharts-9.3.1/modules/lollipop.js"></script><script src="libs/highcharts-9.3.1/modules/series-label.js"></script><script src="libs/highcharts-9.3.1/plugins/motion.js"></script><script src="libs/highcharts-9.3.1/custom/reset.js"></script><script src="libs/highcharts-9.3.1/modules/boost.js"></script><script src="libs/highchart-binding-0.9.4/highchart.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<link rel="stylesheet" href="style_bs4.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Le Epi R Handbook</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html"></a></li>
<li class="book-part">About this book</li>
<li><a class="" href="editorial_notes.html"><span class="header-section-number">1</span> Notes techniques et choix éditoriaux</a></li>
<li><a class="" href="download_book_data.html"><span class="header-section-number">2</span> Télécharger le manuel et les données</a></li>
<li class="book-part">Basics</li>
<li><a class="" href="rbasics.html"><span class="header-section-number">3</span> R - les bases</a></li>
<li><a class="" href="transition_to_r.html"><span class="header-section-number">4</span> Transition vers R</a></li>
<li><a class="" href="suggested_packages.html"><span class="header-section-number">5</span> Paquets conseillés</a></li>
<li><a class="" href="r_projects.html"><span class="header-section-number">6</span> Projets R</a></li>
<li><a class="" href="import_export.html"><span class="header-section-number">7</span> Importer et exporter des données</a></li>
<li class="book-part">Data Management</li>
<li><a class="" href="cleaning_data.html"><span class="header-section-number">8</span> Nettoyage de données et fonctions essentielles</a></li>
<li><a class="" href="working_dates.html"><span class="header-section-number">9</span> Manipuler les dates</a></li>
<li><a class="active" href="character_strings.html"><span class="header-section-number">10</span> Caractères et chaînes de caractères</a></li>
<li><a class="" href="factors.html"><span class="header-section-number">11</span> Facteurs</a></li>
<li><a class="" href="pivoting_data.html"><span class="header-section-number">12</span> Restructurer les données</a></li>
<li><a class="" href="grouping_data.html"><span class="header-section-number">13</span> Travailler sur des données groupées</a></li>
<li><a class="" href="joining_matching.html"><span class="header-section-number">14</span> Joindre des données</a></li>
<li><a class="" href="deduplication.html"><span class="header-section-number">15</span> De-duplication</a></li>
<li><a class="" href="iteration.html"><span class="header-section-number">16</span> Itération, boucles et listes</a></li>
<li class="book-part">Analysis</li>
<li><a class="" href="descriptive_tables.html"><span class="header-section-number">17</span> Tableaux descriptifs</a></li>
<li><a class="" href="stats_test.html"><span class="header-section-number">18</span> Tests statistiques simples</a></li>
<li><a class="" href="regression.html"><span class="header-section-number">19</span> Régression univariée et multivariable</a></li>
<li><a class="" href="missing_data.html"><span class="header-section-number">20</span> Données manquantes</a></li>
<li><a class="" href="standardisation.html"><span class="header-section-number">21</span> Taux standardisés</a></li>
<li><a class="" href="moving_average.html"><span class="header-section-number">22</span> Moyennes mobiles</a></li>
<li><a class="" href="time_series.html"><span class="header-section-number">23</span> Série temporelle et détection des épidémies</a></li>
<li><a class="" href="epidemic_models.html"><span class="header-section-number">24</span> Modélisation des épidémies</a></li>
<li><a class="" href="contact_tracing.html"><span class="header-section-number">25</span> Suivi des contacts</a></li>
<li><a class="" href="survey_analysis.html"><span class="header-section-number">26</span> Analyse d’enquête</a></li>
<li><a class="" href="survival_analysis.html"><span class="header-section-number">27</span> Analyse de survie</a></li>
<li><a class="" href="gis.html"><span class="header-section-number">28</span> GIS basics</a></li>
<li class="book-part">Data Visualization</li>
<li><a class="" href="tables_presentation.html"><span class="header-section-number">29</span> Présenter avec des tables</a></li>
<li><a class="" href="ggplot_basics.html"><span class="header-section-number">30</span> Les bases de ggplot</a></li>
<li><a class="" href="ggplot_tips.html"><span class="header-section-number">31</span> Trucs et Astuces avec ggplot</a></li>
<li><a class="" href="epicurves.html"><span class="header-section-number">32</span> Courbes épidémiques</a></li>
<li><a class="" href="age_pyramid.html"><span class="header-section-number">33</span> Pyramides démographiques et échelles de Likert</a></li>
<li><a class="" href="heatmaps.html"><span class="header-section-number">34</span> Graphiques thermiques</a></li>
<li><a class="" href="diagrams.html"><span class="header-section-number">35</span> Diagrammes et schémas</a></li>
<li><a class="" href="combination_analysis.html"><span class="header-section-number">36</span> Analyse des combinaisons</a></li>
<li><a class="" href="transmission_chains.html"><span class="header-section-number">37</span> Chaînes de transmission</a></li>
<li><a class="" href="phylogenetic_trees.html"><span class="header-section-number">38</span> Les arbres phylogénétiques</a></li>
<li><a class="" href="interactive_plots.html"><span class="header-section-number">39</span> Graphiques interactifs</a></li>
<li class="book-part">Reports and dashboards</li>
<li><a class="" href="rmarkdown.html"><span class="header-section-number">40</span> Production de rapports avec R Markdown</a></li>
<li><a class="" href="reportfactory.html"><span class="header-section-number">41</span> Organisation des rapports de routine</a></li>
<li><a class="" href="dashboards.html"><span class="header-section-number">42</span> Tableaux de bord avec R Markdown</a></li>
<li><a class="" href="shiny.html"><span class="header-section-number">43</span> Tableaux de bord avec Shiny</a></li>
<li class="book-part">Miscellaneous</li>
<li><a class="" href="writing_functions.html"><span class="header-section-number">44</span> Fonctions d’écriture</a></li>
<li><a class="" href="directories.html"><span class="header-section-number">45</span> Interactions avec les répertoires</a></li>
<li><a class="" href="collaboration.html"><span class="header-section-number">46</span> Contrôle de version et collaboration avec Git et Github</a></li>
<li><a class="" href="errors.html"><span class="header-section-number">47</span> Erreurs fréquentes</a></li>
<li><a class="" href="help.html"><span class="header-section-number">48</span> Obtenir de l’aide</a></li>
<li><a class="" href="network_drives.html"><span class="header-section-number">49</span> R sur les lecteurs réseau</a></li>
<li><a class="" href="data_table.html"><span class="header-section-number">50</span> Tableau de données</a></li>
</ul>

        <div class="book-extra">
          
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="character_strings" class="section level1" number="10">
<h1>
<span class="header-section-number">10</span> Caractères et chaînes de caractères<a class="anchor" aria-label="anchor" href="#character_strings"><i class="fas fa-link"></i></a>
</h1>
<div class="inline-figure"><img src="images/Characters_Strings_1500x500.png" width="100%"></div>
<p>Cette page démontre l’utilisation du paquet <strong>stringr</strong> pour évaluer et manipuler des valeurs de caractères (ou chaînes de caractères, ce que nous appelons “strings” en anglais).</p>
<ol style="list-style-type: decimal">
<li>Combiner, ordonner, séparer, arranger - <code><a href="https://stringr.tidyverse.org/reference/str_c.html">str_c()</a></code>, <code><a href="https://stringr.tidyverse.org/reference/str_glue.html">str_glue()</a></code>, <code><a href="https://stringr.tidyverse.org/reference/str_order.html">str_order()</a></code>, <code><a href="https://stringr.tidyverse.org/reference/str_split.html">str_split()</a></code><br>
</li>
<li>Nettoyer et standardiser
<ul>
<li>Ajuster la longueur - <code><a href="https://stringr.tidyverse.org/reference/str_pad.html">str_pad()</a></code>, <code><a href="https://stringr.tidyverse.org/reference/str_trunc.html">str_trunc()</a></code>, <code><a href="https://stringr.tidyverse.org/reference/str_wrap.html">str_wrap()</a></code>.<br>
</li>
<li>Changez la casse - <code><a href="https://stringr.tidyverse.org/reference/case.html">str_to_upper()</a></code>, <code><a href="https://stringr.tidyverse.org/reference/case.html">str_to_title()</a></code>, <code><a href="https://stringr.tidyverse.org/reference/case.html">str_to_lower()</a></code>, <code><a href="https://stringr.tidyverse.org/reference/case.html">str_to_sentence()</a></code><br>
</li>
</ul>
</li>
<li>Évaluer et extraire par position - <code><a href="https://stringr.tidyverse.org/reference/str_length.html">str_length()</a></code>, <code><a href="https://stringr.tidyverse.org/reference/str_sub.html">str_sub()</a></code>, <code><a href="https://stringr.tidyverse.org/reference/word.html">word()</a></code>.<br>
</li>
<li>Modèles
<ul>
<li>détecter et localiser - <code><a href="https://stringr.tidyverse.org/reference/str_detect.html">str_detect()</a></code>, <code><a href="https://stringr.tidyverse.org/reference/str_subset.html">str_subset()</a></code>, <code><a href="https://stringr.tidyverse.org/reference/str_match.html">str_match()</a></code>, <code><a href="https://stringr.tidyverse.org/reference/str_extract.html">str_extract()</a></code><br>
</li>
<li>Modifier et remplacer - <code><a href="https://stringr.tidyverse.org/reference/str_sub.html">str_sub()</a></code>, <code><a href="https://stringr.tidyverse.org/reference/str_replace.html">str_replace_all()</a></code><br>
</li>
</ul>
</li>
<li>Expressions régulières (“regex”)</li>
</ol>
<p>Afin d’expliquer facilement l’utilisation des chaînes de caractères dans le présent chapitre, la plupart des exemples utilisent un vecteur de caractères court et défini, mais ils peuvent facilement être adaptés à une colonne dans un dataframe.</p>
<p>Une grande partie de l’inspiration pour ce chapitre est basée sur cette <a href="https://cran.r-project.org/web/packages/stringr/vignettes/stringr.html">example de le paquet stringr</a>.</p>
<!-- ======================================================= -->
<div id="preparation" class="section level2" number="10.1">
<h2>
<span class="header-section-number">10.1</span> Preparation<a class="anchor" aria-label="anchor" href="#preparation"><i class="fas fa-link"></i></a>
</h2>
<div id="charger-les-paquets" class="section level3 unnumbered">
<h3>Charger les paquets<a class="anchor" aria-label="anchor" href="#charger-les-paquets"><i class="fas fa-link"></i></a>
</h3>
<p>Installez ou chargez le paquet <strong>stringr</strong> et d’autres paquets de <strong>tidyverse</strong>.</p>
<div class="sourceCode" id="cb390"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># installer/charger les paquets</span></span>
<span><span class="fu">pacman</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pacman/man/p_load.html">p_load</a></span><span class="op">(</span></span>
<span>  <span class="va">stringr</span>,    <span class="co"># de nombreuses fonctions pour la manipulation des chaînes de caractères</span></span>
<span>  <span class="va">tidyverse</span>,  <span class="co"># pour diverses options de manipulation des données </span></span>
<span>  <span class="va">tools</span><span class="op">)</span>      <span class="co"># alternative pour la conversion en majuscules</span></span></code></pre></div>
</div>
<div id="importation-de-données" class="section level3 unnumbered">
<h3>Importation de données<a class="anchor" aria-label="anchor" href="#importation-de-donn%C3%A9es"><i class="fas fa-link"></i></a>
</h3>
<p>Dans cette page, il y aura parfois des références à la <code>linelist</code> (liste de cas ou liste linéaire) nettoyée des cas d’une épidémie d’Ebola simulée. Si vous voulez suivre les exemples dans votre propre script, <a href="https://github.com/epirhandbook/Epi_R_handbook/raw/master/data/case_linelists/linelist_cleaned.rds" class="download-button">cliquez ici pour télécharger la “linelist” nettoyée</a> (as .rds file). Importez les données avec la fonction <code><a href="https://rdrr.io/pkg/rio/man/import.html">import()</a></code> du paquet <strong>rio</strong> (la fonction <code><a href="https://rdrr.io/pkg/rio/man/import.html">import()</a></code> peut être utilisée pour importer plusieurs types de fichiers comme .xlsx, .csv, .rds - voir la page <a href="import_export.html#import_export">Importation et exportation</a> pour plus de détails).</p>
<div class="sourceCode" id="cb391"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># importez la linelist de cas</span></span>
<span><span class="va">linelist</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/rio/man/import.html">import</a></span><span class="op">(</span><span class="st">"linelist_cleaned.rds"</span><span class="op">)</span></span></code></pre></div>
<p>Les 50 premiéres lignes de la linelist (liste linéaire ou liste de cas) sont affichées ci-dessous.</p>
<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-e838ac4b7721b6de535b" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-e838ac4b7721b6de535b">{"x":{"filter":"top","vertical":false,"filterHTML":"<tr>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"2\" data-max=\"13\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"date\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"1399075200000\" data-max=\"1406419200000\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"date\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"1399939200000\" data-max=\"1407024000000\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"date\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"1400025600000\" data-max=\"1407110400000\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"date\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"1400371200000\" data-max=\"1410566400000\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"0\" data-max=\"67\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\" disabled=\"\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"0\" data-max=\"67\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;0-4&quot;,&quot;5-9&quot;,&quot;10-14&quot;,&quot;15-19&quot;,&quot;20-29&quot;,&quot;30-49&quot;,&quot;50-69&quot;,&quot;70+&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;0-4&quot;,&quot;5-9&quot;,&quot;10-14&quot;,&quot;15-19&quot;,&quot;20-24&quot;,&quot;25-29&quot;,&quot;30-34&quot;,&quot;35-39&quot;,&quot;40-44&quot;,&quot;45-49&quot;,&quot;50-54&quot;,&quot;55-59&quot;,&quot;60-64&quot;,&quot;65-69&quot;,&quot;70-74&quot;,&quot;75-79&quot;,&quot;80-84&quot;,&quot;85+&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"-13.2697246824573\" data-max=\"-13.209391925612\" data-scale=\"13\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"8.45171855856465\" data-max=\"8.48802917129884\" data-scale=\"14\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"0\" data-max=\"100\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"11\" data-max=\"241\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"20\" data-max=\"24\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"35.9\" data-max=\"38\" data-scale=\"1\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"0\" data-max=\"428.994082840237\" data-scale=\"14\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"0\" data-max=\"2\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","data":[["5fe599","8689b7","11f8ea","b8812a","893f25","be99c8","07e3e8","369449","f393b4","1389ca","2978ac","57a565","fc15ef","2eaa9a","bbfa93","c97dd9","f50e8a","3a7673","7f5a01","ddddee","99e8fa","567136","9371a9","bc2adf","403057","8bd1e8","f327be","42e1a9","90e5fe","959170","8ebf6e","e56412","6d788e","a47529","67be4e","da8ecb","148f18","2cb9a5","f5c142","70a9fe","3ad520","062638","c76676","baacc1","497372","23e499","38cc4a","3789ee","c71dcd","6b70f0"],[4,4,2,3,3,3,4,4,4,4,4,4,6,5,6,9,10,8,7,6,7,6,8,6,10,8,6,12,5,8,7,9,11,5,8,5,6,11,7,9,7,8,9,12,13,9,8,10,8,7],["2014-05-08",null,null,"2014-05-04","2014-05-18","2014-05-03","2014-05-22","2014-05-28",null,null,"2014-05-30","2014-05-28","2014-06-14","2014-06-07","2014-06-09",null,null,null,"2014-06-23","2014-06-18","2014-06-24",null,null,"2014-07-03",null,"2014-07-10","2014-06-14",null,"2014-06-18","2014-06-29","2014-07-02","2014-07-12","2014-07-12","2014-06-13","2014-07-15","2014-06-20",null,null,"2014-07-20",null,"2014-07-12","2014-07-19","2014-07-18","2014-07-18","2014-07-27",null,"2014-07-19","2014-07-26","2014-07-24",null],["2014-05-13","2014-05-13","2014-05-16","2014-05-18","2014-05-21","2014-05-22","2014-05-27","2014-06-02","2014-06-05","2014-06-05","2014-06-06","2014-06-13","2014-06-16","2014-06-17","2014-06-18","2014-06-19","2014-06-22","2014-06-23","2014-06-25","2014-06-26","2014-06-28","2014-07-02","2014-07-08","2014-07-09","2014-07-09","2014-07-10","2014-07-12","2014-07-12","2014-07-13","2014-07-13","2014-07-14","2014-07-15","2014-07-16","2014-07-17","2014-07-17","2014-07-18","2014-07-19","2014-07-22","2014-07-22","2014-07-24","2014-07-24","2014-07-25","2014-07-25","2014-07-27","2014-07-29","2014-07-30",null,"2014-08-01","2014-08-02","2014-08-03"],["2014-05-15","2014-05-14","2014-05-18","2014-05-20","2014-05-22","2014-05-23","2014-05-29","2014-06-03","2014-06-06","2014-06-07","2014-06-08","2014-06-15","2014-06-17","2014-06-17","2014-06-20","2014-06-19","2014-06-23","2014-06-24","2014-06-27","2014-06-28","2014-06-29","2014-07-03","2014-07-09","2014-07-09","2014-07-11","2014-07-11","2014-07-13","2014-07-14","2014-07-14","2014-07-13","2014-07-14","2014-07-17","2014-07-17","2014-07-18","2014-07-19","2014-07-20","2014-07-20","2014-07-22","2014-07-24","2014-07-26","2014-07-24","2014-07-27","2014-07-25","2014-07-27","2014-07-31","2014-08-01","2014-08-03","2014-08-02","2014-08-02","2014-08-04"],[null,"2014-05-18","2014-05-30",null,"2014-05-29","2014-05-24","2014-06-01","2014-06-07","2014-06-18","2014-06-09","2014-06-15",null,"2014-07-09",null,"2014-06-30","2014-07-11","2014-07-01","2014-06-25","2014-07-06","2014-07-02","2014-07-09","2014-07-07","2014-07-20",null,"2014-07-22","2014-07-16","2014-07-14","2014-07-20","2014-07-16","2014-07-19","2014-07-27","2014-07-19",null,"2014-07-26","2014-08-14","2014-08-01","2014-07-23","2014-08-28","2014-07-28","2014-07-19",null,"2014-08-03",null,null,null,"2014-08-06","2014-08-21","2014-09-13","2014-08-04",null],[null,"Recover","Recover",null,"Recover","Recover","Recover","Death","Recover","Death","Death","Death","Recover","Recover",null,"Recover",null,null,"Death","Death","Recover",null,null,null,"Death",null,"Death","Death",null,"Death","Recover","Death","Recover","Death","Recover",null,"Death","Recover","Recover","Death",null,null,"Death","Death","Death","Death","Recover",null,"Death","Death"],["m","f","m","f","m","f","f","f","m","f","m","m","m","f","f","m","f","f","f","f","m","m","f","m","f","m","m","f","m","f","f","f","m","m","f","m","f","f","f","m","f","m","f","m","m","f","m","f","m","m"],[2,3,56,18,3,16,16,0,61,27,12,42,19,7,7,13,35,17,11,11,19,54,14,28,6,3,31,6,67,14,10,21,20,45,1,12,3,15,20,36,7,13,14,3,10,1,0,20,26,14],["years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years"],[2,3,56,18,3,16,16,0,61,27,12,42,19,7,7,13,35,17,11,11,19,54,14,28,6,3,31,6,67,14,10,21,20,45,1,12,3,15,20,36,7,13,14,3,10,1,0,20,26,14],["0-4","0-4","50-69","15-19","0-4","15-19","15-19","0-4","50-69","20-29","10-14","30-49","15-19","5-9","5-9","10-14","30-49","15-19","10-14","10-14","15-19","50-69","10-14","20-29","5-9","0-4","30-49","5-9","50-69","10-14","10-14","20-29","20-29","30-49","0-4","10-14","0-4","15-19","20-29","30-49","5-9","10-14","10-14","0-4","10-14","0-4","0-4","20-29","20-29","10-14"],["0-4","0-4","55-59","15-19","0-4","15-19","15-19","0-4","60-64","25-29","10-14","40-44","15-19","5-9","5-9","10-14","35-39","15-19","10-14","10-14","15-19","50-54","10-14","25-29","5-9","0-4","30-34","5-9","65-69","10-14","10-14","20-24","20-24","45-49","0-4","10-14","0-4","15-19","20-24","35-39","5-9","10-14","10-14","0-4","10-14","0-4","0-4","20-24","25-29","10-14"],["Other","Missing","St. Mark's Maternity Hospital (SMMH)","Port Hospital","Military Hospital","Port Hospital","Missing","Missing","Missing","Missing","Port Hospital","Military Hospital","Missing","Missing","Other","Port Hospital","Port Hospital","Port Hospital","Missing","Other","Port Hospital","Port Hospital","St. Mark's Maternity Hospital (SMMH)","Missing","Other","Missing","St. Mark's Maternity Hospital (SMMH)","Military Hospital","Port Hospital","Central Hospital","Military Hospital","Central Hospital","Missing","Military Hospital","Other","Missing","Missing","Port Hospital","Port Hospital","Port Hospital","Missing","Central Hospital","Military Hospital","Other","Other","Other","Missing","St. Mark's Maternity Hospital (SMMH)","St. Mark's Maternity Hospital (SMMH)","Missing"],[-13.2157351064963,-13.2152339775486,-13.212910703914,-13.2363711169728,-13.2228638912441,-13.222625321098,-13.2331547837254,-13.2320975453153,-13.2225511595637,-13.2572163655863,-13.2206286746001,-13.253989309478,-13.2385127873491,-13.209391925612,-13.2157278814899,-13.2243437095992,-13.2336087079551,-13.21422143145,-13.2339681355349,-13.2535640411465,-13.2250089377786,-13.2160657166043,-13.2680671272333,-13.2266742923612,-13.2160179088168,-13.2482584611565,-13.2156319199566,-13.2142410663192,-13.2614879104088,-13.2452992638476,-13.2630592726116,-13.2343341712241,-13.2199077448676,-13.2227293309912,-13.2343062806506,-13.218781651651,-13.2483677722899,-13.2097478342339,-13.2680867723786,-13.2587535457526,-13.262635786914,-13.2697246824573,-13.2209026809759,-13.2330734719715,-13.2680923666905,-13.2547212675054,-13.2573683214693,-13.2137356012883,-13.2175973322257,-13.2486407324245],[8.46897295100924,8.45171855856465,8.46481700596819,8.4754761613651,8.46082377490923,8.46183062600728,8.46272931462646,8.46144367534271,8.46191259217774,8.47292327643506,8.48401630165138,8.45837125340844,8.47761705512509,8.47570184950483,8.47779946878972,8.47145134147474,8.47804840685363,8.48528034195779,8.46957530395867,8.45957352078114,8.47404889511544,8.48802917129884,8.473437335922,8.48408263734462,8.46242233645879,8.47026822126572,8.46398447480533,8.4641347894342,8.45623094629607,8.48334624336805,8.47493999153642,8.47832062438022,8.4693933891765,8.48480589906514,8.47121232619015,8.48438437371817,8.48466158574339,8.47714159984428,8.46238127010609,8.45568597813113,8.4632880274758,8.47940722413856,8.46353857052336,8.46178968158864,8.47508713872833,8.45825808128071,8.4532568143863,8.4732571907655,8.47911586641933,8.48480340615605],["f547d6",null,null,"f90f5f","11f8ea","aec8ec","893f25","133ee7",null,null,"996f3a","133ee7","37a6f6","9f6884","4802b1",null,null,null,"a75c7f","8e104d","ab634e",null,null,"b799eb",null,"5d9e4d","a15e13",null,"ea3740","beb26e","567136","894024","36e2e7","a2086d","7baf73","eb2277",null,null,"d6584f",null,"312ecf","52ea64","cfd79c","d145b7","174288",null,"53608c","3b096b","f5c142",null],["other",null,null,"other","other","other","other","other",null,null,"other","other","other","other","other",null,null,null,"other","other","other",null,null,"other",null,"other","other",null,"other","funeral","other","funeral","other","other","other","funeral",null,null,"other",null,"other","other","other","other","other",null,"funeral","other","other",null],[27,25,91,41,36,56,47,0,86,69,67,84,68,44,34,66,78,47,53,47,71,86,53,69,38,46,68,37,100,56,50,57,65,72,29,69,37,48,54,71,47,61,47,35,53,16,13,59,69,67],[48,59,238,135,71,116,87,11,226,174,112,186,174,90,91,152,214,137,117,131,150,241,131,161,80,69,188,66,233,142,110,182,164,214,26,157,39,154,133,168,100,125,123,67,134,31,36,125,183,169],[22,22,21,23,23,21,21,22,22,22,22,22,22,21,23,22,23,21,22,23,21,23,21,24,23,22,24,23,20,24,24,20,24,21,22,21,23,22,23,23,23,22,23,22,22,22,23,22,22,22],["no",null,null,"no","no","no",null,"no","no","no","no","no","no","no","no","no","no","no",null,"no","no","no","no","no",null,"no","no","no",null,null,"no","no",null,"no","no",null,null,"no","no",null,"no","no",null,"no","no","no","no","no","no",null],["no",null,null,"no","no","no",null,"no","no","no","no","no","no","no","no","no","yes","no",null,"no","no","no","yes","no",null,"no","no","yes",null,null,"no","no",null,"no","no",null,null,"no","no",null,"no","no",null,"no","yes","no","no","no","no",null],["yes",null,null,"no","yes","yes",null,"yes","yes","yes","yes","yes","yes","yes","yes","yes","yes","yes",null,"yes","yes","yes","yes","yes",null,"yes","yes","yes",null,null,"yes","yes",null,"yes","yes",null,null,"yes","yes",null,"yes","yes",null,"yes","yes","yes","yes","yes","no",null],["no",null,null,"no","no","no",null,"no","no","no","no","no","no","no","no","yes","no","no",null,"no","no","no","no","no",null,"no","no","no",null,null,"no","no",null,"no","no",null,null,"yes","yes",null,"no","no",null,"no","no","no","no","no","no",null],["yes",null,null,"no","yes","yes",null,"yes","yes","no","yes","no","no","no","yes","no","no","no",null,"no","yes","no","no","no",null,"no","no","no",null,null,"no","yes",null,"yes","yes",null,null,"yes","yes",null,"yes","yes",null,"yes","yes","no","yes","yes","yes",null],[36.8,36.9,36.9,36.8,36.9,37.6,37.3,37,36.4,35.9,36.5,36.9,36.5,37.1,36.5,37.3,37,38,38,36,37,36.7,36.9,36.5,37,36.5,37.6,36.6,36.6,36.2,36.4,37.1,37.5,37.5,37.4,36.9,36.4,37.3,37,37.8,36.5,37.5,36.7,37,37.3,36.6,36.5,36.6,37.6,36.8],[null,"09:36","16:48","11:22","12:60","14:13","14:33","09:25","11:16","10:55","16:03","11:14","12:42","11:06","09:10","08:45",null,"15:41","13:34","18:58","12:43","16:33","14:29","07:18","08:11","16:32","16:17","07:32","17:45",null,"13:24","14:43","02:33","11:36","17:28","16:27",null,"20:49",null,"11:38","14:25","13:42","21:22","13:33","19:06","17:14","20:09",null,"10:23","09:09"],[117.1875,71.8184429761563,16.0652496292635,22.4965706447188,71.4144019043841,41.6171224732461,62.0953890870657,0,16.8376536925366,22.7903289734443,53.4119897959184,24.2802636142907,22.4600343506408,54.320987654321,41.0578432556455,28.5664819944598,17.0320552013276,25.0412914912888,38.7172182043977,27.3876813705495,31.5555555555556,14.8069075945662,30.8839811199813,26.6193433895297,59.375,96.6183574879227,19.2394748755093,84.9403122130395,18.4199377406104,27.7722674072605,41.3223140495868,17.2080666586161,24.1671624033314,15.7218971089178,428.994082840237,27.9930220292912,243.261012491782,20.2395007589813,30.527446435638,25.15589569161,47,39.04,31.0661643201798,77.9683671196257,29.5165961238583,166.493236212279,100.308641975309,37.76,20.6037803457852,23.458562375267],[2,1,2,2,1,1,2,1,1,2,2,2,1,0,2,0,1,1,2,2,1,1,1,0,2,1,1,2,1,0,0,2,1,1,2,2,1,0,2,2,0,2,0,0,2,2,null,1,0,1]],"container":"<table class=\"white-space: nowrap\">\n  <thead>\n    <tr>\n      <th>case_id<\/th>\n      <th>generation<\/th>\n      <th>date_infection<\/th>\n      <th>date_onset<\/th>\n      <th>date_hospitalisation<\/th>\n      <th>date_outcome<\/th>\n      <th>outcome<\/th>\n      <th>gender<\/th>\n      <th>age<\/th>\n      <th>age_unit<\/th>\n      <th>age_years<\/th>\n      <th>age_cat<\/th>\n      <th>age_cat5<\/th>\n      <th>hospital<\/th>\n      <th>lon<\/th>\n      <th>lat<\/th>\n      <th>infector<\/th>\n      <th>source<\/th>\n      <th>wt_kg<\/th>\n      <th>ht_cm<\/th>\n      <th>ct_blood<\/th>\n      <th>fever<\/th>\n      <th>chills<\/th>\n      <th>cough<\/th>\n      <th>aches<\/th>\n      <th>vomit<\/th>\n      <th>temp<\/th>\n      <th>time_admission<\/th>\n      <th>bmi<\/th>\n      <th>days_onset_hosp<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":[1,8,10,14,15,18,19,20,26,28,29]}],"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true,"lengthMenu":[5,10,25,50,100]},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script><!-- ======================================================= -->
</div>
</div>
<div id="unir-séparer-et-arranger" class="section level2" number="10.2">
<h2>
<span class="header-section-number">10.2</span> Unir, séparer et arranger<a class="anchor" aria-label="anchor" href="#unir-s%C3%A9parer-et-arranger"><i class="fas fa-link"></i></a>
</h2>
<p>Cette section couvre :</p>
<ul>
<li>Utilisation de <code><a href="https://stringr.tidyverse.org/reference/str_c.html">str_c()</a></code>, <code><a href="https://stringr.tidyverse.org/reference/str_glue.html">str_glue()</a></code> et <code><a href="https://tidyr.tidyverse.org/reference/unite.html">unite()</a></code> pour combiner des chaînes de caractères.<br>
</li>
<li>Utiliser <code><a href="https://stringr.tidyverse.org/reference/str_order.html">str_order()</a></code> pour organiser des chaînes de caractères.<br>
</li>
<li>Utiliser <code><a href="https://stringr.tidyverse.org/reference/str_split.html">str_split()</a></code> et <code><a href="https://tidyr.tidyverse.org/reference/separate.html">separate()</a></code> pour séparer des chaînes de caractères.</li>
</ul>
<!-- ======================================================= --><div id="combiner-des-chaînes-de-caractères" class="section level3 unnumbered">
<h3>Combiner des chaînes de caractères<a class="anchor" aria-label="anchor" href="#combiner-des-cha%C3%AEnes-de-caract%C3%A8res"><i class="fas fa-link"></i></a>
</h3>
<p>Pour combiner ou concaténer plusieurs chaînes de caractères en une seule chaîne, nous suggérons d’utiliser la fonction <code><a href="https://stringr.tidyverse.org/reference/str_c.html">str_c()</a></code> du paquet <strong>stringr</strong>. Si vous avez des valeurs de caractères distinctes à combiner, fournissez-les simplement comme arguments uniques, séparés par des virgules.</p>
<div class="sourceCode" id="cb392"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_c.html">str_c</a></span><span class="op">(</span><span class="st">"String1"</span>, <span class="st">"String2"</span>, <span class="st">"String3"</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "String1String2String3"</code></pre>
<p>L’argument <code>sep =</code> insére une valeur de caractère entre chacun des arguments que vous avez fournis (par exemple, fournir une virgule, un espace ou une nouvelle ligne insérerait ce caractère entre chaque argument <code>"\n"</code>)</p>
<div class="sourceCode" id="cb394"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_c.html">str_c</a></span><span class="op">(</span><span class="st">"String1"</span>, <span class="st">"String2"</span>, <span class="st">"String3"</span>, sep <span class="op">=</span> <span class="st">", "</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "String1, String2, String3"</code></pre>
<p>L’argument <code>collapse =</code> est pertinent si vous mettez plusieurs <em>vecteurs</em> comme arguments à <code><a href="https://stringr.tidyverse.org/reference/str_c.html">str_c()</a></code>. L’argument <code>collapse =</code> est utilisé pour séparer les éléments inclus dans le vecteur produit par <code><a href="https://stringr.tidyverse.org/reference/str_c.html">str_c()</a></code>, où le vecteur produit est un long vecteur de type caractère.</p>
<p>L’exemple ci-dessous montre la combinaison de deux vecteurs en un seul vecteur (prénoms et noms de famille). Un autre exemple similaire pourrait être montré avec des régions et le nombre de cas dans chaque région. Dans cet exemple :</p>
<ul>
<li>La valeur <code>sep =</code> apparaît entre chaque prénom et chaque nom.<br>
</li>
<li>La valeur <code>collapse =</code> apparaît entre chaque personne.</li>
</ul>
<div class="sourceCode" id="cb396"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">first_names</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"abdul"</span>, <span class="st">"fahruk"</span>, <span class="st">"janice"</span><span class="op">)</span> </span>
<span><span class="va">last_names</span>  <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"hussein"</span>, <span class="st">"akinleye"</span>, <span class="st">"okeke"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># sep s'affiche entre les chaînes de caractères d'entrée respectives, tandis que collapse s'affiche entre les éléments produits</span></span>
<span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_c.html">str_c</a></span><span class="op">(</span><span class="va">first_names</span>, <span class="va">last_names</span>, sep <span class="op">=</span> <span class="st">" "</span>, collapse <span class="op">=</span> <span class="st">";  "</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "abdul hussein;  fahruk akinleye;  janice okeke"</code></pre>
<p>Remarque: Selon le contexte d’affichage souhaité, lorsque vous imprimez une telle chaîne combinée avec des nouvelles lignes, vous devrez peut-être envelopper la phrase entière dans <code><a href="https://rdrr.io/r/base/cat.html">cat()</a></code> pour que les nouvelles lignes s’impriment correctement:</p>
<div class="sourceCode" id="cb398"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Pour que les nouvelles lignes s'impriment correctement, il peut être nécessaire d'envelopper la phrase dans cat()</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_c.html">str_c</a></span><span class="op">(</span><span class="va">first_names</span>, <span class="va">last_names</span>, sep <span class="op">=</span> <span class="st">" "</span>, collapse <span class="op">=</span> <span class="st">";\n"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>## abdul hussein;
## fahruk akinleye;
## janice okeke</code></pre>
<!-- ======================================================= -->
</div>
<div id="chaînes-de-caractères-dynamiques" class="section level3 unnumbered">
<h3>Chaînes de caractères dynamiques<a class="anchor" aria-label="anchor" href="#cha%C3%AEnes-de-caract%C3%A8res-dynamiques"><i class="fas fa-link"></i></a>
</h3>
<p>Utilisez la fonction <code><a href="https://stringr.tidyverse.org/reference/str_glue.html">str_glue()</a></code> pour insérer du code R dynamique dans une chaîne de caractères. C’est une fonction trés utile pour créer des légendes de graphiques dynamiques, comme démontré ci-dessous.</p>
<ul>
<li>Tout le contenu est placé entre guillemets doubles comme ceci <code>str_glue("")</code>.<br>
</li>
<li>Tout code dynamique ou référence à des valeurs prédéfinies est placé entre des accolades <code><a href="https://rdrr.io/r/base/Paren.html">{}</a></code> à l’intérieur des guillemets doubles. Il peut y avoir plusieurs accolades dans la même commande de <code><a href="https://stringr.tidyverse.org/reference/str_glue.html">str_glue()</a></code>.<br>
</li>
<li>Pour afficher les guillemets de caractères ’’, utilisez des guillemets simples entre les guillemets doubles (par exemple, pour le format de date - voir l’exemple ci-dessous).<br>
</li>
<li>Conseil : Vous pouvez utiliser <code>\n</code> pour forcer une nouvelle ligne.<br>
</li>
<li>Conseil : Vous pouvez utiliser <code><a href="https://rdrr.io/r/base/format.html">format()</a></code> pour ajuster l’affichage de la date, et utiliser <code><a href="https://rdrr.io/r/base/Sys.time.html">Sys.Date()</a></code> pour afficher la date actuelle.</li>
</ul>
<p>Un exemple simple, d’une légende d’un graphique dynamique :</p>
<div class="sourceCode" id="cb400"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_glue.html">str_glue</a></span><span class="op">(</span><span class="st">"Les données incluent {nrow(linelist)} cas et sont actuelles à {format(Sys.Date(), '%d %b %Y')}."</span><span class="op">)</span></span></code></pre></div>
<pre><code>## Les données incluent 5888 cas et sont actuelles à 21 May 2023.</code></pre>
<p>Un format alternatif consiste à utiliser des caractères de remplacement à l’intérieur des parenthèses et à définir le code dans des arguments séparés à la fin de la fonction <code><a href="https://stringr.tidyverse.org/reference/str_glue.html">str_glue()</a></code>, comme ci-dessous. Cela peut améliorer la lisibilité du code si le texte est long.</p>
<div class="sourceCode" id="cb402"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_glue.html">str_glue</a></span><span class="op">(</span><span class="st">"Linelist à la {current_date}.\nDernier cas hospitalisé à l'hôpital {last_hospital}.\n{n_missing_onset} cas n'ont pas de date d'apparition et ne sont pas représentés."</span>,</span>
<span>         current_date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/format.html">format</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html">Sys.Date</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">'%d %b %Y'</span><span class="op">)</span>,</span>
<span>         last_hospital <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/format.html">format</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">linelist</span><span class="op">$</span><span class="va">date_hospitalisation</span>, na.rm<span class="op">=</span><span class="cn">T</span><span class="op">)</span><span class="op">)</span>, <span class="st">'%d %b %Y'</span><span class="op">)</span>,</span>
<span>         n_missing_onset <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">linelist</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">date_onset</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>         <span class="op">)</span></span></code></pre></div>
<pre><code>## Linelist à la 21 May 2023.
## Dernier cas hospitalisé à l'hôpital 30 Apr 2015.
## 256 cas n'ont pas de date d'apparition et ne sont pas représentés.</code></pre>
<p><strong>Extraction d’un dataframe</strong></p>
<p>Il est parfois utile d’extraire des données d’un dataframe et de les coller ensemble en séquence.Vous trouverez ci-dessous un exemple de dataframe comprenant la juridiction (zone), les nouvelles affaires et les affaires totales. Nous allons l’utiliser pour faire une description résumée du nombre de nouveaux cas et du nombre total de cas par juridiction.</p>
<div class="sourceCode" id="cb404"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># créer un dataframe de cas</span></span>
<span><span class="va">case_table</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span></span>
<span>  zone        <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Zone 1"</span>, <span class="st">"Zone 2"</span>, <span class="st">"Zone 3"</span>, <span class="st">"Zone 4"</span>, <span class="st">"Zone 5"</span><span class="op">)</span>,</span>
<span>  new_cases   <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">0</span>, <span class="fl">7</span>, <span class="fl">0</span>, <span class="fl">15</span><span class="op">)</span>,</span>
<span>  total_cases <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">40</span>, <span class="fl">4</span>, <span class="fl">25</span>, <span class="fl">10</span>, <span class="fl">103</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-102c622630b8df9b5d65" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-102c622630b8df9b5d65">{"x":{"filter":"none","vertical":false,"data":[["Zone 1","Zone 2","Zone 3","Zone 4","Zone 5"],[3,0,7,0,15],[40,4,25,10,103]],"container":"<table class=\"white-space: nowrap\">\n  <thead>\n    <tr>\n      <th>zone<\/th>\n      <th>new_cases<\/th>\n      <th>total_cases<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":[1,2]}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script><p>Utilisez la fonction <code><a href="https://stringr.tidyverse.org/reference/str_glue.html">str_glue_data()</a></code>, qui est spécifiquement utilisée pour prendre des données à partir des lignes du dataframe:</p>
<div class="sourceCode" id="cb405"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">case_table</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_glue.html">str_glue_data</a></span><span class="op">(</span><span class="st">"{zone}: {new_cases} ({total_cases} total cases)"</span><span class="op">)</span></span></code></pre></div>
<pre><code>## Zone 1: 3 (40 total cases)
## Zone 2: 0 (4 total cases)
## Zone 3: 7 (25 total cases)
## Zone 4: 0 (10 total cases)
## Zone 5: 15 (103 total cases)</code></pre>
<p><strong>Combinaison des chaînes de caractères entre les lignes</strong></p>
<p>Si vous essayez “d’enrouler” des valeurs dans une colonne d’un dataframe, c’est-à-dire de combiner des valeurs de plusieurs lignes en une seule ligne en les collant ensemble avec un séparateur. Consultez la section de la page <a href="cleaning_data.html#deduplication">Deduplication</a> sur les valeurs <a href="deduplication.html#str_rollup">“enroulées”</a>.</p>
<p><strong>Dataframe combiné en une seule ligne</strong></p>
<p>Vous pouvez faire apparaêtre la description résumée sur une seule ligne en utilisant <code><a href="https://stringr.tidyverse.org/reference/str_c.html">str_c()</a></code> (en spécifiant le dataframe et les noms des colonnes), et en fournissant les arguments <code>sep =</code> et <code>collapse =</code>.</p>
<div class="sourceCode" id="cb407"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_c.html">str_c</a></span><span class="op">(</span><span class="va">case_table</span><span class="op">$</span><span class="va">zone</span>, <span class="va">case_table</span><span class="op">$</span><span class="va">new_cases</span>, sep <span class="op">=</span> <span class="st">" = "</span>, collapse <span class="op">=</span> <span class="st">";  "</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "Zone 1 = 3;  Zone 2 = 0;  Zone 3 = 7;  Zone 4 = 0;  Zone 5 = 15"</code></pre>
<p>Vous pouvez ajouter le pré-fixe “New Cases :” (nouveaux cas en français) au début de la description en l’entourant d’une <code><a href="https://stringr.tidyverse.org/reference/str_c.html">str_c()</a></code> distincte (si “New Cases :” se trouvait dans la `str_c()``, il apparaîtrait plusieurs fois).</p>
<div class="sourceCode" id="cb409"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_c.html">str_c</a></span><span class="op">(</span><span class="st">"New Cases: "</span>, <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_c.html">str_c</a></span><span class="op">(</span><span class="va">case_table</span><span class="op">$</span><span class="va">zone</span>, <span class="va">case_table</span><span class="op">$</span><span class="va">new_cases</span>, sep <span class="op">=</span> <span class="st">" = "</span>, collapse <span class="op">=</span> <span class="st">";  "</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "New Cases: Zone 1 = 3;  Zone 2 = 0;  Zone 3 = 7;  Zone 4 = 0;  Zone 5 = 15"</code></pre>
</div>
<div id="str_unite" class="section level3 unnumbered">
<h3>Unir les colonnes<a class="anchor" aria-label="anchor" href="#str_unite"><i class="fas fa-link"></i></a>
</h3>
<p>Dans un cadre de données, le regroupement des valeurs de caractères de plusieurs colonnes peut être réalisé avec la fonction <code><a href="https://tidyr.tidyverse.org/reference/unite.html">unite()</a></code> du paquet <strong>tidyr</strong>. C’est l’inverse de la fonction <code><a href="https://tidyr.tidyverse.org/reference/separate.html">separate()</a></code>.</p>
<p>Vous devez fournir le nom de la nouvelle colonne unie et ensuite fournir les noms des colonnes que vous souhaitez unir.</p>
<ul>
<li>Par défaut, le séparateur utilisé dans la colonne unie est le caractère de soulignement <code>_</code>, mais cela peut être changé avec l’argument <code>sep =</code>.<br>
</li>
<li>L’argument <code>remove =</code> supprime les colonnes qui seront unies du dataframe (VRAI par défaut).<br>
</li>
<li>L’argument <code>na.rm =</code> supprime les valeurs manquantes lors de l’unification (FAUX par défaut)</li>
</ul>
<p>Ci-dessous, nous définissons un mini dataframe pour la démonstration:</p>
<div class="sourceCode" id="cb411"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span></span>
<span>  case_ID <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">6</span><span class="op">)</span>,</span>
<span>  symptoms  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"jaundice, fever, chills"</span>,     <span class="co"># patient 1</span></span>
<span>                <span class="st">"chills, aches, pains"</span>,        <span class="co"># patient 2 </span></span>
<span>                <span class="st">"fever"</span>,                       <span class="co"># patient 3</span></span>
<span>                <span class="st">"vomiting, diarrhoea"</span>,         <span class="co"># patient 4</span></span>
<span>                <span class="st">"bleeding from gums, fever"</span>,   <span class="co"># patient 5</span></span>
<span>                <span class="st">"rapid pulse, headache"</span><span class="op">)</span>,      <span class="co"># patient 6</span></span>
<span>  outcome <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Recover"</span>, <span class="st">"Death"</span>, <span class="st">"Death"</span>, <span class="st">"Recover"</span>, <span class="st">"Recover"</span>, <span class="st">"Recover"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb412"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df_split</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tidyr.tidyverse.org/reference/separate.html">separate</a></span><span class="op">(</span><span class="va">df</span>, <span class="va">symptoms</span>, into <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"sym_1"</span>, <span class="st">"sym_2"</span>, <span class="st">"sym_3"</span><span class="op">)</span>, extra <span class="op">=</span> <span class="st">"merge"</span><span class="op">)</span></span></code></pre></div>
<pre><code>## Warning: Expected 3 pieces. Missing pieces filled with `NA` in 2 rows [3, 4].</code></pre>
<p>Voici l’exemple avec le dataframe dessus:</p>
<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-f7a68c49e67ac52c4a92" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-f7a68c49e67ac52c4a92">{"x":{"filter":"none","vertical":false,"data":[[1,2,3,4,5,6],["jaundice","chills","fever","vomiting","bleeding","rapid"],["fever","aches",null,"diarrhoea","from","pulse"],["chills","pains",null,null,"gums, fever","headache"],["Recover","Death","Death","Recover","Recover","Recover"]],"container":"<table class=\"white-space: nowrap\">\n  <thead>\n    <tr>\n      <th>case_ID<\/th>\n      <th>sym_1<\/th>\n      <th>sym_2<\/th>\n      <th>sym_3<\/th>\n      <th>outcome<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script><p>Ci-dessous, nous réunissons les trois colonnes de symptômes:</p>
<div class="sourceCode" id="cb414"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df_split</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/unite.html">unite</a></span><span class="op">(</span></span>
<span>    col <span class="op">=</span> <span class="st">"all_symptoms"</span>, <span class="co"># nom de la nouvelle colonne unie</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"sym_1"</span>, <span class="st">"sym_2"</span>, <span class="st">"sym_3"</span><span class="op">)</span>, <span class="co"># colonnes à unir</span></span>
<span>    sep <span class="op">=</span> <span class="st">", "</span>, <span class="co"># séparateur à utiliser dans la colonne unie</span></span>
<span>    remove <span class="op">=</span> <span class="cn">TRUE</span>, <span class="co"># si TRUE (VRAI), supprime les colonnes d'entrée du dataframe</span></span>
<span>    na.rm <span class="op">=</span> <span class="cn">TRUE</span> <span class="co"># Si TRUE (VRAI), les valeurs manquantes sont supprimées avant l'unification.</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<pre><code>##   case_ID                all_symptoms outcome
## 1       1     jaundice, fever, chills Recover
## 2       2        chills, aches, pains   Death
## 3       3                       fever   Death
## 4       4         vomiting, diarrhoea Recover
## 5       5 bleeding, from, gums, fever Recover
## 6       6      rapid, pulse, headache Recover</code></pre>
<!-- ======================================================= -->
</div>
<div id="séparer" class="section level3 unnumbered">
<h3>séparer<a class="anchor" aria-label="anchor" href="#s%C3%A9parer"><i class="fas fa-link"></i></a>
</h3>
<p>Pour diviser une chaîne de caractères en fonction d’un motif, utilisez la fonction <code><a href="https://stringr.tidyverse.org/reference/str_split.html">str_split()</a></code>. Cette fonction évalue la (ou les) chaîne(s) de caractères et renvoie une <code>liste</code> de vecteurs de caractères constituée des valeurs nouvellement séparées.</p>
<p>L’exemple simple ci-dessous évalue une chaîne de caractères et la divise en trois. Par défaut, il retourne un objet de la classe <code>list</code> avec un élément (un vecteur de caractères) pour chaque chaîne initialement fournie. Si <code>simplify = TRUE</code>, (en français VRAI), il retourne une matrice de caractères.</p>
<p>Dans cet exemple, une chaîne de caractères est fournie, et la fonction renvoie une liste avec un élément - un vecteur de caractères avec trois valeurs.</p>
<div class="sourceCode" id="cb416"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_split.html">str_split</a></span><span class="op">(</span>string <span class="op">=</span> <span class="st">"jaundice, fever, chills"</span>,</span>
<span>          pattern <span class="op">=</span> <span class="st">","</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [[1]]
## [1] "jaundice" " fever"   " chills"</code></pre>
<p>Si les valeurs séparées sont enregistrées dans un objet, vous pouvez alors accéder à la n-iéme valeur séparée avec la syntaxe des crochets. Pour accéder à une valeur spécifique, vous pouvez utiliser une syntaxe comme celle-ci : <code>nouveau_objet[[1]][2]</code>, qui accéderait à la deuxiéme valeur de la premiére chaîne évaluée (“fever”, ou fiévre en français, dans le dataframe de l’exemple). Consultez la page <a href="rbasics.html#rbasics">Bases de R</a> pour plus de détails sur l’accés aux éléments.</p>
<div class="sourceCode" id="cb418"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pt1_symptoms</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_split.html">str_split</a></span><span class="op">(</span><span class="st">"jaundice, fever, chills"</span>, <span class="st">","</span><span class="op">)</span></span>
<span></span>
<span><span class="va">pt1_symptoms</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span>  <span class="co"># extrait la 2éme valeur du 1er (et dans ce cas unique) élément de la liste</span></span></code></pre></div>
<pre><code>## [1] " fever"</code></pre>
<p>Si plusieurs chaînes de caractères sont fournies par <code><a href="https://stringr.tidyverse.org/reference/str_split.html">str_split()</a></code>, il y aura plus d’un élément dans la liste retournée.</p>
<div class="sourceCode" id="cb420"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">symptoms</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"jaundice, fever, chills"</span>,     <span class="co"># patient 1</span></span>
<span>              <span class="st">"chills, aches, pains"</span>,        <span class="co"># patient 2 </span></span>
<span>              <span class="st">"fever"</span>,                       <span class="co"># patient 3</span></span>
<span>              <span class="st">"vomiting, diarrhoea"</span>,         <span class="co"># patient 4</span></span>
<span>              <span class="st">"bleeding from gums, fever"</span>,   <span class="co"># patient 5</span></span>
<span>              <span class="st">"rapid pulse, headache"</span><span class="op">)</span>       <span class="co"># patient 6</span></span>
<span></span>
<span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_split.html">str_split</a></span><span class="op">(</span><span class="va">symptoms</span>, <span class="st">","</span><span class="op">)</span>                     <span class="co"># split each patient's symptoms</span></span></code></pre></div>
<pre><code>## [[1]]
## [1] "jaundice" " fever"   " chills" 
## 
## [[2]]
## [1] "chills" " aches" " pains"
## 
## [[3]]
## [1] "fever"
## 
## [[4]]
## [1] "vomiting"   " diarrhoea"
## 
## [[5]]
## [1] "bleeding from gums" " fever"            
## 
## [[6]]
## [1] "rapid pulse" " headache"</code></pre>
<p>Pour retourner une “matrice de caractères” à la place, ce qui peut être utile pour créer des colonnes dans votre dataframe, définissez l’argument <code>simplify = TRUE</code> comme indiqué ci-dessous :</p>
<div class="sourceCode" id="cb422"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_split.html">str_split</a></span><span class="op">(</span><span class="va">symptoms</span>, <span class="st">","</span>, simplify <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="co">#simplify = VRAI</span></span></code></pre></div>
<pre><code>##      [,1]                 [,2]         [,3]     
## [1,] "jaundice"           " fever"     " chills"
## [2,] "chills"             " aches"     " pains" 
## [3,] "fever"              ""           ""       
## [4,] "vomiting"           " diarrhoea" ""       
## [5,] "bleeding from gums" " fever"     ""       
## [6,] "rapid pulse"        " headache"  ""</code></pre>
<p>Vous pouvez également ajuster le nombre de séparations à créer avec l’argument <code>n =</code>. Par exemple, l’exemple ci-dessous limite le nombre de séparations à deux. Toutes les autres virgules restent dans les deuxiémes valeurs.</p>
<div class="sourceCode" id="cb424"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_split.html">str_split</a></span><span class="op">(</span><span class="va">symptoms</span>, <span class="st">","</span>, simplify <span class="op">=</span> <span class="cn">TRUE</span>, n <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<pre><code>##      [,1]                 [,2]            
## [1,] "jaundice"           " fever, chills"
## [2,] "chills"             " aches, pains" 
## [3,] "fever"              ""              
## [4,] "vomiting"           " diarrhoea"    
## [5,] "bleeding from gums" " fever"        
## [6,] "rapid pulse"        " headache"</code></pre>
<p><em>Note - les mêmes résultats peuvent être obtenus avec <code><a href="https://stringr.tidyverse.org/reference/str_split.html">str_split_fixed()</a></code>, dans lequel vous ne donnez pas l’argument <code>simplify</code>, mais devez à la place désigner le nombre de colonnes (<code>n</code>).</em></p>
<div class="sourceCode" id="cb426"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_split.html">str_split_fixed</a></span><span class="op">(</span><span class="va">symptoms</span>, <span class="st">","</span>, n <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code></pre></div>
</div>
<div id="séparer-les-colonnes" class="section level3 unnumbered">
<h3>Séparer les colonnes<a class="anchor" aria-label="anchor" href="#s%C3%A9parer-les-colonnes"><i class="fas fa-link"></i></a>
</h3>
<p>Si vous essayez de séparer une colonne dans un dataframe, il est préférable d’utiliser la fonction <code><a href="https://tidyr.tidyverse.org/reference/separate.html">separate()</a></code> de <strong>dplyr</strong>. Cette fonction est utilisée pour séparer une colonne de caractères en d’autres colonnes.</p>
<p>Disons que nous avons un simple dataframe <code>df</code> (défini et uni dans la <a href="character_strings.html#str_unite">section unite</a>) contenant une colonne <code>case_ID</code>, une colonne de caractères avec plusieurs symptômes, et une colonne de résultats. Notre objectif est de séparer la colonne <code>symptoms</code> en plusieurs colonnes, chacune contenant un symptôme.</p>
<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-9324e72d38ea1c0e7a88" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-9324e72d38ea1c0e7a88">{"x":{"filter":"none","vertical":false,"data":[[1,2,3,4,5,6],["jaundice, fever, chills","chills, aches, pains","fever","vomiting, diarrhoea","bleeding from gums, fever","rapid pulse, headache"],["Recover","Death","Death","Recover","Recover","Recover"]],"container":"<table class=\"white-space: nowrap\">\n  <thead>\n    <tr>\n      <th>case_ID<\/th>\n      <th>symptoms<\/th>\n      <th>outcome<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script><p>En supposant que les données sont passées (‘pipe’, en utilisant %&gt;%) dans <code><a href="https://tidyr.tidyverse.org/reference/separate.html">separate()</a></code>, vous devez d’abord fournir la colonne à séparer dans la fonction <code>seperate()</code>. Ensuite, fournissez <code>into =</code> comme un vecteur <code><a href="https://rdrr.io/r/base/c.html">c( )</a></code> contenant les noms des <em>nouvelles</em> colonnes, comme indiqué ci-dessous.</p>
<ul>
<li>
<code>sep =</code> le séparateur, peut être un caractère, ou un nombre (interprété comme la position du caractère à séparer)</li>
<li>
<code>remove =</code> FAUX par défaut, supprime la colonne sélectionnée du dataframe une fois séparée.<br>
</li>
<li>
<code>convert =</code> FALSE par défaut, si TRUE, les “NA” de la chaîne deviendront des <code>NA</code>.<br>
</li>
<li>
<code>extra =</code> ce contréle ce qui se passe s’il y a plus de valeurs créées par la séparation de la colonne que de nouveaux noms de colonnes fournis.
<ul>
<li>
<code>extra = "warn"</code> signifie que vous verrez un avertissement mais que les valeurs excédentaires seront supprimées (<strong>par défaut</strong>).<br>
</li>
<li>
<code>extra = "drop"</code>, signifie que les valeurs excédentaires seront abandonnées sans avertissement.<br>
**<code>extra = "merge"</code> ne fractionnera que le nombre de nouvelles colonnes listées dans <code>into</code> - *<em>cette configuration préservera toutes vos données</em>**.</li>
</ul>
</li>
</ul>
<p>Voici un exemple avec <code>extra = "merge"</code> - Deux nouvelles colonnes sont définies mais tous les troisiémes symptômes ou plus sont combinés dans la deuxiéme colonne:</p>
<div class="sourceCode" id="cb427"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># troisiémes symptômes combinés dans la deuxiéme nouvelle colonne</span></span>
<span><span class="va">df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/separate.html">separate</a></span><span class="op">(</span><span class="va">symptoms</span>, into <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"sym_1"</span>, <span class="st">"sym_2"</span><span class="op">)</span>, sep<span class="op">=</span><span class="st">","</span>, extra <span class="op">=</span> <span class="st">"merge"</span><span class="op">)</span></span></code></pre></div>
<pre><code>## Warning: Expected 2 pieces. Missing pieces filled with `NA` in 1 rows [3].</code></pre>
<pre><code>##   case_ID              sym_1          sym_2 outcome
## 1       1           jaundice  fever, chills Recover
## 2       2             chills   aches, pains   Death
## 3       3              fever           &lt;NA&gt;   Death
## 4       4           vomiting      diarrhoea Recover
## 5       5 bleeding from gums          fever Recover
## 6       6        rapid pulse       headache Recover</code></pre>
<p>Lorsque l’option par défaut est utilisée ci-dessous, R retourne un avertissement mais les troisiémes symptômes sont perdus:</p>
<div class="sourceCode" id="cb430"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># les troisiémes symptômes sont perdus</span></span>
<span><span class="va">df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/separate.html">separate</a></span><span class="op">(</span><span class="va">symptoms</span>, into <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"sym_1"</span>, <span class="st">"sym_2"</span><span class="op">)</span>, sep<span class="op">=</span><span class="st">","</span><span class="op">)</span></span></code></pre></div>
<pre><code>## Warning: Expected 2 pieces. Additional pieces discarded in 2 rows [1, 2].</code></pre>
<pre><code>## Warning: Expected 2 pieces. Missing pieces filled with `NA` in 1 rows [3].</code></pre>
<pre><code>##   case_ID              sym_1      sym_2 outcome
## 1       1           jaundice      fever Recover
## 2       2             chills      aches   Death
## 3       3              fever       &lt;NA&gt;   Death
## 4       4           vomiting  diarrhoea Recover
## 5       5 bleeding from gums      fever Recover
## 6       6        rapid pulse   headache Recover</code></pre>
<p><span style="color: orange;"><strong><em>CAUTION:</em></strong> Si vous ne fournissez pas suffisamment de valeurs <code>into</code> pour les nouvelles colonnes, vos données peuvent être tronquées.</span></p>
<!-- ======================================================= -->
</div>
<div id="classer-par-ordre-alphabétique" class="section level3 unnumbered">
<h3>Classer par ordre alphabétique<a class="anchor" aria-label="anchor" href="#classer-par-ordre-alphab%C3%A9tique"><i class="fas fa-link"></i></a>
</h3>
<p>Vous pouvez trier plusieurs chaînes de caractères par ordre alphabétique. <code><a href="https://stringr.tidyverse.org/reference/str_order.html">str_order()</a></code> renvoie l’ordre (numérique), tandis que <code><a href="https://stringr.tidyverse.org/reference/str_order.html">str_sort()</a></code> renvoie les chaînes de caractères dans l’ordre alphabétique.</p>
<div class="sourceCode" id="cb434"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># chaînes de caractères</span></span>
<span><span class="va">health_zones</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Alba"</span>, <span class="st">"Takota"</span>, <span class="st">"Delta"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># renvoie l'ordre alphabétique</span></span>
<span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_order.html">str_order</a></span><span class="op">(</span><span class="va">health_zones</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] 1 3 2</code></pre>
<div class="sourceCode" id="cb436"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># retourne les chaînes de caractères par ordre alphabétique</span></span>
<span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_order.html">str_sort</a></span><span class="op">(</span><span class="va">health_zones</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "Alba"   "Delta"  "Takota"</code></pre>
<p>Pour utiliser un alphabet différent, ajoutez l’argument <code>locale =</code>. Voir la liste complète des locales en entrant <code><a href="https://rdrr.io/pkg/stringi/man/stri_locale_list.html">stringi::stri_locale_list()</a></code> dans la console R.</p>
<!-- ======================================================= -->
</div>
<div id="fonctions-de-la-base-r" class="section level3 unnumbered">
<h3>Fonctions de la base R<a class="anchor" aria-label="anchor" href="#fonctions-de-la-base-r"><i class="fas fa-link"></i></a>
</h3>
<p>Il est courant de voir les fonctions <strong>base</strong> R <code><a href="https://rdrr.io/r/base/paste.html">paste()</a></code> et <code><a href="https://rdrr.io/r/base/paste.html">paste0()</a></code>, qui concaténent des vecteurs aprés avoir converti toutes les parties en caractères. Ces fonctions agissent de manière similaire à <code><a href="https://stringr.tidyverse.org/reference/str_c.html">str_c()</a></code> mais la syntaxe est sans doute plus compliquée - dans les parenthèses, chaque partie est séparée par une virgule. Les parties sont soit du texte en caractères (entre guillemets), soit des objets de code prédéfinis (sans guillemets). Par exemple:</p>
<div class="sourceCode" id="cb438"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">n_beds</span> <span class="op">&lt;-</span> <span class="fl">10</span></span>
<span><span class="va">n_masks</span> <span class="op">&lt;-</span> <span class="fl">20</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"Regional hospital needs "</span>, <span class="va">n_beds</span>, <span class="st">" beds and "</span>, <span class="va">n_masks</span>, <span class="st">" masks."</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "Regional hospital needs 10 beds and 20 masks."</code></pre>
<p>Les arguments <code>sep =</code> et <code>collapse =</code> peuvent être spécifiés. <code><a href="https://rdrr.io/r/base/paste.html">paste()</a></code> est simplement <code><a href="https://rdrr.io/r/base/paste.html">paste0()</a></code> avec un <code>sep = " "</code> (un espace) par défaut.</p>
</div>
</div>
<div id="nettoyer-et-standardiser" class="section level2" number="10.3">
<h2>
<span class="header-section-number">10.3</span> Nettoyer et standardiser<a class="anchor" aria-label="anchor" href="#nettoyer-et-standardiser"><i class="fas fa-link"></i></a>
</h2>
<!-- ======================================================= -->
<div id="changer-la-casse" class="section level3 unnumbered">
<h3>Changer la casse<a class="anchor" aria-label="anchor" href="#changer-la-casse"><i class="fas fa-link"></i></a>
</h3>
<p>Souvent, on doit modifier la casse/capitalisation d’une valeur de chaîne de caractères, par exemple les noms des jursidictions. Utilisez <code><a href="https://stringr.tidyverse.org/reference/case.html">str_to_upper()</a></code>, <code><a href="https://stringr.tidyverse.org/reference/case.html">str_to_lower()</a></code>, et <code><a href="https://stringr.tidyverse.org/reference/case.html">str_to_title()</a></code>, de <strong>stringr</strong>, comme indiqué ci-dessous :</p>
<div class="sourceCode" id="cb440"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://stringr.tidyverse.org/reference/case.html">str_to_upper</a></span><span class="op">(</span><span class="st">"California"</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "CALIFORNIA"</code></pre>
<div class="sourceCode" id="cb442"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://stringr.tidyverse.org/reference/case.html">str_to_lower</a></span><span class="op">(</span><span class="st">"California"</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "california"</code></pre>
<p>En utilisant *base** R, l’exemple ci-dessus peut également être réalisé avec <code><a href="https://rdrr.io/r/base/chartr.html">toupper()</a></code> ou <code><a href="https://rdrr.io/r/base/chartr.html">tolower()</a></code>.</p>
<p><strong>Mots en majuscules</strong></p>
<p>La transformation de la chaîne pour que chaque mot soit en majuscule peut être réalisée avec <code><a href="https://stringr.tidyverse.org/reference/case.html">str_to_title()</a></code>:</p>
<div class="sourceCode" id="cb444"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://stringr.tidyverse.org/reference/case.html">str_to_title</a></span><span class="op">(</span><span class="st">"go to the US state of california "</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "Go To The Us State Of California "</code></pre>
<p>Utilisez la fonction <code>toTitleCase()</code> du paquet <strong>tools</strong> pour ne mettre en majuscules que certains mots (les mots comme “to”, “the” et “of” ne sont pas mis en majuscules).</p>
<div class="sourceCode" id="cb446"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">tools</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/tools/toTitleCase.html">toTitleCase</a></span><span class="op">(</span><span class="st">"This is the US state of california"</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "This is the US State of California"</code></pre>
<p>Vous pouvez également utiliser la fonction <code><a href="https://stringr.tidyverse.org/reference/case.html">str_to_sentence()</a></code>, qui ne met en majuscule que la premiére lettre de la chaîne.</p>
<div class="sourceCode" id="cb448"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://stringr.tidyverse.org/reference/case.html">str_to_sentence</a></span><span class="op">(</span><span class="st">"the patient must be transported"</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "The patient must be transported"</code></pre>
</div>
<div id="str_pad" class="section level3 unnumbered">
<h3>Longueur du bloc<a class="anchor" aria-label="anchor" href="#str_pad"><i class="fas fa-link"></i></a>
</h3>
<p>Utilisez la fonction <code><a href="https://stringr.tidyverse.org/reference/str_pad.html">str_pad()</a></code> pour ajouter des caractères à une chaîne, jusqu’à une longueur minimale. Par défaut, des espaces sont ajoutés, mais vous pouvez également ajouter d’autres caractères en utilisant l’argument <code>pad =</code>.</p>
<div class="sourceCode" id="cb450"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Codes ICD de longueur différente</span></span>
<span><span class="va">ICD_codes</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"R10.13"</span>,</span>
<span>               <span class="st">"R10.819"</span>,</span>
<span>               <span class="st">"R17"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Les codes ICD sont complétés à 7 caractères sur la droite</span></span>
<span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_pad.html">str_pad</a></span><span class="op">(</span><span class="va">ICD_codes</span>, <span class="fl">7</span>, <span class="st">"right"</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "R10.13 " "R10.819" "R17    "</code></pre>
<div class="sourceCode" id="cb452"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Remplir avec des points au lieu d'espaces</span></span>
<span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_pad.html">str_pad</a></span><span class="op">(</span><span class="va">ICD_codes</span>, <span class="fl">7</span>, <span class="st">"right"</span>, pad <span class="op">=</span> <span class="st">"."</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "R10.13." "R10.819" "R17...."</code></pre>
<p>Par exemple, pour complèter des nombres avec des zéros en tête (comme pour les heures ou les minutes), vous pouvez complèter le nombre à une longueur minimale de 2 avec <code>pad = "0"</code>.</p>
<div class="sourceCode" id="cb454"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Ajoutez des zéros à deux chiffres (par exemple, pour les minutes/heures)</span></span>
<span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_pad.html">str_pad</a></span><span class="op">(</span><span class="st">"4"</span>, <span class="fl">2</span>, pad <span class="op">=</span> <span class="st">"0"</span><span class="op">)</span> </span></code></pre></div>
<pre><code>## [1] "04"</code></pre>
<div class="sourceCode" id="cb456"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Exemple utilisant une colonne numérique nommée "heures" (hours en Anglais)</span></span>
<span><span class="co"># hours &lt;- str_pad(hours, 2, pad = "0")</span></span></code></pre></div>
</div>
<div id="tronquer" class="section level3 unnumbered">
<h3>Tronquer<a class="anchor" aria-label="anchor" href="#tronquer"><i class="fas fa-link"></i></a>
</h3>
<p>La fonction <code><a href="https://stringr.tidyverse.org/reference/str_trunc.html">str_trunc()</a></code> définit une longueur maximale pour chaque chaîne. Si une chaîne dépasse cette longueur, elle est tronquée (raccourcie) et une ellipse (…) est incluse pour indiquer que la chaîne était auparavant plus longue. Notez que l’ellipse <em>est</em> comptée dans la longueur. Les caractères d’ellipses peuvent être changés avec l’argument <code>ellipsis =</code>. L’argument optionnel <code>side =</code> spécifie où l’ellipse apparaîtra dans la chaîne tronquée (“gauche”, “droite”, ou “centre”).</p>
<div class="sourceCode" id="cb457"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">original</span> <span class="op">&lt;-</span> <span class="st">"Symptom onset on 4/3/2020 with vomiting"</span></span>
<span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_trunc.html">str_trunc</a></span><span class="op">(</span><span class="va">original</span>, <span class="fl">10</span>, <span class="st">"center"</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "Symp...ing"</code></pre>
</div>
<div id="normaliser-la-longueur" class="section level3 unnumbered">
<h3>Normaliser la longueur<a class="anchor" aria-label="anchor" href="#normaliser-la-longueur"><i class="fas fa-link"></i></a>
</h3>
<p>Utilisez la fonction <code><a href="https://stringr.tidyverse.org/reference/str_trunc.html">str_trunc()</a></code> pour définir une longueur maximale, puis utilisez <code><a href="https://stringr.tidyverse.org/reference/str_pad.html">str_pad()</a></code> pour étendre les chaînes trés courtes à cette longueur tronquée. Dans l’exemple ci-dessous, 6 est défini comme longueur maximale (une valeur est tronquée), puis une valeur trés courte est ajoutée pour atteindre la longueur de 6.</p>
<div class="sourceCode" id="cb459"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Codes CIM de longueur différente</span></span>
<span><span class="va">ICD_codes</span>   <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"R10.13"</span>,</span>
<span>                 <span class="st">"R10.819"</span>,</span>
<span>                 <span class="st">"R17"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># tronquer à la longueur maximale de 6</span></span>
<span><span class="va">ICD_codes_2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_trunc.html">str_trunc</a></span><span class="op">(</span><span class="va">ICD_codes</span>, <span class="fl">6</span><span class="op">)</span></span>
<span><span class="va">ICD_codes_2</span></span></code></pre></div>
<pre><code>## [1] "R10.13" "R10..." "R17"</code></pre>
<div class="sourceCode" id="cb461"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># étendre à une longueur minimale de 6</span></span>
<span><span class="va">ICD_codes_3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_pad.html">str_pad</a></span><span class="op">(</span><span class="va">ICD_codes_2</span>, <span class="fl">6</span>, <span class="st">"right"</span><span class="op">)</span></span>
<span><span class="va">ICD_codes_3</span></span></code></pre></div>
<pre><code>## [1] "R10.13" "R10..." "R17   "</code></pre>
</div>
<div id="supprimer-les-espaces-avantaprés-les-chaînes-de-caractères" class="section level3 unnumbered">
<h3>Supprimer les espaces avant/aprés les chaînes de caractères<a class="anchor" aria-label="anchor" href="#supprimer-les-espaces-avantapr%C3%A9s-les-cha%C3%AEnes-de-caract%C3%A8res"><i class="fas fa-link"></i></a>
</h3>
<p>Utilisez la fonction <code><a href="https://stringr.tidyverse.org/reference/str_trim.html">str_trim()</a></code> pour supprimer les espaces, les nouvelles lignes (<code>\n</code>) ou les tabulations (<code>\t</code>) sur les côtés d’une entrée de chaîne de caractères. Ajoutez <code>"right"</code> (en français droite), <code>"left"</code> (en français gauche) ou <code>"both"</code> (en français les deux) à la commande pour spécifier le côté à découper (par exemple, <code>str_trim(x, "right")</code>.</p>
<div class="sourceCode" id="cb463"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Numéros d'identification avec espaces excédentaires à droite</span></span>
<span><span class="va">IDs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"provA_1852  "</span>, <span class="co"># deux espaces excédentaires</span></span>
<span>         <span class="st">"provA_2345"</span>,   <span class="co"># zero espace excédentaire</span></span>
<span>         <span class="st">"provA_9460 "</span><span class="op">)</span>  <span class="co"># un espace excédentaire</span></span>
<span></span>
<span><span class="co">#  les identifiants sont coupés pour supprimer les espaces excédentaires du côté droit uniquement</span></span>
<span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_trim.html">str_trim</a></span><span class="op">(</span><span class="va">IDs</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "provA_1852" "provA_2345" "provA_9460"</code></pre>
</div>
<div id="supprimer-les-espaces-répétés-dans-les-chaînes-de-caractères" class="section level3 unnumbered">
<h3>Supprimer les espaces répétés dans les chaînes de caractères<a class="anchor" aria-label="anchor" href="#supprimer-les-espaces-r%C3%A9p%C3%A9t%C3%A9s-dans-les-cha%C3%AEnes-de-caract%C3%A8res"><i class="fas fa-link"></i></a>
</h3>
<p>Utilisez la fonction <code><a href="https://stringr.tidyverse.org/reference/str_trim.html">str_squish()</a></code> pour supprimer les espaces répétés qui apparaissent <em>à l’intérieur</em> d’une chaîne. Par exemple, pour convertir les espaces doubles en espaces simples. Elle supprime également les espaces, les retours à la ligne ou les tabulations à l’extérieur de la chaîne, comme <code><a href="https://stringr.tidyverse.org/reference/str_trim.html">str_trim()</a></code>.</p>
<div class="sourceCode" id="cb465"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># L'original contient des espaces supplémentaires dans la chaîne</span></span>
<span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_trim.html">str_squish</a></span><span class="op">(</span><span class="st">"  Pt requires   IV saline\n"</span><span class="op">)</span> </span></code></pre></div>
<pre><code>## [1] "Pt requires IV saline"</code></pre>
<p>Entrez <code><a href="https://stringr.tidyverse.org/reference/str_trim.html">?str_trim</a></code>, <code><a href="https://stringr.tidyverse.org/reference/str_pad.html">?str_pad</a></code> dans votre console R pour voir plus de détails.</p>
</div>
<div id="transformer-en-paragraphes" class="section level3 unnumbered">
<h3>Transformer en paragraphes<a class="anchor" aria-label="anchor" href="#transformer-en-paragraphes"><i class="fas fa-link"></i></a>
</h3>
<p>Utilisez <code><a href="https://stringr.tidyverse.org/reference/str_wrap.html">str_wrap()</a></code> pour transformer un long texte non structuré en un paragraphe structuré avec une longueur de ligne fixe. Fournissez la longueur idéale de caractères pour chaque ligne, et la fonction applique un algorithme pour insérer des nouvelles lignes (<code>\n</code>) dans le paragraphe, comme dans l’exemple ci-dessous.</p>
<div class="sourceCode" id="cb467"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pt_course</span> <span class="op">&lt;-</span> <span class="st">"Début des symptômes 1/4/2020 : vomissements, frissons, fièvre. Le patient a vu un guérisseur traditionnel dans son village natal le 2/4/2020. Le 5/4/2020, les symptômes du patient se sont aggravés et il a été admis à la clinique Lumta. Un échantillon a été prélevé et le patient a été transporté à l'hôpital régional le 6/4/2020. Le patient est décédé à l'hôpital régional le 7/4/2020."</span></span>
<span></span>
<span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_wrap.html">str_wrap</a></span><span class="op">(</span><span class="va">pt_course</span>, <span class="fl">40</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "Début des symptômes 1/4/2020 :\nvomissements, frissons, fièvre. Le\npatient a vu un guérisseur traditionnel\ndans son village natal le 2/4/2020. Le\n5/4/2020, les symptômes du patient se\nsont aggravés et il a été admis à la\nclinique Lumta. Un échantillon a été\nprélevé et le patient a été transporté\nà l'hôpital régional le 6/4/2020. Le\npatient est décédé à l'hôpital régional\nle 7/4/2020."</code></pre>
<p>La fonction de <strong>base</strong> R cat()` peut être enroulée autour de la commande ci-dessus afin d’imprimer le résultat dans la console R.</p>
<div class="sourceCode" id="cb469"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_wrap.html">str_wrap</a></span><span class="op">(</span><span class="va">pt_course</span>, <span class="fl">40</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>## Début des symptômes 1/4/2020 :
## vomissements, frissons, fièvre. Le
## patient a vu un guérisseur traditionnel
## dans son village natal le 2/4/2020. Le
## 5/4/2020, les symptômes du patient se
## sont aggravés et il a été admis à la
## clinique Lumta. Un échantillon a été
## prélevé et le patient a été transporté
## à l'hôpital régional le 6/4/2020. Le
## patient est décédé à l'hôpital régional
## le 7/4/2020.</code></pre>
<!-- ======================================================= -->
</div>
</div>
<div id="gérer-par-position" class="section level2" number="10.4">
<h2>
<span class="header-section-number">10.4</span> Gérer par position<a class="anchor" aria-label="anchor" href="#g%C3%A9rer-par-position"><i class="fas fa-link"></i></a>
</h2>
<div id="extraire-par-position-de-caractère" class="section level3 unnumbered">
<h3>Extraire par position de caractère<a class="anchor" aria-label="anchor" href="#extraire-par-position-de-caract%C3%A8re"><i class="fas fa-link"></i></a>
</h3>
<p>Utilisez la fonction <code><a href="https://stringr.tidyverse.org/reference/str_sub.html">str_sub()</a></code> pour retourner seulement une partie d’une chaîne de caractères. La fonction prend trois arguments principaux :</p>
<ol style="list-style-type: decimal">
<li>le(s) vecteur(s) de caractères<br>
</li>
<li>la position de départ dans le vecteur</li>
<li>la position finale dans le vecteur</li>
</ol>
<p>Quelques remarques sur les numéros de position :</p>
<ul>
<li>Si le numéro de position est positif, la position est comptée à partir de l’extrémité gauche de la chaîne.<br>
</li>
<li>Si le numéro de position est négatif, il est compté à partir de l’extrémité droite de la chaîne.<br>
</li>
<li>Les numéros de position sont inclusifs.<br>
</li>
<li>Les positions qui dépassent la chaîne de caractères seront tronquées (supprimées).</li>
</ul>
<p>Voici quelques exemples appliqués à la chaîne “pneumonie” :</p>
<div class="sourceCode" id="cb471"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># position de départ et position finale troisiéme en partant de la gauche (3éme lettre en partant de la gauche)</span></span>
<span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_sub.html">str_sub</a></span><span class="op">(</span><span class="st">"pneumonia"</span>, <span class="fl">3</span>, <span class="fl">3</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "e"</code></pre>
<div class="sourceCode" id="cb473"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 0 n'est pas présent, donc cela renvoie ""</span></span>
<span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_sub.html">str_sub</a></span><span class="op">(</span><span class="st">"pneumonia"</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] ""</code></pre>
<div class="sourceCode" id="cb475"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># # 6éme en partant de la gauche, jusqu'à  la 1ére en partant de la droite</span></span>
<span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_sub.html">str_sub</a></span><span class="op">(</span><span class="st">"pneumonia"</span>, <span class="fl">6</span>, <span class="op">-</span><span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "onia"</code></pre>
<div class="sourceCode" id="cb477"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 5éme de la droite, vers le 2éme de la droite</span></span>
<span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_sub.html">str_sub</a></span><span class="op">(</span><span class="st">"pneumonia"</span>, <span class="op">-</span><span class="fl">5</span>, <span class="op">-</span><span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "moni"</code></pre>
<div class="sourceCode" id="cb479"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 4éme en partant de la gauche, jusqu'à  une position en dehors de la chaîne de caractères</span></span>
<span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_sub.html">str_sub</a></span><span class="op">(</span><span class="st">"pneumonia"</span>, <span class="fl">4</span>, <span class="fl">15</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "umonia"</code></pre>
</div>
<div id="extraire-par-position-de-mot" class="section level3 unnumbered">
<h3>Extraire par position de mot<a class="anchor" aria-label="anchor" href="#extraire-par-position-de-mot"><i class="fas fa-link"></i></a>
</h3>
<p>Pour extraire le niéme “mot”, utilisez la fonction <code><a href="https://stringr.tidyverse.org/reference/word.html">word()</a></code>, du paquet <strong>stringr</strong>. Fournissez la ou les chaînes de caractères, puis la premiére position du mot à extraire, et la dernière position du mot à extraire.</p>
<p>Par défaut, le séparateur entre les mots est supposé être un espace, sauf indication contraire avec <code>sep =</code> (par exemple, <code>sep = "_"</code> où les mots sont séparés par des caractères de soulignement).</p>
<div class="sourceCode" id="cb481"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># chaînes de caractères à évaluer</span></span>
<span><span class="va">chief_complaints</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"I just got out of the hospital 2 days ago, but still can barely breathe."</span>,</span>
<span>                      <span class="st">"My stomach hurts"</span>,</span>
<span>                      <span class="st">"Severe ear pain"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># extract 1st to 3rd words of each string</span></span>
<span><span class="fu"><a href="https://stringr.tidyverse.org/reference/word.html">word</a></span><span class="op">(</span><span class="va">chief_complaints</span>, start <span class="op">=</span> <span class="fl">1</span>, end <span class="op">=</span> <span class="fl">3</span>, sep <span class="op">=</span> <span class="st">" "</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "I just got"       "My stomach hurts" "Severe ear pain"</code></pre>
</div>
<div id="remplacer-par-la-position-du-caractère" class="section level3 unnumbered">
<h3>Remplacer par la position du caractère<a class="anchor" aria-label="anchor" href="#remplacer-par-la-position-du-caract%C3%A8re"><i class="fas fa-link"></i></a>
</h3>
<p><code><a href="https://stringr.tidyverse.org/reference/str_sub.html">str_sub()</a></code> apparié avec l’opérateur d’affectation (<code>&lt;-</code>) peut être utilisé pour modifier une partie d’une chaîne :</p>
<div class="sourceCode" id="cb483"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">word</span> <span class="op">&lt;-</span> <span class="st">"pneumonia"</span></span>
<span></span>
<span><span class="co"># convertissez les troisiéme et quatriéme caractères en X </span></span>
<span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_sub.html">str_sub</a></span><span class="op">(</span><span class="va">word</span>, <span class="fl">3</span>, <span class="fl">4</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="st">"XX"</span></span>
<span></span>
<span><span class="co"># imprimer</span></span>
<span><span class="va">word</span></span></code></pre></div>
<pre><code>## [1] "pnXXmonia"</code></pre>
<p>Voici ci-dessus Un exemple appliqué à plusieurs chaînes de caractères (par exemple, un vecteur de mots ou une colonne). Notez l’expansion en longueur de “HIV”.</p>
<div class="sourceCode" id="cb485"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">words</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"pneumonia"</span>, <span class="st">"tubercolosis"</span>, <span class="st">"HIV"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># convertissez les troisiéme et quatriéme caractères en X </span></span>
<span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_sub.html">str_sub</a></span><span class="op">(</span><span class="va">words</span>, <span class="fl">3</span>, <span class="fl">4</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="st">"XX"</span></span>
<span></span>
<span><span class="va">words</span></span></code></pre></div>
<pre><code>## [1] "pnXXmonia"    "tuXXrcolosis" "HIXX"</code></pre>
</div>
<div id="evaluer-la-longueur" class="section level3 unnumbered">
<h3>Evaluer la longueur<a class="anchor" aria-label="anchor" href="#evaluer-la-longueur"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb487"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_length.html">str_length</a></span><span class="op">(</span><span class="st">"abc"</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<p>Alternativement, utilisez la fonction <code><a href="https://rdrr.io/r/base/nchar.html">nchar()</a></code> de <strong>base</strong> R.</p>
<!-- ======================================================= -->
</div>
</div>
<div id="motifs" class="section level2" number="10.5">
<h2>
<span class="header-section-number">10.5</span> Motifs<a class="anchor" aria-label="anchor" href="#motifs"><i class="fas fa-link"></i></a>
</h2>
<p>De nombreuses fonctions du paquet <strong>stringr</strong> fonctionnent pour détecter, localiser, extraire, correspondre, remplacer et séparer en fonction d’un <em>motif</em> spécifié.</p>
<!-- ======================================================= -->
<div id="détecter-un-motif" class="section level3 unnumbered">
<h3>détecter un motif<a class="anchor" aria-label="anchor" href="#d%C3%A9tecter-un-motif"><i class="fas fa-link"></i></a>
</h3>
<p>Utilisez la fonction <code><a href="https://stringr.tidyverse.org/reference/str_detect.html">str_detect()</a></code> comme ci-dessous pour détecter la présence/absence d’un motif dans une chaîne de caractères. Fournissez d’abord la chaîne ou le vecteur à rechercher (<code>string =</code>), puis le motif à rechercher (<code>pattern =</code>). Notez que par défaut, la recherche <em>est sensible à la casse</em>!</p>
<div class="sourceCode" id="cb489"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html">str_detect</a></span><span class="op">(</span>string <span class="op">=</span> <span class="st">"primary school teacher"</span>, pattern <span class="op">=</span> <span class="st">"teach"</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>L’argument <code>negate =</code> peut être inclus et mis à <code>TRUE</code> (en français VRAI) si vous voulez savoir si le motif n’est PAS présent.</p>
<div class="sourceCode" id="cb491"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html">str_detect</a></span><span class="op">(</span>string <span class="op">=</span> <span class="st">"primary school teacher"</span>, pattern <span class="op">=</span> <span class="st">"teach"</span>, negate <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<p>Pour ignorer les majuscules et les minuscules, intégrez le motif dans <code><a href="https://stringr.tidyverse.org/reference/modifiers.html">regex()</a></code>, et <em>dans</em> <code><a href="https://stringr.tidyverse.org/reference/modifiers.html">regex()</a></code> ajoutez l’argument <code>ignore_case = TRUE</code> (ou <code>T</code> en raccourci).</p>
<div class="sourceCode" id="cb493"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html">str_detect</a></span><span class="op">(</span>string <span class="op">=</span> <span class="st">"Teacher"</span>, pattern <span class="op">=</span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/modifiers.html">regex</a></span><span class="op">(</span><span class="st">"teach"</span>, ignore_case <span class="op">=</span> <span class="cn">T</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>Lorsque <code><a href="https://stringr.tidyverse.org/reference/str_detect.html">str_detect()</a></code> est appliqué à un vecteur de caractères ou à une colonne de dataframe, il renvoie TRUE (en français VRAI) ou FALSE (en français FAUX) pour chacune des valeurs.</p>
<div class="sourceCode" id="cb495"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># un vecteur/colonne de professions </span></span>
<span><span class="va">occupations</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"field laborer"</span>,</span>
<span>                 <span class="st">"university professor"</span>,</span>
<span>                 <span class="st">"primary school teacher &amp; tutor"</span>,</span>
<span>                 <span class="st">"tutor"</span>,</span>
<span>                 <span class="st">"nurse at regional hospital"</span>,</span>
<span>                 <span class="st">"lineworker at Amberdeen Fish Factory"</span>,</span>
<span>                 <span class="st">"physican"</span>,</span>
<span>                 <span class="st">"cardiologist"</span>,</span>
<span>                 <span class="st">"office worker"</span>,</span>
<span>                 <span class="st">"food service"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># détecter la présence du motif "teach" dans chaque chaîne - la valeur retournée est un vecteur de VRAI/FAUX</span></span>
<span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html">str_detect</a></span><span class="op">(</span><span class="va">occupations</span>, <span class="st">"teach"</span><span class="op">)</span></span></code></pre></div>
<pre><code>##  [1] FALSE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE</code></pre>
<p>Si vous avez besoin de compter les <code>TRUE</code>s, utilisez la fonction <code><a href="https://rdrr.io/r/base/sum.html">sum()</a></code> sur les valeurs ou le vecteur retourné(es). Ceci compte le nombre de <code>TRUE</code> (VRAI) dans les valeurs ou le vecteur retourné(es).</p>
<div class="sourceCode" id="cb497"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html">str_detect</a></span><span class="op">(</span><span class="va">occupations</span>, <span class="st">"teach"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] 1</code></pre>
<p>Pour effectuer une recherche incluant plusieurs termes, incluez-les séparés par des barres OR (<code>|</code>) dans l’argument <code>pattern =</code>, comme indiqué ci-dessous:</p>
<div class="sourceCode" id="cb499"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html">str_detect</a></span><span class="op">(</span>string <span class="op">=</span> <span class="va">occupations</span>, pattern <span class="op">=</span> <span class="st">"teach|professor|tutor"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<p>Si vous avez besoin de construire une longue liste de termes de recherche, vous pouvez les combiner en utilisant <code><a href="https://stringr.tidyverse.org/reference/str_c.html">str_c()</a></code> et <code>sep = |</code>, et assigner ceci à un objet. Vous pouvez ensuite référencer le vecteur par le nom de l’objet. L’exemple ci-dessous combine les termes de recherche d’une occupation possible en un seul objet.</p>
<div class="sourceCode" id="cb501"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># termes de recherche</span></span>
<span><span class="va">occupation_med_frontline</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_c.html">str_c</a></span><span class="op">(</span><span class="st">"medical"</span>, <span class="st">"medicine"</span>, <span class="st">"hcw"</span>, <span class="st">"healthcare"</span>, <span class="st">"home care"</span>, <span class="st">"home health"</span>,</span>
<span>                                <span class="st">"surgeon"</span>, <span class="st">"doctor"</span>, <span class="st">"doc"</span>, <span class="st">"physician"</span>, <span class="st">"surgery"</span>, <span class="st">"peds"</span>, <span class="st">"pediatrician"</span>,</span>
<span>                               <span class="st">"intensivist"</span>, <span class="st">"cardiologist"</span>, <span class="st">"coroner"</span>, <span class="st">"nurse"</span>, <span class="st">"nursing"</span>, <span class="st">"rn"</span>, <span class="st">"lpn"</span>,</span>
<span>                               <span class="st">"cna"</span>, <span class="st">"pa"</span>, <span class="st">"physician assistant"</span>, <span class="st">"mental health"</span>,</span>
<span>                               <span class="st">"emergency department technician"</span>, <span class="st">"resp therapist"</span>, <span class="st">"respiratory"</span>,</span>
<span>                                <span class="st">"phlebotomist"</span>, <span class="st">"pharmacy"</span>, <span class="st">"pharmacist"</span>, <span class="st">"hospital"</span>, <span class="st">"snf"</span>, <span class="st">"rehabilitation"</span>,</span>
<span>                               <span class="st">"rehab"</span>, <span class="st">"activity"</span>, <span class="st">"elderly"</span>, <span class="st">"subacute"</span>, <span class="st">"sub acute"</span>,</span>
<span>                                <span class="st">"clinic"</span>, <span class="st">"post acute"</span>, <span class="st">"therapist"</span>, <span class="st">"extended care"</span>,</span>
<span>                                <span class="st">"dental"</span>, <span class="st">"dential"</span>, <span class="st">"dentist"</span>, sep <span class="op">=</span> <span class="st">"|"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">occupation_med_frontline</span></span></code></pre></div>
<pre><code>## [1] "medical|medicine|hcw|healthcare|home care|home health|surgeon|doctor|doc|physician|surgery|peds|pediatrician|intensivist|cardiologist|coroner|nurse|nursing|rn|lpn|cna|pa|physician assistant|mental health|emergency department technician|resp therapist|respiratory|phlebotomist|pharmacy|pharmacist|hospital|snf|rehabilitation|rehab|activity|elderly|subacute|sub acute|clinic|post acute|therapist|extended care|dental|dential|dentist"</code></pre>
<p>Cette commande renvoie le nombre de professions qui contiennent l’un des termes de recherche pour les praticiens médicaux (<code>occupation_med_frontline</code>):</p>
<div class="sourceCode" id="cb503"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html">str_detect</a></span><span class="op">(</span>string <span class="op">=</span> <span class="va">occupations</span>, pattern <span class="op">=</span> <span class="va">occupation_med_frontline</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] 2</code></pre>
<p><strong>Fonctions de recherche de chaînes de caractères de base R</strong></p>
<p>La fonction de R <strong>base</strong> <code><a href="https://rdrr.io/r/base/grep.html">grepl()</a></code> fonctionne de manière similaire à <code><a href="https://stringr.tidyverse.org/reference/str_detect.html">str_detect()</a></code>, dans le sens qu’elle recherche les correspondances avec un motif et retourne un vecteur logique. La syntaxe de base est <code>grepl(pattern, strings_to_search, ignore.case = FALSE, ...)</code>. Un avantage est que l’argument <code>ignore.case</code> est plus facile à écrire (il n’y a pas besoin d’impliquer la fonction <code><a href="https://stringr.tidyverse.org/reference/modifiers.html">regex()</a></code>).</p>
<p>Les fonctions <code><a href="https://rdrr.io/r/base/grep.html">sub()</a></code> et <code><a href="https://rdrr.io/r/base/grep.html">gsub()</a></code> de base R agissent de manière similaire à <code><a href="https://stringr.tidyverse.org/reference/str_replace.html">str_replace()</a></code>. Leur syntaxe générale suit ce format : <code>gsub(motif, remplacement, chaînes_a_rechercher, ignore.case = FALSE)</code>. <code><a href="https://rdrr.io/r/base/grep.html">sub()</a></code> remplacera seulement la premiére instance du motif, alors que <code><a href="https://rdrr.io/r/base/grep.html">gsub()</a></code> remplacera toutes les instances du motif.</p>
<div id="convertir-les-virgules-en-points" class="section level4 unnumbered">
<h4>Convertir les virgules en points<a class="anchor" aria-label="anchor" href="#convertir-les-virgules-en-points"><i class="fas fa-link"></i></a>
</h4>
<p>Voici un exemple d’utilisation de <code><a href="https://rdrr.io/r/base/grep.html">gsub()</a></code> pour convertir des virgules en points dans un vecteur de nombres. Cela peut être utile si vos données proviennent de différents endroits dans le monde avec une syntaxe de langue différente.</p>
<p>L’exemple ci-dessous utilise deux applications de <code>gsub</code>. L’application interne <code><a href="https://rdrr.io/r/base/grep.html">gsub()</a></code>, qui agit en premier sur l’objet <code>lengths</code>, convertit tous les points en “” sans espace. Le caractère point “.” doit être “spécifié” avec deux slashs pour signifier réellement un point, parce que “.” en regex sans deux slashs signifie ” n’importe quel caractère”. Ensuite, le résultat (avec seulement des virgules) est passé à la fonction externe <code><a href="https://rdrr.io/r/base/grep.html">gsub()</a></code> dans laquelle les virgules sont remplacées par des points.</p>
<div class="sourceCode" id="cb505"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lengths</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"2.454,56"</span>, <span class="st">"1,2"</span>, <span class="st">"6.096,5"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html">gsub</a></span><span class="op">(</span>pattern <span class="op">=</span> <span class="st">","</span>,                <span class="co"># trouver les virgules    </span></span>
<span>                replacement <span class="op">=</span> <span class="st">"."</span>,            <span class="co"># remplacer par des points</span></span>
<span>                x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html">gsub</a></span><span class="op">(</span><span class="st">"\\."</span>, <span class="st">""</span>, <span class="va">lengths</span><span class="op">)</span>  <span class="co"># vecteur avec d'autres points supprimés </span></span>
<span>                <span class="op">)</span></span>
<span>           <span class="op">)</span>                                  <span class="co"># convertir le résultat en numérique</span></span></code></pre></div>
</div>
</div>
<div id="remplacer-tous-les-éléments" class="section level3 unnumbered">
<h3>Remplacer tous les éléments<a class="anchor" aria-label="anchor" href="#remplacer-tous-les-%C3%A9l%C3%A9ments"><i class="fas fa-link"></i></a>
</h3>
<p>Utilisez la fonction <code><a href="https://stringr.tidyverse.org/reference/str_replace.html">str_replace_all()</a></code> comme un outil de “recherche et remplacement”. Vous fournissez d’abord les chaînes à évaluer à <code>string =</code>, puis le motif à remplacer à <code>pattern =</code>, et enfin la valeur de remplacement à <code>replacement =</code>. L’exemple ci-dessous remplace toutes les occurrences de “dead” (en français mort) par “deceased” (en français décédés). Notez que cette opération est sensible à la casse.</p>
<div class="sourceCode" id="cb506"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">outcome</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Karl: dead"</span>,</span>
<span>            <span class="st">"Samantha: dead"</span>,</span>
<span>            <span class="st">"Marco: not dead"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html">str_replace_all</a></span><span class="op">(</span>string <span class="op">=</span> <span class="va">outcome</span>, pattern <span class="op">=</span> <span class="st">"dead"</span>, replacement <span class="op">=</span> <span class="st">"deceased"</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "Karl: deceased"      "Samantha: deceased"  "Marco: not deceased"</code></pre>
<p>Remarques :</p>
<ul>
<li>Pour remplacer un motif par <code>NA</code>, utilisez <code><a href="https://stringr.tidyverse.org/reference/str_replace_na.html">str_replace_na()</a></code>.<br>
</li>
<li>La fonction <code><a href="https://stringr.tidyverse.org/reference/str_replace.html">str_replace()</a></code> remplace uniquement la premiére instance du motif dans chaque chaîne évaluée.</li>
</ul>
<!-- ======================================================= -->
</div>
<div id="détecter-en-utilisant-des-instructions-logiques" class="section level3 unnumbered">
<h3>détecter en utilisant des instructions logiques<a class="anchor" aria-label="anchor" href="#d%C3%A9tecter-en-utilisant-des-instructions-logiques"><i class="fas fa-link"></i></a>
</h3>
<p><strong>A l’intérieur de <code><a href="https://dplyr.tidyverse.org/reference/case_when.html">case_when()</a></code></strong></p>
<p><code><a href="https://stringr.tidyverse.org/reference/str_detect.html">str_detect()</a></code> est souvent utilisé dans <code><a href="https://dplyr.tidyverse.org/reference/case_when.html">case_when()</a></code> (du paquet <strong>dplyr</strong>). Disons que <code>occupations</code> est une colonne de la linelist (liste linéaire ou liste de cas). La fonction <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code> ci-dessous crée une nouvelle colonne appelée <code>is_educator</code> en utilisant la logique conditionnelle via <code><a href="https://dplyr.tidyverse.org/reference/case_when.html">case_when()</a></code>. Consultez la page sur le nettoyage des données pour en savoir plus sur la méthode <code><a href="https://dplyr.tidyverse.org/reference/case_when.html">case_when()</a></code>.</p>
<div class="sourceCode" id="cb508"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="va">df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>is_educator <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html">case_when</a></span><span class="op">(</span></span>
<span>    <span class="co">#  recherche de termes dans la profession, non sensible à la casse</span></span>
<span>    <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html">str_detect</a></span><span class="op">(</span><span class="va">occupations</span>,</span>
<span>               <span class="fu"><a href="https://stringr.tidyverse.org/reference/modifiers.html">regex</a></span><span class="op">(</span><span class="st">"teach|prof|tutor|university"</span>,</span>
<span>                     ignore_case <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span>              <span class="op">~</span> <span class="st">"Educator"</span>,</span>
<span>    <span class="co"># all others</span></span>
<span>    <span class="cn">TRUE</span>                                               <span class="op">~</span> <span class="st">"Not an educator"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Par ailleurs, il peut être important d’ajouter des critéres d’exclusion à la logique conditionnelle (<code>negate = F</code>) :</p>
<div class="sourceCode" id="cb509"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb509-1"><a href="character_strings.html#cb509-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> </span>
<span id="cb509-2"><a href="character_strings.html#cb509-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># la valeur de la nouvelle colonne is_educator est basée sur la logique conditionnelle</span></span>
<span id="cb509-3"><a href="character_strings.html#cb509-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">is_educator =</span> <span class="fu">case_when</span>(</span>
<span id="cb509-4"><a href="character_strings.html#cb509-4" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb509-5"><a href="character_strings.html#cb509-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># la colonne occupation doit répondre à 2 critéres pour se voir attribuer "Educateur" :</span></span>
<span id="cb509-6"><a href="character_strings.html#cb509-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># elle doit avoir un terme de recherche ET PAS de terme d'exclusion</span></span>
<span id="cb509-7"><a href="character_strings.html#cb509-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb509-8"><a href="character_strings.html#cb509-8" aria-hidden="true" tabindex="-1"></a>    <span class="co">#  Doit avoir un terme de recherche</span></span>
<span id="cb509-9"><a href="character_strings.html#cb509-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(occupations,</span>
<span id="cb509-10"><a href="character_strings.html#cb509-10" aria-hidden="true" tabindex="-1"></a>               <span class="fu">regex</span>(<span class="st">"teach|prof|tutor|university"</span>, <span class="at">ignore_case =</span> T)) <span class="sc">&amp;</span>              </span>
<span id="cb509-11"><a href="character_strings.html#cb509-11" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb509-12"><a href="character_strings.html#cb509-12" aria-hidden="true" tabindex="-1"></a>    <span class="co"># AND ne doit PAS avoir de terme d'exclusion</span></span>
<span id="cb509-13"><a href="character_strings.html#cb509-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(occupations,</span>
<span id="cb509-14"><a href="character_strings.html#cb509-14" aria-hidden="true" tabindex="-1"></a>               <span class="fu">regex</span>(<span class="st">"admin"</span>, <span class="at">ignore_case =</span> T),</span>
<span id="cb509-15"><a href="character_strings.html#cb509-15" aria-hidden="true" tabindex="-1"></a>               <span class="at">negate =</span> <span class="cn">TRUE</span>                        <span class="sc">~</span> <span class="st">"Educator"</span></span>
<span id="cb509-16"><a href="character_strings.html#cb509-16" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb509-17"><a href="character_strings.html#cb509-17" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Toutes les lignes ne répondant pas aux critéres ci-dessus</span></span>
<span id="cb509-18"><a href="character_strings.html#cb509-18" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span>                                            <span class="sc">~</span> <span class="st">"Not an educator"</span>))</span></code></pre></div>
<!-- ======================================================= -->
</div>
<div id="localiser-la-position-du-motif" class="section level3 unnumbered">
<h3>Localiser la position du motif<a class="anchor" aria-label="anchor" href="#localiser-la-position-du-motif"><i class="fas fa-link"></i></a>
</h3>
<p>Pour localiser la <em>premiére</em> position d’un motif, utilisez la fonction <code><a href="https://stringr.tidyverse.org/reference/str_locate.html">str_locate()</a></code>. Elle produit une position de début et de fin.</p>
<div class="sourceCode" id="cb510"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_locate.html">str_locate</a></span><span class="op">(</span><span class="st">"I wish"</span>, <span class="st">"sh"</span><span class="op">)</span></span></code></pre></div>
<pre><code>##      start end
## [1,]     5   6</code></pre>
<p>Comme les autres fonctions de la famille <code>str</code>, il existe une version “_all” (<code><a href="https://stringr.tidyverse.org/reference/str_locate.html">str_locate_all()</a></code>) qui renvoie les positions de <em>toutes</em> les instances du motif dans chaque chaîne. Cette fonction renvoie les valeurs sous forme de <code>liste</code>.</p>
<div class="sourceCode" id="cb512"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">phrases</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"I wish"</span>, <span class="st">"I hope"</span>, <span class="st">"he hopes"</span>, <span class="st">"He hopes"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_locate.html">str_locate</a></span><span class="op">(</span><span class="va">phrases</span>, <span class="st">"h"</span> <span class="op">)</span> <span class="co"># position de la *premiére* instance du motif</span></span></code></pre></div>
<pre><code>##      start end
## [1,]     6   6
## [2,]     3   3
## [3,]     1   1
## [4,]     4   4</code></pre>
<div class="sourceCode" id="cb514"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_locate.html">str_locate_all</a></span><span class="op">(</span><span class="va">phrases</span>, <span class="st">"h"</span> <span class="op">)</span> <span class="co"># position de *chaque* instance du motif</span></span></code></pre></div>
<pre><code>## [[1]]
##      start end
## [1,]     6   6
## 
## [[2]]
##      start end
## [1,]     3   3
## 
## [[3]]
##      start end
## [1,]     1   1
## [2,]     4   4
## 
## [[4]]
##      start end
## [1,]     4   4</code></pre>
<!-- ======================================================= -->
</div>
<div id="extraire-une-correspondance" class="section level3 unnumbered">
<h3>Extraire une correspondance<a class="anchor" aria-label="anchor" href="#extraire-une-correspondance"><i class="fas fa-link"></i></a>
</h3>
<p><code><a href="https://stringr.tidyverse.org/reference/str_extract.html">str_extract_all()</a></code> retourne les motifs de correspondance eux-mêmes, ce qui est trés utile lorsque vous avez proposé plusieurs motifs via des conditions “OR” (en français OU). Par exemple, si vous cherchez dans le vecteur de chaînes de professions (voir l’exemple précédent) <em>soit</em> “teach”, “prof”, ou “tutor”.</p>
<p><code><a href="https://stringr.tidyverse.org/reference/str_extract.html">str_extract_all()</a></code> renvoie une <code>liste</code> qui contient <em>toutes les correspondances</em> pour chaque chaîne évaluée. Voyez ci-dessous comment l’occupation 3 contient deux correspondances de motifs.</p>
<div class="sourceCode" id="cb516"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_extract.html">str_extract_all</a></span><span class="op">(</span><span class="va">occupations</span>, <span class="st">"teach|prof|tutor"</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [[1]]
## character(0)
## 
## [[2]]
## [1] "prof"
## 
## [[3]]
## [1] "teach" "tutor"
## 
## [[4]]
## [1] "tutor"
## 
## [[5]]
## character(0)
## 
## [[6]]
## character(0)
## 
## [[7]]
## character(0)
## 
## [[8]]
## character(0)
## 
## [[9]]
## character(0)
## 
## [[10]]
## character(0)</code></pre>
<p><code><a href="https://stringr.tidyverse.org/reference/str_extract.html">str_extract()</a></code> extrait <em>seulement la premiére correspondance</em> dans chaque chaîne évaluée, produisant un vecteur de caractères avec un élément pour chaque chaîne évaluée. Elle retourne <code>NA</code> lorsqu’il n’y a pas de correspondance. Les <code>NA</code>s peuvent être supprimés en enveloppant le vecteur retourné avec <code><a href="https://rdrr.io/r/stats/na.fail.html">na.exclude()</a></code>. Notez que la deuxiéme correspondance de l’occupation 3 n’est pas affichée.</p>
<div class="sourceCode" id="cb518"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_extract.html">str_extract</a></span><span class="op">(</span><span class="va">occupations</span>, <span class="st">"teach|prof|tutor"</span><span class="op">)</span></span></code></pre></div>
<pre><code>##  [1] NA      "prof"  "teach" "tutor" NA      NA      NA      NA      NA      NA</code></pre>
<!-- ======================================================= -->
</div>
<div id="sous-ensemble-et-comptage" class="section level3 unnumbered">
<h3>Sous-ensemble et comptage<a class="anchor" aria-label="anchor" href="#sous-ensemble-et-comptage"><i class="fas fa-link"></i></a>
</h3>
<p>Les fonctions alignées comprennent <code><a href="https://stringr.tidyverse.org/reference/str_subset.html">str_subset()</a></code> et <code><a href="https://stringr.tidyverse.org/reference/str_count.html">str_count()</a></code>.</p>
<p><code><a href="https://stringr.tidyverse.org/reference/str_subset.html">str_subset()</a></code> renvoie les valeurs réelles qui contiennent le motif :</p>
<div class="sourceCode" id="cb520"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_subset.html">str_subset</a></span><span class="op">(</span><span class="va">occupations</span>, <span class="st">"teach|prof|tutor"</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "university professor"           "primary school teacher &amp; tutor"
## [3] "tutor"</code></pre>
<p><code><a href="https://stringr.tidyverse.org/reference/str_count.html">str_count()</a></code> renvoie un vecteur de nombres : le <strong>nombre de fois</strong> qu’un terme de recherche apparaît dans chaque valeur évaluée.</p>
<div class="sourceCode" id="cb522"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_count.html">str_count</a></span><span class="op">(</span><span class="va">occupations</span>, <span class="fu"><a href="https://stringr.tidyverse.org/reference/modifiers.html">regex</a></span><span class="op">(</span><span class="st">"teach|prof|tutor"</span>, ignore_case <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>##  [1] 0 1 2 1 0 0 0 0 0 0</code></pre>
<!-- ======================================================= -->
</div>
<div id="groupes-de-regex" class="section level3 unnumbered">
<h3>Groupes de regex<a class="anchor" aria-label="anchor" href="#groupes-de-regex"><i class="fas fa-link"></i></a>
</h3>
<p>EN CONSTRUCTION</p>
<!-- ======================================================= -->
</div>
</div>
<div id="caractères-spéciaux" class="section level2" number="10.6">
<h2>
<span class="header-section-number">10.6</span> caractères spéciaux<a class="anchor" aria-label="anchor" href="#caract%C3%A8res-sp%C3%A9ciaux"><i class="fas fa-link"></i></a>
</h2>
<p><strong>Slash arriére <code>\</code> comme échappement</strong></p>
<p>La barre oblique inverse <code>\</code> est utilisée pour “échapper” à la signification du caractère suivant. Ainsi, une barre oblique inversée peut être utilisée pour afficher un guillemet <em>dans</em> d’autres guillemets (<code>\"</code>) - le guillemet central ne “cassera” pas les guillemets environnants.</p>
<p>Note - Si vous voulez <em>afficher</em> une barre oblique inverse, vous devez échapper à sa signification avec <em>une autre</em> barre oblique inverse. Ainsi, vous devez écrire deux barres obliques inversées <code>\\</code> pour en afficher une.</p>
<p>**caractères spéciaux ”</p>
<div class="inline-table"><table class="table table-sm">
<colgroup>
<col width="21%">
<col width="78%">
</colgroup>
<thead><tr class="header">
<th>caractère spécial</th>
<th>Représentation</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>"\\"</code></td>
<td>barre oblique inversée</td>
</tr>
<tr class="even">
<td><code>"\n"</code></td>
<td>une nouvelle ligne (newline)</td>
</tr>
<tr class="odd">
<td><code>"\""</code></td>
<td>guillemets doubles <em>entre</em> guillemets doubles</td>
</tr>
<tr class="even">
<td><code>"\""</code></td>
<td>guillemets simples *entre guillemets simples</td>
</tr>
<tr class="odd">
<td>
<code>"\</code>“<code>| accent grave</code>”<code>| retour chariot</code>“<code>| tabulation</code>”<code>| tabulation verticale</code>“`</td>
<td>retour arriére</td>
</tr>
</tbody>
</table></div>
<p>Exécutez <code><a href="https://rdrr.io/r/base/Quotes.html">?"'"</a></code> dans la console R pour afficher la liste complète de ces caractères spéciaux (elle apparaîtra dans le volet d’aide de RStudio).</p>
<!-- ======================================================= -->
</div>
<div id="expressions-régulières-regex" class="section level2" number="10.7">
<h2>
<span class="header-section-number">10.7</span> Expressions régulières (regex)<a class="anchor" aria-label="anchor" href="#expressions-r%C3%A9guli%C3%A8res-regex"><i class="fas fa-link"></i></a>
</h2>
<!-- ======================================================= -->
</div>
<div id="regex-et-caractères-spéciaux" class="section level2" number="10.8">
<h2>
<span class="header-section-number">10.8</span> Regex et caractères spéciaux<a class="anchor" aria-label="anchor" href="#regex-et-caract%C3%A8res-sp%C3%A9ciaux"><i class="fas fa-link"></i></a>
</h2>
<p>Les expressions régulières, ou “regex”, sont un langage concis pour décrire des motifs dans des chaînes de caractères. Si vous n’étes pas familier avec ce langage, une expression régulière peut ressembler à une langue étrangére. Nous allons essayer de démystifier un peu ce langage.</p>
<p><em>Une grande partie de cette section est adaptée de <a href="https://towardsdatascience.com/a-gentle-introduction-to-regular-expressions-with-r-df5e897ca432">ce tutoriel</a> et de <a href="https://evoldyn.gitlab.io/evomics-2018/ref-sheets/R_strings.pdf">cette cheatsheet</a></em>. Nous adaptons ici de manière sélective, sachant que ce manuel pourrait être consulté par des personnes n’ayant pas d’accés à l’Internet pour consulter les autres tutoriels.</p>
<p>Une expression régulière est souvent utilisée pour extraire des motifs spécifiques d’un texte “non structuré”, par exemple des notes médicales, des plaintes principales, des antécédents du patient ou d’autres colonnes de texte libre dans un dataframe.</p>
<p>Il existe quatre outils de base que l’on peut utiliser pour créer une expression régulière de base :</p>
<ol style="list-style-type: decimal">
<li>Jeux de caractères<br>
</li>
<li>Méta-caractères<br>
</li>
<li>Quantificateurs<br>
</li>
<li>Groupes</li>
</ol>
<p><strong>Jeux de caractères</strong></p>
<p>Les jeux de caractères sont une façon d’exprimer les options de liste pour une correspondance de caractères, entre parenthèses. Ainsi, une correspondance sera déclenchée si l’un des caractères entre parenthèses est trouvé dans la chaîne. Par exemple, pour rechercher des voyelles, on peut utiliser ce jeu de caractères: “[aeiou]”. Voici d’autres jeux de caractères courants:</p>
<div class="inline-table"><table class="table table-sm">
<colgroup>
<col width="21%">
<col width="78%">
</colgroup>
<thead><tr class="header">
<th>Jeu de caractères</th>
<th>Correspond à</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>"[A-Z]"</code></td>
<td>toute lettre majuscule unique</td>
</tr>
<tr class="even">
<td><code>"[a-z]"</code></td>
<td>toute lettre minuscule unique</td>
</tr>
<tr class="odd">
<td><code>"[0-9]"</code></td>
<td>n’importe quel chiffre</td>
</tr>
<tr class="even">
<td><code>[:alnum:]</code></td>
<td>tout caractère alphanumérique</td>
</tr>
<tr class="odd">
<td><code>[:digit:]</code></td>
<td>tout chiffre numérique</td>
</tr>
<tr class="even">
<td><code>[:alpha:]</code></td>
<td>toute lettre (majuscule ou minuscule)</td>
</tr>
<tr class="odd">
<td><code>[:upper:]</code></td>
<td>toute lettre majuscule</td>
</tr>
<tr class="even">
<td><code>[:lower:]</code></td>
<td>toute lettre minuscule</td>
</tr>
</tbody>
</table></div>
<p>Les jeux de caractères peuvent être combinés à l’intérieur d’une même parenthèse (sans espace !), par exemple <code>"[A-Za-z]"</code> (toute lettre majuscule OU minuscule), ou un autre exemple <code>"[t-z0-5]"</code> (minuscules de t à z OU nombre de 0 à 5).</p>
<p><strong>Meta characters</strong></p>
<p>Les métacaractères sont des raccourcis pour les jeux de caractères. Certains des plus importants sont énumérés ci-dessous :</p>
<div class="inline-table"><table class="table table-sm">
<colgroup>
<col width="21%">
<col width="78%">
</colgroup>
<thead><tr class="header">
<th>caractère méta</th>
<th>Représentation</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>"\\s"</code></td>
<td>un seul espace</td>
</tr>
<tr class="even">
<td><code>"\\w"</code></td>
<td>un seul caractère alphanumérique (A-Z, a-z, ou 0-9)</td>
</tr>
<tr class="odd">
<td><code>"\\d"</code></td>
<td>un seul chiffre (0-9)</td>
</tr>
</tbody>
</table></div>
<p><strong>Quantificateurs</strong></p>
<p>En général, vous ne souhaitez pas rechercher une correspondance sur un seul caractère. Les quantificateurs vous permettent de désigner la longueur des lettres/chiffres pour permettre une correspondance plus spécifique.</p>
<p>Les quantificateurs sont des nombres écrits entre accolades <code><a href="https://rdrr.io/r/base/Paren.html">{ }</a></code> <em>aprés</em> le caractère qu’ils quantifient, par exemple:</p>
<ul>
<li>
<code>"A{2}"</code> renverra les instances de <strong>deux</strong> lettres majuscules A.<br>
</li>
<li>
<code>"A{2,4}"</code> renverra les instances de <strong>deux à quatre</strong> lettres majuscules A <em>(ne mettez pas d’espace !)</em>.<br>
</li>
<li>
<code>"A{2,}"</code> renverra les instances de <strong>deux lettres A majuscules ou plus</strong>.<br>
</li>
<li>
<code>"A+"</code> renverra les instances de <strong>une ou plusieurs</strong> lettres majuscules A (groupe étendu jusqu’à ce qu’un caractère différent soit rencontré).<br>
</li>
<li>Faites précéder d’un astérisque <code>*</code> pour obtenir <strong>zéro ou plus</strong> de correspondances (utile si vous n’étes pas sûr que le motif soit présent).</li>
</ul>
<p>En utilisant le symbole plus <code>+</code> comme quantificateur, la correspondance se fera jusqu’à ce qu’un caractère différent soit rencontré. Par exemple, cette expression retournera tous les <em>mots</em> (caractères alpha : <code>"[A-Za-z]+"</code>).</p>
<div class="sourceCode" id="cb524"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># chaîne de caractères pour tester les quantificateurs</span></span>
<span><span class="va">test</span> <span class="op">&lt;-</span> <span class="st">"A-AA-AAA-AAAA"</span></span></code></pre></div>
<p>Lorsqu’un quantificateur de {2} est utilisé, seules les paires de A consécutifs sont renvoyées. Deux paires sont identifiées dans <code>AAAA</code>.</p>
<div class="sourceCode" id="cb525"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_extract.html">str_extract_all</a></span><span class="op">(</span><span class="va">test</span>, <span class="st">"A{2}"</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [[1]]
## [1] "AA" "AA" "AA" "AA"</code></pre>
<p>Lorsqu’un quantificateur de {2,4} est utilisé, les groupes de A consécutifs d’une longueur de deux à quatre sont renvoyés.</p>
<div class="sourceCode" id="cb527"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_extract.html">str_extract_all</a></span><span class="op">(</span><span class="va">test</span>, <span class="st">"A{2,4}"</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [[1]]
## [1] "AA"   "AAA"  "AAAA"</code></pre>
<p>Avec le quantificateur <code>+</code>, les groupes de <strong>un ou plus</strong> sont renvoyés :</p>
<div class="sourceCode" id="cb529"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_extract.html">str_extract_all</a></span><span class="op">(</span><span class="va">test</span>, <span class="st">"A+"</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [[1]]
## [1] "A"    "AA"   "AAA"  "AAAA"</code></pre>
<p><strong>Relative position</strong></p>
<p>Il existe des exigences spécifiques pour ce qui précéde ou suit un motif. Par exemple, pour extraire des phrases, “deux chiffres qui sont suivis d’un point” (<code>""</code>). (?&lt;=\.)\s(?=[A-Z])</p>
<div class="sourceCode" id="cb531"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_extract.html">str_extract_all</a></span><span class="op">(</span><span class="va">test</span>, <span class="st">""</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [[1]]
##  [1] "A" "-" "A" "A" "-" "A" "A" "A" "-" "A" "A" "A" "A"</code></pre>
<div class="inline-table"><table class="table table-sm">
<colgroup>
<col width="21%">
<col width="78%">
</colgroup>
<thead><tr class="header">
<th>déclaration de position</th>
<th>Correspond à</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>"(?&lt;=b)a"</code></td>
<td>Un “a” qui <strong>est précédé</strong> d’un “b”.</td>
</tr>
<tr class="even">
<td><code>"(?&lt;!b)a"</code></td>
<td>“a” qui <strong>n’est PAS précédé</strong> par un “b”</td>
</tr>
<tr class="odd">
<td><code>"a(?=b)"</code></td>
<td>“a” qui <strong>est suivi</strong> par un “b”</td>
</tr>
<tr class="even">
<td><code>"a(?!b)"</code></td>
<td>“a” qui <strong>n’est PAS suivi</strong> d’un “b”.</td>
</tr>
</tbody>
</table></div>
<p><strong>Groupes</strong></p>
<p>La capture de groupes dans votre expression régulière est un moyen d’obtenir des valeurs plus organisées lors de l’extraction.</p>
<p><strong>Exemples de regex</strong></p>
<p>Vous trouverez ci-dessous un texte libre pour les exemples. Nous allons essayer d’en extraire des informations utiles en utilisant un terme de recherche par expression régulière.</p>
<div class="sourceCode" id="cb533"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pt_note</span> <span class="op">&lt;-</span> <span class="st">"Le patient est arrivé aux urgences de l'hôpital Broward à 18h00 le 6/12/2005. Le patient s'est présenté avec une douleur abdominale irradiant du quadrant LR. La peau du patient était pâle, fraîche et moite. Sa température était de 99,8 degrés Farinheit. Le pouls du patient était de 100 bpm et filant. La fréquence respiratoire était de 29 par minute."</span></span></code></pre></div>
<p>Cette expression correspond à tous les mots (tout caractère jusqu’à la frappe d’un non-caractère tel qu’un espace):</p>
<div class="sourceCode" id="cb534"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_extract.html">str_extract_all</a></span><span class="op">(</span><span class="va">pt_note</span>, <span class="st">"[A-Za-z]+"</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [[1]]
##  [1] "Le"           "patient"      "est"          "arriv"        "aux"         
##  [6] "urgences"     "de"           "l"            "h"            "pital"       
## [11] "Broward"      "h"            "le"           "Le"           "patient"     
## [16] "s"            "est"          "pr"           "sent"         "avec"        
## [21] "une"          "douleur"      "abdominale"   "irradiant"    "du"          
## [26] "quadrant"     "LR"           "La"           "peau"         "du"          
## [31] "patient"      "tait"         "p"            "le"           "fra"         
## [36] "che"          "et"           "moite"        "Sa"           "temp"        
## [41] "rature"       "tait"         "de"           "degr"         "s"           
## [46] "Farinheit"    "Le"           "pouls"        "du"           "patient"     
## [51] "tait"         "de"           "bpm"          "et"           "filant"      
## [56] "La"           "fr"           "quence"       "respiratoire" "tait"        
## [61] "de"           "par"          "minute"</code></pre>
<p>L’expression <code>"[0-9]{1,2}"</code> correspond à des nombres consécutifs de 1 ou 2 chiffres. On pourrait aussi l’écrire <code>"\d{1,2}"</code>, ou <code>"[:digit:]{1,2}"</code>.</p>
<div class="sourceCode" id="cb536"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_extract.html">str_extract_all</a></span><span class="op">(</span><span class="va">pt_note</span>, <span class="st">"[0-9]{1,2}"</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [[1]]
##  [1] "18" "00" "6"  "12" "20" "05" "99" "8"  "10" "0"  "29"</code></pre>
<p>”
<!-- Cette expression va extraire toutes les phrases (en supposant que la premiére lettre est en majuscule, et que la phrase se termine par un point). Le motif se lit en anglais comme suit : "Une lettre majuscule suivie de quelques lettres minuscules, d'un espace, de quelques lettres, d'un espace, -->“.</p>
<!-- ```{r} -->
<!-- str_extract_all(pt_note, "[A-Z][a-z]+\\s\\w+\\s\\d{1,2}\\s\\w+\\s*\\w*") -->
<!-- ``` -->
<p>Vous pouvez consulter une liste utile d’expressions regex et de conseils à la page 2 de <a href="https://evoldyn.gitlab.io/evomics-2018/ref-sheets/R_strings.pdf">cette cheatsheet</a>.</p>
<p>Voir également ce <a href="https://towardsdatascience.com/a-gentle-introduction-to-regular-expressions-with-r-df5e897ca432">tutoriel</a>.</p>
<!-- ======================================================= -->
</div>
<div id="resources" class="section level2" number="10.9">
<h2>
<span class="header-section-number">10.9</span> Resources<a class="anchor" aria-label="anchor" href="#resources"><i class="fas fa-link"></i></a>
</h2>
<p>Une fiche de référence pour les fonctions du paquet <strong>stringr</strong> peut être trouvée <a href="https://evoldyn.gitlab.io/evomics-2018/ref-sheets/R_strings.pdf">ici</a></p>
<p>Une vignette sur <strong>stringr</strong> peut être trouvée <a href="https://cran.r-project.org/web/packages/stringr/vignettes/stringr.html">ici</a>.</p>

</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="working_dates.html"><span class="header-section-number">9</span> Manipuler les dates</a></div>
<div class="next"><a href="factors.html"><span class="header-section-number">11</span> Facteurs</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#character_strings"><span class="header-section-number">10</span> Caractères et chaînes de caractères</a></li>
<li>
<a class="nav-link" href="#preparation"><span class="header-section-number">10.1</span> Preparation</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#charger-les-paquets">Charger les paquets</a></li>
<li><a class="nav-link" href="#importation-de-donn%C3%A9es">Importation de données</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#unir-s%C3%A9parer-et-arranger"><span class="header-section-number">10.2</span> Unir, séparer et arranger</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#combiner-des-cha%C3%AEnes-de-caract%C3%A8res">Combiner des chaînes de caractères</a></li>
<li><a class="nav-link" href="#cha%C3%AEnes-de-caract%C3%A8res-dynamiques">Chaînes de caractères dynamiques</a></li>
<li><a class="nav-link" href="#str_unite">Unir les colonnes</a></li>
<li><a class="nav-link" href="#s%C3%A9parer">séparer</a></li>
<li><a class="nav-link" href="#s%C3%A9parer-les-colonnes">Séparer les colonnes</a></li>
<li><a class="nav-link" href="#classer-par-ordre-alphab%C3%A9tique">Classer par ordre alphabétique</a></li>
<li><a class="nav-link" href="#fonctions-de-la-base-r">Fonctions de la base R</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#nettoyer-et-standardiser"><span class="header-section-number">10.3</span> Nettoyer et standardiser</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#changer-la-casse">Changer la casse</a></li>
<li><a class="nav-link" href="#str_pad">Longueur du bloc</a></li>
<li><a class="nav-link" href="#tronquer">Tronquer</a></li>
<li><a class="nav-link" href="#normaliser-la-longueur">Normaliser la longueur</a></li>
<li><a class="nav-link" href="#supprimer-les-espaces-avantapr%C3%A9s-les-cha%C3%AEnes-de-caract%C3%A8res">Supprimer les espaces avant/aprés les chaînes de caractères</a></li>
<li><a class="nav-link" href="#supprimer-les-espaces-r%C3%A9p%C3%A9t%C3%A9s-dans-les-cha%C3%AEnes-de-caract%C3%A8res">Supprimer les espaces répétés dans les chaînes de caractères</a></li>
<li><a class="nav-link" href="#transformer-en-paragraphes">Transformer en paragraphes</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#g%C3%A9rer-par-position"><span class="header-section-number">10.4</span> Gérer par position</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#extraire-par-position-de-caract%C3%A8re">Extraire par position de caractère</a></li>
<li><a class="nav-link" href="#extraire-par-position-de-mot">Extraire par position de mot</a></li>
<li><a class="nav-link" href="#remplacer-par-la-position-du-caract%C3%A8re">Remplacer par la position du caractère</a></li>
<li><a class="nav-link" href="#evaluer-la-longueur">Evaluer la longueur</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#motifs"><span class="header-section-number">10.5</span> Motifs</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#d%C3%A9tecter-un-motif">détecter un motif</a></li>
<li><a class="nav-link" href="#remplacer-tous-les-%C3%A9l%C3%A9ments">Remplacer tous les éléments</a></li>
<li><a class="nav-link" href="#d%C3%A9tecter-en-utilisant-des-instructions-logiques">détecter en utilisant des instructions logiques</a></li>
<li><a class="nav-link" href="#localiser-la-position-du-motif">Localiser la position du motif</a></li>
<li><a class="nav-link" href="#extraire-une-correspondance">Extraire une correspondance</a></li>
<li><a class="nav-link" href="#sous-ensemble-et-comptage">Sous-ensemble et comptage</a></li>
<li><a class="nav-link" href="#groupes-de-regex">Groupes de regex</a></li>
</ul>
</li>
<li><a class="nav-link" href="#caract%C3%A8res-sp%C3%A9ciaux"><span class="header-section-number">10.6</span> caractères spéciaux</a></li>
<li><a class="nav-link" href="#expressions-r%C3%A9guli%C3%A8res-regex"><span class="header-section-number">10.7</span> Expressions régulières (regex)</a></li>
<li><a class="nav-link" href="#regex-et-caract%C3%A8res-sp%C3%A9ciaux"><span class="header-section-number">10.8</span> Regex et caractères spéciaux</a></li>
<li><a class="nav-link" href="#resources"><span class="header-section-number">10.9</span> Resources</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
          
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Le Epi R Handbook</strong>" was written by the handbook team. It was last built on 2023-05-21.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
