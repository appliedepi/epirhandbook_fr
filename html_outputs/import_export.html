<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>7 Importer et exporter des données | The Epidemiologist R Handbook</title>

    <meta name="author" content="the handbook team" />
  
   <meta name="description" content="The Epi R Handbook est un manuel de référence sur l’utilisation de R en épidémiologie appliquée et santé publique." />
   <meta name="generator" content="placeholder" />
  <meta property="og:title" content="7 Importer et exporter des données | The Epidemiologist R Handbook" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="The Epi R Handbook est un manuel de référence sur l’utilisation de R en épidémiologie appliquée et santé publique." />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="7 Importer et exporter des données | The Epidemiologist R Handbook" />
  
  <meta name="twitter:description" content="The Epi R Handbook est un manuel de référence sur l’utilisation de R en épidémiologie appliquée et santé publique." />
  
  <!-- JS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script>
  <script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script>
    <script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet" />
    <script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script>
    <script src="libs/bs3compat-0.4.2/transition.js"></script>
    <script src="libs/bs3compat-0.4.2/tabs.js"></script>
    <script src="libs/bs3compat-0.4.2/bs3compat.js"></script>
    <link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet" />
    <script src="libs/bs4_book-1.0.0/bs4_book.js"></script>
    <script src="libs/htmlwidgets-1.6.2/htmlwidgets.js"></script>
    <link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
    <script src="libs/datatables-binding-0.27/datatables.js"></script>
    <link href="libs/dt-core-1.12.1/css/jquery.dataTables.min.css" rel="stylesheet" />
    <link href="libs/dt-core-1.12.1/css/jquery.dataTables.extra.css" rel="stylesheet" />
    <script src="libs/dt-core-1.12.1/js/jquery.dataTables.min.js"></script>
    <link href="libs/nouislider-7.0.10/jquery.nouislider.min.css" rel="stylesheet" />
    <script src="libs/nouislider-7.0.10/jquery.nouislider.min.js"></script>
    <link href="libs/selectize-0.12.0/selectize.bootstrap3.css" rel="stylesheet" />
    <script src="libs/selectize-0.12.0/selectize.min.js"></script>
    <link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
    <script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
    <script src="libs/kePrint-0.0.1/kePrint.js"></script>
    <link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
    <link href="libs/tabwid-1.1.3/tabwid.css" rel="stylesheet" />
    <script src="libs/tabwid-1.1.3/tabwid.js"></script>
    <link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
    <script src="libs/leaflet-1.3.1/leaflet.js"></script>
    <link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
    <script src="libs/proj4-2.6.2/proj4.min.js"></script>
    <script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
    <link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
    <script src="libs/leaflet-binding-2.1.2/leaflet.js"></script>
    <script src="libs/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script>
    <script src="libs/leaflet-providers-plugin-2.1.2/leaflet-providers-plugin.js"></script>
    <script src="libs/viz-1.8.2/viz.js"></script>
    <link href="libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet" />
    <script src="libs/grViz-binding-1.0.9/grViz.js"></script>
    <script src="libs/d3-4.5.0/d3.min.js"></script>
    <script src="libs/sankey-1/sankey.js"></script>
    <script src="libs/sankeyNetwork-binding-0.4/sankeyNetwork.js"></script>
    <script src="libs/plotly-binding-4.10.1/plotly.js"></script>
    <script src="libs/typedarray-0.1/typedarray.min.js"></script>
    <link href="libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet" />
    <script src="libs/plotly-main-2.11.1/plotly-latest.min.js"></script>
    <link href="libs/vis-9.1.0/vis-network.min.css" rel="stylesheet" />
    <script src="libs/vis-9.1.0/vis-network.min.js"></script>
    <script src="libs/visNetwork-binding-2.1.2/visNetwork.js"></script>
    <link href="libs/font-awesome-4.7.0/css/font-awesome.min.css" rel="stylesheet" />
    <script src="libs/plotly-basic-2.11.1/plotly-basic-2.11.1.min.js"></script>
    <script src="libs/plotly-cartesian-2.11.1/plotly-cartesian-2.11.1.min.js"></script>
    <script src="libs/proj4js-2.3.15/proj4.js"></script>
    <link href="libs/highcharts-9.3.1/css/motion.css" rel="stylesheet" />
    <script src="libs/highcharts-9.3.1/highcharts.js"></script>
    <script src="libs/highcharts-9.3.1/highcharts-3d.js"></script>
    <script src="libs/highcharts-9.3.1/highcharts-more.js"></script>
    <script src="libs/highcharts-9.3.1/modules/stock.js"></script>
    <script src="libs/highcharts-9.3.1/modules/map.js"></script>
    <script src="libs/highcharts-9.3.1/modules/data.js"></script>
    <script src="libs/highcharts-9.3.1/modules/exporting.js"></script>
    <script src="libs/highcharts-9.3.1/modules/offline-exporting.js"></script>
    <script src="libs/highcharts-9.3.1/modules/drilldown.js"></script>
    <script src="libs/highcharts-9.3.1/modules/item-series.js"></script>
    <script src="libs/highcharts-9.3.1/modules/overlapping-datalabels.js"></script>
    <script src="libs/highcharts-9.3.1/modules/annotations.js"></script>
    <script src="libs/highcharts-9.3.1/modules/export-data.js"></script>
    <script src="libs/highcharts-9.3.1/modules/funnel.js"></script>
    <script src="libs/highcharts-9.3.1/modules/heatmap.js"></script>
    <script src="libs/highcharts-9.3.1/modules/treemap.js"></script>
    <script src="libs/highcharts-9.3.1/modules/sankey.js"></script>
    <script src="libs/highcharts-9.3.1/modules/dependency-wheel.js"></script>
    <script src="libs/highcharts-9.3.1/modules/organization.js"></script>
    <script src="libs/highcharts-9.3.1/modules/solid-gauge.js"></script>
    <script src="libs/highcharts-9.3.1/modules/streamgraph.js"></script>
    <script src="libs/highcharts-9.3.1/modules/sunburst.js"></script>
    <script src="libs/highcharts-9.3.1/modules/vector.js"></script>
    <script src="libs/highcharts-9.3.1/modules/wordcloud.js"></script>
    <script src="libs/highcharts-9.3.1/modules/xrange.js"></script>
    <script src="libs/highcharts-9.3.1/modules/tilemap.js"></script>
    <script src="libs/highcharts-9.3.1/modules/venn.js"></script>
    <script src="libs/highcharts-9.3.1/modules/gantt.js"></script>
    <script src="libs/highcharts-9.3.1/modules/timeline.js"></script>
    <script src="libs/highcharts-9.3.1/modules/parallel-coordinates.js"></script>
    <script src="libs/highcharts-9.3.1/modules/bullet.js"></script>
    <script src="libs/highcharts-9.3.1/modules/coloraxis.js"></script>
    <script src="libs/highcharts-9.3.1/modules/dumbbell.js"></script>
    <script src="libs/highcharts-9.3.1/modules/lollipop.js"></script>
    <script src="libs/highcharts-9.3.1/modules/series-label.js"></script>
    <script src="libs/highcharts-9.3.1/plugins/motion.js"></script>
    <script src="libs/highcharts-9.3.1/custom/reset.js"></script>
    <script src="libs/highcharts-9.3.1/modules/boost.js"></script>
    <script src="libs/highchart-binding-0.9.4/highchart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script>

  <!-- CSS -->
  <style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
      <link rel="stylesheet" href="style_bs4.css" />
  
</head>

<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book">
    <a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">The Epidemiologist R Handbook</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
      </form>

      <nav aria-label="Table of contents">
        <h2>Table of contents</h2>
        <div id="book-toc"></div>

        <div class="book-extra">
          <p><a id="book-repo" href="#">View book source <i class="fab fa-github"></i></a></li></p>
        </div>
      </nav>
    </div>
  </header>

  <main class="col-sm-12 col-md-9 col-lg-7" id="content">
<div id="import_export" class="section level1" number="7">
<h1><span class="header-section-number">7</span> Importer et exporter des données</h1>
<p><img src="images/Import_Export_1500x500.png" width="100%" /></p>
<p>Sur cette page, nous décrivons les moyens de localiser, d’importer et d’exporter des fichiers :</p>
<ul>
<li><p>Utilisation du package <strong>rio</strong> pour <code>import()</code> et <code>export()</code> de manière flexible de nombreux types de fichiers</p></li>
<li><p>Utilisation du package <strong>here</strong> pour localiser des fichiers relatifs à la racine d’un projet R - pour prévenir des complications liées aux chemins d’accès de fichiers qui sont spécifiques à un ordinateur</p></li>
<li><p>Des scénarios d’importation spécifiques, tels que :</p>
<ul>
<li><p>Feuilles d’Excel spécifiques<br />
</p></li>
<li><p>En-têtes désordonnés et lignes sautées</p></li>
<li><p>Feulles de calcul Google<br />
</p></li>
<li><p>À partir des données publiées sur les sites web<br />
</p></li>
<li><p>Avec des APIs<br />
</p></li>
<li><p>Importer le <em>plus récent</em> fichier<br />
</p></li>
</ul></li>
<li><p>Saisie manuelle des données<br />
</p></li>
<li><p>Type de fichier spécifique à R tels que RDS et RData<br />
</p></li>
<li><p>Exportation/sauvegarde des fichiers et des graphiques</p></li>
</ul>
<!-- ======================================================= -->
<div id="aperçu" class="section level2" number="7.1">
<h2><span class="header-section-number">7.1</span> Aperçu</h2>
<p>Lorsque vous importez un “jeu de données” dans R, vous créez généralement un nouvel objet appelé <em>data frame</em> dans votre environnement R et vous le définissez comme un fichier importé (par exemple Excel, CSV, TSV, RDS) qui se trouve dans votre répertoire de dossiers à un certain chemin d’accès au fichier.</p>
<p>Vous pouvez importer/exporter de nombreux types de fichiers, y compris ceux créés par d’autres programmes statistiques (SAS, STATA, SPSS). Vous pouvez également vous connecter à des bases de données relationnelles.</p>
<p>R a même ses propres formats de données :</p>
<ul>
<li>Un fichier RDS (.rds) stocke un seul objet R tel qu’un dataframe. Ils sont utiles pour stocker des données nettoyées, car ils conservent les classes de colonnes R. Pour en savoir plus, consultez <a href="import_export.html#import_rds">cette section</a>.</li>
<li>Un fichier RData (.Rdata) peut être utilisé pour stocker plusieurs objets, voire un espace de travail R complet. Pour en savoir plus, consultez <a href="import_export.html#import_rdata">cette section</a>.</li>
</ul>
<!-- ======================================================= -->
</div>
<div id="le-package-rio" class="section level2" number="7.2">
<h2><span class="header-section-number">7.2</span> Le package <strong>rio</strong></h2>
<p>Le paquet R que nous recommandons est : <strong>rio</strong>. Le nom “rio” est une abréviation de “R I/O” (input/output).</p>
<p>Ses fonctions <code>import()</code> et <code>export()</code> peuvent traiter de nombreux types de fichiers différents (par exemple .xlsx, .csv, .rds, .tsv). Lorsque vous fournissez un chemin d’accès au fichier à l’une de ces fonctions (y compris l’extension de fichier comme “.csv”), <strong>rio</strong> lira l’extension et utilisera le bon outil pour importer ou exporter le fichier.</p>
<p>L’alternative à l’utilisation de <strong>rio</strong> est d’utiliser les fonctions de nombreux autres packages, chacun d’entre eux étant spécifique à un type de fichier. Par exemple, <code>read.csv()</code> (<strong>base</strong> R), <code>read.xlsx()</code> (<strong>openxlsx</strong> package), et <code>write_csv()</code> (<strong>readr</strong> pacakge), etc. Ces alternatives peuvent être difficiles à mémoriser, alors qu’utiliser <code>import()</code> et <code>export()</code> de <strong>rio</strong> est facile.</p>
<p>Les fonctions <code>import()</code> et <code>export()</code> de <strong>rio</strong> utilisent le package et la fonction appropriés pour un fichier donné, en se basant sur son extension. Consultez la fin de cette page pour un tableau complet des paquets/fonctions que <strong>rio</strong> utilise en arrière-plan. Il peut également être utilisé pour importer des fichiers STATA, SAS, et SPSS, parmi des dizaines d’autres types de fichiers.</p>
<p>L’importation/exportation de shapefile nécessite d’autres packages, tel que détaillé dans la page sur <a href="#GIS">Introduction aux SIG</a>.</p>
</div>
<div id="here" class="section level2" number="7.3">
<h2><span class="header-section-number">7.3</span> Le package <strong>here</strong></h2>
<p>Le package <strong>here</strong> et sa fonction <code>here()</code> permettent d’indiquer facilement à R où trouver et enregistrer vos fichiers - en fait, il construit les chemins d’accès aux fichiers.</p>
<p>Utilisé en conjonction avec un projet R, <strong>here</strong> vous permet de décrire l’emplacement des fichiers dans votre projet R par rapport au <em>répertoire racine</em> du projet R (le dossier de niveau supérieur). Cela est utile lorsque le projet R peut être partagé ou accessible par plusieurs personnes/ordinateurs. Cela évite les complications dues aux chemins d’accès aux fichiers uniques sur différents ordinateurs (par exemple <code>"C:/Users/Laura/Documents..."</code> en “commençant” le chemin d’accès à un endroit commun pour tous les utilisateurs (la racine du projet R).</p>
<p>Voici comment <code>here()</code> fonctionne dans un projet R :</p>
<ul>
<li>Lorsque le package <strong>here</strong> est chargé pour la première fois dans le projet R, il place un petit fichier appelé “.here” dans le dossier racine de votre projet R comme “repère” ou “ancre”.<br />
</li>
<li>Dans vos scripts, pour référencer un fichier dans les sous-dossiers du projet R, vous utilisez la fonction <code>here()</code> pour construire le chemin d’accès au fichier <em>en relation avec cette ancre</em></li>
<li>Pour construire le chemin d’accès au fichier, écrivez les noms des dossiers au-delà de la racine, entre guillemets, séparés par des virgules, et terminez par le nom du fichier et son extension, comme indiqué ci-dessous.<br />
</li>
<li>Les chemins d’accès <code>here()</code> peuvent être utilisés à la fois pour l’importation et l’exportation.</li>
</ul>
<p>Par exemple, ci-dessous, la fonction <code>import()</code> reçoit un chemin d’accès construit avec <code>here()</code>.</p>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb129-1"><a href="import_export.html#cb129-1" aria-hidden="true" tabindex="-1"></a>linelist <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="fu">here</span>(<span class="st">&quot;data&quot;</span>, <span class="st">&quot;linelists&quot;</span>, <span class="st">&quot;ebola_linelist.xlsx&quot;</span>))</span></code></pre></div>
<p>La commande <code>here("data", "linelists", "ebola_linelist.xlsx")</code> fournit en fait le chemin d’accès complet au fichier qui est <em>unique à l’ordinateur de l’utilisateur</em> :</p>
<pre><code>&quot;C:/Users/Laura/Documents/my_R_project/data/linelists/ebola_linelist.xlsx&quot;</code></pre>
<p>L’avantage est que la commande R utilisant <code>here()</code> peut être exécutée avec succès sur n’importe quel ordinateur accédant au projet R.</p>
<p><span style="color: darkgreen;"><strong><em>TIP:</em></strong> Si vous n’êtes pas certaine de l’emplacement de la racine “here”, exécutez la fonction <code>here()</code> avec des parenthèses vides.</span></p>
<p>Plus d’informations sur le package <strong>ici</strong> <a href="https://here.r-lib.org/">en cliquant sur ce lien</a>.</p>
<!-- ======================================================= -->
</div>
<div id="chemins-daccès-aux-fichiers" class="section level2" number="7.4">
<h2><span class="header-section-number">7.4</span> Chemins d’accès aux fichiers</h2>
<p>Lorsque vous importez ou exportez des données, vous devez fournir un chemin d’accès au fichier. Vous pouvez le faire de trois manières différentes:</p>
<ol style="list-style-type: decimal">
<li><em>Recommandé:</em> fournir un chemin d’accès “relatif” avec le package <strong>here</strong></li>
<li>Fournir le chemin d’accès “complet” / “absolu”</li>
<li>Sélection manuelle des fichiers</li>
</ol>
<div id="chemins-daccès-relatifs" class="section level3 unnumbered">
<h3>Chemins d’accès “relatifs”</h3>
<p>Dans R, les chemins d’accès “relatifs” consistent en un chemin d’accès <em>relatif</em> à la racine d’un projet R. Ils permettent d’obtenir des chemins d’accès plus simples qui peuvent fonctionner sur différents ordinateurs (par exemple, si le projet R se trouve sur un disque partagé ou est envoyé par courrier électronique). Comme décrit <a href="import_export.html#here">ci-dessus</a>, les chemins de fichiers relatifs sont facilités par l’utilisation du package <strong>here</strong>.</p>
<p>Voici un exemple de chemin d’accès relatif construit avec <code>here()</code>. Nous supposons que le travail se trouve dans un projet R qui contient un sous-dossier “data” et dans celui-ci un sous-dossier “linelists”, dans lequel se trouve le fichier .xlsx qui nous intéresse.</p>
<div class="sourceCode" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb131-1"><a href="import_export.html#cb131-1" aria-hidden="true" tabindex="-1"></a>linelist <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="fu">here</span>(<span class="st">&quot;data&quot;</span>, <span class="st">&quot;linelists&quot;</span>, <span class="st">&quot;ebola_linelist.xlsx&quot;</span>))</span></code></pre></div>
</div>
<div id="chemins-daccès-absolus" class="section level3 unnumbered">
<h3>Chemins d’accès “absolus”</h3>
<p>Les chemins d’accès absolus ou “complets” peuvent être fournis à des fonctions comme <code>import()</code> mais ils sont “fragiles” car ils sont uniques à l’ordinateur spécifique de l’utilisateur et donc <em>non recommandés</em>.</p>
<p>Vous trouverez ci-dessous un exemple de chemin d’accès absolu à un fichier. Dans l’ordinateur de Laura, il existe un dossier “analysis”, un sous-dossier “data” et un sous-dossier “linelists”, dans lequel se trouve le fichier .xlsx en question.</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb132-1"><a href="import_export.html#cb132-1" aria-hidden="true" tabindex="-1"></a>linelist <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="st">&quot;C:/Users/Laura/Documents/analysis/data/linelists/ebola_linelist.xlsx&quot;</span>)</span></code></pre></div>
<p>Quelques points à noter concernant les chemins d’accès absolus aux fichiers:</p>
<ul>
<li><strong>Évitez les chemins d’accès absolus</strong> parce qu’ils vont interrompre le script si ils sont utilisés sur un autre ordinateur différent</li>
<li>Utilisez des barres obliques (/), comme dans l’exemple ci-dessus (remarque : ce n’est PAS l’option par défaut pour les chemins d’accès aux fichiers de Windows).</li>
<li>Les chemins de fichiers qui commencent par des doubles barres obliques (par exemple, “//…”) ne seront probablement pas reconnus par R et produiront une erreur. Pensez à déplacer votre travail sur un lecteur “nommé” ou “lettré” qui commence par une lettre (par exemple “J :” ou “C :”). Voir la page sur les <a href="directories.html#directories">Interactions avec les répertoires</a> pour plus de détails sur cette question.</li>
</ul>
<p>Un scénario dans lequel les chemins de fichier absolus peuvent être appropriés est celui où vous voulez importer un fichier d’un lecteur partagé qui a le même chemin d’accès complet pour tous les utilisateurs.</p>
<p><span style="color: darkgreen;"><strong><em>TIP:</em></strong> Pour convertir rapidement tous les <code>\ à</code> <code>/</code>, surlignez le code d’intérêt, utilisez Ctrl+f (avec Windows), sélectionnez l’option “Dans la sélection”, et ensuite utilisez la fonction remplacement pour les convertir.</span></p>
<!-- ======================================================= -->
</div>
<div id="sélectionner-les-fichier-manuellement" class="section level3 unnumbered">
<h3>Sélectionner les fichier manuellement</h3>
<p>Vous pouvez importer des données de façon manuelle via une de ces méthodes:</p>
<ol style="list-style-type: decimal">
<li>Dans le volet Environnement de RStudio, cliquez sur “Import Dataset”, et sélectionnez le type de données</li>
<li>Cliquez sur File / Import Dataset / (sélectionnez le type de données)<br />
</li>
<li>Pour une sélection manuelle complète, utilisez la commande <code>file.choose()</code> de la <em>base R</em> (en laissant les parenthèses vides) pour d’éclencher l’apparition d’une <strong>fenêtre pop-up</strong> qui permet à l’utilisateur de sélectionner manuellement le fichier sur son ordinateur. Par exemple :</li>
</ol>
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb133-1"><a href="import_export.html#cb133-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Sélection manuelle d&#39;un fichier. Lorsque cette commande est exécutée, une fenêtre POP-UP apparaîtra.</span></span>
<span id="cb133-2"><a href="import_export.html#cb133-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb133-3"><a href="import_export.html#cb133-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Le chemin du fichier sélectionné sera fourni à la commande import().</span></span>
<span id="cb133-4"><a href="import_export.html#cb133-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb133-5"><a href="import_export.html#cb133-5" aria-hidden="true" tabindex="-1"></a>my_data <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="fu">file.choose</span>())</span></code></pre></div>
<p><span style="color: darkgreen;"><strong><em>TIP:</em></strong> Il est possible que la <strong>fenêtre pop-up</strong> apparaisse DERRIÈRE votre fenêtre de RStudio.</span></p>
</div>
</div>
<div id="importer-des-données" class="section level2" number="7.5">
<h2><span class="header-section-number">7.5</span> Importer des données</h2>
<p>Il est assez simple d’utiliser <code>import()</code> pour importer un ensemble des données. Il suffit de fournir le chemin d’accès au fichier (y compris le nom et l’extension du fichier) entre guillemets. Si vous utilisez <code>here()</code> pour construire le chemin d’accès au fichier, suivez les insTIPtions ci-dessus. Voici quelques exemples:</p>
<p>Importation d’un fichier csv situé dans votre “répertoire de travail” ou dans le dossier racine du projet R:</p>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb134-1"><a href="import_export.html#cb134-1" aria-hidden="true" tabindex="-1"></a>linelist <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="st">&quot;linelist_cleaned.csv&quot;</span>)</span></code></pre></div>
<p>Importation de la première feuille d’un Excel qui se trouve dans les sous-dossiers “data” et “linelists” du projet R (le chemin du fichier construit à l’aide de <code>here()</code>):</p>
<div class="sourceCode" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb135-1"><a href="import_export.html#cb135-1" aria-hidden="true" tabindex="-1"></a>linelist <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="fu">here</span>(<span class="st">&quot;data&quot;</span>, <span class="st">&quot;linelists&quot;</span>, <span class="st">&quot;linelist_cleaned.xlsx&quot;</span>))</span></code></pre></div>
<p>Importing d’un data frame (un fichier .rds) à l’aide d’un chemin d’accès absolu:</p>
<div class="sourceCode" id="cb136"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb136-1"><a href="import_export.html#cb136-1" aria-hidden="true" tabindex="-1"></a>linelist <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="st">&quot;C:/Users/Laura/Documents/tuberculosis/data/linelists/linelist_cleaned.rds&quot;</span>)</span></code></pre></div>
<div id="feuilles-spécifiques-dexcel" class="section level3 unnumbered">
<h3>Feuilles spécifiques d’Excel</h3>
<p>Par défaut, si vous fournissez un fichier Excel (.xlsx) à import(), la première feuille du fichier sera importée. Si vous voulez importer une <strong>feuille</strong> spécifique, incluez le nom de la feuille dans l’argument which =. Par exemple:</p>
<div class="sourceCode" id="cb137"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb137-1"><a href="import_export.html#cb137-1" aria-hidden="true" tabindex="-1"></a>my_data <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="st">&quot;my_excel_file.xlsx&quot;</span>, <span class="at">which =</span> <span class="st">&quot;Sheetname&quot;</span>)</span></code></pre></div>
<p>Si vous utilisez la méthode <code>here()</code> pour fournir un chemin d’accès relatif à <code>import()</code>, vous pouvez toujours indiquer une feuille spécifique en ajoutant l’argument which = après les parenthèses de fermeture de la fonction <code>here()</code>.</p>
<div class="sourceCode" id="cb138"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb138-1"><a href="import_export.html#cb138-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Demonstration: importing a specific Excel sheet when using relative pathways with the &#39;here&#39; package</span></span>
<span id="cb138-2"><a href="import_export.html#cb138-2" aria-hidden="true" tabindex="-1"></a>linelist_raw <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="fu">here</span>(<span class="st">&quot;data&quot;</span>, <span class="st">&quot;linelist.xlsx&quot;</span>), <span class="at">which =</span> <span class="st">&quot;Sheet1&quot;</span>)<span class="st">`</span><span class="at">  </span></span></code></pre></div>
<p>Pour <em>exporter</em> un data frame à partir de R vers une feuille Excel spécifique tout en gardant inchangé le reste du fichier Excel, vous devrez importer, modifier et exporter avec un package alternatif spécifique pour cet objectif tel que <strong>openxlsx</strong>. Pour davantage d’information consultez la page <a href="directories.html#directories">Interactions avec les répertoires</a> ou <a href="https://ycphs.github.io/openxlsx/">cette page github</a>.</p>
<p>Si votre fichier Excel est .xlsb (fichier Excel en format binaire) il est possible que vous ne puissiez pas l’importer en utilisant <strong>rio</strong>. Envisagez de le réenregistrer en format .xlsx, ou bien en utilisant un package tel que <strong>readxlsb</strong> qui fut conçu <a href="https://cran.r-project.org/web/packages/readxlsb/vignettes/read-xlsb-workbook.html">à cet effet</a>.</p>
<!-- ======================================================= -->
</div>
<div id="import_missing" class="section level3 unnumbered">
<h3>Données manquantes</h3>
<p>Vous pouvez désigner la ou les valeurs de votre ensemble de données qui doivent être considérées comme manquantes. Comme expliqué dans la page <a href="missing_data.html#missing_data">Données manquantes</a>, la valeur dans R pour les données manquantes est <code>NA</code>, mais peut-être que l’ensemble de données que vous voulez importer utilise 99, “Manquant”, ou juste un espace vide “” à la place.</p>
<p>Utilisez l’argument <code>na =</code> avec <code>import()</code> et fournissez la ou les valeurs entre guillemets (même si ce sont des nombres). Vous pouvez spécifier plusieurs valeurs en les incluant dans un vecteur, en utilisant <code>c()</code> comme indiqué ci-dessous.</p>
<p>Ici, la valeur “99” dans le jeu de données est considéré comme manquant et converti à <code>NA</code> dans R.</p>
<div class="sourceCode" id="cb139"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb139-1"><a href="import_export.html#cb139-1" aria-hidden="true" tabindex="-1"></a>linelist <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="fu">here</span>(<span class="st">&quot;data&quot;</span>, <span class="st">&quot;my_linelist.xlsx&quot;</span>), <span class="at">na =</span> <span class="st">&quot;99&quot;</span>)</span></code></pre></div>
<p>Ici, toutes les valeurs “Missing”, “” (cellule vide), ou ” ” (espace unique) dans l’ensemble de données importées sont converties en <code>NA</code> dans R.</p>
<div class="sourceCode" id="cb140"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb140-1"><a href="import_export.html#cb140-1" aria-hidden="true" tabindex="-1"></a>linelist <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="fu">here</span>(<span class="st">&quot;data&quot;</span>, <span class="st">&quot;my_linelist.csv&quot;</span>), <span class="at">na =</span> <span class="fu">c</span>(<span class="st">&quot;Missing&quot;</span>, <span class="st">&quot;&quot;</span>, <span class="st">&quot; &quot;</span>))</span></code></pre></div>
<!-- ======================================================= -->
</div>
<div id="sauter-des-lignes" class="section level3 unnumbered">
<h3>Sauter des lignes</h3>
<p>Parfois, vous pouvez vouloir éviter d’importer une ligne de données. Vous pouvez le faire avec l’argument <code>skip =</code> si vous utilisez <code>import()</code> de <strong>rio</strong> sur un fichier .xlsx ou .csv. Indiquez le nombre de lignes que vous souhaitez ignorer.</p>
<div class="sourceCode" id="cb141"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb141-1"><a href="import_export.html#cb141-1" aria-hidden="true" tabindex="-1"></a>linelist_raw <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="st">&quot;linelist_raw.xlsx&quot;</span>, <span class="at">skip =</span> <span class="dv">1</span>)  <span class="co"># n&#39;importe pas la ligne d&#39;en-tête</span></span></code></pre></div>
<p>Malheureusement, <code>skip =</code> n’accepte qu’une seule valeur entière, <em>pas</em> une plage (par exemple, “2:10” ne fonctionne pas). Pour sauter l’importation de lignes spécifiques qui ne sont pas consécutives à partir du haut, pensez à importer plusieurs fois et à utiliser <code>bind_rows()</code> de <strong>dplyr</strong>. Voir l’exemple ci-dessous pour sauter seulement la ligne 2.</p>
</div>
<div id="gérer-une-deuxième-ligne-den-tête" class="section level3 unnumbered">
<h3>Gérer une deuxième ligne d’en-tête</h3>
<p>Parfois, vos données peuvent avoir une <em>deuxième</em> ligne, par exemple s’il s’agit d’une ligne de “dictionnaire de données” comme indiqué ci-dessous. Cette situation peut être problématique car elle peut entraîner l’importation de toutes les colonnes en tant que classe “caractère”.</p>
<p>Voici un exemple de ce type d’ensemble de données (la première ligne étant le dictionnaire de données).</p>
<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-7a7daccda557efac39a0" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-7a7daccda557efac39a0">{"x":{"filter":"top","vertical":false,"filterHTML":"<tr>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","data":[["case identification number assigned by MOH","5fe599","8689b7","11f8ea","b8812a"],["transmission chain generation number","4","4","2","3"],["estimated date of infection, mm/dd/yyyy","2014-05-08",null,null,"2014-05-04"],["date of symptom onset, YYYY-MM-DD","2014-05-13","2014-05-13","2014-05-16","2014-05-18"],["date of initial hospitalization, mm/dd/yyyy","2014-05-15","2014-05-14","2014-05-18","2014-05-20"],["date of outcome status determination",null,"2014-05-18","2014-05-30",null],["either 'Death' or 'Recovered' or 'Unknown'",null,"Recover","Recover",null],["either 'm' or 'f' or 'unknown'","m","f","m","f"],["age number","2","3","56","18"],["age unit, either 'years' or 'months' or 'days'","years","years","years","years"],[null,"2","3","56","18"],[null,"0-4","0-4","50-69","15-19"],[null,"0-4","0-4","55-59","15-19"],["Name of hospital of first admission","Other","Missing","St. Mark's Maternity Hospital (SMMH)","Port Hospital"],["longitude of residence, approx","-13.2157351064963","-13.2152339775486","-13.212910703914","-13.2363711169728"],["latitude of residence, approx","8.46897295100924","8.45171855856465","8.46481700596819","8.4754761613651"],["case_id of infector","f547d6",null,null,"f90f5f"],["context of known transmission event","other",null,null,"other"],[null,"27","25","91","41"],[null,"48","59","238","135"],[null,"22","22","21","23"],["presence of fever on admission, either 'yes' or 'no'","no",null,null,"no"],["presence of chills on admission, either 'yes' or 'no'","no",null,null,"no"],["presence of cough on admission, either 'yes' or 'no'","yes",null,null,"no"],["presence of aches on admission, either 'yes' or 'no'","no",null,null,"no"],["presence of vomiting on admission, either 'yes' or 'no'","yes",null,null,"no"],[null,"36.8","36.9","36.9","36.8"],["time of hospital admission HH:MM",null,"09:36","16:48","11:22"],[null,"117.1875","71.8184429761563","16.0652496292635","22.4965706447188"],[null,"2","1","2","2"]],"container":"<table class=\"white-space: nowrap\">\n  <thead>\n    <tr>\n      <th>case_id<\/th>\n      <th>generation<\/th>\n      <th>date_infection<\/th>\n      <th>date_onset<\/th>\n      <th>date_hospitalisation<\/th>\n      <th>date_outcome<\/th>\n      <th>outcome<\/th>\n      <th>gender<\/th>\n      <th>age<\/th>\n      <th>age_unit<\/th>\n      <th>age_years<\/th>\n      <th>age_cat<\/th>\n      <th>age_cat5<\/th>\n      <th>hospital<\/th>\n      <th>lon<\/th>\n      <th>lat<\/th>\n      <th>infector<\/th>\n      <th>source<\/th>\n      <th>wt_kg<\/th>\n      <th>ht_cm<\/th>\n      <th>ct_blood<\/th>\n      <th>fever<\/th>\n      <th>chills<\/th>\n      <th>cough<\/th>\n      <th>aches<\/th>\n      <th>vomit<\/th>\n      <th>temp<\/th>\n      <th>time_admission<\/th>\n      <th>bmi<\/th>\n      <th>days_onset_hosp<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":4,"scrollX":true,"columnDefs":[],"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true,"lengthMenu":[4,10,25,50,100]},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script>
<div id="supprimez-la-deuxième-ligne-den-tête" class="section level4 unnumbered">
<h4>Supprimez la deuxième ligne d’en-tête</h4>
<p>Pour supprimer la deuxième ligne d’en-tête, vous devrez probablement importer les données deux fois.</p>
<ol style="list-style-type: decimal">
<li>Importez les données afin de stocker les bons noms des colonnes.</li>
<li>Importez à nouveau les données, en sautant les <em>deux</em> premières lignes (en-tête et deuxième ligne).</li>
<li>Reliez les noms corrects sur le cadre de données réduit.</li>
</ol>
<p>L’argument exact utilisé pour relier les bons noms de colonnes dépend du type de fichier de données (.csv, .tsv, .xlsx, etc.). Ceci est dû au fait que <strong>rio</strong> utilise une fonction différente pour les différents types de fichiers (voir le tableau ci-dessus).</p>
<p><strong>Pour les documents Excel:</strong> (<code>col_names =</code>)</p>
<div class="sourceCode" id="cb142"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb142-1"><a href="import_export.html#cb142-1" aria-hidden="true" tabindex="-1"></a><span class="co"># importer pour la première fois; stocker les noms des colonnes</span></span>
<span id="cb142-2"><a href="import_export.html#cb142-2" aria-hidden="true" tabindex="-1"></a>linelist_raw_names <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="st">&quot;linelist_raw.xlsx&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">names</span>()  <span class="co"># stocker les bons noms des colonnes</span></span>
<span id="cb142-3"><a href="import_export.html#cb142-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-4"><a href="import_export.html#cb142-4" aria-hidden="true" tabindex="-1"></a><span class="co"># importer pour la deuxième fois; sauter la deuxième ligne, et assigner les noms des colonnes à l&#39;argument col_names =</span></span>
<span id="cb142-5"><a href="import_export.html#cb142-5" aria-hidden="true" tabindex="-1"></a>linelist_raw <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="st">&quot;linelist_raw.xlsx&quot;</span>,</span>
<span id="cb142-6"><a href="import_export.html#cb142-6" aria-hidden="true" tabindex="-1"></a>                       <span class="at">skip =</span> <span class="dv">2</span>,</span>
<span id="cb142-7"><a href="import_export.html#cb142-7" aria-hidden="true" tabindex="-1"></a>                       <span class="at">col_names =</span> linelist_raw_names</span>
<span id="cb142-8"><a href="import_export.html#cb142-8" aria-hidden="true" tabindex="-1"></a>                       ) </span></code></pre></div>
<p><strong>Pour les fichiers CSV:</strong> (<code>col.names =</code>)</p>
<div class="sourceCode" id="cb143"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb143-1"><a href="import_export.html#cb143-1" aria-hidden="true" tabindex="-1"></a><span class="co"># importer pour la première fois; stocker les noms des colonnes</span></span>
<span id="cb143-2"><a href="import_export.html#cb143-2" aria-hidden="true" tabindex="-1"></a>linelist_raw_names <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="st">&quot;linelist_raw.csv&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">names</span>() <span class="co"># save true column names</span></span>
<span id="cb143-3"><a href="import_export.html#cb143-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb143-4"><a href="import_export.html#cb143-4" aria-hidden="true" tabindex="-1"></a><span class="co"># notez que l&#39;argument pour les fichiers CSV est &#39;col.names = &#39;</span></span>
<span id="cb143-5"><a href="import_export.html#cb143-5" aria-hidden="true" tabindex="-1"></a>linelist_raw <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="st">&quot;linelist_raw.csv&quot;</span>,</span>
<span id="cb143-6"><a href="import_export.html#cb143-6" aria-hidden="true" tabindex="-1"></a>                       <span class="at">skip =</span> <span class="dv">2</span>,</span>
<span id="cb143-7"><a href="import_export.html#cb143-7" aria-hidden="true" tabindex="-1"></a>                       <span class="at">col.names =</span> linelist_raw_names</span>
<span id="cb143-8"><a href="import_export.html#cb143-8" aria-hidden="true" tabindex="-1"></a>                       ) </span></code></pre></div>
<p><strong>Option de secours</strong> - changer les noms des colonnes à l’aide d’une commande additionnelle</p>
<div class="sourceCode" id="cb144"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb144-1"><a href="import_export.html#cb144-1" aria-hidden="true" tabindex="-1"></a><span class="co"># attribuer/supprimer des en-têtes en utilisant la fonction de base &#39;colnames()&#39;</span></span>
<span id="cb144-2"><a href="import_export.html#cb144-2" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(linelist_raw) <span class="ot">&lt;-</span> linelist_raw_names</span></code></pre></div>
</div>
<div id="créer-un-dictionnaire-de-données" class="section level4 unnumbered">
<h4>Créer un dictionnaire de données</h4>
<p>Bonus! Si vous avez une deuxième ligne qui est un dictionnaire de données, vous pouvez facilement créer un dictionnaire de données approprié à partir de celle-ci. Cette astuce est adaptée de cet <a href="https://alison.rbind.io/post/2018-02-23-read-multiple-header-rows/">article</a>.</p>
<div class="sourceCode" id="cb145"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb145-1"><a href="import_export.html#cb145-1" aria-hidden="true" tabindex="-1"></a>dict <span class="ot">&lt;-</span> linelist_2headers <span class="sc">%&gt;%</span>             <span class="co"># début: liste des case avec le dictionnaire en première ligne</span></span>
<span id="cb145-2"><a href="import_export.html#cb145-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">1</span>) <span class="sc">%&gt;%</span>                             <span class="co"># garder seulement les noms des colonnes et la premièere ligne étant le dictionnaire                </span></span>
<span id="cb145-3"><a href="import_export.html#cb145-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">everything</span>(),       <span class="co"># pivoter toutes les colonnes au format long</span></span>
<span id="cb145-4"><a href="import_export.html#cb145-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="st">&quot;Column&quot;</span>,       <span class="co"># définir de nouveaux noms pour les colonnes</span></span>
<span id="cb145-5"><a href="import_export.html#cb145-5" aria-hidden="true" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">&quot;Description&quot;</span>)</span></code></pre></div>
<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-78dfca9d0b2c1c243dae" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-78dfca9d0b2c1c243dae">{"x":{"filter":"top","vertical":false,"filterHTML":"<tr>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","data":[["case_id","generation","date_infection","date_onset","date_hospitalisation","date_outcome","outcome","gender","age","age_unit","age_years","age_cat","age_cat5","hospital","lon","lat","infector","source","wt_kg","ht_cm","ct_blood","fever","chills","cough","aches","vomit","temp","time_admission","bmi","days_onset_hosp"],["case identification number assigned by MOH","transmission chain generation number","estimated date of infection, mm/dd/yyyy","date of symptom onset, YYYY-MM-DD","date of initial hospitalization, mm/dd/yyyy","date of outcome status determination","either 'Death' or 'Recovered' or 'Unknown'","either 'm' or 'f' or 'unknown'","age number","age unit, either 'years' or 'months' or 'days'",null,null,null,"Name of hospital of first admission","longitude of residence, approx","latitude of residence, approx","case_id of infector","context of known transmission event",null,null,null,"presence of fever on admission, either 'yes' or 'no'","presence of chills on admission, either 'yes' or 'no'","presence of cough on admission, either 'yes' or 'no'","presence of aches on admission, either 'yes' or 'no'","presence of vomiting on admission, either 'yes' or 'no'",null,"time of hospital admission HH:MM",null,null]],"container":"<table class=\"white-space: nowrap\">\n  <thead>\n    <tr>\n      <th>Column<\/th>\n      <th>Description<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":4,"scrollX":true,"columnDefs":[],"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true,"lengthMenu":[4,10,25,50,100]},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="combiner-les-deux-lignes-den-tête" class="section level4 unnumbered">
<h4>Combiner les deux lignes d’en-tête</h4>
<p>Dans certains cas, lorsque votre ensemble de données brutes comporte <em>deux</em> lignes d’en-tête (ou plus précisément, la deuxième ligne de données est un en-tête secondaire), vous pouvez souhaiter les “combiner” ou ajouter les valeurs de la deuxième ligne d’en-tête à la première ligne d’en-tête.</p>
<p>La commande ci-dessous définit les noms des colonnes du cadre de données comme la combinaison (collage) des premiers en-têtes (vrais) avec la valeur située immédiatement en dessous (dans la première ligne).</p>
<div class="sourceCode" id="cb146"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb146-1"><a href="import_export.html#cb146-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(my_data) <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="fu">names</span>(my_data), my_data[<span class="dv">1</span>, ], <span class="at">sep =</span> <span class="st">&quot;_&quot;</span>)</span></code></pre></div>
<!-- ======================================================= -->
</div>
</div>
<div id="feuille-de-calcul-google" class="section level3 unnumbered">
<h3>Feuille de calcul Google</h3>
<p>Vous pouvez importer des données à partir d’une feuille de calcul Google en ligne avec le paquet <strong>googlesheet4</strong> et en authentifiant votre accès à la feuille de calcul.</p>
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb147-1"><a href="import_export.html#cb147-1" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(<span class="st">&quot;googlesheets4&quot;</span>)</span></code></pre></div>
<p>Ci-dessous, une feuille de calcul Google de démonstration est importée et sauvegardée. Cette commande peut vous demander de confirmer l’authentification de votre compte Google. Suivez les insTIPtions et les fenêtres contextuelles de votre navigateur Internet pour accorder aux packages API Tidyverse les autorisations de modifier, créer et supprimer vos feuilles de calcul dans Google Drive.</p>
<p>La feuille ci-dessous est “consultable par toute personne ayant le lien” et vous pouvez essayer de l’importer.</p>
<div class="sourceCode" id="cb148"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb148-1"><a href="import_export.html#cb148-1" aria-hidden="true" tabindex="-1"></a>Gsheets_demo <span class="ot">&lt;-</span> <span class="fu">read_sheet</span>(<span class="st">&quot;https://docs.google.com/spreadsheets/d/1scgtzkVLLHAe5a6_eFQEwkZcc14yFUx1KgOMZ4AKUfY/edit#gid=0&quot;</span>)</span></code></pre></div>
<p>La feuille ci-dessous est “consultable par toute personne ayant le lien” et vous pouvez essayer de l’importer.</p>
<div class="sourceCode" id="cb149"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb149-1"><a href="import_export.html#cb149-1" aria-hidden="true" tabindex="-1"></a>Gsheets_demo <span class="ot">&lt;-</span> <span class="fu">read_sheet</span>(<span class="st">&quot;1scgtzkVLLHAe5a6_eFQEwkZcc14yFUx1KgOMZ4AKUfY&quot;</span>)</span></code></pre></div>
<p>Un autre package, <strong>googledrive</strong>, propose des fonctions utiles pour écrire, modifier et supprimer des feuilles Google. Par exemple, en utilisant les fonctions <code>gs4_create()</code> et <code>sheet_write()</code> trouvées dans ce package.</p>
<p>Voici d’autres tutoriels en ligne utiles:<br />
<a href="https://arbor-analytics.com/post/getting-your-data-into-r-from-google-sheets/">Tutoriel de base sur l’importation de feuilles de calcul Google sheets</a><br />
<a href="https://googlesheets4.tidyverse.org/articles/googlesheets4.html">tutoriel plus détaillé</a><br />
<a href="https://googlesheets4.tidyverse.org/articles/articles/drive-and-sheets.html">intéraction entre googlesheets4 et tidyverse</a></p>
</div>
</div>
<div id="fichiers-multiples---importation-exportation-fractionnement-combinaison" class="section level2" number="7.6">
<h2><span class="header-section-number">7.6</span> Fichiers multiples - importation, exportation, fractionnement, combinaison</h2>
<p>Consultez la page <a href="iteration.html#iteration">Itération, boucles et listes</a> pour obtenir des exemples sur la manière d’importer et de combiner plusieurs fichiers, ou plusieurs fichiers de classeur Excel. Cette page contient également des exemples sur la façon de diviser un cadre de données en plusieurs parties et d’exporter chacune d’entre elles séparément, ou en tant que feuilles nommées dans un classeur Excel.</p>
<!-- ======================================================= -->
</div>
<div id="import_github" class="section level2" number="7.7">
<h2><span class="header-section-number">7.7</span> Importer de Github</h2>
<p>L’importation de données directement de Github dans R peut être très facile ou nécessiter quelques étapes, selon le type de fichier. Voici quelques approches:</p>
<div id="fichiers-csv" class="section level3 unnumbered">
<h3>Fichiers CSV</h3>
<p>Il peut être facile d’importer un fichier .csv directement de Github dans R avec une commande R.</p>
<ol style="list-style-type: decimal">
<li>Allez sur le repo Github, localisez le fichier qui vous intéresse et cliquez dessus.<br />
</li>
<li>Cliquez sur le bouton “Raw” (vous verrez alors les données csv “brutes”, comme indiqué ci-dessous)<br />
</li>
<li>Copiez l’adresse URL<br />
</li>
<li>Placez l’URL entre guillemets dans la commande R <code>import()</code></li>
</ol>
<p><img src="images/download_csv_raw.png" width="100%" style="display: block; margin: auto auto auto 0;" /></p>
</div>
<div id="fichiers-xlsx" class="section level3 unnumbered">
<h3>Fichiers XLSX</h3>
<p>Il se peut que vous ne puissiez pas visualiser les données “brutes” pour certains fichiers (e.x. .xlsx, .rds, .nwk, .shp)</p>
<ol style="list-style-type: decimal">
<li>Allez sur le repo Github, localisez le fichier qui vous intéresse et cliquez dessus.<br />
</li>
<li>Cliquez sur le bouton “Download”, comme indiqué ci-dessous<br />
</li>
<li>Sauvegardez le fichier sur votre ordinateur, et importez-le dans R</li>
</ol>
<p><img src="images/download_xlsx.png" width="100%" style="display: block; margin: auto auto auto 0;" /></p>
</div>
<div id="shapefiles" class="section level3 unnumbered">
<h3>Shapefiles</h3>
<p>Les fichiers Shapefiles comportent de nombreux sous-fichiers, chacun avec une extension de fichier différente. Un fichier aura l’extension “.shp”, mais d’autres peuvent avoir “.dbf”, “.prj”, etc. Pour télécharger un shapefile à partir de Github, vous devrez télécharger chacun des fichiers de sous-composants individuellement, et les enregistrer dans le <em>même</em> dossier sur votre ordinateur. Dans Github, cliquez sur chaque fichier individuellement et téléchargez-les en cliquant sur le bouton ” Download “.</p>
<p>Une fois enregistré sur votre ordinateur, vous pouvez importer le shapefile comme indiqué sur la page <a href="gis.html#gis">Bases de SIG</a> <code>st_read()</code> du paquet <strong>sf</strong>. Il vous suffit de fournir le chemin d’accès et le nom du fichier ” .shp “, à condition que les fichiers associés se trouvent dans le même dossier sur votre ordinateur.</p>
<p>Ci-dessous, vous pouvez voir comment le shapefile “sle_adm3” se compose de plusieurs fichiers, chacun devant être téléchargé depuis Github.</p>
<p><img src="images/download_shp.png" width="100%" style="display: block; margin: auto auto auto 0;" /></p>
<!-- ======================================================= -->
</div>
</div>
<div id="entrée-de-données-de-façon-manuelle" class="section level2" number="7.8">
<h2><span class="header-section-number">7.8</span> Entrée de données de façon manuelle</h2>
<div id="entrée-par-lignes" class="section level3 unnumbered">
<h3>Entrée par lignes</h3>
<p>Utilisez la fonction <code>tribble</code> du paquet <strong>tibble</strong> du tidyverse, <a href="https://tibble.tidyverse.org/reference/tribble.html">ici un référence tibble en ligne</a></p>
<p>Notez que les en-têtes de colonne commencent par une <em>tilde</em> (<code>~</code>). Notez également que chaque colonne ne doit contenir qu’une seule classe de données (caractère, numérique, etc.). Vous pouvez utiliser des tabulations, des espaces et de nouvelles lignes pour rendre la saisie des données plus intuitive et plus lisible. Les espaces ne comptent pas entre les valeurs, mais chaque ligne est représentée par une nouvelle ligne de code. Par exemple:</p>
<div class="sourceCode" id="cb150"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb150-1"><a href="import_export.html#cb150-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create the dataset manually by row</span></span>
<span id="cb150-2"><a href="import_export.html#cb150-2" aria-hidden="true" tabindex="-1"></a>manual_entry_rows <span class="ot">&lt;-</span> tibble<span class="sc">::</span><span class="fu">tribble</span>(</span>
<span id="cb150-3"><a href="import_export.html#cb150-3" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span>colA, <span class="sc">~</span>colB,</span>
<span id="cb150-4"><a href="import_export.html#cb150-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;a&quot;</span>,   <span class="dv">1</span>,</span>
<span id="cb150-5"><a href="import_export.html#cb150-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;b&quot;</span>,   <span class="dv">2</span>,</span>
<span id="cb150-6"><a href="import_export.html#cb150-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;c&quot;</span>,   <span class="dv">3</span></span>
<span id="cb150-7"><a href="import_export.html#cb150-7" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<p>Et maintenant nous affichons le nouveau jeu de données:</p>
<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-55cf901dcdfa72e7f53c" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-55cf901dcdfa72e7f53c">{"x":{"filter":"none","vertical":false,"data":[["1","2","3"],["a","b","c"],[1,2,3]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>colA<\/th>\n      <th>colB<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":2},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="entrée-par-colonnes" class="section level3 unnumbered">
<h3>Entrée par colonnes</h3>
<p>Étant donné qu’un cadre de données est constitué de vecteurs (colonnes verticales), l’approche <strong>de base</strong> de la création manuelle de cadres de données dans R prévoit que vous définissiez chaque colonne, puis que vous les reliiez entre elles. Cela peut être contre-intuitif en épidémiologie, car nous pensons généralement à nos données en lignes (comme ci-dessus).</p>
<div class="sourceCode" id="cb151"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb151-1"><a href="import_export.html#cb151-1" aria-hidden="true" tabindex="-1"></a><span class="co"># define each vector (vertical column) separately, each with its own name</span></span>
<span id="cb151-2"><a href="import_export.html#cb151-2" aria-hidden="true" tabindex="-1"></a>PatientID <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">235</span>, <span class="dv">452</span>, <span class="dv">778</span>, <span class="dv">111</span>)</span>
<span id="cb151-3"><a href="import_export.html#cb151-3" aria-hidden="true" tabindex="-1"></a>Treatment <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Yes&quot;</span>, <span class="st">&quot;No&quot;</span>, <span class="st">&quot;Yes&quot;</span>, <span class="st">&quot;Yes&quot;</span>)</span>
<span id="cb151-4"><a href="import_export.html#cb151-4" aria-hidden="true" tabindex="-1"></a>Death     <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">0</span>)</span></code></pre></div>
<p><span style="color: orange;"><strong><em>ATTENTION:</em></strong> Tous les vecteurs doivent avoir la même longueur (même nombre de valeurs).</span></p>
<p>Les vecteurs peuvent ensuite être liés entre eux à l’aide de la fonction <code>data.frame()</code>:</p>
<div class="sourceCode" id="cb152"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb152-1"><a href="import_export.html#cb152-1" aria-hidden="true" tabindex="-1"></a><span class="co"># combiner les colonnes dans un cadre de données, en référençant les noms de vecteurs</span></span>
<span id="cb152-2"><a href="import_export.html#cb152-2" aria-hidden="true" tabindex="-1"></a>manual_entry_cols <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(PatientID, Treatment, Death)</span></code></pre></div>
<p>Et maintenant nous affichons le nouveau jeu de données:</p>
<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-45f676752efcea85db60" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-45f676752efcea85db60">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4"],[235,452,778,111],["Yes","No","Yes","Yes"],[1,0,1,0]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>PatientID<\/th>\n      <th>Treatment<\/th>\n      <th>Death<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[1,3]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="collage-à-partir-du-presse-papiers" class="section level3 unnumbered">
<h3>Collage à partir du presse-papiers</h3>
<p>Si vous copiez des données d’un autre endroit et que vous les avez dans votre presse-papiers, vous pouvez essayer l’une des deux méthodes ci-dessous :</p>
<p>A partir du package <strong>clipr</strong>, vous pouvez utiliser <code>read_clip_tbl()</code> pour importer comme un cadre de données, ou simplement <code>read_clip()</code> pour importer comme un vecteur de caractères. Dans les deux cas, laissez les parenthèses vides.</p>
<div class="sourceCode" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb153-1"><a href="import_export.html#cb153-1" aria-hidden="true" tabindex="-1"></a>linelist <span class="ot">&lt;-</span> clipr<span class="sc">::</span><span class="fu">read_clip_tbl</span>()  <span class="co"># importe le presse-papiers actuel comme cadre de données</span></span>
<span id="cb153-2"><a href="import_export.html#cb153-2" aria-hidden="true" tabindex="-1"></a>linelist <span class="ot">&lt;-</span> clipr<span class="sc">::</span><span class="fu">read_clip</span>()      <span class="co"># importations en tant que vecteur de caractères</span></span></code></pre></div>
<p>Vous pouvez aussi facilement exporter vers le presse-papiers de votre système avec <strong>clipr</strong>. Voir la section ci-dessous sur l’Exportation.</p>
<p>Alternativement, vous pouvez utiliser la fonction <code>read.table()</code> de <strong>base</strong> R avec <code>file = "clipboard")</code> pour importer comme un cadre de données:</p>
<div class="sourceCode" id="cb154"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb154-1"><a href="import_export.html#cb154-1" aria-hidden="true" tabindex="-1"></a>df_from_clipboard <span class="ot">&lt;-</span> <span class="fu">read.table</span>(</span>
<span id="cb154-2"><a href="import_export.html#cb154-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">file =</span> <span class="st">&quot;clipboard&quot;</span>,  <span class="co"># specify this as &quot;clipboard&quot;</span></span>
<span id="cb154-3"><a href="import_export.html#cb154-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">sep =</span> <span class="st">&quot;t&quot;</span>,           <span class="co"># separator could be tab, or commas, etc.</span></span>
<span id="cb154-4"><a href="import_export.html#cb154-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">header=</span><span class="cn">TRUE</span>)         <span class="co"># if there is a header row</span></span></code></pre></div>
</div>
</div>
<div id="importer-le-fichier-le-plus-récent" class="section level2" number="7.9">
<h2><span class="header-section-number">7.9</span> Importer le fichier le plus récent</h2>
<p>Il arrive souvent que vous receviez des mises à jour quotidiennes de vos ensembles de données. Dans ce cas, vous voudrez écrire un code qui importe le fichier le plus récent. Nous présentons ci-dessous deux façons d’aborder cette question:</p>
<ul>
<li>Sélection du fichier en fonction de la date figurant dans le nom du fichier<br />
</li>
<li>Sélection du fichier sur la base des métadonnées du fichier (dernière modification)</li>
</ul>
<div id="dates-dans-le-nom-du-fichier" class="section level3 unnumbered">
<h3>Dates dans le nom du fichier</h3>
<p>Cette approche repose sur trois prémisses:</p>
<ol style="list-style-type: decimal">
<li>Vous faites confiance aux dates dans les noms de fichiers<br />
</li>
<li>Les dates sont numériques et apparaissent <em>généralement</em> dans le même format (par exemple, année, mois, jour)<br />
</li>
<li>Il n’y a pas d’autres chiffres dans le nom du fichier</li>
</ol>
<p>Nous vous expliquerons chaque étape, puis nous vous les montrerons combinées à la fin.</p>
<p>Tout d’abord, utilisez <code>dir()</code> de <strong>base</strong> R pour extraire uniquement les noms de fichiers pour chaque fichier dans le dossier qui vous intéresse. Pour plus de détails sur <code>dir()</code>, consultez la page sur <a href="directories.html#directories">Interactions avec les répertoires</a>. Dans cet exemple, le dossier concerné est le dossier ” linelists ” situé dans le dossier ” example ” situé dans ” data ” au sein du projet R.</p>
<div class="sourceCode" id="cb155"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb155-1"><a href="import_export.html#cb155-1" aria-hidden="true" tabindex="-1"></a>linelist_filenames <span class="ot">&lt;-</span> <span class="fu">dir</span>(<span class="fu">here</span>(<span class="st">&quot;data&quot;</span>, <span class="st">&quot;example&quot;</span>, <span class="st">&quot;linelists&quot;</span>)) <span class="co"># get file names from folder</span></span>
<span id="cb155-2"><a href="import_export.html#cb155-2" aria-hidden="true" tabindex="-1"></a>linelist_filenames                                              <span class="co"># print</span></span></code></pre></div>
<pre><code>## [1] &quot;20201007linelist.csv&quot;          &quot;case_linelist_2020-10-02.csv&quot;  &quot;case_linelist_2020-10-03.csv&quot;  &quot;case_linelist_2020-10-04.csv&quot; 
## [5] &quot;case_linelist_2020-10-05.csv&quot;  &quot;case_linelist_2020-10-08.xlsx&quot; &quot;case_linelist20201006.csv&quot;</code></pre>
<p>Une fois que vous avez ce vecteur de noms, vous pouvez en extraire les dates en appliquant <code>str_extract()</code> de <strong>stringr</strong> en utilisant cette expression régulière. Elle extrait tous les nombres dans le nom de fichier (y compris tout autre caractère au milieu comme les tirets ou les barres obliques). Vous pouvez en savoir plus sur <strong>stringr</strong> à la page <a href="#character_stings">Caractères et chaînes de caractères</a>.</p>
<div class="sourceCode" id="cb157"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb157-1"><a href="import_export.html#cb157-1" aria-hidden="true" tabindex="-1"></a>linelist_dates_raw <span class="ot">&lt;-</span> stringr<span class="sc">::</span><span class="fu">str_extract</span>(linelist_filenames, <span class="st">&quot;[0-9].*[0-9]&quot;</span>) <span class="co"># extract numbers and any characters in between</span></span>
<span id="cb157-2"><a href="import_export.html#cb157-2" aria-hidden="true" tabindex="-1"></a>linelist_dates_raw  <span class="co"># print</span></span></code></pre></div>
<pre><code>## [1] &quot;20201007&quot;   &quot;2020-10-02&quot; &quot;2020-10-03&quot; &quot;2020-10-04&quot; &quot;2020-10-05&quot; &quot;2020-10-08&quot; &quot;20201006&quot;</code></pre>
<p>En supposant que les dates sont généralement écrites dans le même format (par exemple, Année puis Mois puis Jour) et que les années ont 4 chiffres, vous pouvez utiliser les fonctions de conversion flexibles de <strong>lubridate</strong> (<code>ymd()</code>, <code>dmy()</code>, ou <code>mdy()</code>) pour les convertir en dates. Pour ces fonctions, les tirets, les espaces ou les barres obliques n’ont pas d’importance, seul l’ordre des chiffres compte. Pour en savoir plus, consultez la page <a href="#dates">Manipuler les dates</a>.</p>
<div class="sourceCode" id="cb159"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb159-1"><a href="import_export.html#cb159-1" aria-hidden="true" tabindex="-1"></a>linelist_dates_clean <span class="ot">&lt;-</span> lubridate<span class="sc">::</span><span class="fu">ymd</span>(linelist_dates_raw)</span>
<span id="cb159-2"><a href="import_export.html#cb159-2" aria-hidden="true" tabindex="-1"></a>linelist_dates_clean</span></code></pre></div>
<pre><code>## [1] &quot;2020-10-07&quot; &quot;2020-10-02&quot; &quot;2020-10-03&quot; &quot;2020-10-04&quot; &quot;2020-10-05&quot; &quot;2020-10-08&quot; &quot;2020-10-06&quot;</code></pre>
<p>La fonction R <strong>base</strong> <code>which.max()</code> peut alors être utilisée pour retourner la position de l’index (par exemple, 1ère, 2ème, 3ème, …) de la valeur maximale de la date. Le dernier fichier est correctement identifié comme étant le 6ème fichier - “case_linelist_2020-10-08.xlsx”.</p>
<div class="sourceCode" id="cb161"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb161-1"><a href="import_export.html#cb161-1" aria-hidden="true" tabindex="-1"></a>index_latest_file <span class="ot">&lt;-</span> <span class="fu">which.max</span>(linelist_dates_clean)</span>
<span id="cb161-2"><a href="import_export.html#cb161-2" aria-hidden="true" tabindex="-1"></a>index_latest_file</span></code></pre></div>
<pre><code>## [1] 6</code></pre>
<p>Si nous condensons toutes ces commandes, le code complet pourrait ressembler à ce qui suit. Notez que le <code>.</code> de la dernière ligne est un caractère de remplacement pour l’objet pipé à ce point de la séquence de pipelines. A ce stade, la valeur est simplement le nombre 6. Celui-ci est placé entre doubles crochets pour extraire le 6ème élément du vecteur de noms de fichiers produit par <code>dir()</code>.</p>
<div class="sourceCode" id="cb163"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb163-1"><a href="import_export.html#cb163-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Charger les packages</span></span>
<span id="cb163-2"><a href="import_export.html#cb163-2" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(</span>
<span id="cb163-3"><a href="import_export.html#cb163-3" aria-hidden="true" tabindex="-1"></a>  tidyverse,         <span class="co"># data management</span></span>
<span id="cb163-4"><a href="import_export.html#cb163-4" aria-hidden="true" tabindex="-1"></a>  stringr,           <span class="co"># work with strings/characters</span></span>
<span id="cb163-5"><a href="import_export.html#cb163-5" aria-hidden="true" tabindex="-1"></a>  lubridate,         <span class="co"># work with dates</span></span>
<span id="cb163-6"><a href="import_export.html#cb163-6" aria-hidden="true" tabindex="-1"></a>  rio,               <span class="co"># import / export</span></span>
<span id="cb163-7"><a href="import_export.html#cb163-7" aria-hidden="true" tabindex="-1"></a>  here,              <span class="co"># relative file paths</span></span>
<span id="cb163-8"><a href="import_export.html#cb163-8" aria-hidden="true" tabindex="-1"></a>  fs)                <span class="co"># directory interactions</span></span>
<span id="cb163-9"><a href="import_export.html#cb163-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-10"><a href="import_export.html#cb163-10" aria-hidden="true" tabindex="-1"></a><span class="co"># extraire le nom de fichier du dernier fichier</span></span>
<span id="cb163-11"><a href="import_export.html#cb163-11" aria-hidden="true" tabindex="-1"></a>latest_file <span class="ot">&lt;-</span> <span class="fu">dir</span>(<span class="fu">here</span>(<span class="st">&quot;data&quot;</span>, <span class="st">&quot;example&quot;</span>, <span class="st">&quot;linelists&quot;</span>)) <span class="sc">%&gt;%</span>  <span class="co"># noms du fichier du sous-dossier &quot;linelists&quot;          </span></span>
<span id="cb163-12"><a href="import_export.html#cb163-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_extract</span>(<span class="st">&quot;[0-9].*[0-9]&quot;</span>) <span class="sc">%&gt;%</span>                  <span class="co"># extraire les dates (nombres)</span></span>
<span id="cb163-13"><a href="import_export.html#cb163-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ymd</span>() <span class="sc">%&gt;%</span>                                        <span class="co"># convertir les nombres en dates (assumant le format année-mois-jour)</span></span>
<span id="cb163-14"><a href="import_export.html#cb163-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">which.max</span>() <span class="sc">%&gt;%</span>                                  <span class="co"># obtenir l&#39;index de la date maximale (dernier fichier)</span></span>
<span id="cb163-15"><a href="import_export.html#cb163-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dir</span>(<span class="fu">here</span>(<span class="st">&quot;data&quot;</span>, <span class="st">&quot;example&quot;</span>, <span class="st">&quot;linelists&quot;</span>))[[.]]              <span class="co"># retourne le nom de fichier de la dernière liste de diffusion</span></span>
<span id="cb163-16"><a href="import_export.html#cb163-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-17"><a href="import_export.html#cb163-17" aria-hidden="true" tabindex="-1"></a>latest_file  <span class="co"># imprimer le nom du dernier fichier</span></span></code></pre></div>
<pre><code>## [1] &quot;case_linelist_2020-10-08.xlsx&quot;</code></pre>
<p>Vous pouvez maintenant utiliser ce nom pour terminer le chemin de fichier relatif, avec <code>here()</code>:</p>
<div class="sourceCode" id="cb165"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb165-1"><a href="import_export.html#cb165-1" aria-hidden="true" tabindex="-1"></a><span class="fu">here</span>(<span class="st">&quot;data&quot;</span>, <span class="st">&quot;example&quot;</span>, <span class="st">&quot;linelists&quot;</span>, latest_file) </span></code></pre></div>
<p>Et vous pouvez maintenant importer le dernier fichier:</p>
<div class="sourceCode" id="cb166"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb166-1"><a href="import_export.html#cb166-1" aria-hidden="true" tabindex="-1"></a><span class="co"># import</span></span>
<span id="cb166-2"><a href="import_export.html#cb166-2" aria-hidden="true" tabindex="-1"></a><span class="fu">import</span>(<span class="fu">here</span>(<span class="st">&quot;data&quot;</span>, <span class="st">&quot;example&quot;</span>, <span class="st">&quot;linelists&quot;</span>, latest_file)) <span class="co"># import </span></span></code></pre></div>
</div>
<div id="utiliser-linformation-du-fichier" class="section level3 unnumbered">
<h3>Utiliser l’information du fichier</h3>
<p>Si vos fichiers n’ont pas de date dans leur nom (ou si vous ne faites pas confiance à ces dates), vous pouvez essayer d’extraire la date de dernière modification à partir des métadonnées du fichier. Utilisez les fonctions du paquet <strong>fs</strong> pour examiner les informations des métadonnées de chaque fichier, qui comprennent l’heure de dernière modification et le chemin d’accès au fichier.</p>
<p>Ci-dessous, nous fournissons le dossier d’intérêt à la fonction <code>dir_info()</code> de <strong>fs</strong>. Dans ce cas, le dossier d’intérêt se trouve dans le projet R dans le dossier “data”, le sous-dossier “example”, et son sous-dossier “linelists”. Le résultat est un cadre de données avec une ligne par fichier et des colonnes pour <code>modification_time</code>, <code>path</code>, etc. Vous pouvez voir un exemple visuel de ceci dans la page sur <a href="directories.html#directories">Interactions avec les répertoires</a>.</p>
<p>Nous pouvons trier ce cadre de données de fichiers par la colonne <code>modification_time</code>, et ensuite ne garder que la ligne (fichier) la plus haute/la plus récente avec la fonction <strong>base</strong> de R <code>head()</code>. Ensuite, nous pouvons extraire le chemin d’accès de ce dernier fichier uniquement avec la fonction <strong>dplyr</strong> <code>pull()</code> sur la colonne <code>path</code>. Enfin, nous pouvons passer ce chemin de fichier à <code>import()</code>. Le fichier importé est enregistré sous le nom de <code>latest_file</code>.</p>
<div class="sourceCode" id="cb167"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb167-1"><a href="import_export.html#cb167-1" aria-hidden="true" tabindex="-1"></a>latest_file <span class="ot">&lt;-</span> <span class="fu">dir_info</span>(<span class="fu">here</span>(<span class="st">&quot;data&quot;</span>, <span class="st">&quot;example&quot;</span>, <span class="st">&quot;linelists&quot;</span>)) <span class="sc">%&gt;%</span>  <span class="co"># collecte des informations sur tous les fichiers du répertoire</span></span>
<span id="cb167-2"><a href="import_export.html#cb167-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(modification_time)) <span class="sc">%&gt;%</span>      <span class="co"># trier par temps de modification</span></span>
<span id="cb167-3"><a href="import_export.html#cb167-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">1</span>) <span class="sc">%&gt;%</span>                               <span class="co"># ne conserver que le fichier le plus récent</span></span>
<span id="cb167-4"><a href="import_export.html#cb167-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(path) <span class="sc">%&gt;%</span>                            <span class="co"># extraire uniquement le chemin du fichier</span></span>
<span id="cb167-5"><a href="import_export.html#cb167-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">import</span>()                                  <span class="co"># importer le fichier</span></span></code></pre></div>
<!-- ======================================================= -->
</div>
</div>
<div id="import_api" class="section level2" number="7.10">
<h2><span class="header-section-number">7.10</span> APIs</h2>
<p>Une “interface de programmation automatisée” (API) peut être utilisée pour demander directement des données à un site web. Les API sont un ensemble de règles qui permettent à une application logicielle d’interagir avec une autre. Le client (vous) envoie une “requête” et reçoit une “réponse” contenant du contenu. Les packages R <strong>httr</strong> et <strong>jsonlite</strong> peuvent faciliter ce processus.</p>
<p>Chaque site Web compatible avec l’API possède sa propre documentation et ses propres spécificités avec lesquelles il faut se familiariser. Certains sites sont accessibles au public et peuvent être consultés par n’importe qui. D’autres, comme les plates-formes avec des identifiants et des références d’utilisateur, nécessitent une authentification pour accéder à leurs données.</p>
<p>Il va sans dire qu’il est nécessaire de disposer d’une connexion Internet pour importer des données via l’API. Nous donnerons brièvement des exemples d’utilisation des API pour importer des données, et nous vous renverrons à d’autres ressources.</p>
<p><em>Note : rappelons que les données peuvent être</em> affichées* sur un site web sans API, ce qui peut être plus facile à récupérer. Par exemple, un fichier CSV affiché peut être accessible simplement en fournissant l’URL du site à <code>import()</code> comme décrit dans la section sur <a href="import_export.html#import_github">importation de Github</a>.*</p>
<div id="requête-http" class="section level3 unnumbered">
<h3>Requête HTTP</h3>
<p>L’échange d’API se fait le plus souvent par le biais d’une requête HTTP. HTTP, qui signifie Hypertext Transfer Protocol, est le format sous-jacent d’une demande/réponse entre un client et un serveur. Les données d’entrée et de sortie exactes peuvent varier en fonction du type d’API, mais le processus est le même : une “demande” (souvent une requête HTTP) de la part de l’utilisateur, contenant souvent une requête, suivie d’une “réponse”, contenant des informations d’état sur la demande et éventuellement le contenu demandé.</p>
<p>Voici quelques éléments d’une <em>requête HTTP</em>:</p>
<ul>
<li>L’URL du point de terminaison de l’API<br />
</li>
<li>La “Méthode” (ou “Verbe”)<br />
</li>
<li>En-tête<br />
</li>
<li>Corps</li>
</ul>
<p>La “méthode” de la requête HTTP est l’action que vous voulez effectuer. Les deux méthodes HTTP les plus courantes sont <code>GET</code> et <code>POST</code> mais d’autres peuvent inclure <code>PUT</code>, <code>DELETE</code>, <code>PATCH</code>, etc. Lorsque vous importez des données dans R, il est très probable que vous utilisiez la méthode <code>GET</code>.</p>
<p>Après votre requête, votre ordinateur recevra une “réponse” dans un format similaire à celui que vous avez envoyé, comprenant l’URL, l’état HTTP (l’état 200 est ce que vous voulez !), le type de fichier, la taille et le contenu souhaité. Vous devrez ensuite analyser cette réponse et la transformer en un cadre de données exploitable dans votre environnement R.</p>
</div>
<div id="packages-1" class="section level3 unnumbered">
<h3>Packages</h3>
<p>Le package <strong>httr</strong> fonctionne bien pour traiter les requêtes HTTP dans R. Il nécessite peu de connaissances préalables sur les API Web et peut être utilisé par des personnes moins familières avec la terminologie du développement logiciel. En outre, si la réponse HTTP est un fichier .json, vous pouvez utiliser <strong>jsonlite</strong> pour analyser la réponse.</p>
<div class="sourceCode" id="cb168"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb168-1"><a href="import_export.html#cb168-1" aria-hidden="true" tabindex="-1"></a><span class="co"># load packages</span></span>
<span id="cb168-2"><a href="import_export.html#cb168-2" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(httr, jsonlite, tidyverse)</span></code></pre></div>
</div>
<div id="données-disponibles-au-public" class="section level3 unnumbered">
<h3>Données disponibles au public</h3>
<p>Voici un exemple de requête HTTP, emprunté à un tutoriel du site <a href="https://www.trafforddatalab.io/open_data_companion/#A_quick_introduction_to_APIs">the Trafford Data Lab</a>. Ce site propose plusieurs autres ressources pour apprendre et des exercices API.</p>
<p>Scénario : Nous souhaitons importer une liste des établissements de restauration rapide de la ville de Trafford, au Royaume-Uni. Les données sont accessibles à partir de l’API de la Food Standards Agency, qui fournit des données sur l’évaluation de l’hygiène alimentaire au Royaume-Uni.</p>
<p>Voici les paramètres de notre requête :</p>
<ul>
<li>Verbe HTTP: GET<br />
</li>
<li>URL du point d’accès à l’API: <a href="http://api.ratings.food.gov.uk/Establishments" class="uri">http://api.ratings.food.gov.uk/Establishments</a><br />
</li>
<li>Paramètres sélectionnés: name, address, longitude, latitude, businessTypeId, ratingKey, localAuthorityId<br />
</li>
<li>En-tête: “x-api-version”, 2<br />
</li>
<li>Format(s) des données: JSON, XML<br />
</li>
<li>Documentation: <a href="http://api.ratings.food.gov.uk/help" class="uri">http://api.ratings.food.gov.uk/help</a></li>
</ul>
<p>Le code R serait le suivant:</p>
<div class="sourceCode" id="cb169"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb169-1"><a href="import_export.html#cb169-1" aria-hidden="true" tabindex="-1"></a><span class="co"># préparer la requête</span></span>
<span id="cb169-2"><a href="import_export.html#cb169-2" aria-hidden="true" tabindex="-1"></a>path <span class="ot">&lt;-</span> <span class="st">&quot;http://api.ratings.food.gov.uk/Establishments&quot;</span></span>
<span id="cb169-3"><a href="import_export.html#cb169-3" aria-hidden="true" tabindex="-1"></a>request <span class="ot">&lt;-</span> <span class="fu">GET</span>(<span class="at">url =</span> path,</span>
<span id="cb169-4"><a href="import_export.html#cb169-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">query =</span> <span class="fu">list</span>(</span>
<span id="cb169-5"><a href="import_export.html#cb169-5" aria-hidden="true" tabindex="-1"></a>               <span class="at">localAuthorityId =</span> <span class="dv">188</span>,</span>
<span id="cb169-6"><a href="import_export.html#cb169-6" aria-hidden="true" tabindex="-1"></a>               <span class="at">BusinessTypeId =</span> <span class="dv">7844</span>,</span>
<span id="cb169-7"><a href="import_export.html#cb169-7" aria-hidden="true" tabindex="-1"></a>               <span class="at">pageNumber =</span> <span class="dv">1</span>,</span>
<span id="cb169-8"><a href="import_export.html#cb169-8" aria-hidden="true" tabindex="-1"></a>               <span class="at">pageSize =</span> <span class="dv">5000</span>),</span>
<span id="cb169-9"><a href="import_export.html#cb169-9" aria-hidden="true" tabindex="-1"></a>             <span class="fu">add_headers</span>(<span class="st">&quot;x-api-version&quot;</span> <span class="ot">=</span> <span class="st">&quot;2&quot;</span>))</span>
<span id="cb169-10"><a href="import_export.html#cb169-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb169-11"><a href="import_export.html#cb169-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Vérifier s&#39;il y a une erreur de serveur (&quot;200&quot; est bon !)</span></span>
<span id="cb169-12"><a href="import_export.html#cb169-12" aria-hidden="true" tabindex="-1"></a>request<span class="sc">$</span>status_code</span>
<span id="cb169-13"><a href="import_export.html#cb169-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb169-14"><a href="import_export.html#cb169-14" aria-hidden="true" tabindex="-1"></a><span class="co"># soumettre la requête, analyser la réponse et la convertir en un cadre de données</span></span>
<span id="cb169-15"><a href="import_export.html#cb169-15" aria-hidden="true" tabindex="-1"></a>response <span class="ot">&lt;-</span> <span class="fu">content</span>(request, <span class="at">as =</span> <span class="st">&quot;text&quot;</span>, <span class="at">encoding =</span> <span class="st">&quot;UTF-8&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb169-16"><a href="import_export.html#cb169-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fromJSON</span>(<span class="at">flatten =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb169-17"><a href="import_export.html#cb169-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pluck</span>(<span class="st">&quot;establishments&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb169-18"><a href="import_export.html#cb169-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>()</span></code></pre></div>
<p>Vous pouvez maintenant nettoyer et utiliser le cadre de données <code>response</code>, qui contient une ligne par établissement de restauration rapide.</p>
</div>
<div id="authentification-requise" class="section level3 unnumbered">
<h3>Authentification requise</h3>
<p>Certaines API nécessitent une authentification, c’est-à-dire que vous devez prouver votre identité pour pouvoir accéder à des données restreintes. Pour importer ces données, vous devrez peut-être d’abord utiliser une méthode POST pour fournir un nom d’utilisateur, un mot de passe ou un code. Vous obtiendrez alors un jeton d’accès, qui pourra être utilisé pour les demandes ultérieures par la méthode GET afin de récupérer les données souhaitées.</p>
<p>Vous trouverez ci-dessous un exemple d’interrogation de données à partir de <em>Go.Data</em>, qui est un outil d’investigation des épidémies. <em>Go.Data</em> utilise une API pour toutes les interactions entre le frontal web et les applications pour smartphones utilisées pour la collecte des données. <em>Go.Data</em> est utilisé dans le monde entier. Comme les données sur les épidémies sont sensibles et que vous ne devez pouvoir accéder qu’aux données concernant <em>votre</em> épidémie, une authentification est requise.</p>
<p>Vous trouverez ci-dessous un exemple de code R utilisant <strong>httr</strong> et <strong>jsonlite</strong> pour se connecter à l’API <em>Go.Data</em> afin d’importer des données sur le suivi des contacts de votre épidémie.</p>
<div class="sourceCode" id="cb170"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb170-1"><a href="import_export.html#cb170-1" aria-hidden="true" tabindex="-1"></a><span class="co"># définir les informations d&#39;identification pour l&#39;autorisation</span></span>
<span id="cb170-2"><a href="import_export.html#cb170-2" aria-hidden="true" tabindex="-1"></a>url <span class="ot">&lt;-</span> <span class="st">&quot;https://godatasampleURL.int/&quot;</span>           <span class="co"># url d&#39;instance valide de Go.Data</span></span>
<span id="cb170-3"><a href="import_export.html#cb170-3" aria-hidden="true" tabindex="-1"></a>username <span class="ot">&lt;-</span> <span class="st">&quot;username&quot;</span>                          <span class="co"># nom d&#39;utilisateur valide Go.Data </span></span>
<span id="cb170-4"><a href="import_export.html#cb170-4" aria-hidden="true" tabindex="-1"></a>password <span class="ot">&lt;-</span> <span class="st">&quot;password&quot;</span>                          <span class="co"># mot de passe Go,Data valide </span></span>
<span id="cb170-5"><a href="import_export.html#cb170-5" aria-hidden="true" tabindex="-1"></a>outbreak_id <span class="ot">&lt;-</span> <span class="st">&quot;xxxxxx-xxxx-xxxx-xxxx-xxxxxxx&quot;</span>  <span class="co"># identifiant d&#39;épidémie Go.Data valide</span></span>
<span id="cb170-6"><a href="import_export.html#cb170-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb170-7"><a href="import_export.html#cb170-7" aria-hidden="true" tabindex="-1"></a><span class="co"># obtenir le jeton d&#39;accès</span></span>
<span id="cb170-8"><a href="import_export.html#cb170-8" aria-hidden="true" tabindex="-1"></a>url_request <span class="ot">&lt;-</span> <span class="fu">paste0</span>(url,<span class="st">&quot;api/oauth/token?access_token=123&quot;</span>) <span class="co"># define base URL request</span></span>
<span id="cb170-9"><a href="import_export.html#cb170-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb170-10"><a href="import_export.html#cb170-10" aria-hidden="true" tabindex="-1"></a><span class="co"># préparer la requête</span></span>
<span id="cb170-11"><a href="import_export.html#cb170-11" aria-hidden="true" tabindex="-1"></a>response <span class="ot">&lt;-</span> <span class="fu">POST</span>(</span>
<span id="cb170-12"><a href="import_export.html#cb170-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">url =</span> url_request,  </span>
<span id="cb170-13"><a href="import_export.html#cb170-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">body =</span> <span class="fu">list</span>(</span>
<span id="cb170-14"><a href="import_export.html#cb170-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">username =</span> username,    <span class="co"># utiliser le nom d&#39;utilisateur et le mot de passe enregistrés ci-dessus pour l&#39;autorisation                              </span></span>
<span id="cb170-15"><a href="import_export.html#cb170-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">password =</span> password),                                       </span>
<span id="cb170-16"><a href="import_export.html#cb170-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">encode =</span> <span class="st">&quot;json&quot;</span>)</span>
<span id="cb170-17"><a href="import_export.html#cb170-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb170-18"><a href="import_export.html#cb170-18" aria-hidden="true" tabindex="-1"></a><span class="co"># exécuter la demande et analyser la réponse</span></span>
<span id="cb170-19"><a href="import_export.html#cb170-19" aria-hidden="true" tabindex="-1"></a>content <span class="ot">&lt;-</span></span>
<span id="cb170-20"><a href="import_export.html#cb170-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">content</span>(response, <span class="at">as =</span> <span class="st">&quot;text&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb170-21"><a href="import_export.html#cb170-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fromJSON</span>(<span class="at">flatten =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span>          <span class="co"># aplatir les JSON imbriqués</span></span>
<span id="cb170-22"><a href="import_export.html#cb170-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">glimpse</span>()</span>
<span id="cb170-23"><a href="import_export.html#cb170-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb170-24"><a href="import_export.html#cb170-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Sauvegarder le jeton d&#39;accès de la réponse</span></span>
<span id="cb170-25"><a href="import_export.html#cb170-25" aria-hidden="true" tabindex="-1"></a>access_token <span class="ot">&lt;-</span> content<span class="sc">$</span>access_token    <span class="co"># sauvegarder le jeton d&#39;accès pour permettre les appels API suivants</span></span>
<span id="cb170-26"><a href="import_export.html#cb170-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb170-27"><a href="import_export.html#cb170-27" aria-hidden="true" tabindex="-1"></a><span class="co"># importer les contacts de l&#39;épidémie</span></span>
<span id="cb170-28"><a href="import_export.html#cb170-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Utiliser le jeton d&#39;accès </span></span>
<span id="cb170-29"><a href="import_export.html#cb170-29" aria-hidden="true" tabindex="-1"></a>response_contacts <span class="ot">&lt;-</span> <span class="fu">GET</span>(</span>
<span id="cb170-30"><a href="import_export.html#cb170-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">paste0</span>(url,<span class="st">&quot;api/outbreaks/&quot;</span>,outbreak_id,<span class="st">&quot;/contacts&quot;</span>),          <span class="co"># obtenir (GET) la requête</span></span>
<span id="cb170-31"><a href="import_export.html#cb170-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_headers</span>(</span>
<span id="cb170-32"><a href="import_export.html#cb170-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">Authorization =</span> <span class="fu">paste</span>(<span class="st">&quot;Bearer&quot;</span>, access_token, <span class="at">sep =</span> <span class="st">&quot; &quot;</span>)))</span>
<span id="cb170-33"><a href="import_export.html#cb170-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb170-34"><a href="import_export.html#cb170-34" aria-hidden="true" tabindex="-1"></a>json_contacts <span class="ot">&lt;-</span> <span class="fu">content</span>(response_contacts, <span class="at">as =</span> <span class="st">&quot;text&quot;</span>)         <span class="co"># convertir en texte JSON</span></span>
<span id="cb170-35"><a href="import_export.html#cb170-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb170-36"><a href="import_export.html#cb170-36" aria-hidden="true" tabindex="-1"></a>contacts <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(<span class="fu">fromJSON</span>(json_contacts, <span class="at">flatten =</span> <span class="cn">TRUE</span>))   <span class="co"># aplatir JSON en tibble</span></span></code></pre></div>
<p><span style="color: orange;"><strong><em>ATTENTION:</em></strong> Si vous importez de grandes quantités de données à partir d’une API nécessitant une authentification, il se peut que le délai d’attente soit dépassé. Pour éviter cela, récupérez à nouveau l’access_token avant chaque requête GET de l’API et essayez d’utiliser des filtres ou des limites dans la requête.</span></p>
<p><a href="https://rdrr.io/cran/jsonlite/man/flatten.html"><strong><em>TIP:</em></strong> La fonction <code>fromJSON()</code> du package <strong>jsonlite</strong> ne désimbrique pas complètement la première fois qu’elle est exécutée, donc vous aurez probablement encore des éléments de liste dans votre tibble résultant. Vous aurez besoin de désimbriquer davantage certaines variables, en fonction de l’imbrication de votre fichier .json. Pour plus d’informations à ce sujet, consultez la documentation du package <strong>jsonlite</strong>, notamment la fonction <code>flatten()</code></a>. {style=“color: darkgreen;”}</p>
<p>Pour plus de détails, consultez la documentation sur <a href="https://loopback.io/doc/en/lb4/index.html">LoopBack Explorer</a>, la page <a href="contact_tracing.html#contact_tracing">Suivi des contacts</a> ou les astuces API sur <a href="https://worldhealthorganization.github.io/godata/api-docs">Go.Data Github repository</a></p>
<p>Vous pouvez en savoir plus sur le package <em>httr</em> <a href="https://httr.r-lib.org/articles/quickstart.html">here</a></p>
<p>Cette section a aussi été informée par <a href="https://www.dataquest.io/blog/r-api-tutorial/">ce tutoriel</a> et <a href="https://medium.com/@traffordDataLab/querying-apis-in-r-39029b73d5f1">ce tutoriel</a>.</p>
<!-- ======================================================= -->
</div>
</div>
<div id="exporter" class="section level2" number="7.11">
<h2><span class="header-section-number">7.11</span> Exporter</h2>
<div id="avec-le-package-rio" class="section level3 unnumbered">
<h3>Avec le package <strong>rio</strong></h3>
<p>Avec <strong>rio</strong>, vous pouvez utiliser la fonction <code>export()</code> de manière très similaire à <code>import()</code>. Donnez d’abord le nom de l’objet R que vous voulez sauvegarder (par exemple <code>linelist</code>) et ensuite entre guillemets mettez le chemin du fichier où vous voulez sauvegarder le fichier, en incluant le nom de fichier désiré et l’extension de fichier. Par exemple :</p>
<p>Cette opération permet de sauvegarder le cadre de données <code>linelist</code> comme un classeur Excel dans le répertoire de travail/ dossier racine du projet :</p>
<div class="sourceCode" id="cb171"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb171-1"><a href="import_export.html#cb171-1" aria-hidden="true" tabindex="-1"></a><span class="fu">export</span>(linelist, <span class="st">&quot;my_linelist.xlsx&quot;</span>) <span class="co"># will save to working directory</span></span></code></pre></div>
<p>Vous pouvez enregistrer le même cadre de données comme un fichier csv en changeant l’extension. Par exemple, nous l’enregistrons également dans un chemin de fichier construit avec <code>here()</code> :</p>
<div class="sourceCode" id="cb172"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb172-1"><a href="import_export.html#cb172-1" aria-hidden="true" tabindex="-1"></a><span class="fu">export</span>(linelist, <span class="fu">here</span>(<span class="st">&quot;data&quot;</span>, <span class="st">&quot;clean&quot;</span>, <span class="st">&quot;my_linelist.csv&quot;</span>))</span></code></pre></div>
</div>
<div id="vers-le-presse-papiers" class="section level3 unnumbered">
<h3>Vers le presse-papiers</h3>
<p>Pour exporter un cadre de données vers le “presse-papiers” de votre ordinateur (pour ensuite le coller dans un autre logiciel comme Excel, Google Spreadsheets, etc.) vous pouvez utiliser <code>write_clip()</code> du paquet <strong>clipr</strong>.</p>
<div class="sourceCode" id="cb173"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb173-1"><a href="import_export.html#cb173-1" aria-hidden="true" tabindex="-1"></a><span class="co"># exporter le cadre de données de la liste de cas vers le presse-papiers de votre système</span></span>
<span id="cb173-2"><a href="import_export.html#cb173-2" aria-hidden="true" tabindex="-1"></a>clipr<span class="sc">::</span><span class="fu">write_clip</span>(linelist)</span></code></pre></div>
</div>
</div>
<div id="import_rds" class="section level2" number="7.12">
<h2><span class="header-section-number">7.12</span> Documents RDS</h2>
<p>Outre les fichiers .csv, .xlsx, etc., vous pouvez également exporter/enregistrer des cadres de données R sous forme de fichiers .rds. Il s’agit d’un format de fichier spécifique à R, très utile si vous savez que vous allez retravailler les données exportées dans R.</p>
<p>Les classes de colonnes sont stockées, de sorte que vous n’avez pas à refaire le nettoyage lors de l’importation (avec un fichier Excel ou même un fichier CSV, cela peut être un casse-tête !) C’est aussi un fichier plus petit, ce qui est utile pour l’exportation et l’importation si votre ensemble de données est grand.</p>
<p>Par exemple, si vous travaillez dans une équipe d’épidémiologie et que vous devez envoyer des fichiers à une équipe SIG pour la cartographie, et qu’ils utilisent également R, envoyez-leur simplement le fichier .rds ! Toutes les classes de colonnes sont alors conservées et ils ont moins de travail à faire.</p>
<div class="sourceCode" id="cb174"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb174-1"><a href="import_export.html#cb174-1" aria-hidden="true" tabindex="-1"></a><span class="fu">export</span>(linelist, <span class="fu">here</span>(<span class="st">&quot;data&quot;</span>, <span class="st">&quot;clean&quot;</span>, <span class="st">&quot;my_linelist.rds&quot;</span>))</span></code></pre></div>
<!-- ======================================================= -->
</div>
<div id="import_rdata" class="section level2" number="7.13">
<h2><span class="header-section-number">7.13</span> Fichiers Rdata et listes</h2>
<p>Les fichiers <code>.Rdata</code> peuvent stocker plusieurs objets R - par exemple plusieurs cadres de données, des résultats de modèles, des listes, etc. Cela peut être très utile pour consolider ou partager un grand nombre de vos données pour un projet donné.</p>
<p>Dans l’exemple ci-dessous, plusieurs objets R sont stockés dans le fichier exporté “my_objects.Rdata”:</p>
<div class="sourceCode" id="cb175"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb175-1"><a href="import_export.html#cb175-1" aria-hidden="true" tabindex="-1"></a>rio<span class="sc">::</span><span class="fu">export</span>(my_list, my_dataframe, my_vector, <span class="st">&quot;my_objects.Rdata&quot;</span>)</span></code></pre></div>
<p>Note : si vous essayez d’<em>importer</em> une liste, utilisez <code>import_list()</code> de <strong>rio</strong> pour l’importer avec la sTIPture et le contenu originaux complets.</p>
<div class="sourceCode" id="cb176"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb176-1"><a href="import_export.html#cb176-1" aria-hidden="true" tabindex="-1"></a>rio<span class="sc">::</span><span class="fu">import_list</span>(<span class="st">&quot;my_list.Rdata&quot;</span>)</span></code></pre></div>
<!-- ======================================================= -->
</div>
<div id="sauvegarde-des-graphiques" class="section level2" number="7.14">
<h2><span class="header-section-number">7.14</span> Sauvegarde des graphiques</h2>
<p>Les insTIPtions sur la façon de sauvegarder les tracés, tels que ceux créés par <code>ggplot()</code>, sont discutées en profondeur dans la page <a href="ggplot_basics.html#ggplot_basics">bases de ggplot</a>.</p>
<p>En bref, lancez <code>ggsave("my_plot_filepath_and_name.png")</code> après avoir imprimé votre tracé. Vous pouvez soit fournir un objet de tracé sauvegardé à l’argument <code>plot =</code>, ou seulement spécifier le chemin du fichier de destination (avec l’extension du fichier) pour sauvegarder le tracé le plus récemment affiché. Vous pouvez aussi contrôler le <code>width =</code>, <code>height =</code>, <code>units =</code>, et <code>dpi =</code>.</p>
<p>L’enregistrement d’un graphe de réseau, tel qu’un arbre de transmission, est abordé dans la page <a href="transmission_chains.html#transmission_chains">Chaînes de transmission</a>.</p>
<!-- ======================================================= -->
</div>
<div id="ressources-1" class="section level2" number="7.15">
<h2><span class="header-section-number">7.15</span> Ressources</h2>
<p>Le <a href="https://cran.r-project.org/doc/manuals/r-release/R-data.html">Manuel pour Importer/Exporter</a><br />
<a href="https://r4ds.had.co.nz/data-import.html#data-import">Chapitre sur l’importaiton de données de R 4 Data Science</a><br />
<a href="https://ggplot2.tidyverse.org/reference/ggsave.html">Documation pour ggsave()</a></p>
<p>Voici un tableau tiré de la <a href="https://cran.r-project.org/web/packages/rio/vignettes/rio.html">vignette</a> en ligne de <strong>rio</strong>. Pour chaque type de données, il indique : l’extension de fichier attendue, le package que <strong>rio</strong> utilise pour importer ou exporter les données, et si cette fonctionnalité est incluse dans la version installée par défaut de <strong>rio</strong>.</p>
<table>
<colgroup>
<col width="30%" />
<col width="20%" />
<col width="18%" />
<col width="13%" />
<col width="18%" />
</colgroup>
<thead>
<tr class="header">
<th>Format</th>
<th>Extension Typique</th>
<th>Package d’Importation</th>
<th>Package d’Exportation</th>
<th>Installé par Defaut</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Comma-separated data</td>
<td>.csv</td>
<td>data.table <code>fread()</code></td>
<td>data.table</td>
<td>Oui</td>
</tr>
<tr class="even">
<td>Pipe-separated data</td>
<td>.psv</td>
<td>data.table <code>fread()</code></td>
<td>data.table</td>
<td>Oui</td>
</tr>
<tr class="odd">
<td>Tab-separated data</td>
<td>.tsv</td>
<td>data.table <code>fread()</code></td>
<td>data.table</td>
<td>Oui</td>
</tr>
<tr class="even">
<td>SAS</td>
<td>.sas7bdat</td>
<td>haven</td>
<td>haven</td>
<td>Oui</td>
</tr>
<tr class="odd">
<td>SPSS</td>
<td>.sav</td>
<td>haven</td>
<td>haven</td>
<td>Oui</td>
</tr>
<tr class="even">
<td>Stata</td>
<td>.dta</td>
<td>haven</td>
<td>haven</td>
<td>Oui</td>
</tr>
<tr class="odd">
<td>SAS</td>
<td>XPORT</td>
<td>.xpt</td>
<td>haven</td>
<td>haven</td>
</tr>
<tr class="even">
<td>SPSS Portable</td>
<td>.por</td>
<td>haven</td>
<td></td>
<td>Oui</td>
</tr>
<tr class="odd">
<td>Excel</td>
<td>.xls</td>
<td>readxl</td>
<td></td>
<td>Oui</td>
</tr>
<tr class="even">
<td>Excel</td>
<td>.xlsx</td>
<td>readxl</td>
<td>openxlsx</td>
<td>Oui</td>
</tr>
<tr class="odd">
<td>R syntax</td>
<td>.R</td>
<td>base</td>
<td>base</td>
<td>Oui</td>
</tr>
<tr class="even">
<td>Saved R objects</td>
<td>.RData, .rda</td>
<td>base</td>
<td>base</td>
<td>Oui</td>
</tr>
<tr class="odd">
<td>Serialized R objects</td>
<td>.rds</td>
<td>base</td>
<td>base</td>
<td>Oui</td>
</tr>
<tr class="even">
<td>Epiinfo</td>
<td>.rec</td>
<td>foreign</td>
<td></td>
<td>Oui</td>
</tr>
<tr class="odd">
<td>Minitab</td>
<td>.mtp</td>
<td>foreign</td>
<td></td>
<td>Oui</td>
</tr>
<tr class="even">
<td>Systat</td>
<td>.syd</td>
<td>foreign</td>
<td></td>
<td>Oui</td>
</tr>
<tr class="odd">
<td>“XBASE”</td>
<td>database files</td>
<td>.dbf</td>
<td>foreign</td>
<td>foreign</td>
</tr>
<tr class="even">
<td>Weka Attribute-Relation File Format</td>
<td>.arff</td>
<td>foreign</td>
<td>foreign</td>
<td>Oui</td>
</tr>
<tr class="odd">
<td>Data Interchange Format</td>
<td>.dif</td>
<td>utils</td>
<td></td>
<td>Oui</td>
</tr>
<tr class="even">
<td>Fortran data</td>
<td>pas d’extension reconnue</td>
<td>utils</td>
<td></td>
<td>Oui</td>
</tr>
<tr class="odd">
<td>Fixed-width format data</td>
<td>.fwf</td>
<td>utils</td>
<td>utils</td>
<td>Oui</td>
</tr>
<tr class="even">
<td>gzip comma-separated data</td>
<td>.csv.gz</td>
<td>utils</td>
<td>utils</td>
<td>Oui</td>
</tr>
<tr class="odd">
<td>CSVY (CSV + YAML metadata header)</td>
<td>.csvy</td>
<td>csvy</td>
<td>csvy</td>
<td>Non</td>
</tr>
<tr class="even">
<td>EViews</td>
<td>.wf1</td>
<td>hexView</td>
<td></td>
<td>Non</td>
</tr>
<tr class="odd">
<td>Feather R/Python interchange format</td>
<td>.feather</td>
<td>feather</td>
<td>feather</td>
<td>Non</td>
</tr>
<tr class="even">
<td>Fast Storage</td>
<td>.fst</td>
<td>fst</td>
<td>fst</td>
<td>Non</td>
</tr>
<tr class="odd">
<td>JSON</td>
<td>.json</td>
<td>jsonlite</td>
<td>jsonlite</td>
<td>Non</td>
</tr>
<tr class="even">
<td>Matlab</td>
<td>.mat</td>
<td>rmatio</td>
<td>rmatio</td>
<td>Non</td>
</tr>
<tr class="odd">
<td>OpenDocument Spreadsheet</td>
<td>.ods</td>
<td>readODS</td>
<td>readODS</td>
<td>Non</td>
</tr>
<tr class="even">
<td>HTML Tables</td>
<td>.html</td>
<td>xml2</td>
<td>xml2</td>
<td>Non</td>
</tr>
<tr class="odd">
<td>Shallow XML documents</td>
<td>.xml</td>
<td>xml2</td>
<td>xml2</td>
<td>Non</td>
</tr>
<tr class="even">
<td>YAML</td>
<td>.yml</td>
<td>yaml</td>
<td>yaml</td>
<td>Non</td>
</tr>
<tr class="odd">
<td>Clipboard default is tsv</td>
<td></td>
<td>clipr</td>
<td>clipr</td>
<td>Non</td>
</tr>
</tbody>
</table>

</div>
</div>



</div>
  </main>

  <div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page">
      <h2>On this page</h2>
      <div id="book-on-this-page"></div>

      <div class="book-extra">
        <ul class="list-unstyled">
          <li><a id="book-source" href="#">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="#">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
      </div>
    </nav>
  </div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5">
  <div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>The Epidemiologist R Handbook</strong>" was written by the handbook team. It was last built on 2023-05-17.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer>


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
<script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>

</html>
