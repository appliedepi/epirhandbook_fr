<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>27 Analyse de survie | Le Epi R Handbook</title>
<meta name="author" content="the handbook team">
<meta name="description" content="27.1 Aperçu L’analyse de survie s’attache à décrire pour un individu ou un groupe d’individus donné, un point d’événement défini appelé l’échec (apparition d’une maladie, guérison d’une maladie,...">
<meta name="generator" content="bookdown 0.34 with bs4_book()">
<meta property="og:title" content="27 Analyse de survie | Le Epi R Handbook">
<meta property="og:type" content="book">
<meta property="og:description" content="27.1 Aperçu L’analyse de survie s’attache à décrire pour un individu ou un groupe d’individus donné, un point d’événement défini appelé l’échec (apparition d’une maladie, guérison d’une maladie,...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="27 Analyse de survie | Le Epi R Handbook">
<meta name="twitter:description" content="27.1 Aperçu L’analyse de survie s’attache à décrire pour un individu ou un groupe d’individus donné, un point d’événement défini appelé l’échec (apparition d’une maladie, guérison d’une maladie,...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.4.2/transition.js"></script><script src="libs/bs3compat-0.4.2/tabs.js"></script><script src="libs/bs3compat-0.4.2/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/htmlwidgets-1.6.2/htmlwidgets.js"></script><link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="libs/datatables-binding-0.28/datatables.js"></script><link href="libs/dt-core-1.13.4/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="libs/dt-core-1.13.4/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="libs/dt-core-1.13.4/js/jquery.dataTables.min.js"></script><link href="libs/nouislider-7.0.10/jquery.nouislider.min.css" rel="stylesheet">
<script src="libs/nouislider-7.0.10/jquery.nouislider.min.js"></script><link href="libs/selectize-0.12.0/selectize.bootstrap3.css" rel="stylesheet">
<script src="libs/selectize-0.12.0/selectize.min.js"></script><link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script><script src="libs/kePrint-0.0.1/kePrint.js"></script><link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<link href="libs/tabwid-1.1.3/tabwid.css" rel="stylesheet">
<script src="libs/tabwid-1.1.3/tabwid.js"></script><link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet">
<script src="libs/leaflet-1.3.1/leaflet.js"></script><link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet">
<script src="libs/proj4-2.6.2/proj4.min.js"></script><script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script><link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet">
<script src="libs/leaflet-binding-2.1.2/leaflet.js"></script><script src="libs/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script><script src="libs/leaflet-providers-plugin-2.1.2/leaflet-providers-plugin.js"></script><script src="libs/viz-1.8.2/viz.js"></script><link href="libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet">
<script src="libs/grViz-binding-1.0.10/grViz.js"></script><script src="libs/d3-4.5.0/d3.min.js"></script><script src="libs/sankey-1/sankey.js"></script><script src="libs/sankeyNetwork-binding-0.4/sankeyNetwork.js"></script><script src="libs/plotly-binding-4.10.1/plotly.js"></script><script src="libs/typedarray-0.1/typedarray.min.js"></script><link href="libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="libs/plotly-main-2.11.1/plotly-latest.min.js"></script><link href="libs/vis-9.1.0/vis-network.min.css" rel="stylesheet">
<script src="libs/vis-9.1.0/vis-network.min.js"></script><script src="libs/visNetwork-binding-2.1.2/visNetwork.js"></script><link href="libs/font-awesome-4.7.0/css/font-awesome.min.css" rel="stylesheet">
<script src="libs/plotly-basic-2.11.1/plotly-basic-2.11.1.min.js"></script><script src="libs/plotly-cartesian-2.11.1/plotly-cartesian-2.11.1.min.js"></script><script src="libs/proj4js-2.3.15/proj4.js"></script><link href="libs/highcharts-9.3.1/css/motion.css" rel="stylesheet">
<script src="libs/highcharts-9.3.1/highcharts.js"></script><script src="libs/highcharts-9.3.1/highcharts-3d.js"></script><script src="libs/highcharts-9.3.1/highcharts-more.js"></script><script src="libs/highcharts-9.3.1/modules/stock.js"></script><script src="libs/highcharts-9.3.1/modules/map.js"></script><script src="libs/highcharts-9.3.1/modules/data.js"></script><script src="libs/highcharts-9.3.1/modules/exporting.js"></script><script src="libs/highcharts-9.3.1/modules/offline-exporting.js"></script><script src="libs/highcharts-9.3.1/modules/drilldown.js"></script><script src="libs/highcharts-9.3.1/modules/item-series.js"></script><script src="libs/highcharts-9.3.1/modules/overlapping-datalabels.js"></script><script src="libs/highcharts-9.3.1/modules/annotations.js"></script><script src="libs/highcharts-9.3.1/modules/export-data.js"></script><script src="libs/highcharts-9.3.1/modules/funnel.js"></script><script src="libs/highcharts-9.3.1/modules/heatmap.js"></script><script src="libs/highcharts-9.3.1/modules/treemap.js"></script><script src="libs/highcharts-9.3.1/modules/sankey.js"></script><script src="libs/highcharts-9.3.1/modules/dependency-wheel.js"></script><script src="libs/highcharts-9.3.1/modules/organization.js"></script><script src="libs/highcharts-9.3.1/modules/solid-gauge.js"></script><script src="libs/highcharts-9.3.1/modules/streamgraph.js"></script><script src="libs/highcharts-9.3.1/modules/sunburst.js"></script><script src="libs/highcharts-9.3.1/modules/vector.js"></script><script src="libs/highcharts-9.3.1/modules/wordcloud.js"></script><script src="libs/highcharts-9.3.1/modules/xrange.js"></script><script src="libs/highcharts-9.3.1/modules/tilemap.js"></script><script src="libs/highcharts-9.3.1/modules/venn.js"></script><script src="libs/highcharts-9.3.1/modules/gantt.js"></script><script src="libs/highcharts-9.3.1/modules/timeline.js"></script><script src="libs/highcharts-9.3.1/modules/parallel-coordinates.js"></script><script src="libs/highcharts-9.3.1/modules/bullet.js"></script><script src="libs/highcharts-9.3.1/modules/coloraxis.js"></script><script src="libs/highcharts-9.3.1/modules/dumbbell.js"></script><script src="libs/highcharts-9.3.1/modules/lollipop.js"></script><script src="libs/highcharts-9.3.1/modules/series-label.js"></script><script src="libs/highcharts-9.3.1/plugins/motion.js"></script><script src="libs/highcharts-9.3.1/custom/reset.js"></script><script src="libs/highcharts-9.3.1/modules/boost.js"></script><script src="libs/highchart-binding-0.9.4/highchart.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<link rel="stylesheet" href="style_bs4.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Le Epi R Handbook</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html"></a></li>
<li class="book-part">About this book</li>
<li><a class="" href="editorial_notes.html"><span class="header-section-number">1</span> Notes techniques et choix éditoriaux</a></li>
<li><a class="" href="download_book_data.html"><span class="header-section-number">2</span> Télécharger le manuel et les données</a></li>
<li class="book-part">Basics</li>
<li><a class="" href="rbasics.html"><span class="header-section-number">3</span> R - les bases</a></li>
<li><a class="" href="transition_to_r.html"><span class="header-section-number">4</span> Transition vers R</a></li>
<li><a class="" href="suggested_packages.html"><span class="header-section-number">5</span> Paquets conseillés</a></li>
<li><a class="" href="r_projects.html"><span class="header-section-number">6</span> Projets R</a></li>
<li><a class="" href="import_export.html"><span class="header-section-number">7</span> Importer et exporter des données</a></li>
<li class="book-part">Data Management</li>
<li><a class="" href="cleaning_data.html"><span class="header-section-number">8</span> Nettoyage de données et fonctions essentielles</a></li>
<li><a class="" href="working_dates.html"><span class="header-section-number">9</span> Manipuler les dates</a></li>
<li><a class="" href="character_strings.html"><span class="header-section-number">10</span> Caractères et chaînes de caractères</a></li>
<li><a class="" href="factors.html"><span class="header-section-number">11</span> Facteurs</a></li>
<li><a class="" href="pivoting_data.html"><span class="header-section-number">12</span> Restructurer les données</a></li>
<li><a class="" href="grouping_data.html"><span class="header-section-number">13</span> Travailler sur des données groupées</a></li>
<li><a class="" href="joining_matching.html"><span class="header-section-number">14</span> Joindre des données</a></li>
<li><a class="" href="deduplication.html"><span class="header-section-number">15</span> De-duplication</a></li>
<li><a class="" href="iteration.html"><span class="header-section-number">16</span> Itération, boucles et listes</a></li>
<li class="book-part">Analysis</li>
<li><a class="" href="descriptive_tables.html"><span class="header-section-number">17</span> Tableaux descriptifs</a></li>
<li><a class="" href="stats_test.html"><span class="header-section-number">18</span> Tests statistiques simples</a></li>
<li><a class="" href="regression.html"><span class="header-section-number">19</span> Régression univariée et multivariable</a></li>
<li><a class="" href="missing_data.html"><span class="header-section-number">20</span> Données manquantes</a></li>
<li><a class="" href="standardisation.html"><span class="header-section-number">21</span> Taux standardisés</a></li>
<li><a class="" href="moving_average.html"><span class="header-section-number">22</span> Moyennes mobiles</a></li>
<li><a class="" href="time_series.html"><span class="header-section-number">23</span> Série temporelle et détection des épidémies</a></li>
<li><a class="" href="epidemic_models.html"><span class="header-section-number">24</span> Modélisation des épidémies</a></li>
<li><a class="" href="contact_tracing.html"><span class="header-section-number">25</span> Suivi des contacts</a></li>
<li><a class="" href="survey_analysis.html"><span class="header-section-number">26</span> Analyse d’enquête</a></li>
<li><a class="active" href="survival_analysis.html"><span class="header-section-number">27</span> Analyse de survie</a></li>
<li><a class="" href="gis.html"><span class="header-section-number">28</span> GIS basics</a></li>
<li class="book-part">Data Visualization</li>
<li><a class="" href="tables_presentation.html"><span class="header-section-number">29</span> Présenter avec des tables</a></li>
<li><a class="" href="ggplot_basics.html"><span class="header-section-number">30</span> Les bases de ggplot</a></li>
<li><a class="" href="ggplot_tips.html"><span class="header-section-number">31</span> Trucs et Astuces avec ggplot</a></li>
<li><a class="" href="epicurves.html"><span class="header-section-number">32</span> Courbes épidémiques</a></li>
<li><a class="" href="age_pyramid.html"><span class="header-section-number">33</span> Pyramides démographiques et échelles de Likert</a></li>
<li><a class="" href="heatmaps.html"><span class="header-section-number">34</span> Graphiques thermiques</a></li>
<li><a class="" href="diagrams.html"><span class="header-section-number">35</span> Diagrammes et schémas</a></li>
<li><a class="" href="combination_analysis.html"><span class="header-section-number">36</span> Analyse des combinaisons</a></li>
<li><a class="" href="transmission_chains.html"><span class="header-section-number">37</span> Chaînes de transmission</a></li>
<li><a class="" href="phylogenetic_trees.html"><span class="header-section-number">38</span> Les arbres phylogénétiques</a></li>
<li><a class="" href="interactive_plots.html"><span class="header-section-number">39</span> Graphiques interactifs</a></li>
<li class="book-part">Reports and dashboards</li>
<li><a class="" href="rmarkdown.html"><span class="header-section-number">40</span> Production de rapports avec R Markdown</a></li>
<li><a class="" href="reportfactory.html"><span class="header-section-number">41</span> Organisation des rapports de routine</a></li>
<li><a class="" href="dashboards.html"><span class="header-section-number">42</span> Tableaux de bord avec R Markdown</a></li>
<li><a class="" href="shiny.html"><span class="header-section-number">43</span> Tableaux de bord avec Shiny</a></li>
<li class="book-part">Miscellaneous</li>
<li><a class="" href="writing_functions.html"><span class="header-section-number">44</span> Fonctions d’écriture</a></li>
<li><a class="" href="directories.html"><span class="header-section-number">45</span> Interactions avec les répertoires</a></li>
<li><a class="" href="collaboration.html"><span class="header-section-number">46</span> Contrôle de version et collaboration avec Git et Github</a></li>
<li><a class="" href="errors.html"><span class="header-section-number">47</span> Erreurs fréquentes</a></li>
<li><a class="" href="help.html"><span class="header-section-number">48</span> Obtenir de l’aide</a></li>
<li><a class="" href="network_drives.html"><span class="header-section-number">49</span> R sur les lecteurs réseau</a></li>
<li><a class="" href="data_table.html"><span class="header-section-number">50</span> Tableau de données</a></li>
</ul>

        <div class="book-extra">
          
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="survival_analysis" class="section level1" number="27">
<h1>
<span class="header-section-number">27</span> Analyse de survie<a class="anchor" aria-label="anchor" href="#survival_analysis"><i class="fas fa-link"></i></a>
</h1>
<div class="inline-figure"><img src="images/survival_analysis.png" width="75%" style="display: block; margin: auto;"></div>
<!-- ======================================================= -->
<div id="aperçu-3" class="section level2" number="27.1">
<h2>
<span class="header-section-number">27.1</span> Aperçu<a class="anchor" aria-label="anchor" href="#aper%C3%A7u-3"><i class="fas fa-link"></i></a>
</h2>
<p><em>L’analyse de survie</em> s’attache à décrire pour un individu ou un groupe d’individus donné, un point d’événement défini appelé <strong><em>l’échec</em></strong> (apparition d’une maladie, guérison d’une maladie, décès, rechute après réponse à un traitement…) qui survient après une période de temps appelée <strong><em>le temps d’échec</em></strong> (ou <strong><em>le temps de suivi</em></strong> dans les études de cohorte/population) pendant laquelle les individus sont observés. Pour déterminer le temps d’échec, il est alors nécessaire de définir un temps d’origine (qui peut être la date d’inclusion, la date du diagnostic…).</p>
<p>La cible d’inférence de l’analyse de survie est alors le temps entre une origine et un événement. Dans la recherche médicale actuelle, elle est largement utilisée dans les études cliniques pour évaluer l’effet d’un traitement par exemple, ou en épidémiologie du cancer pour évaluer une grande variété de mesures de survie au cancer.</p>
<p>Elle s’exprime généralement par la <strong><em>probabilité de survie</em></strong> qui est la probabilité que l’événement d’intérêt ne se soit pas produit avant une durée t.</p>
<p><strong><em>Censure</em></strong> : La censure se produit lorsqu’à la fin du suivi, certains des individus n’ont pas eu l’événement d’intérêt, et donc leur temps réel jusqu’à l’événement est inconnu. Nous nous concentrerons principalement sur la censure à droite ici, mais pour plus de détails sur la censure et l’analyse de survie en général, vous pouvez consulter les références.</p>
<!-- ======================================================= -->
</div>
<div id="préparation-10" class="section level2" number="27.2">
<h2>
<span class="header-section-number">27.2</span> Préparation<a class="anchor" aria-label="anchor" href="#pr%C3%A9paration-10"><i class="fas fa-link"></i></a>
</h2>
<div id="chargement-des-paquets-5" class="section level3 unnumbered">
<h3>Chargement des paquets<a class="anchor" aria-label="anchor" href="#chargement-des-paquets-5"><i class="fas fa-link"></i></a>
</h3>
<p>Pour effectuer des analyses de survie dans R, un des paquets les plus utilisés est le paquet <strong>survival</strong>. Nous l’installons d’abord et le chargeons ensuite, ainsi que les autres paquets qui seront utilisés dans cette section :</p>
<p>Dans ce manuel, nous mettons l’accent sur <code><a href="https://rdrr.io/pkg/pacman/man/p_load.html">p_load()</a></code> de <strong>pacman</strong>, qui installe le paquet si nécessaire <em>et</em> le charge pour l’utiliser. Vous pouvez aussi charger les paquets installés avec <code><a href="https://rdrr.io/r/base/library.html">library()</a></code> de <strong>base</strong> R. Voir la page sur [R basics] pour plus d’informations sur les paquets R.</p>
<p>Cette page explore les analyses de survie en utilisant la linelist utilisée dans la plupart des pages précédentes et sur laquelle nous appliquons quelques changements pour avoir des données de survie correctes.</p>
</div>
<div id="importation-du-jeu-de-données" class="section level3 unnumbered">
<h3>Importation du jeu de données<a class="anchor" aria-label="anchor" href="#importation-du-jeu-de-donn%C3%A9es"><i class="fas fa-link"></i></a>
</h3>
<p>Nous importons le jeu de données des cas d’une épidémie d’Ebola simulée. Si vous voulez suivre le mouvement, <a href="https://github.com/epirhandbook/Epi_R_handbook/raw/master/data/case_linelists/linelist_cleaned.rds" class="download-button">cliquez pour télécharger la linelist “propre”</a> (en tant que fichier .rds). Importez des données avec la fonction <code><a href="https://rdrr.io/pkg/rio/man/import.html">import()</a></code> du paquet <strong>rio</strong> (elle gère de nombreux types de fichiers comme .xlsx, .csv, .rds - voir la page <a href="import_export.html#import_export">Importation et exportation</a> pour plus de détails).</p>
<div class="sourceCode" id="cb1269"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># importation de linelist</span></span>
<span><span class="va">linelist_case_data</span> <span class="op">&lt;-</span> <span class="fu">rio</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/rio/man/import.html">import</a></span><span class="op">(</span><span class="st">"linelist_cleaned.rds"</span><span class="op">)</span></span></code></pre></div>
</div>
<div id="gestion-et-transformation-des-données" class="section level3 unnumbered">
<h3>Gestion et transformation des données<a class="anchor" aria-label="anchor" href="#gestion-et-transformation-des-donn%C3%A9es"><i class="fas fa-link"></i></a>
</h3>
<p>En bref, les données de survie peuvent être décrites comme ayant les trois caractéristiques suivantes :</p>
<ol style="list-style-type: decimal">
<li>la variable dépendante ou réponse est le temps d’attente jusqu’à l’occurrence d’un événement bien défini,</li>
<li>les observations sont censurées, en ce sens que pour certaines unités, l’événement d’intérêt ne s’est pas produit au moment où les données sont analysées, et</li>
<li>il existe des prédicteurs ou des variables explicatives dont nous souhaitons évaluer ou contrôler l’effet sur le temps d’attente.</li>
</ol>
<p>Ainsi, nous allons créer les différentes variables nécessaires pour respecter cette structure et effectuer l’analyse de survie.</p>
<p>Nous définissons</p>
<ul>
<li>un nouveau cadre de données <code>linelist_surv</code> pour cette analyse<br>
</li>
<li>notre événement d’intérêt comme étant le “décès” (donc notre probabilité de survie sera la probabilité d’être en vie après un certain temps après le moment d’origine),</li>
<li>le temps de suivi (<code>futime</code>) comme le temps entre le moment de l’apparition et le moment du résultat <em>en jours</em>,</li>
<li>les patients censurés comme ceux qui se sont rétablis ou pour lesquels le résultat final n’est pas connu, c’est-à-dire que l’événement “décès” n’a pas été observé (<code>event=0</code>).</li>
</ul>
<p><span style="color : orange ;"><strong><em>CAUTION:</em></strong> Puisque dans une étude de cohorte réelle, l’information sur le moment de l’origine et la fin du suivi est connue étant donné que les individus sont observés, nous éliminerons les observations où la date d’apparition ou la date de l’issue est inconnue. De même, les cas où la date d’apparition est postérieure à la date de l’issue seront supprimés car ils sont considérés comme erronés.</span></p>
<p><span style="color : darkgreen ;"><strong><em>TIP:</em></strong> Étant donné que le filtrage sur une date supérieure à (&gt;) ou inférieure à (&lt;) peut supprimer les lignes avec des valeurs manquantes, l’application du filtre sur les mauvaises dates supprimera également les lignes avec des dates manquantes.</span></p>
<p>Nous utilisons ensuite <code><a href="https://dplyr.tidyverse.org/reference/case_when.html">case_when()</a></code> pour créer une colonne <code>age_cat_small</code> dans laquelle il n’y a que 3 catégories d’âge.</p>
<div class="sourceCode" id="cb1270"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#Créer une nouvelle donnée appelée linelist_surv à partir de la donnée linelist_case_data.</span></span>
<span></span>
<span><span class="va">linelist_surv</span> <span class="op">&lt;-</span> <span class="va">linelist_case_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>     </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span></span>
<span>       <span class="co"># supprimez les observations dont la date d'apparition ou la date d'issue est erronée ou manquante.</span></span>
<span>       <span class="va">date_outcome</span> <span class="op">&gt;</span> <span class="va">date_onset</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span></span>
<span>       <span class="co"># créer la var événement qui vaut 1 si le patient est décédé et 0 s'il a été censuré à droite</span></span>
<span>       event <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">outcome</span><span class="op">)</span> <span class="op">|</span> <span class="va">outcome</span> <span class="op">==</span> <span class="st">"Recover"</span>, <span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span>, </span>
<span>    </span>
<span>       <span class="co"># créer la var sur le temps de suivi en jours</span></span>
<span>       futime <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/double.html">as.double</a></span><span class="op">(</span><span class="va">date_outcome</span> <span class="op">-</span> <span class="va">date_onset</span><span class="op">)</span>, </span>
<span>    </span>
<span>       <span class="co"># créer une nouvelle variable de catégorie d'âge avec seulement 3 niveaux de strates</span></span>
<span>       age_cat_small <span class="op">=</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html">case_when</a></span><span class="op">(</span> </span>
<span>            <span class="va">age_years</span> <span class="op">&lt;</span> <span class="fl">5</span> <span class="op">~</span> <span class="st">"0-4"</span>,</span>
<span>            <span class="va">age_years</span> <span class="op">&gt;=</span> <span class="fl">5</span> <span class="op">&amp;</span> <span class="va">age_years</span> <span class="op">&lt;</span> <span class="fl">20</span> <span class="op">~</span> <span class="st">"5-19"</span>,</span>
<span>            <span class="va">age_years</span> <span class="op">&gt;=</span> <span class="fl">20</span> <span class="op">~</span> <span class="st">"20+"</span><span class="op">)</span>,</span>
<span>       </span>
<span>       <span class="co"># l'étape précédente a créé la var age_cat_small en tant que caractère.</span></span>
<span>       <span class="co"># maintenant le convertir en facteur et spécifier les niveaux.</span></span>
<span>       <span class="co"># Notez que les valeurs NA restent des NA et ne sont pas mises dans un niveau "inconnu" par exemple,</span></span>
<span>       <span class="co"># puisque dans les prochaines analyses, elles devront être supprimées.</span></span>
<span>       age_cat_small <span class="op">=</span> <span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_relevel.html">fct_relevel</a></span><span class="op">(</span><span class="va">age_cat_small</span>, <span class="st">"0-4"</span>, <span class="st">"5-19"</span>, <span class="st">"20+"</span><span class="op">)</span></span>
<span>       <span class="op">)</span></span></code></pre></div>
<p><span style="color : darkgreen ;"><strong><em>TIP:</em></strong> Nous pouvons vérifier les nouvelles colonnes que nous avons créées en faisant un résumé sur le <code>futime</code> et un tableau croisé entre <code>event</code> et <code>outcome</code> à partir duquel il a été créé. Outre cette vérification, c’est une bonne habitude de communiquer la durée médiane de suivi lors de l’interprétation des résultats de l’analyse de survie.</span></p>
<div class="sourceCode" id="cb1271"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">linelist_surv</span><span class="op">$</span><span class="va">futime</span><span class="op">)</span></span></code></pre></div>
<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##    1.00    6.00   10.00   11.98   16.00   64.00</code></pre>
<div class="sourceCode" id="cb1273"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># croiser les tableaux de la nouvelle var événement et de la var résultat à partir de laquelle elle a été créée.</span></span>
<span><span class="co"># pour s'assurer que le code a fait ce qu'il était censé faire.</span></span>
<span><span class="va">linelist_surv</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">tabyl</span><span class="op">(</span><span class="va">outcome</span>, <span class="va">event</span><span class="op">)</span></span></code></pre></div>
<pre><code>##  outcome    0    1
##    Death    0 1952
##  Recover 1547    0
##     &lt;NA&gt; 1040    0</code></pre>
<p>Maintenant, nous croisons la nouvelle var age_cat_small et l’ancienne col age_cat pour nous assurer que les affectations sont correctes.</p>
<div class="sourceCode" id="cb1275"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">linelist_surv</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">tabyl</span><span class="op">(</span><span class="va">age_cat_small</span>, <span class="va">age_cat</span><span class="op">)</span></span></code></pre></div>
<pre><code>##  age_cat_small 0-4 5-9 10-14 15-19 20-29 30-49 50-69 70+ NA_
##            0-4 834   0     0     0     0     0     0   0   0
##           5-19   0 852   717   575     0     0     0   0   0
##            20+   0   0     0     0   862   554    69   5   0
##           &lt;NA&gt;   0   0     0     0     0     0     0   0  71</code></pre>
<p>Maintenant, nous examinons les 10 premières observations des données <code>linelist_surv</code> en regardant des variables spécifiques (y compris celles nouvellement créées).</p>
<div class="sourceCode" id="cb1277"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">linelist_surv</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">case_id</span>, <span class="va">age_cat_small</span>, <span class="va">date_onset</span>, <span class="va">date_outcome</span>, <span class="va">outcome</span>, <span class="va">event</span>, <span class="va">futime</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span></span></code></pre></div>
<pre><code>##    case_id age_cat_small date_onset date_outcome outcome event futime
## 1   8689b7           0-4 2014-05-13   2014-05-18 Recover     0      5
## 2   11f8ea           20+ 2014-05-16   2014-05-30 Recover     0     14
## 3   893f25           0-4 2014-05-21   2014-05-29 Recover     0      8
## 4   be99c8          5-19 2014-05-22   2014-05-24 Recover     0      2
## 5   07e3e8          5-19 2014-05-27   2014-06-01 Recover     0      5
## 6   369449           0-4 2014-06-02   2014-06-07   Death     1      5
## 7   f393b4           20+ 2014-06-05   2014-06-18 Recover     0     13
## 8   1389ca           20+ 2014-06-05   2014-06-09   Death     1      4
## 9   2978ac          5-19 2014-06-06   2014-06-15   Death     1      9
## 10  fc15ef          5-19 2014-06-16   2014-07-09 Recover     0     23</code></pre>
<p>Nous pouvons aussi croiser les colonnes <code>age_cat_small</code> et <code>gender</code> pour avoir plus de détails sur la distribution de cette nouvelle colonne par sexe. Nous utilisons <code>tabyl()</code> et les fonctions <em>adorn</em> de <strong>janitor</strong> comme décrit dans la page [Descriptive tables].</p>
<!-- Pour cela, nous utilisons la fonction `stat.table()` du paquet **Epi**. -->
<div class="sourceCode" id="cb1279"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">linelist_surv</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">tabyl</span><span class="op">(</span><span class="va">gender</span>, <span class="va">age_cat_small</span>, show_na <span class="op">=</span> <span class="cn">F</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">adorn_totals</span><span class="op">(</span>where <span class="op">=</span> <span class="st">"both"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">adorn_percentages</span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">adorn_pct_formatting</span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">adorn_ns</span><span class="op">(</span>position <span class="op">=</span> <span class="st">"front"</span><span class="op">)</span></span></code></pre></div>
<pre><code>##  gender         0-4          5-19           20+          Total
##       f 482 (22.4%) 1,184 (54.9%)   490 (22.7%) 2,156 (100.0%)
##       m 325 (15.0%)   880 (40.6%)   960 (44.3%) 2,165 (100.0%)
##   Total 807 (18.7%) 2,064 (47.8%) 1,450 (33.6%) 4,321 (100.0%)</code></pre>
<!-- Epi::stat.table( -->
<!-- #donner les variables pour le tableau croisé -->
<!-- list( -->
<!-- sexe, -->
<!-- age_cat_small -->
<!-- ), -->
<!-- #précisez la fonction que vous voulez appeler (mean,count..) -->
<!-- list( -->
<!-- count(), -->
<!-- pourcentage(âge_cat_petit) -->
<!-- ), -->
<!-- #add margins -->
<!-- margins=T, -->
<!-- #data used -->
<!-- data = linelist_surv -->
<!-- ) -->
<!-- ``` -->
<!-- ======================================================= -->
</div>
</div>
<div id="bases-de-lanalyse-de-survie" class="section level2" number="27.3">
<h2>
<span class="header-section-number">27.3</span> Bases de l’analyse de survie<a class="anchor" aria-label="anchor" href="#bases-de-lanalyse-de-survie"><i class="fas fa-link"></i></a>
</h2>
<div id="construction-dun-objet-de-type-surv" class="section level3 unnumbered">
<h3>Construction d’un objet de type surv<a class="anchor" aria-label="anchor" href="#construction-dun-objet-de-type-surv"><i class="fas fa-link"></i></a>
</h3>
<p>Nous allons d’abord utiliser <code>Surv()</code> de <strong>survival</strong> pour construire un objet de type survie à partir des colonnes de temps de suivi et d’événement.</p>
<p>Le résultat d’une telle étape est de produire un objet de type <em>Surv</em> qui condense les informations de temps et si l’événement d’intérêt (le décès) a été observé. Cet objet sera finalement utilisé dans le côté droit des formules de modèle suivantes (voir <a href="https://cran.r-project.org/web/packages/survival/vignettes/survival.pdf">documentation</a>).</p>
<div class="sourceCode" id="cb1281"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Utilisez la syntaxe Suv() pour les données censurées à droite</span></span>
<span><span class="va">survobj</span> <span class="op">&lt;-</span> <span class="fu">Surv</span><span class="op">(</span>time <span class="op">=</span> <span class="va">linelist_surv</span><span class="op">$</span><span class="va">futime</span>,</span>
<span>                event <span class="op">=</span> <span class="va">linelist_surv</span><span class="op">$</span><span class="va">event</span><span class="op">)</span></span></code></pre></div>
<!-- ```{r} -->
<!-- survobj <- with(linelist_surv, -->
<!-- survie::Surv(futime, event) -->
<!-- ) -->
<!-- ``` -->
<p>Pour revoir, voici les 10 premières lignes des données <code>linelist_surv</code>, en ne visualisant que certaines colonnes importantes.</p>
<div class="sourceCode" id="cb1282"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">linelist_surv</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">case_id</span>, <span class="va">date_onset</span>, <span class="va">date_outcome</span>, <span class="va">futime</span>, <span class="va">outcome</span>, <span class="va">event</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span></span></code></pre></div>
<pre><code>##    case_id date_onset date_outcome futime outcome event
## 1   8689b7 2014-05-13   2014-05-18      5 Recover     0
## 2   11f8ea 2014-05-16   2014-05-30     14 Recover     0
## 3   893f25 2014-05-21   2014-05-29      8 Recover     0
## 4   be99c8 2014-05-22   2014-05-24      2 Recover     0
## 5   07e3e8 2014-05-27   2014-06-01      5 Recover     0
## 6   369449 2014-06-02   2014-06-07      5   Death     1
## 7   f393b4 2014-06-05   2014-06-18     13 Recover     0
## 8   1389ca 2014-06-05   2014-06-09      4   Death     1
## 9   2978ac 2014-06-06   2014-06-15      9   Death     1
## 10  fc15ef 2014-06-16   2014-07-09     23 Recover     0</code></pre>
<p>Et voici les 10 premiers éléments de <code>survobj</code>. Il s’imprime essentiellement comme un vecteur de temps de suivi, avec “+” pour représenter si une observation a été censurée à droite. Voyez comment les chiffres s’alignent au-dessus et en dessous.</p>
<div class="sourceCode" id="cb1284"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#imprimez les 50 premiers éléments du vecteur pour voir comment il se présente</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">survobj</span>, <span class="fl">10</span><span class="op">)</span></span></code></pre></div>
<pre><code>##  [1]  5+ 14+  8+  2+  5+  5  13+  4   9  23+</code></pre>
</div>
<div id="exécution-des-analyses-initiales" class="section level3 unnumbered">
<h3>Exécution des analyses initiales<a class="anchor" aria-label="anchor" href="#ex%C3%A9cution-des-analyses-initiales"><i class="fas fa-link"></i></a>
</h3>
<p>Nous commençons ensuite notre analyse en utilisant la fonction <code>survfit()</code> pour produire un objet <em>survfit</em>, qui s’adapte aux calculs par défaut pour les estimations <strong><em>Kaplan Meier</em></strong> (KM) de la courbe de survie globale (marginale), qui sont en fait une fonction échelon avec des sauts aux moments des événements observés. L’objet final <em>survfit</em> contient une ou plusieurs courbes de survie et est créé en utilisant l’objet <em>Surv</em> comme variable de réponse dans la formule du modèle.</p>
<p><span style="color : black ;"><strong><em>NOTE:</em></strong> L’estimation de Kaplan-Meier est une estimation non paramétrique du maximum de vraisemblance (MLE) de la fonction de survie. (voir les ressources pour plus d’informations).</span></p>
<p>Le résumé de cet objet <em>survfit</em> donnera ce que l’on appelle une <em>table de survie</em>. Pour chaque pas de temps du suivi (<code>temps</code>) où un événement s’est produit (par ordre croissant) :</p>
<ul>
<li>le nombre de personnes qui étaient à risque de développer l’événement (les personnes qui n’ont pas encore eu l’événement ou qui ont été censurées : <code>n.risk</code>)<br>
</li>
<li>ceux qui ont développé l’événement (<code>n.event</code>)<br>
</li>
<li>et à partir de ce qui précède : la probabilité de <em>ne pas</em> développer l’événement (probabilité de ne pas mourir, ou de survivre au-delà de ce moment spécifique).<br>
</li>
<li>enfin, l’erreur standard et l’intervalle de confiance pour cette probabilité sont dérivés et affichés.</li>
</ul>
<p>Nous ajustons les estimations de la GC en utilisant la formule où l’objet “survobj” précédemment survécu est la variable de réponse. “~ 1” précise que nous exécutons le modèle pour la survie globale.</p>
<div class="sourceCode" id="cb1286"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># ajuster les estimations KM en utilisant une formule où l'objet Surv "survobj" est la variable de réponse.</span></span>
<span><span class="co"># "~ 1" signifie que nous exécutons le modèle pour la survie globale.  </span></span>
<span><span class="va">linelistsurv_fit</span> <span class="op">&lt;-</span> <span class="fu">survival</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/survfit.html">survfit</a></span><span class="op">(</span><span class="va">survobj</span> <span class="op">~</span> <span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#imprimez son résumé pour plus de détails</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">linelistsurv_fit</span><span class="op">)</span></span></code></pre></div>
<pre><code>## Call: survfit(formula = survobj ~ 1)
## 
##  time n.risk n.event survival std.err lower 95% CI upper 95% CI
##     1   4539      30    0.993 0.00120        0.991        0.996
##     2   4500      69    0.978 0.00217        0.974        0.982
##     3   4394     149    0.945 0.00340        0.938        0.952
##     4   4176     194    0.901 0.00447        0.892        0.910
##     5   3899     214    0.852 0.00535        0.841        0.862
##     6   3592     210    0.802 0.00604        0.790        0.814
##     7   3223     179    0.757 0.00656        0.745        0.770
##     8   2899     167    0.714 0.00700        0.700        0.728
##     9   2593     145    0.674 0.00735        0.660        0.688
##    10   2311     109    0.642 0.00761        0.627        0.657
##    11   2081     119    0.605 0.00788        0.590        0.621
##    12   1843      89    0.576 0.00809        0.560        0.592
##    13   1608      55    0.556 0.00823        0.540        0.573
##    14   1448      43    0.540 0.00837        0.524        0.556
##    15   1296      31    0.527 0.00848        0.511        0.544
##    16   1152      48    0.505 0.00870        0.488        0.522
##    17   1002      29    0.490 0.00886        0.473        0.508
##    18    898      21    0.479 0.00900        0.462        0.497
##    19    798       7    0.475 0.00906        0.457        0.493
##    20    705       4    0.472 0.00911        0.454        0.490
##    21    626      13    0.462 0.00932        0.444        0.481
##    22    546       8    0.455 0.00948        0.437        0.474
##    23    481       5    0.451 0.00962        0.432        0.470
##    24    436       4    0.447 0.00975        0.428        0.466
##    25    378       4    0.442 0.00993        0.423        0.462
##    26    336       3    0.438 0.01010        0.419        0.458
##    27    297       1    0.436 0.01017        0.417        0.457
##    29    235       1    0.435 0.01030        0.415        0.455
##    38     73       1    0.429 0.01175        0.406        0.452</code></pre>
<p>En utilisant <code><a href="https://rdrr.io/r/base/summary.html">summary()</a></code>, nous pouvons ajouter l’option <code>times</code> et spécifier certaines heures auxquelles nous voulons voir les informations de survie.</p>
<div class="sourceCode" id="cb1288"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#imprime son résumé à des moments précis</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">linelistsurv_fit</span>, times <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">5</span>,<span class="fl">10</span>,<span class="fl">20</span>,<span class="fl">30</span>,<span class="fl">60</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>## Call: survfit(formula = survobj ~ 1)
## 
##  time n.risk n.event survival std.err lower 95% CI upper 95% CI
##     5   3899     656    0.852 0.00535        0.841        0.862
##    10   2311     810    0.642 0.00761        0.627        0.657
##    20    705     446    0.472 0.00911        0.454        0.490
##    30    210      39    0.435 0.01030        0.415        0.455
##    60      2       1    0.429 0.01175        0.406        0.452</code></pre>
<p>Nous pouvons également utiliser la fonction <code><a href="https://rdrr.io/r/base/print.html">print()</a></code>. L’argument <code>print.rmean = TRUE</code> permet d’obtenir le temps de survie moyen et son erreur standard (se).</p>
<p><span style="color : black ;"><strong><em>NOTE:</em></strong> La durée moyenne de survie restreinte (RMST) est une mesure de survie spécifique de plus en plus utilisée dans l’analyse de survie des cancers et qui est souvent définie comme l’aire sous la courbe de survie, étant donné que nous observons les patients jusqu’au temps restreint T (plus de détails dans la section Ressources).</span></p>
<div class="sourceCode" id="cb1290"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Imprimez l'objet linelistsurv_fit avec le temps de survie moyen et son se. </span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">linelistsurv_fit</span>, print.rmean <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre><code>## Call: survfit(formula = survobj ~ 1)
## 
##         n events rmean* se(rmean) median 0.95LCL 0.95UCL
## [1,] 4539   1952   33.1     0.539     17      16      18
##     * restricted mean with upper limit =  64</code></pre>
<p><span style="color : darkgreen ;"><strong><em>TIP:</em></strong> Nous pouvons créer <em>l’objet surv</em> directement dans la fonction <code>survfit()</code> et économiser une ligne de code. Cela ressemblera alors à : <code>linelistsurv_quick &lt;- survfit(Surv(futime, event) ~ 1, data=linelist_surv)</code>.</span></p>
</div>
<div id="risque-cumulé" class="section level3 unnumbered">
<h3>Risque cumulé<a class="anchor" aria-label="anchor" href="#risque-cumul%C3%A9"><i class="fas fa-link"></i></a>
</h3>
<p>Outre la fonction <code><a href="https://rdrr.io/r/base/summary.html">summary()</a></code>, nous pouvons également utiliser la fonction <code><a href="https://rdrr.io/r/utils/str.html">str()</a></code> qui donne plus de détails sur la structure de l’objet <code>survfit()</code>. Il s’agit d’une liste de 16 éléments.</p>
<p>Parmi ces éléments, il y en a un important : <code>cumhaz</code>, qui est un vecteur numérique. Il pourrait être tracé pour permettre de montrer le <strong><em>danger cumulatif</em></strong>, le <strong><em>danger</em></strong> étant le <strong><em>taux instantané d’occurrence de l’événement</em></strong> (voir références).</p>
<div class="sourceCode" id="cb1292"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">linelistsurv_fit</span><span class="op">)</span></span></code></pre></div>
<pre><code>## List of 16
##  $ n        : int 4539
##  $ time     : num [1:59] 1 2 3 4 5 6 7 8 9 10 ...
##  $ n.risk   : num [1:59] 4539 4500 4394 4176 3899 ...
##  $ n.event  : num [1:59] 30 69 149 194 214 210 179 167 145 109 ...
##  $ n.censor : num [1:59] 9 37 69 83 93 159 145 139 137 121 ...
##  $ surv     : num [1:59] 0.993 0.978 0.945 0.901 0.852 ...
##  $ std.err  : num [1:59] 0.00121 0.00222 0.00359 0.00496 0.00628 ...
##  $ cumhaz   : num [1:59] 0.00661 0.02194 0.05585 0.10231 0.15719 ...
##  $ std.chaz : num [1:59] 0.00121 0.00221 0.00355 0.00487 0.00615 ...
##  $ type     : chr "right"
##  $ logse    : logi TRUE
##  $ conf.int : num 0.95
##  $ conf.type: chr "log"
##  $ lower    : num [1:59] 0.991 0.974 0.938 0.892 0.841 ...
##  $ upper    : num [1:59] 0.996 0.982 0.952 0.91 0.862 ...
##  $ call     : language survfit(formula = survobj ~ 1)
##  - attr(*, "class")= chr "survfit"</code></pre>
<!-- ======================================================= -->
</div>
<div id="tracer-les-courbes-de-kaplan-meir" class="section level3 unnumbered">
<h3>Tracer les courbes de Kaplan-Meir<a class="anchor" aria-label="anchor" href="#tracer-les-courbes-de-kaplan-meir"><i class="fas fa-link"></i></a>
</h3>
<p>Une fois les estimations KM ajustées, nous pouvons visualiser la probabilité d’être en vie à un moment donné en utilisant la fonction de base <code><a href="https://rdrr.io/r/graphics/plot.default.html">plot()</a></code> qui dessine la “courbe de Kaplan-Meier”. En d’autres termes, la courbe ci-dessous est une illustration classique de l’expérience de survie dans l’ensemble du groupe de patients.</p>
<p>Nous pouvons rapidement vérifier le temps de suivi min et max sur la courbe.</p>
<p>Une manière simple d’interpréter est de dire qu’au temps zéro, tous les participants sont encore en vie et que la probabilité de survie est alors de 100%. Cette probabilité diminue au fil du temps, à mesure que les patients meurent. La proportion de participants survivant après 60 jours de suivi est d’environ 40 %.</p>
<div class="sourceCode" id="cb1294"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">linelistsurv_fit</span>, </span>
<span>     xlab <span class="op">=</span> <span class="st">"Days of follow-up"</span>, <span class="co"># étiquette de l'axe des x</span></span>
<span>     ylab<span class="op">=</span><span class="st">"Probabilité de survie"</span>, <span class="co"># étiquette de l'axe des y</span></span>
<span>     main<span class="op">=</span> <span class="st">"Courbe de survie globale"</span> <span class="co"># titre de la figure</span></span>
<span>     <span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-909-1.png" width="672"></div>
<p>L’intervalle de confiance des estimations de survie KM est également tracé par défaut et peut être écarté en ajoutant l’option <code>conf.int = FALSE</code> à la commande <code><a href="https://rdrr.io/r/graphics/plot.default.html">plot()</a></code>.</p>
<p>Puisque l’événement d’intérêt est la “mort”, dessiner une courbe décrivant les compléments des proportions de survie conduira à dessiner les proportions de mortalité cumulées. Ceci peut être fait avec <code><a href="https://rdrr.io/r/graphics/lines.html">lines()</a></code>, qui ajoute des informations à un graphique existant.</p>
<div class="sourceCode" id="cb1295"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># tracé original</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span></span>
<span>  <span class="va">linelistsurv_fit</span>,</span>
<span>  xlab <span class="op">=</span> <span class="st">"Jours de suivi"</span>,       </span>
<span>  ylab <span class="op">=</span> <span class="st">"Probabilité de survie"</span>,       </span>
<span>  mark.time <span class="op">=</span> <span class="cn">TRUE</span>, <span class="co"># marque les événements sur la courbe : un "+" est imprimé à chaque événement</span></span>
<span>  conf.int <span class="op">=</span> <span class="cn">FALSE</span>, <span class="co"># ne pas tracer l'intervalle de confiance</span></span>
<span>  main <span class="op">=</span> <span class="st">"Courbe de survie globale et mortalité cumulée"</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># Dessinez une courbe supplémentaire au tracé précédent</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/lines.html">lines</a></span><span class="op">(</span></span>
<span>  <span class="va">linelistsurv_fit</span>,</span>
<span>  lty <span class="op">=</span> <span class="fl">3</span>, <span class="co"># utiliser un type de ligne différent pour plus de clarté</span></span>
<span>  fun <span class="op">=</span> <span class="st">"event"</span>, <span class="co"># dessine les événements cumulés au lieu de la survie </span></span>
<span>  mark.time <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  conf.int <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># Ajoutez une légende au graphique</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/legend.html">legend</a></span><span class="op">(</span></span>
<span>  <span class="st">"topright"</span>, <span class="co"># position de la légende</span></span>
<span>  legend <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Survival"</span>, <span class="st">"Cum. Mortality"</span><span class="op">)</span>, <span class="co"># texte de la légende </span></span>
<span>  lty <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">3</span><span class="op">)</span>, <span class="co"># types de lignes à utiliser dans la légende</span></span>
<span>  cex <span class="op">=</span> <span class="fl">.85</span>, <span class="co"># paramètres qui définissent la taille du texte de la légende</span></span>
<span>  bty <span class="op">=</span> <span class="st">"n"</span>, <span class="co"># aucun type de boîte à dessiner pour la légende</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-910-1.png" width="672"></div>
<!-- ======================================================= -->
</div>
</div>
<div id="comparaison-des-courbes-de-survie" class="section level2" number="27.4">
<h2>
<span class="header-section-number">27.4</span> Comparaison des courbes de survie<a class="anchor" aria-label="anchor" href="#comparaison-des-courbes-de-survie"><i class="fas fa-link"></i></a>
</h2>
<p>Pour comparer la survie au sein de différents groupes de nos participants ou patients observés, nous pourrions avoir besoin de regarder d’abord leurs courbes de survie respectives, puis d’effectuer des tests pour évaluer la différence entre les groupes indépendants. Cette comparaison peut concerner des groupes basés sur le sexe, l’âge, le traitement, la comorbidité…</p>
<div id="test-du-log-rank" class="section level3 unnumbered">
<h3>Test du log rank<a class="anchor" aria-label="anchor" href="#test-du-log-rank"><i class="fas fa-link"></i></a>
</h3>
<p>Le test du log rank est un test populaire qui compare l’ensemble de l’expérience de survie entre deux ou plusieurs groupes <em>indépendants</em> et peut être considéré comme un test permettant de savoir si les courbes de survie sont identiques (se chevauchent) ou non (hypothèse nulle d’aucune différence de survie entre les groupes). La fonction <code>survdiff()</code> du <strong>paquet survie</strong> permet d’exécuter le test log-rank lorsque l’on spécifie <code>rho = 0</code> (ce qui est le cas par défaut). Le résultat du test donne une statistique de chi-deux ainsi qu’une valeur p puisque la statistique de log-rang est approximativement distribuée comme une statistique de test de chi-deux.</p>
<p>Nous essayons d’abord de comparer les courbes de survie par groupe de sexe. Pour cela, nous essayons d’abord de les visualiser (vérifier si les deux courbes de survie se chevauchent). Un nouvel objet <em>survfit</em> sera créé avec une formule légèrement différente. Ensuite, l’objet <em>survdiff</em> sera créé.</p>
<p>En fournissant <code>~ gender</code> comme partie droite de la formule, nous ne traçons plus la survie globale mais plutôt par sexe.</p>
<div class="sourceCode" id="cb1296"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># créez le nouvel objet survfit basé sur le sexe</span></span>
<span><span class="va">linelistsurv_fit_sex</span> <span class="op">&lt;-</span> <span class="fu">survfit</span><span class="op">(</span><span class="fu">Surv</span><span class="op">(</span><span class="va">futime</span>, <span class="va">event</span><span class="op">)</span> <span class="op">~</span> <span class="va">gender</span>, data <span class="op">=</span> <span class="va">linelist_surv</span><span class="op">)</span></span></code></pre></div>
<p>Maintenant, nous pouvons tracer les courbes de survie par sexe. Jetez un oeil à l’<em>ordre</em> des niveaux de strates dans la colonne sexe avant de définir vos couleurs et votre légende.</p>
<div class="sourceCode" id="cb1297"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># définissez les couleurs</span></span>
<span><span class="va">col_sex</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"light green"</span>, <span class="st">"dark green"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Créez le graphique</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span></span>
<span>  <span class="va">linelistsurv_fit_sex</span>,</span>
<span>  col <span class="op">=</span> <span class="va">col_sex</span>,</span>
<span>  xlab <span class="op">=</span> <span class="st">"Jours de suivi"</span>,</span>
<span>  ylab <span class="op">=</span> <span class="st">"Probabilité de survie"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># ajouter une légende</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/legend.html">legend</a></span><span class="op">(</span></span>
<span>  <span class="st">"topright"</span>,</span>
<span>  legend <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Female"</span>, <span class="st">"Male"</span><span class="op">)</span>,</span>
<span>  col <span class="op">=</span> <span class="va">col_sex</span>,</span>
<span>  lty <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  cex <span class="op">=</span> <span class="fl">.9</span>,</span>
<span>  bty <span class="op">=</span> <span class="st">"n"</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-911-1.png" width="672"></div>
<p>Et maintenant nous pouvons calculer le test de la différence entre les courbes de survie en utilisant `survdiff()``</p>
<div class="sourceCode" id="cb1298"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#Test de la différence entre les courbes de survie</span></span>
<span><span class="fu">survival</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/survdiff.html">survdiff</a></span><span class="op">(</span></span>
<span>  <span class="fu">Surv</span><span class="op">(</span><span class="va">futime</span>, <span class="va">event</span><span class="op">)</span> <span class="op">~</span> <span class="va">gender</span>, </span>
<span>  data <span class="op">=</span> <span class="va">linelist_surv</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<pre><code>## Call:
## survival::survdiff(formula = Surv(futime, event) ~ gender, data = linelist_surv)
## 
## n=4321, 218 observations deleted due to missingness.
## 
##             N Observed Expected (O-E)^2/E (O-E)^2/V
## gender=f 2156      924      909     0.255     0.524
## gender=m 2165      929      944     0.245     0.524
## 
##  Chisq= 0.5  on 1 degrees of freedom, p= 0.5</code></pre>
<p>Nous constatons que la courbe de survie des femmes et celle des hommes se chevauchent et que le test log-rank ne met pas en évidence de différence de survie entre les femmes et les hommes.</p>
<p>Certains autres packages R permettent d’illustrer les courbes de survie de différents groupes et de tester la différence en une seule fois. En utilisant la fonction <code>ggsurvplot()</code> du paquet <strong>survminer</strong>, nous pouvons également inclure dans notre courbe les tableaux de risque imprimés pour chaque groupe, ainsi que la p-value du test log-rank.</p>
<p><span style="color : orange ;"><strong><em>CAUTION:</em></strong> Les fonctions <strong>survminer</strong> exigent que vous spécifiiez l’objet de survie <em>et</em> que vous spécifiiez à nouveau les données utilisées pour ajuster l’objet de survie. N’oubliez pas de le faire pour éviter les messages d’erreur non spécifiques. </span></p>
<div class="sourceCode" id="cb1300"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">survminer</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/survminer/man/ggsurvplot.html">ggsurvplot</a></span><span class="op">(</span></span>
<span>    <span class="va">linelistsurv_fit_sex</span>, </span>
<span>    data <span class="op">=</span> <span class="va">linelist_surv</span>, <span class="co"># spécifiez à nouveau les données utilisées pour ajuster linelistsurv_fit_sex </span></span>
<span>    conf.int <span class="op">=</span> <span class="cn">FALSE</span>, <span class="co"># ne pas montrer l'intervalle de confiance des estimations KM</span></span>
<span>    surv.scale <span class="op">=</span> <span class="st">"percent"</span>, <span class="co"># présente les probabilités sur l'axe des ordonnées en %.</span></span>
<span>    break.time.by <span class="op">=</span> <span class="fl">10</span>, <span class="co"># présente l'axe du temps avec un incrément de 10 jours</span></span>
<span>    xlab <span class="op">=</span> <span class="st">"Jours de suivi"</span>,</span>
<span>    ylab <span class="op">=</span> <span class="st">"Probabilité de survie"</span>,</span>
<span>    pval <span class="op">=</span> <span class="cn">T</span>, <span class="co"># imprimer la valeur p du test de Log-rank </span></span>
<span>    pval.coord <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">40</span>,<span class="fl">.91</span><span class="op">)</span>, <span class="co"># imprimer la valeur p à ces coordonnées de tracé</span></span>
<span>    risk.table <span class="op">=</span> <span class="cn">T</span>, <span class="co"># imprime le tableau des risques en bas de page </span></span>
<span>    legend.title <span class="op">=</span> <span class="st">"Gender"</span>, <span class="co"># légende des caractéristiques</span></span>
<span>    legend.labs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Female"</span>, <span class="st">"Male"</span><span class="op">)</span>,</span>
<span>    font.legend <span class="op">=</span> <span class="fl">10</span>, </span>
<span>    palette <span class="op">=</span> <span class="st">"Dark2"</span>, <span class="co"># spécifier la palette de couleurs </span></span>
<span>    surv.median.line <span class="op">=</span> <span class="st">"hv"</span>, <span class="co"># dessine des lignes horizontales et verticales sur les médianes de survie</span></span>
<span>    ggtheme <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_light</a></span><span class="op">(</span><span class="op">)</span> <span class="co"># simplifie le fond du graphique</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-913-1.png" width="672"></div>
<p>Nous pouvons également vouloir tester les différences de survie en fonction de la source d’infection (source de contamination).</p>
<p>Dans ce cas, le test Log rank donne suffisamment de preuves d’une différence dans les probabilités de survie à <code>alpha= 0.005</code>. Les probabilités de survie des patients qui ont été infectés lors de funérailles sont plus élevées que les probabilités de survie des patients qui ont été infectés dans d’autres lieux, ce qui suggère un bénéfice de survie.</p>
<div class="sourceCode" id="cb1301"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">linelistsurv_fit_source</span> <span class="op">&lt;-</span> <span class="fu">survfit</span><span class="op">(</span></span>
<span>  <span class="fu">Surv</span><span class="op">(</span><span class="va">futime</span>, <span class="va">event</span><span class="op">)</span> <span class="op">~</span> <span class="va">source</span>,</span>
<span>  data <span class="op">=</span> <span class="va">linelist_surv</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># plot</span></span>
<span><span class="fu">ggsurvplot</span><span class="op">(</span> </span>
<span>  <span class="va">linelistsurv_fit_source</span>,</span>
<span>  data <span class="op">=</span> <span class="va">linelist_surv</span>,</span>
<span>  size <span class="op">=</span> <span class="fl">1</span>, linetype <span class="op">=</span> <span class="st">"strata"</span>, <span class="co"># types de lignes</span></span>
<span>  conf.int <span class="op">=</span> <span class="cn">T</span>,</span>
<span>  surv.scale <span class="op">=</span> <span class="st">"percent"</span>,  </span>
<span>  break.time.by <span class="op">=</span> <span class="fl">10</span>, </span>
<span>  xlab <span class="op">=</span> <span class="st">"Jours de suivi"</span>,</span>
<span>  ylab<span class="op">=</span> <span class="st">"Probabilité de survie"</span>,</span>
<span>  pval <span class="op">=</span> <span class="cn">T</span>,</span>
<span>  pval.coord <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">40</span>, <span class="fl">.91</span><span class="op">)</span>,</span>
<span>  risk.table <span class="op">=</span> <span class="cn">T</span>,</span>
<span>  legend.title <span class="op">=</span> <span class="st">"Source d'infection"</span>,</span>
<span>  legend.labs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Funéraire"</span>, <span class="st">"Autre"</span><span class="op">)</span>,</span>
<span>  font.legend <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  palette <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"#E7B800"</span>, <span class="st">"#3E606F"</span><span class="op">)</span>,</span>
<span>  surv.median.line <span class="op">=</span> <span class="st">"hv"</span>, </span>
<span>  ggtheme <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_light</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-914-1.png" width="672"></div>
<!-- ======================================================= -->
</div>
</div>
<div id="analyse-de-régression-de-cox" class="section level2" number="27.5">
<h2>
<span class="header-section-number">27.5</span> Analyse de régression de Cox<a class="anchor" aria-label="anchor" href="#analyse-de-r%C3%A9gression-de-cox"><i class="fas fa-link"></i></a>
</h2>
<p>La régression des risques proportionnels de Cox est l’une des techniques de régression les plus populaires pour l’analyse de survie. D’autres modèles peuvent également être utilisés puisque le modèle de Cox requiert des <em>hypothèses importantes</em> qui doivent être vérifiées pour une utilisation appropriée, comme l’hypothèse des risques proportionnels : voir les références.</p>
<p>Dans un modèle de régression à risques proportionnels de Cox, la mesure de l’effet est le <strong><em>taux de risque</em></strong> (HR), qui est le risque d’échec (ou le risque de décès dans notre exemple), étant donné que le participant a survécu jusqu’à un moment spécifique. Habituellement, nous sommes intéressés par la comparaison de groupes <em>indépendants</em> en ce qui concerne leurs risques, et nous utilisons un rapport de risque, qui est analogue à un rapport de cotes dans le cadre d’une analyse de régression logistique multiple. La fonction <code>cox.ph()</code> du paquet <strong>survival</strong> est utilisée pour ajuster le modèle. La fonction <code>cox.zph()</code> du paquet <strong>survival</strong> peut être utilisée pour tester l’hypothèse de risques proportionnels pour un ajustement du modèle de régression de Cox.</p>
<p><span style="color : black ;"><strong><em>NOTE:</em></strong> Une probabilité doit être comprise entre 0 et 1. Cependant, le hasard représente le nombre attendu d’événements par unité de temps.</span></p>
<ul>
<li>Si le rapport de risque d’un prédicteur est proche de 1, alors ce prédicteur n’affecte pas la survie,</li>
<li>si le HR est inférieur à 1, alors le prédicteur est protecteur (c’est-à-dire associé à une meilleure survie),</li>
<li>et si le HR est supérieur à 1, alors le prédicteur est associé à un risque accru (ou à une diminution de la survie).</li>
</ul>
<div id="ajustement-dun-modèle-de-cox" class="section level3 unnumbered">
<h3>Ajustement d’un modèle de Cox<a class="anchor" aria-label="anchor" href="#ajustement-dun-mod%C3%A8le-de-cox"><i class="fas fa-link"></i></a>
</h3>
<p>Nous pouvons d’abord ajuster un modèle pour évaluer l’effet de l’âge et du sexe sur la survie. En imprimant simplement le modèle, nous avons les informations sur :</p>
<ul>
<li>les coefficients de régression estimés <code>coef</code> qui quantifient l’association entre les prédicteurs et le résultat,</li>
<li>leur exponentielle (pour faciliter l’interprétation, <code>exp(coef)</code>) qui produit le <em>rapport de risque</em>,</li>
<li>leur erreur standard <code>se(coef)</code>,</li>
<li>le z-score : combien d’erreurs standard le coefficient estimé est-il éloigné de 0,</li>
<li>et la valeur p : la probabilité que le coefficient estimé puisse être 0.</li>
</ul>
<p>La fonction <code><a href="https://rdrr.io/r/base/summary.html">summary()</a></code> appliquée à l’objet modèle de cox donne plus d’informations, comme l’intervalle de confiance du HR estimé et les différents résultats du test.</p>
<p>L’effet de la première covariable <code>gender</code> est présenté dans la première ligne. <code>genderm</code> (masculin) est imprimé, ce qui implique que le premier niveau de strate (“f”), c’est-à-dire le groupe féminin, est le groupe de référence pour le sexe. Ainsi, l’interprétation du paramètre de test est celle des hommes par rapport aux femmes. La valeur p indique qu’il n’y a pas suffisamment de preuves d’un effet du sexe sur le risque attendu ou d’une association entre le sexe et la mortalité toutes causes confondues.</p>
<p>Le même manque de preuves est noté concernant le groupe d’âge.</p>
<div class="sourceCode" id="cb1302"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#ajustement du modèle de cox</span></span>
<span><span class="va">linelistsurv_cox_sexage</span> <span class="op">&lt;-</span> <span class="fu">survival</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/coxph.html">coxph</a></span><span class="op">(</span></span>
<span>              <span class="fu">Surv</span><span class="op">(</span><span class="va">futime</span>, <span class="va">event</span><span class="op">)</span> <span class="op">~</span> <span class="va">gender</span> <span class="op">+</span> <span class="va">age_cat_small</span>, </span>
<span>              data <span class="op">=</span> <span class="va">linelist_surv</span></span>
<span>              <span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co">#imprimer le modèle ajusté</span></span>
<span><span class="va">linelistsurv_cox_sexage</span></span></code></pre></div>
<pre><code>## Call:
## survival::coxph(formula = Surv(futime, event) ~ gender + age_cat_small, 
##     data = linelist_surv)
## 
##                       coef exp(coef) se(coef)      z     p
## genderm           -0.03149   0.96900  0.04767 -0.661 0.509
## age_cat_small5-19  0.09400   1.09856  0.06454  1.456 0.145
## age_cat_small20+   0.05032   1.05161  0.06953  0.724 0.469
## 
## Likelihood ratio test=2.8  on 3 df, p=0.4243
## n= 4321, number of events= 1853 
##    (218 observations deleted due to missingness)</code></pre>
<div class="sourceCode" id="cb1304"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#sommaire du modèle</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">linelistsurv_cox_sexage</span><span class="op">)</span></span></code></pre></div>
<pre><code>## Call:
## survival::coxph(formula = Surv(futime, event) ~ gender + age_cat_small, 
##     data = linelist_surv)
## 
##   n= 4321, number of events= 1853 
##    (218 observations deleted due to missingness)
## 
##                       coef exp(coef) se(coef)      z Pr(&gt;|z|)
## genderm           -0.03149   0.96900  0.04767 -0.661    0.509
## age_cat_small5-19  0.09400   1.09856  0.06454  1.456    0.145
## age_cat_small20+   0.05032   1.05161  0.06953  0.724    0.469
## 
##                   exp(coef) exp(-coef) lower .95 upper .95
## genderm               0.969     1.0320    0.8826     1.064
## age_cat_small5-19     1.099     0.9103    0.9680     1.247
## age_cat_small20+      1.052     0.9509    0.9176     1.205
## 
## Concordance= 0.514  (se = 0.007 )
## Likelihood ratio test= 2.8  on 3 df,   p=0.4
## Wald test            = 2.78  on 3 df,   p=0.4
## Score (logrank) test = 2.78  on 3 df,   p=0.4</code></pre>
<p>Il était intéressant d’exécuter le modèle et de regarder les résultats, mais un premier coup d’oeil pour vérifier si les hypothèses de risques proportionnels sont respectées pourrait aider à gagner du temps.</p>
<div class="sourceCode" id="cb1306"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">test_ph_sexage</span> <span class="op">&lt;-</span> <span class="fu">survival</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/cox.zph.html">cox.zph</a></span><span class="op">(</span><span class="va">linelistsurv_cox_sexage</span><span class="op">)</span></span>
<span><span class="va">test_ph_sexage</span></span></code></pre></div>
<pre><code>##               chisq df    p
## gender        0.454  1 0.50
## age_cat_small 0.838  2 0.66
## GLOBAL        1.399  3 0.71</code></pre>
<p><span style="color : black ;"><strong><em>NOTE:</em></strong> Un deuxième argument appelé <em>méthode</em> peut être spécifié lors du calcul du modèle de cox, qui détermine comment les liens sont traités. Le <em>défaut</em> est “efron”, et les autres options sont “breslow” et “exact”.</span></p>
<p>Dans un autre modèle, nous ajoutons d’autres facteurs de risque tels que la source de l’infection et le nombre de jours entre la date d’apparition et l’admission. Cette fois, nous vérifions d’abord l’hypothèse des risques proportionnels avant de poursuivre.</p>
<p>Dans ce modèle, nous avons inclus un prédicteur continu (<code>days_onset_hosp</code>). Dans ce cas, nous interprétons les estimations des paramètres comme l’augmentation du logarithme attendu du risque relatif pour chaque augmentation d’une unité du prédicteur, les autres prédicteurs restant constants. Nous vérifions d’abord l’hypothèse de risques proportionnels.</p>
<div class="sourceCode" id="cb1308"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#fit le modèle</span></span>
<span><span class="va">linelistsurv_cox</span> <span class="op">&lt;-</span> <span class="fu">coxph</span><span class="op">(</span></span>
<span>                        <span class="fu">Surv</span><span class="op">(</span><span class="va">futime</span>, <span class="va">event</span><span class="op">)</span> <span class="op">~</span> <span class="va">gender</span> <span class="op">+</span> <span class="va">age_years</span><span class="op">+</span> <span class="va">source</span> <span class="op">+</span> <span class="va">days_onset_hosp</span>,</span>
<span>                        data <span class="op">=</span> <span class="va">linelist_surv</span></span>
<span>                        <span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co">#Tester le modèle de risque proportionnel</span></span>
<span><span class="va">linelistsurv_ph_test</span> <span class="op">&lt;-</span> <span class="fu">cox.zph</span><span class="op">(</span><span class="va">linelistsurv_cox</span><span class="op">)</span></span>
<span><span class="va">linelistsurv_ph_test</span></span></code></pre></div>
<pre><code>##                    chisq df       p
## gender           0.45062  1    0.50
## age_years        0.00199  1    0.96
## source           1.79622  1    0.18
## days_onset_hosp 31.66167  1 1.8e-08
## GLOBAL          34.08502  4 7.2e-07</code></pre>
<p>La vérification graphique de cette hypothèse peut être effectuée avec la fonction <code>ggcoxzph()</code> du paquet <strong>survminer</strong>.</p>
<div class="sourceCode" id="cb1310"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">survminer</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/survminer/man/ggcoxzph.html">ggcoxzph</a></span><span class="op">(</span><span class="va">linelistsurv_ph_test</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-915-1.png" width="672"></div>
<p>Les résultats du modèle indiquent qu’il existe une association négative entre la durée entre le début de la maladie et l’admission et la mortalité toutes causes confondues. Le risque attendu est 0,9 fois plus faible chez une personne qui est admise un jour plus tard qu’une autre, le sexe restant constant. Ou, de manière plus directe, une augmentation d’une unité de la durée entre le début de la maladie et l’admission est associée à une diminution de 10,7 % (<code>coef *100</code>) du risque de décès.</p>
<p>Les résultats montrent également une association positive entre la source d’infection et la mortalité toutes causes confondues. C’est-à-dire qu’il y a un risque accru de décès (1,21x) pour les patients qui ont eu une source d’infection autre que les funérailles.</p>
<div class="sourceCode" id="cb1311"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#imprimez le résumé du modèle</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">linelistsurv_cox</span><span class="op">)</span></span></code></pre></div>
<pre><code>## Call:
## coxph(formula = Surv(futime, event) ~ gender + age_years + source + 
##     days_onset_hosp, data = linelist_surv)
## 
##   n= 2772, number of events= 1180 
##    (1767 observations deleted due to missingness)
## 
##                      coef exp(coef)  se(coef)      z Pr(&gt;|z|)    
## genderm          0.004710  1.004721  0.060827  0.077   0.9383    
## age_years       -0.002249  0.997753  0.002421 -0.929   0.3528    
## sourceother      0.178393  1.195295  0.084291  2.116   0.0343 *  
## days_onset_hosp -0.104063  0.901169  0.014245 -7.305 2.77e-13 ***
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
##                 exp(coef) exp(-coef) lower .95 upper .95
## genderm            1.0047     0.9953    0.8918    1.1319
## age_years          0.9978     1.0023    0.9930    1.0025
## sourceother        1.1953     0.8366    1.0133    1.4100
## days_onset_hosp    0.9012     1.1097    0.8764    0.9267
## 
## Concordance= 0.566  (se = 0.009 )
## Likelihood ratio test= 71.31  on 4 df,   p=1e-14
## Wald test            = 59.22  on 4 df,   p=4e-12
## Score (logrank) test = 59.54  on 4 df,   p=4e-12</code></pre>
<p>Nous pouvons vérifier cette relation avec une table :</p>
<div class="sourceCode" id="cb1313"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">linelist_case_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">tabyl</span><span class="op">(</span><span class="va">days_onset_hosp</span>, <span class="va">outcome</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">adorn_percentages</span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>  </span>
<span>  <span class="fu">adorn_pct_formatting</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code>##  days_onset_hosp Death Recover   NA_
##                0 44.3%   31.4% 24.3%
##                1 46.6%   32.2% 21.2%
##                2 43.0%   32.8% 24.2%
##                3 45.0%   32.3% 22.7%
##                4 41.5%   38.3% 20.2%
##                5 40.0%   36.2% 23.8%
##                6 32.2%   48.7% 19.1%
##                7 31.8%   38.6% 29.5%
##                8 29.8%   38.6% 31.6%
##                9 30.3%   51.5% 18.2%
##               10 16.7%   58.3% 25.0%
##               11 36.4%   45.5% 18.2%
##               12 18.8%   62.5% 18.8%
##               13 10.0%   60.0% 30.0%
##               14 10.0%   50.0% 40.0%
##               15 28.6%   42.9% 28.6%
##               16 20.0%   80.0%  0.0%
##               17  0.0%  100.0%  0.0%
##               18  0.0%  100.0%  0.0%
##               22  0.0%  100.0%  0.0%
##               NA 52.7%   31.2% 16.0%</code></pre>
<p>Nous devrions examiner et étudier pourquoi cette association existe dans les données. Une explication possible serait que les patients qui vivent assez longtemps pour être admis plus tard avaient une maladie moins grave au départ. Une autre explication peut-être plus probable est que, puisque nous avons utilisé un faux ensemble de données simulées, ce schéma ne reflète pas la réalité !</p>
<!-- ======================================================= -->
</div>
<div id="forest-plots" class="section level3 unnumbered">
<h3>Forest plots<a class="anchor" aria-label="anchor" href="#forest-plots"><i class="fas fa-link"></i></a>
</h3>
<p>Nous pouvons ensuite visualiser les résultats du modèle de cox en utilisant les parcelles forestières pratiques avec la fonction <code>ggforest()</code> du paquet <strong>survminer</strong>.</p>
<div class="sourceCode" id="cb1315"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggforest</span><span class="op">(</span><span class="va">linelistsurv_cox</span>, data <span class="op">=</span> <span class="va">linelist_surv</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/forestp-1.png" width="672"></div>
<!-- ======================================================= -->
</div>
</div>
<div id="covariables-dépendantes-du-temps-dans-les-modèles-de-survie" class="section level2" number="27.6">
<h2>
<span class="header-section-number">27.6</span> Covariables dépendantes du temps dans les modèles de survie<a class="anchor" aria-label="anchor" href="#covariables-d%C3%A9pendantes-du-temps-dans-les-mod%C3%A8les-de-survie"><i class="fas fa-link"></i></a>
</h2>
<p>Certaines des sections suivantes ont été adaptées avec la permission d’une excellente <a href="https://www.emilyzabor.com/tutorials/survival_analysis_in_r_tutorial.html">introduction à l’analyse de survie dans R</a> par <a href="https://www.emilyzabor.com/">le Dr Emily Zabor</a>.</p>
<p>Dans la dernière section, nous avons abordé l’utilisation de la régression de Cox pour examiner les associations entre les covariables d’intérêt et les résultats de survie, mais ces analyses reposent sur la mesure de la covariable au départ, c’est-à-dire avant le début du suivi de l’événement.</p>
<p>Que se passe-t-il si vous vous intéressez à une covariable qui est mesurée <strong>après</strong> le début du suivi ? Ou, que se passe-t-il si vous avez une covariable qui peut changer dans le temps ?</p>
<p>Par exemple, vous travaillez peut-être avec des données cliniques où vous avez répété les mesures des valeurs de laboratoire de l’hôpital qui peuvent changer dans le temps. C’est un exemple de <strong>Covariable Dépendante du Temps</strong>. Pour résoudre ce problème, vous avez besoin d’une configuration spéciale, mais heureusement, le modèle cox est très flexible et ce type de données peut également être modélisé avec les outils du paquet <strong>survival</strong>.</p>
<div id="configuration-des-covariables-dépendantes-du-temps" class="section level3 unnumbered">
<h3>Configuration des covariables dépendantes du temps<a class="anchor" aria-label="anchor" href="#configuration-des-covariables-d%C3%A9pendantes-du-temps"><i class="fas fa-link"></i></a>
</h3>
<p>L’analyse des covariables dépendantes du temps dans R nécessite la configuration d’un ensemble de données spécial. Si cela vous intéresse, consultez l’article plus détaillé de l’auteur du paquet <strong>survival</strong> <a href="https://cran.r-project.org/web/packages/survival/vignettes/timedep.pdf">Utilisation de covariables dépendantes du temps et de coefficients dépendants du temps dans le modèle de Cox</a>.</p>
<p>Pour cela, nous allons utiliser un nouvel ensemble de données du package <code>SemiCompRisks</code> nommé <code>BMT</code>, qui comprend des données sur 137 patients ayant subi une greffe de moelle osseuse. Les variables sur lesquelles nous allons nous concentrer sont :</p>
<ul>
<li>
<code>T1</code> - temps (en jours) jusqu’au décès ou au dernier suivi.<br>
</li>
<li>
<code>delta1</code> - indicateur de décès ; 1-Dead, 0-Alive<br>
</li>
<li>
<code>TA</code> - temps (en jours) jusqu’à la maladie aiguë du greffon contre l’hôte.<br>
</li>
<li>
<code>deltaA</code> - indicateur de la maladie aiguë du greffon contre l’hôte ;
<ul>
<li>1 - Développement d’une réaction aiguë du greffon contre l’hôte.<br>
</li>
<li>0 - N’a jamais développé de maladie aiguë du greffon contre l’hôte.</li>
</ul>
</li>
</ul>
<p>Nous allons charger cet ensemble de données à partir du paquet <strong>survival</strong> en utilisant la commande <strong>base</strong> R <code><a href="https://rdrr.io/r/utils/data.html">data()</a></code>, qui peut être utilisée pour charger des données qui sont déjà incluses dans un paquet R qui est chargé. Le cadre de données <code>BMT</code> apparaîtra dans votre environnement R.</p>
<div class="sourceCode" id="cb1316"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="va">BMT</span>, package <span class="op">=</span> <span class="st">"SemiCompRisks"</span><span class="op">)</span></span></code></pre></div>
<div id="ajouter-lidentifiant-unique-du-patient" class="section level4 unnumbered">
<h4>Ajouter l’identifiant unique du patient<a class="anchor" aria-label="anchor" href="#ajouter-lidentifiant-unique-du-patient"><i class="fas fa-link"></i></a>
</h4>
<p>Il n’y a pas de colonne d’identifiant unique dans les données <code>BMT</code>, ce qui est nécessaire pour créer le type de jeu de données que nous voulons. Nous utilisons donc la fonction <code><a href="https://tibble.tidyverse.org/reference/rownames.html">rowid_to_column()</a></code> du paquet <strong>tidyverse</strong> <strong>tibble</strong> pour créer une nouvelle colonne d’identification appelée <code>my_id</code> (ajoute une colonne au début du cadre de données avec des identifiants de ligne séquentiels, en commençant par 1). Nous nommons le cadre de données <code>bmt</code>.</p>
<div class="sourceCode" id="cb1317"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bmt</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/rownames.html">rowid_to_column</a></span><span class="op">(</span><span class="va">BMT</span>, <span class="st">"my_id"</span><span class="op">)</span></span></code></pre></div>
<p>L’ensemble de données ressemble maintenant à ceci :</p>
<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-5024276fdc1d9f26c148" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-5024276fdc1d9f26c148">{"x":{"filter":"none","vertical":false,"data":[[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3],[2081,1602,1496,1462,1433,1377,1330,996,226,1199,1111,530,1182,1167,418,417,276,156,781,172,487,716,194,371,526,122,1279,110,243,86,466,262,162,262,1,107,269,350,2569,2506,2409,2218,1857,1829,1562,1470,1363,1030,860,1258,2246,1870,1799,1709,1674,1568,1527,1324,957,932,847,848,1850,1843,1535,1447,1384,414,2204,1063,481,105,641,390,288,522,79,1156,583,48,431,1074,393,10,53,80,35,1499,704,653,222,1356,2640,2430,2252,2140,2133,1238,1631,2024,1345,1136,845,491,162,1298,121,2,62,265,547,341,318,195,469,93,515,183,105,128,164,129,122,80,677,73,168,74,16,248,732,105,392,63,97,153,363],[2081,1602,1496,1462,1433,1377,1330,996,226,1199,1111,530,1182,1167,418,383,276,104,609,172,487,662,194,230,526,122,129,74,122,86,466,192,109,55,1,107,110,332,2569,2506,2409,2218,1857,1829,1562,1470,1363,1030,860,1258,2246,1870,1799,1709,1674,1568,1527,1324,957,932,847,848,1850,1843,1535,1447,1384,414,2204,1063,481,105,641,390,288,421,79,748,486,48,272,1074,381,10,53,80,35,248,704,211,219,606,2640,2430,2252,2140,2133,1238,1631,2024,1345,1136,845,422,162,84,100,2,47,242,456,268,318,32,467,47,390,183,105,115,164,93,120,80,677,64,168,74,16,157,625,48,273,63,76,113,363],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,0,0,1,0,1,0,0,1,1,1,0,0,1,1,1,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,0,1,0,1,0,0,0,0,1,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,0,1,1,1,1,0,1,1,1,1,0,0,1,0,1,1,0,0,1,0,0,0,1,1,1,1,0,1,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[67,1602,1496,70,1433,1377,1330,72,226,1199,1111,38,1182,39,418,417,276,28,781,22,487,716,194,371,526,88,1279,110,243,86,466,10,162,262,1,107,269,350,2569,2506,2409,2218,1857,1829,1562,1470,1363,1030,860,1258,52,1870,1799,20,1674,1568,1527,25,957,29,847,848,1850,1843,1535,1447,1384,414,2204,1063,30,21,641,390,18,25,16,1156,583,48,431,1074,393,10,53,10,35,1499,36,653,222,1356,2640,2430,2252,2140,2133,1238,1631,2024,32,1136,845,491,162,1298,28,2,62,265,547,21,318,195,469,93,515,183,105,128,164,129,122,21,677,73,168,29,16,248,732,105,392,38,97,153,363],[1,0,0,1,0,0,0,1,0,0,0,1,0,1,0,0,0,1,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,1,1,0,0,1,1,1,0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,1,0,0,0],[121,139,307,95,236,123,96,121,226,91,1111,84,112,487,220,417,81,156,781,172,76,716,94,184,121,122,1279,110,243,86,119,84,162,262,1,107,120,350,2569,2506,2409,2218,260,1829,1562,180,200,210,860,120,380,230,140,348,1674,1568,1527,1324,957,932,847,155,1850,1843,1535,220,200,414,2204,240,120,105,641,390,100,140,79,180,583,48,431,120,100,10,53,80,35,1499,155,653,123,1356,2640,2430,150,220,250,250,150,180,360,140,845,180,162,1298,121,2,62,210,130,100,140,195,90,93,515,130,105,128,164,129,122,80,150,73,200,74,16,100,732,105,122,63,97,153,363],[1,1,1,1,1,1,1,1,0,1,0,1,1,1,1,0,1,0,0,0,1,0,1,1,1,0,0,0,0,0,1,1,0,0,0,0,1,0,0,0,0,0,1,0,0,1,1,1,0,1,1,1,1,1,0,0,0,0,0,0,0,1,0,0,0,1,1,0,0,1,1,0,0,0,1,1,0,1,0,0,0,1,1,0,0,0,0,0,1,0,1,0,0,0,1,1,1,1,1,1,1,1,0,1,0,0,0,0,0,1,1,1,1,0,1,0,0,1,0,0,0,0,0,0,1,0,1,0,0,1,0,0,1,0,0,0,0],[13,18,12,13,12,12,17,12,10,29,22,34,22,1167,21,16,21,20,26,37,22,17,25,9,11,13,22,49,23,86,100,59,40,24,1,107,27,33,21,17,16,11,15,19,18,14,12,14,15,66,15,16,12,19,24,14,13,15,69,7,16,16,9,19,21,24,19,27,12,16,24,15,11,11,288,20,79,18,11,14,12,19,16,10,53,80,35,9,18,23,52,14,22,14,17,18,17,18,40,16,14,15,20,491,13,1298,65,2,11,14,24,17,12,16,20,28,31,21,105,12,164,51,12,0,8,38,48,24,16,52,18,30,24,16,97,59,19],[1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,1,1,1,1,1,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0,1,1,1,1,1,1,1,1,1,1,0,1,0,1,1,1,1,1,1,1,0,1,1,1,1,1,0,1,1],[26,21,26,17,32,22,20,22,18,24,19,17,24,27,18,15,18,20,27,40,22,28,26,39,15,20,17,28,37,17,15,29,36,23,42,30,29,22,19,31,35,16,29,19,26,27,13,25,25,30,45,33,32,23,37,15,22,46,18,27,28,23,37,34,35,33,21,21,25,50,35,37,26,50,45,28,43,14,17,32,30,30,33,34,33,30,23,35,29,23,28,33,18,29,35,27,36,24,27,35,50,47,40,22,22,8,39,20,27,32,31,20,35,36,35,7,23,11,14,37,19,37,25,35,15,45,32,41,27,33,39,17,43,44,48,31,52],[33,37,35,21,36,31,17,24,21,40,28,28,23,22,14,20,5,33,27,37,20,32,32,31,20,26,20,25,38,26,18,32,43,16,48,19,20,20,13,34,31,16,35,18,30,34,24,29,31,16,39,30,23,28,34,19,12,31,17,30,29,26,36,32,32,28,18,15,19,38,36,34,24,48,43,30,43,19,14,33,23,32,28,54,41,35,25,18,21,16,30,22,23,26,31,17,39,28,21,41,36,27,39,21,23,2,48,19,25,32,28,23,40,39,33,2,25,7,18,35,32,34,29,28,14,42,43,29,36,39,43,14,50,37,56,25,48],[1,1,1,0,1,1,1,1,0,1,1,1,0,0,1,1,0,1,1,0,1,1,0,0,1,1,0,1,0,1,1,1,1,0,1,1,0,1,1,1,1,1,0,1,1,1,1,0,0,0,0,0,1,0,1,1,0,1,1,0,1,1,0,0,0,0,0,1,0,1,1,1,1,1,1,1,0,1,0,0,0,1,0,1,0,0,0,1,0,1,1,1,1,1,1,1,0,1,1,0,1,1,0,0,1,0,1,1,1,1,1,0,0,1,0,1,1,0,1,0,0,0,0,1,1,0,0,0,0,0,0,0,1,1,1,0,1],[0,1,1,1,1,1,0,0,1,1,1,1,0,1,1,1,0,1,0,0,1,1,1,1,1,0,0,0,1,0,1,1,1,1,1,1,1,0,1,1,1,1,0,1,1,1,1,0,1,1,0,0,0,1,1,0,1,1,1,0,1,1,0,0,1,1,0,1,0,0,0,0,1,1,1,1,0,0,1,1,1,1,0,0,1,0,1,1,1,0,1,1,1,1,0,1,1,0,0,1,1,0,0,0,0,0,1,1,1,0,0,1,1,1,0,1,1,1,0,0,0,1,1,0,1,1,1,1,0,0,1,1,1,1,1,1,1],[1,0,1,0,1,1,1,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,1,1,1,0,1,1,1,0,1,1,0,1,0,1,1,1,1,1,0,1,0,0,1,0,1,0,1,0,0,0,1,0,0,0,0,0,1,0,1,0,0,0,1,1,1,0,0,1,0,0,0,0,1,1,1,0,1,1,0,1,0,1,0,1,1,0,0,0,1,0,1,1,0,1,1,1,0,0,1,1,0,0,0,1,1,1,0,1,0,1,0,0,1,0,1,1,0,1,1,1,1,1,1,1,0,1,0,1,1,1],[1,0,0,0,1,1,1,0,0,1,1,0,1,1,0,0,0,1,1,1,0,0,0,1,0,1,0,0,1,0,0,0,0,1,0,1,1,0,0,0,1,0,0,0,1,1,0,0,1,0,0,1,0,0,0,0,1,1,0,0,0,0,1,1,0,1,0,1,1,0,1,1,0,0,1,1,0,0,0,0,0,0,0,1,1,1,1,1,0,0,1,0,0,1,0,1,0,1,0,0,1,0,1,0,1,0,1,0,0,0,1,1,1,0,0,0,0,0,0,1,1,0,1,0,0,0,1,1,0,1,1,0,0,0,1,1,0],[98,1720,127,168,93,2187,1006,1319,208,174,236,151,203,191,110,824,146,85,187,129,128,84,329,147,943,2616,937,303,170,239,508,74,393,331,196,178,361,834,270,60,120,60,90,210,90,240,90,210,180,180,105,225,120,90,60,90,450,75,90,60,75,180,180,270,180,150,120,120,60,270,90,120,90,120,90,90,90,60,120,150,120,150,120,240,180,150,150,30,105,90,120,210,750,24,120,210,240,240,690,105,120,900,210,210,300,105,210,75,90,180,630,180,300,90,120,135,210,120,150,270,285,240,510,780,150,180,150,750,180,180,150,210,240,360,330,240,180],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,1,0,1,0,0,1,0,0,0,0,1,0,0,1,0,1,1,0,0,0,0,1,0,0,0,1,1,1,1,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,1,1,0,0,1,1,0,1,1,1,1,1,1,1,0,1,0,1,1,1,1,0,1,1,1,1,1,1,1,0,0,1,1,1,0,1,0,0,0],[1,1,1,1,1,1,1,1,1,3,3,3,2,2,1,1,1,1,1,1,1,1,1,1,1,1,3,3,3,3,3,3,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,2,4,4,4,4,4,4,4,4,4,4,4,4,3,3,3,3,3,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,4,4,4,3,3,1,1,1,1,1,1,2,4,4,3,3,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,4,4,4,4,3,3,3,3,3],[0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,1,1,0,0,0,0,0,0,1,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,1,1,1,1,1]],"container":"<table class=\"white-space: nowrap\">\n  <thead>\n    <tr>\n      <th>my_id<\/th>\n      <th>g<\/th>\n      <th>T1<\/th>\n      <th>T2<\/th>\n      <th>delta1<\/th>\n      <th>delta2<\/th>\n      <th>delta3<\/th>\n      <th>TA<\/th>\n      <th>deltaA<\/th>\n      <th>TC<\/th>\n      <th>deltaC<\/th>\n      <th>TP<\/th>\n      <th>deltaP<\/th>\n      <th>Z1<\/th>\n      <th>Z2<\/th>\n      <th>Z3<\/th>\n      <th>Z4<\/th>\n      <th>Z5<\/th>\n      <th>Z6<\/th>\n      <th>Z7<\/th>\n      <th>Z8<\/th>\n      <th>Z9<\/th>\n      <th>Z10<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22]}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="développer-les-lignes-de-patients" class="section level4 unnumbered">
<h4>Développer les lignes de patients<a class="anchor" aria-label="anchor" href="#d%C3%A9velopper-les-lignes-de-patients"><i class="fas fa-link"></i></a>
</h4>
<p>Ensuite, nous allons utiliser la fonction <code>tmerge()</code> avec les fonctions d’aide <code>event()</code> et <code>tdc()</code> pour créer le jeu de données restructuré. Notre but est de restructurer l’ensemble de données pour créer une ligne séparée pour chaque patient pour chaque intervalle de temps où ils ont une valeur différente pour <code>deltaA</code>. Dans ce cas, chaque patient peut avoir au maximum deux lignes selon qu’il a développé ou non une maladie aiguë du greffon contre l’hôte pendant la période de collecte des données. Nous appellerons notre nouvel indicateur de développement de la maladie aiguë du greffon contre l’hôte <code>agvhd</code>.</p>
<ul>
<li>
<code>tmerge()</code> crée un long jeu de données avec plusieurs intervalles de temps pour les différentes valeurs de covariables pour chaque patient.</li>
<li>
<code>event()</code> crée le nouvel indicateur d’événement pour aller avec les intervalles de temps nouvellement créés.</li>
<li>
<code>tdc()</code> crée la colonne de covariable dépendante du temps, <code>agvhd</code>, pour aller avec les intervalles de temps nouvellement créés.</li>
</ul>
<div class="sourceCode" id="cb1318"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">td_dat</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu">tmerge</span><span class="op">(</span></span>
<span>    data1 <span class="op">=</span> <span class="va">bmt</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">my_id</span>, <span class="va">T1</span>, <span class="va">delta1</span><span class="op">)</span>, </span>
<span>    data2 <span class="op">=</span> <span class="va">bmt</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">my_id</span>, <span class="va">T1</span>, <span class="va">delta1</span>, <span class="va">TA</span>, <span class="va">deltaA</span><span class="op">)</span>, </span>
<span>    id <span class="op">=</span> <span class="va">my_id</span>, </span>
<span>    death <span class="op">=</span> <span class="fu">event</span><span class="op">(</span><span class="va">T1</span>, <span class="va">delta1</span><span class="op">)</span>,</span>
<span>    agvhd <span class="op">=</span> <span class="fu">tdc</span><span class="op">(</span><span class="va">TA</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span></code></pre></div>
<p>Pour voir ce que cela donne, examinons les données des 5 premiers patients individuels.</p>
<p>Les variables d’intérêt dans les données originales ressemblaient à ceci :</p>
<div class="sourceCode" id="cb1319"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bmt</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">my_id</span>, <span class="va">T1</span>, <span class="va">delta1</span>, <span class="va">TA</span>, <span class="va">deltaA</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">my_id</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">5</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>##   my_id   T1 delta1   TA deltaA
## 1     1 2081      0   67      1
## 2     2 1602      0 1602      0
## 3     3 1496      0 1496      0
## 4     4 1462      0   70      1
## 5     5 1433      0 1433      0</code></pre>
<p>Le nouvel ensemble de données pour ces mêmes patients ressemble à ceci :</p>
<div class="sourceCode" id="cb1321"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">td_dat</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">my_id</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">5</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>##   my_id   T1 delta1 tstart tstop death agvhd
## 1     1 2081      0      0    67     0     0
## 2     1 2081      0     67  2081     0     1
## 3     2 1602      0      0  1602     0     0
## 4     3 1496      0      0  1496     0     0
## 5     4 1462      0      0    70     0     0
## 6     4 1462      0     70  1462     0     1
## 7     5 1433      0      0  1433     0     0</code></pre>
<p>Maintenant, certains de nos patients ont deux lignes dans l’ensemble de données correspondant aux intervalles où ils ont une valeur différente de notre nouvelle variable, <code>agvhd</code>. Par exemple, le patient 1 a maintenant deux lignes avec une valeur <code>agvhd</code> de zéro du temps 0 au temps 67, et une valeur de 1 du temps 67 au temps 2081.</p>
</div>
</div>
<div id="régression-de-cox-avec-covariables-dépendantes-du-temps" class="section level3 unnumbered">
<h3>Régression de Cox avec covariables dépendantes du temps<a class="anchor" aria-label="anchor" href="#r%C3%A9gression-de-cox-avec-covariables-d%C3%A9pendantes-du-temps"><i class="fas fa-link"></i></a>
</h3>
<p>Maintenant que nous avons remodelé nos données et ajouté la nouvelle variable <code>aghvd</code> dépendante du temps, ajustons un simple modèle de régression de Cox à variable unique. Nous pouvons utiliser la même fonction <code>coxph()</code> que précédemment, nous devons juste changer notre fonction <code>Surv()</code> pour spécifier à la fois le temps de début et de fin pour chaque intervalle en utilisant les arguments <code>time1 =</code> et <code>time2 =</code>.</p>
<div class="sourceCode" id="cb1323"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bmt_td_model</span> <span class="op">=</span> <span class="fu">coxph</span><span class="op">(</span></span>
<span>  <span class="fu">Surv</span><span class="op">(</span>time <span class="op">=</span> <span class="va">tstart</span>, time2 <span class="op">=</span> <span class="va">tstop</span>, event <span class="op">=</span> <span class="va">death</span><span class="op">)</span> <span class="op">~</span> <span class="va">agvhd</span>, </span>
<span>  data <span class="op">=</span> <span class="va">td_dat</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">bmt_td_model</span><span class="op">)</span></span></code></pre></div>
<pre><code>## Call:
## coxph(formula = Surv(time = tstart, time2 = tstop, event = death) ~ 
##     agvhd, data = td_dat)
## 
##   n= 163, number of events= 80 
## 
##         coef exp(coef) se(coef)    z Pr(&gt;|z|)
## agvhd 0.3351    1.3980   0.2815 1.19    0.234
## 
##       exp(coef) exp(-coef) lower .95 upper .95
## agvhd     1.398     0.7153    0.8052     2.427
## 
## Concordance= 0.535  (se = 0.024 )
## Likelihood ratio test= 1.33  on 1 df,   p=0.2
## Wald test            = 1.42  on 1 df,   p=0.2
## Score (logrank) test = 1.43  on 1 df,   p=0.2</code></pre>
<p>Encore une fois, nous allons visualiser les résultats de notre modèle cox en utilisant la fonction <code>ggforest()</code> du paquet <strong>survminer</strong> :</p>
<div class="sourceCode" id="cb1325"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggforest</span><span class="op">(</span><span class="va">bmt_td_model</span>, data <span class="op">=</span> <span class="va">td_dat</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-924-1.png" width="672"></div>
<p>Comme vous pouvez le constater à partir du diagramme forestier, de l’intervalle de confiance et de la valeur p, il ne semble pas y avoir de forte association entre le décès et la maladie aiguë du greffon contre l’hôte dans le contexte de notre modèle simple.</p>
<!-- ======================================================= -->
</div>
</div>
<div id="ressources-13" class="section level2" number="27.7">
<h2>
<span class="header-section-number">27.7</span> Ressources<a class="anchor" aria-label="anchor" href="#ressources-13"><i class="fas fa-link"></i></a>
</h2>
<p><a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC2394262/">Analyse de survie partie I : concepts de base et premières analyses</a></p>
<p><a href="https://www.emilyzabor.com/tutorials/survival_analysis_in_r_tutorial.html">Analyse de survie en R</a></p>
<p><a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC2954271/">Analyse de survie dans la recherche sur les maladies infectieuses : décrire les événements dans le temps</a></p>
<p><a href="https://data.princeton.edu/wws509/notes/c7.pdf">Chapitre sur les modèles de survie avancés Princeton</a></p>
<p><a href="https://cran.r-project.org/web/packages/survival/vignettes/timedep.pdf">Utilisation de covariables et de coefficients dépendant du temps dans le modèle de Cox</a></p>
<p><a href="https://publicifsv.sund.ku.dk/~ts/survival/survival-cheat.pdf">Aide-mémoire pour l’analyse de survie R</a></p>
<p><a href="https://paulvanderlaken.files.wordpress.com/2017/08/survminer_cheatsheet.pdf">Feuille de calcul Survminer</a></p>
<p><a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC6322561/">Article sur les différentes mesures de survie pour les données des registres du cancer avec le code R fourni comme matériel supplémentaire</a></p>

</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="survey_analysis.html"><span class="header-section-number">26</span> Analyse d’enquête</a></div>
<div class="next"><a href="gis.html"><span class="header-section-number">28</span> GIS basics</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#survival_analysis"><span class="header-section-number">27</span> Analyse de survie</a></li>
<li><a class="nav-link" href="#aper%C3%A7u-3"><span class="header-section-number">27.1</span> Aperçu</a></li>
<li>
<a class="nav-link" href="#pr%C3%A9paration-10"><span class="header-section-number">27.2</span> Préparation</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#chargement-des-paquets-5">Chargement des paquets</a></li>
<li><a class="nav-link" href="#importation-du-jeu-de-donn%C3%A9es">Importation du jeu de données</a></li>
<li><a class="nav-link" href="#gestion-et-transformation-des-donn%C3%A9es">Gestion et transformation des données</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#bases-de-lanalyse-de-survie"><span class="header-section-number">27.3</span> Bases de l’analyse de survie</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#construction-dun-objet-de-type-surv">Construction d’un objet de type surv</a></li>
<li><a class="nav-link" href="#ex%C3%A9cution-des-analyses-initiales">Exécution des analyses initiales</a></li>
<li><a class="nav-link" href="#risque-cumul%C3%A9">Risque cumulé</a></li>
<li><a class="nav-link" href="#tracer-les-courbes-de-kaplan-meir">Tracer les courbes de Kaplan-Meir</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#comparaison-des-courbes-de-survie"><span class="header-section-number">27.4</span> Comparaison des courbes de survie</a><ul class="nav navbar-nav"><li><a class="nav-link" href="#test-du-log-rank">Test du log rank</a></li></ul>
</li>
<li>
<a class="nav-link" href="#analyse-de-r%C3%A9gression-de-cox"><span class="header-section-number">27.5</span> Analyse de régression de Cox</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#ajustement-dun-mod%C3%A8le-de-cox">Ajustement d’un modèle de Cox</a></li>
<li><a class="nav-link" href="#forest-plots">Forest plots</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#covariables-d%C3%A9pendantes-du-temps-dans-les-mod%C3%A8les-de-survie"><span class="header-section-number">27.6</span> Covariables dépendantes du temps dans les modèles de survie</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#configuration-des-covariables-d%C3%A9pendantes-du-temps">Configuration des covariables dépendantes du temps</a></li>
<li><a class="nav-link" href="#r%C3%A9gression-de-cox-avec-covariables-d%C3%A9pendantes-du-temps">Régression de Cox avec covariables dépendantes du temps</a></li>
</ul>
</li>
<li><a class="nav-link" href="#ressources-13"><span class="header-section-number">27.7</span> Ressources</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
          
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Le Epi R Handbook</strong>" was written by the handbook team. It was last built on 2023-05-21.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
