<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>25 Suivi des contacts | Le Epi R Handbook</title>
<meta name="author" content="the handbook team">
<meta name="description" content="Cette page présente une analyse descriptive de données de recherche de contacts, en ajoutant quelques considérations et approches clés uniques à ce type de données. Cette page fait référence à un...">
<meta name="generator" content="bookdown 0.33 with bs4_book()">
<meta property="og:title" content="25 Suivi des contacts | Le Epi R Handbook">
<meta property="og:type" content="book">
<meta property="og:description" content="Cette page présente une analyse descriptive de données de recherche de contacts, en ajoutant quelques considérations et approches clés uniques à ce type de données. Cette page fait référence à un...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="25 Suivi des contacts | Le Epi R Handbook">
<meta name="twitter:description" content="Cette page présente une analyse descriptive de données de recherche de contacts, en ajoutant quelques considérations et approches clés uniques à ce type de données. Cette page fait référence à un...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.4.2/transition.js"></script><script src="libs/bs3compat-0.4.2/tabs.js"></script><script src="libs/bs3compat-0.4.2/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/htmlwidgets-1.6.2/htmlwidgets.js"></script><link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="libs/datatables-binding-0.27/datatables.js"></script><link href="libs/dt-core-1.12.1/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="libs/dt-core-1.12.1/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="libs/dt-core-1.12.1/js/jquery.dataTables.min.js"></script><link href="libs/nouislider-7.0.10/jquery.nouislider.min.css" rel="stylesheet">
<script src="libs/nouislider-7.0.10/jquery.nouislider.min.js"></script><link href="libs/selectize-0.12.0/selectize.bootstrap3.css" rel="stylesheet">
<script src="libs/selectize-0.12.0/selectize.min.js"></script><link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script><script src="libs/kePrint-0.0.1/kePrint.js"></script><link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<link href="libs/tabwid-1.1.3/tabwid.css" rel="stylesheet">
<script src="libs/tabwid-1.1.3/tabwid.js"></script><link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet">
<script src="libs/leaflet-1.3.1/leaflet.js"></script><link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet">
<script src="libs/proj4-2.6.2/proj4.min.js"></script><script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script><link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet">
<script src="libs/leaflet-binding-2.1.2/leaflet.js"></script><script src="libs/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script><script src="libs/leaflet-providers-plugin-2.1.2/leaflet-providers-plugin.js"></script><script src="libs/viz-1.8.2/viz.js"></script><link href="libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet">
<script src="libs/grViz-binding-1.0.9/grViz.js"></script><script src="libs/d3-4.5.0/d3.min.js"></script><script src="libs/sankey-1/sankey.js"></script><script src="libs/sankeyNetwork-binding-0.4/sankeyNetwork.js"></script><script src="libs/plotly-binding-4.10.1/plotly.js"></script><script src="libs/typedarray-0.1/typedarray.min.js"></script><link href="libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="libs/plotly-main-2.11.1/plotly-latest.min.js"></script><link href="libs/vis-9.1.0/vis-network.min.css" rel="stylesheet">
<script src="libs/vis-9.1.0/vis-network.min.js"></script><script src="libs/visNetwork-binding-2.1.2/visNetwork.js"></script><link href="libs/font-awesome-4.7.0/css/font-awesome.min.css" rel="stylesheet">
<script src="libs/plotly-basic-2.11.1/plotly-basic-2.11.1.min.js"></script><script src="libs/plotly-cartesian-2.11.1/plotly-cartesian-2.11.1.min.js"></script><script src="libs/proj4js-2.3.15/proj4.js"></script><link href="libs/highcharts-9.3.1/css/motion.css" rel="stylesheet">
<script src="libs/highcharts-9.3.1/highcharts.js"></script><script src="libs/highcharts-9.3.1/highcharts-3d.js"></script><script src="libs/highcharts-9.3.1/highcharts-more.js"></script><script src="libs/highcharts-9.3.1/modules/stock.js"></script><script src="libs/highcharts-9.3.1/modules/map.js"></script><script src="libs/highcharts-9.3.1/modules/data.js"></script><script src="libs/highcharts-9.3.1/modules/exporting.js"></script><script src="libs/highcharts-9.3.1/modules/offline-exporting.js"></script><script src="libs/highcharts-9.3.1/modules/drilldown.js"></script><script src="libs/highcharts-9.3.1/modules/item-series.js"></script><script src="libs/highcharts-9.3.1/modules/overlapping-datalabels.js"></script><script src="libs/highcharts-9.3.1/modules/annotations.js"></script><script src="libs/highcharts-9.3.1/modules/export-data.js"></script><script src="libs/highcharts-9.3.1/modules/funnel.js"></script><script src="libs/highcharts-9.3.1/modules/heatmap.js"></script><script src="libs/highcharts-9.3.1/modules/treemap.js"></script><script src="libs/highcharts-9.3.1/modules/sankey.js"></script><script src="libs/highcharts-9.3.1/modules/dependency-wheel.js"></script><script src="libs/highcharts-9.3.1/modules/organization.js"></script><script src="libs/highcharts-9.3.1/modules/solid-gauge.js"></script><script src="libs/highcharts-9.3.1/modules/streamgraph.js"></script><script src="libs/highcharts-9.3.1/modules/sunburst.js"></script><script src="libs/highcharts-9.3.1/modules/vector.js"></script><script src="libs/highcharts-9.3.1/modules/wordcloud.js"></script><script src="libs/highcharts-9.3.1/modules/xrange.js"></script><script src="libs/highcharts-9.3.1/modules/tilemap.js"></script><script src="libs/highcharts-9.3.1/modules/venn.js"></script><script src="libs/highcharts-9.3.1/modules/gantt.js"></script><script src="libs/highcharts-9.3.1/modules/timeline.js"></script><script src="libs/highcharts-9.3.1/modules/parallel-coordinates.js"></script><script src="libs/highcharts-9.3.1/modules/bullet.js"></script><script src="libs/highcharts-9.3.1/modules/coloraxis.js"></script><script src="libs/highcharts-9.3.1/modules/dumbbell.js"></script><script src="libs/highcharts-9.3.1/modules/lollipop.js"></script><script src="libs/highcharts-9.3.1/modules/series-label.js"></script><script src="libs/highcharts-9.3.1/plugins/motion.js"></script><script src="libs/highcharts-9.3.1/custom/reset.js"></script><script src="libs/highcharts-9.3.1/modules/boost.js"></script><script src="libs/highchart-binding-0.9.4/highchart.js"></script><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-QXDW878QLX"></script><script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-QXDW878QLX');
    </script>
</head>
<body>
<div class="alert alert-info alert-dismissible">
      <a href="#" class="close" data-dismiss="alert" aria-label="close">×</a>
      <strong>Besoin d'aide pour apprendre R ?</strong> Inscrivez-vous au <a href="https://www.appliedepi.org/live/" class="alert-link">cours d'introduction à R d'Applied Epi</a>, essayez nos <a href="https://www.appliedepi.org/tutorial/" class="alert-link">tutoriels R gratuits</a>, postez dans notre forum de <a href="https://community.appliedepi.org/" class="alert-link">questions et réponses de la communauté</a>, ou demandez-nous des informations sur <a href="mailto:contact@appliedepi.org" class="alert-link">notre service d'assistance R</a>.
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<link rel="stylesheet" href="style_bs4.css">
<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Le Epi R Handbook</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html"></a></li>
<li class="book-part">À propos de ce livre</li>
<li><a class="" href="editorial_notes.html"><span class="header-section-number">1</span> Notes techniques et choix éditoriaux</a></li>
<li><a class="" href="download_book_data.html"><span class="header-section-number">2</span> Télécharger le manuel et les données</a></li>
<li class="book-part">Les bases de R</li>
<li><a class="" href="rbasics.html"><span class="header-section-number">3</span> R - les bases</a></li>
<li><a class="" href="transition_to_r.html"><span class="header-section-number">4</span> Transition vers R</a></li>
<li><a class="" href="suggested_packages.html"><span class="header-section-number">5</span> Paquets conseillés</a></li>
<li><a class="" href="r_projects.html"><span class="header-section-number">6</span> Projets R</a></li>
<li><a class="" href="import_export.html"><span class="header-section-number">7</span> Importer et exporter des données</a></li>
<li class="book-part">Gestion des données</li>
<li><a class="" href="cleaning_data.html"><span class="header-section-number">8</span> Nettoyage de données et fonctions essentielles</a></li>
<li><a class="" href="working_dates.html"><span class="header-section-number">9</span> Manipuler les dates</a></li>
<li><a class="" href="character_strings.html"><span class="header-section-number">10</span> Caractères et chaînes de caractères</a></li>
<li><a class="" href="factors.html"><span class="header-section-number">11</span> Facteurs</a></li>
<li><a class="" href="pivoting_data.html"><span class="header-section-number">12</span> Restructurer les données</a></li>
<li><a class="" href="grouping_data.html"><span class="header-section-number">13</span> Travailler sur des données groupées</a></li>
<li><a class="" href="joining_matching.html"><span class="header-section-number">14</span> Joindre des données</a></li>
<li><a class="" href="deduplication.html"><span class="header-section-number">15</span> De-duplication</a></li>
<li><a class="" href="iteration.html"><span class="header-section-number">16</span> Itération, boucles et listes</a></li>
<li class="book-part">Analyse</li>
<li><a class="" href="descriptive_tables.html"><span class="header-section-number">17</span> Tableaux descriptifs</a></li>
<li><a class="" href="stats_test.html"><span class="header-section-number">18</span> Tests statistiques simples</a></li>
<li><a class="" href="regression.html"><span class="header-section-number">19</span> Régression univariée et multivariable</a></li>
<li><a class="" href="missing_data.html"><span class="header-section-number">20</span> Données manquantes</a></li>
<li><a class="" href="standardisation.html"><span class="header-section-number">21</span> Taux standardisés</a></li>
<li><a class="" href="moving_average.html"><span class="header-section-number">22</span> Moyennes mobiles</a></li>
<li><a class="" href="time_series.html"><span class="header-section-number">23</span> Série temporelle et détection des épidémies</a></li>
<li><a class="" href="epidemic_models.html"><span class="header-section-number">24</span> Modélisation des épidémies</a></li>
<li><a class="active" href="contact_tracing.html"><span class="header-section-number">25</span> Suivi des contacts</a></li>
<li><a class="" href="survey_analysis.html"><span class="header-section-number">26</span> Analyse d’enquête</a></li>
<li><a class="" href="survival_analysis.html"><span class="header-section-number">27</span> Analyse de survie</a></li>
<li><a class="" href="gis.html"><span class="header-section-number">28</span> GIS basics</a></li>
<li class="book-part">Visualisation des données</li>
<li><a class="" href="tables_presentation.html"><span class="header-section-number">29</span> Présenter avec des tables</a></li>
<li><a class="" href="ggplot_basics.html"><span class="header-section-number">30</span> Les bases de ggplot</a></li>
<li><a class="" href="ggplot_tips.html"><span class="header-section-number">31</span> Trucs et Astuces avec ggplot</a></li>
<li><a class="" href="epicurves.html"><span class="header-section-number">32</span> Courbes épidémiques</a></li>
<li><a class="" href="age_pyramid.html"><span class="header-section-number">33</span> Pyramides démographiques et échelles de Likert</a></li>
<li><a class="" href="heatmaps.html"><span class="header-section-number">34</span> Graphiques thermiques</a></li>
<li><a class="" href="diagrams.html"><span class="header-section-number">35</span> Diagrammes et schémas</a></li>
<li><a class="" href="combination_analysis.html"><span class="header-section-number">36</span> Analyse des combinaisons</a></li>
<li><a class="" href="transmission_chains.html"><span class="header-section-number">37</span> Chaînes de transmission</a></li>
<li><a class="" href="phylogenetic_trees.html"><span class="header-section-number">38</span> Les arbres phylogénétiques</a></li>
<li><a class="" href="interactive_plots.html"><span class="header-section-number">39</span> Graphiques interactifs</a></li>
<li class="book-part">Rapports et tableaux de bord</li>
<li><a class="" href="rmarkdown.html"><span class="header-section-number">40</span> Production de rapports avec R Markdown</a></li>
<li><a class="" href="reportfactory.html"><span class="header-section-number">41</span> Organisation des rapports de routine</a></li>
<li><a class="" href="dashboards.html"><span class="header-section-number">42</span> Tableaux de bord avec R Markdown</a></li>
<li><a class="" href="shiny.html"><span class="header-section-number">43</span> Tableaux de bord avec Shiny</a></li>
<li class="book-part">Autres sujets</li>
<li><a class="" href="writing_functions.html"><span class="header-section-number">44</span> Fonctions d’écriture</a></li>
<li><a class="" href="directories.html"><span class="header-section-number">45</span> Interactions avec les répertoires</a></li>
<li><a class="" href="collaboration.html"><span class="header-section-number">46</span> Contrôle de version et collaboration avec Git et Github</a></li>
<li><a class="" href="errors.html"><span class="header-section-number">47</span> Erreurs fréquentes</a></li>
<li><a class="" href="help.html"><span class="header-section-number">48</span> Obtenir de l’aide</a></li>
<li><a class="" href="network_drives.html"><span class="header-section-number">49</span> R sur les lecteurs réseau</a></li>
<li><a class="" href="data_table.html"><span class="header-section-number">50</span> Tableau de données</a></li>
</ul>

        <div class="book-extra">
          
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="contact_tracing" class="section level1" number="25">
<h1>
<span class="header-section-number">25</span> Suivi des contacts<a class="anchor" aria-label="anchor" href="#contact_tracing"><i class="fas fa-link"></i></a>
</h1>
<p>Cette page présente une analyse descriptive de données de recherche de contacts, en ajoutant quelques considérations et approches clés uniques à ce type de données.</p>
<p>Cette page fait référence à un grand nombre des compétences de base en matière de gestion et de visualisation des données R abordées dans d’autres pages (par exemple, le nettoyage des données, le pivotement, les tableaux, les analyses de séries chronologiques), mais nous mettrons en évidence des exemples spécifiques au suivi des contacts qui ont été utiles pour la prise de décision opérationnelle. Il s’agit par exemple de la visualisation des données de suivi de la recherche de contacts dans le temps ou dans des zones géographiques, ou de la production de tableaux d’indicateurs de performance clés (KPI) propres pour les superviseurs de la recherche de contacts.</p>
<p>Pour la démonstration, nous utiliserons un échantillon de données de suivi des contacts provenant de la plateforme <a href="https://www.who.int/tools/godata">Go.Data</a>. Les principes abordés ici s’appliquent aux données de suivi des contacts provenant d’autres plates-formes. Il se peut que vous deviez simplement suivre différentes étapes de pré-traitement des données en fonction de la structure de vos données.</p>
<p>Vous pouvez en savoir plus sur le projet Go.Data sur le <a href="https://worldhealthorganization.github.io/godata/">site de documentation Github</a> ou la <a href="https://community-godata.who.int/">communauté de pratique</a>.</p>
<div id="préparation-8" class="section level2" number="25.1">
<h2>
<span class="header-section-number">25.1</span> Préparation<a class="anchor" aria-label="anchor" href="#pr%C3%A9paration-8"><i class="fas fa-link"></i></a>
</h2>
<div id="chargement-de-packages" class="section level3 unnumbered">
<h3>Chargement de packages<a class="anchor" aria-label="anchor" href="#chargement-de-packages"><i class="fas fa-link"></i></a>
</h3>
<p>Ce bout de code montre le chargement des packages nécessaires aux analyses. Dans ce manuel, nous mettons l’accent sur <code><a href="https://rdrr.io/pkg/pacman/man/p_load.html">p_load()</a></code> de <strong>pacman</strong>, qui installe le package si nécessaire <em>et</em> le charger pour l’utiliser. Vous pouvez aussi charger les packages installés avec <code><a href="https://rdrr.io/r/base/library.html">library()</a></code> de <strong>base</strong> R. Voir la page sur <a href="rbasics.html#rbasics">bases de R</a> pour plus d’informations sur les packages R.</p>
<div class="sourceCode" id="cb1204"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">pacman</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pacman/man/p_load.html">p_load</a></span><span class="op">(</span></span>
<span>  <span class="va">rio</span>,          <span class="co"># importation de données </span></span>
<span>  <span class="va">here</span>,         <span class="co"># chemins d'accès relatifs aux fichiers </span></span>
<span>  <span class="va">janitor</span>,      <span class="co"># nettoyage des données et tableaux</span></span>
<span>  <span class="va">lubridate</span>,    <span class="co"># travailler avec des dates</span></span>
<span>  <span class="va">epikit</span>,       <span class="co"># fonction age_categories()</span></span>
<span>  <span class="va">apyramid</span>,     <span class="co"># age pyramids</span></span>
<span>  <span class="va">tidyverse</span>,    <span class="co"># manipulation et visualisation des données</span></span>
<span>  <span class="va">RColorBrewer</span>, <span class="co"># colour palettes</span></span>
<span>  <span class="va">formattable</span>,  <span class="co"># fancy tables</span></span>
<span>  <span class="va">kableExtra</span>    <span class="co"># formatage des tableaux</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div id="importation-de-données-2" class="section level3 unnumbered">
<h3>Importation de données<a class="anchor" aria-label="anchor" href="#importation-de-donn%C3%A9es-2"><i class="fas fa-link"></i></a>
</h3>
<p>Nous allons importer des jeux de données exemple de contacts, et de leur”suivi”. Ces données ont été récupérées et non imbriquées à partir de l’API Go.Data et stockées dans des fichiers “.rds”.</p>
<p>Vous pouvez télécharger tous les exemples de données pour ce manuel à partir de la page <a href="download_book_data.html#download_book_data">Télécharger le manuel et les données</a>.</p>
<p>Si vous souhaitez télécharger les exemples de données de suivi des contacts spécifiques à cette page, utilisez les trois liens de téléchargement ci-dessous :</p>
<p><a href="https://github.com/WorldHealthOrganization/godata/blob/master/analytics/r-reporting/data/cases_clean.rds?raw=true" class="download-button"> Cliquer pour télécharger données sur les investigations des cas (.rds file) </a></p>
<p><a href="https://github.com/WorldHealthOrganization/godata/blob/master/analytics/r-reporting/data/contacts_clean.rds?raw=true" class="download-button"> Cliquer pour télécharger les données d’enregistrement de contacts (.rds file) </a></p>
<p><a href="https://github.com/WorldHealthOrganization/godata/blob/master/analytics/r-reporting/data/followups_clean.rds?raw=true" class="download-button"> Cliquer pour télécharger les données de suivi des contacts (.rds file) </a></p>
<!-- ```{r out.width = "100%", fig.align = "center", echo=F} -->
<!-- knitr::include_graphics(here::here("images", "godata_api_github.png")) -->
<!-- ``` -->
<p>Dans leur forme originale dans les fichiers téléchargeables, les données reflètent les données fournies par l’API Go.Data (en savoir plus sur <a href="import_export.html#import_api">APIs here</a>). À titre d’exemple, nous allons nettoyer les données pour les rendre plus faciles à lire sur cette page. Si vous utilisez une instance Go.Data, vous pouvez consulter les instructions complètes sur la façon de récupérer vos données <a href="https://github.com/WorldHealthOrganization/godata/tree/master/analytics/r-reporting">here</a>.</p>
<p>Ci-dessous, les jeux de données sont importés à l’aide de la fonction <code><a href="https://rdrr.io/pkg/rio/man/import.html">import()</a></code> du package <strong>rio</strong>. Voir la page <a href="import_export.html#import_export">Importation et exportation</a> pour les différentes manières d’importer des données. Nous utilisons <code><a href="https://here.r-lib.org//reference/here.html">here()</a></code> pour spécifier le chemin du fichier - vous devez fournir le chemin du fichier spécifique à votre ordinateur. Nous utilisons ensuite <code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code> pour sélectionner seulement certaines colonnes des données, afin de simplifier pour les besoins de la démonstration.</p>
<div id="données-des-cas" class="section level4 unnumbered">
<h4>Données des cas<a class="anchor" aria-label="anchor" href="#donn%C3%A9es-des-cas"><i class="fas fa-link"></i></a>
</h4>
<p>Ces données sont un tableau des cas, et des informations les concernant.</p>
<div class="sourceCode" id="cb1205"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cases</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/rio/man/import.html">import</a></span><span class="op">(</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html">here</a></span><span class="op">(</span><span class="st">"data"</span>, <span class="st">"godata"</span>, <span class="st">"cases_clean.rds"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">case_id</span>, <span class="va">firstName</span>, <span class="va">lastName</span>, <span class="va">gender</span>, <span class="va">age</span>, <span class="va">age_class</span>,</span>
<span>         <span class="va">occupation</span>, <span class="va">classification</span>, <span class="va">was_contact</span>, <span class="va">hospitalization_typeid</span><span class="op">)</span></span></code></pre></div>
<p>Voici les <code>nrow(cases)</code> cas :</p>
<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-b107a8dac5fc8c80ab6f" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-b107a8dac5fc8c80ab6f">{"x":{"filter":"none","vertical":false,"data":[["CASE-2020-0029","CASE-2020-0026","CASE-2020-0017","CASE-2020-0043","CASE-2020-0044","CASE-2020-0036","CASE-2020-0037","CASE-2020-0006","CASE-2020-0045","CASE-2020-0046","CASE-2020-0034","CASE-2020-0031","CASE-2020-0028","CASE-2020-0010","CASE-2020-0018","CASE-2020-0038","CASE-2020-0007","CASE-2020-0023","CONTACT-2020-0024","CASE-2020-0002","CASE-2020-0002","CASE-2020-0020","CASE-2020-0027","CASE-2020-0015","CASE-2020-0035","CASE-2020-0019","CASE-2020-0019",null,"CASE-2020-0040","CASE-2020-0004","CASE-2020-0014","CASE-2020-0009","CASE-2020-0009","CONTACT-2020-0002","CASE-2020-0039","CASE-2020-0025","CASE-2020-0022","CASE-2020-0008",null,"CASE-2020-0011","CASE-2020-0012","CASE-2020-0016","CASE-2020-0013","CASE-2020-0033","CASE-2020-0030","CASE-2020-0032","CASE-2020-0003",null,"CASE-2020-0024","CASE-2020-0005","CASE-2020-0021",null,null,null,"CASE-2020-0001",null],["Abdoulaye","Adama","Adama","Adama","Adji","Aida","Aissatou","Alassane","Alfa","Alfa","Alioune","Alioune","Amadou","Amy","Assane","Awa","Bassirou","Bineta","Birima","Charles","Charles","Demba","Edouard","Fatima","Fatou","Fatoumata","Fatoumata","Giovanna ","Ibrahima","Jean-Paul","Joseph","Khady","Khady","Malang","Mamadou","Mamoudou","Mariama","Mhustapha","Modified Case","Moussa","Odette","Odette","Omar","Ousmane","Ousseynou","Pape","Samba","Samba","Seynabou","Souleymane","Boubacar","Sara","Larry","Elisabeth","Elisabeth","Charles"],[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"Diallo","Garcia","Hinkle","Hopkins","Hopkins","Williams"],["MALE","FEMALE","MALE","MALE","FEMALE","FEMALE","FEMALE","MALE","FEMALE","FEMALE","MALE","MALE","MALE","FEMALE","MALE","FEMALE","MALE","FEMALE","MALE",null,"MALE","MALE","MALE","FEMALE","FEMALE","FEMALE",null,null,"MALE","MALE","MALE","FEMALE",null,"FEMALE","MALE","MALE","FEMALE","MALE","MALE","MALE","FEMALE","FEMALE","MALE","MALE","MALE","MALE","MALE","FEMALE","FEMALE","MALE","MALE","FEMALE","MALE","FEMALE","FEMALE","MALE"],[46,61,8,null,25,40,80,47,34,34,20,20,45,37,25,57,75,43,3,43,52,43,38,38,35,45,61,null,23,43,54,57,52,54,0.916666666666667,63,51,7,null,31,80,80,52,5,52,31,58,45,56,23,46,55,34,43,49,43],["40-49","60-64","5-9","unknown","20-29","40-49","80+","40-49","30-39","30-39","20-29","20-29","40-49","30-39","20-29","50-59","75-79","40-49","0-4","40-49","50-59","40-49","30-39","30-39","30-39","40-49","60-64","unknown","20-29","40-49","50-59","50-59","50-59","50-59","0-4","60-64","50-59","5-9","unknown","30-39","80+","80+","50-59","5-9","50-59","30-39","50-59","40-49","50-59","20-29","40-49","50-59","30-39","40-49","40-49","40-49"],["WORKING_WITH_ANIMALS","FARMER","CHILD","HEALTH_CARE_WORKER",null,"WORKING_WITH_ANIMALS","FARMER","HEALTH_CARE_WORKER","BUTCHER","BUTCHER","STUDENT","STUDENT","HEALTH_CARE_WORKER","TEACHER","STUDENT","OTHER","OTHER","HEALTH_CARE_WORKER",null,"HEALTH_CARE_WORKER","FARMER","HEALTH_CARE_WORKER","OTHER","WORKING_WITH_ANIMALS","HEALTH_CARE_WORKER","TRADITIONAL_HEALER","FARMER",null,"STUDENT","HEALTH_CARE_WORKER","FARMER","OTHER","FARMER","FARMER","CHILD","FARMER","OTHER","CHILD",null,"OTHER","FARMER","FARMER","FARMER","CHILD","FARMER","OTHER","TRADITIONAL_HEALER","WORKING_WITH_ANIMALS","WORKING_WITH_ANIMALS","STUDENT","WORKING_WITH_ANIMALS","FARMER","HEALTH_CARE_WORKER","HEALTH_CARE_WORKER","FARMER","HEALTH_CARE_WORKER"],["CONFIRMED","PROBABLE","CONFIRMED","SUSPECT","CONFIRMED","CONFIRMED","PROBABLE","CONFIRMED","SUSPECT","SUSPECT","CONFIRMED","CONFIRMED","CONFIRMED","CONFIRMED","PROBABLE","CONFIRMED","CONFIRMED","CONFIRMED","SUSPECT","PROBABLE","CONFIRMED","PROBABLE","CONFIRMED","CONFIRMED","PROBABLE","CONFIRMED","PROBABLE","CONFIRMED","CONFIRMED","CONFIRMED","PROBABLE","CONFIRMED","SUSPECT","SUSPECT","SUSPECT","NOT_A_CASE_DISCARDED","SUSPECT","PROBABLE","CONFIRMED","PROBABLE","PROBABLE","PROBABLE","CONFIRMED","PROBABLE","SUSPECT","CONFIRMED","CONFIRMED","CONFIRMED","CONFIRMED","CONFIRMED","CONFIRMED","PROBABLE","CONFIRMED","CONFIRMED","CONFIRMED","PROBABLE"],[false,false,false,true,true,false,false,false,true,true,false,false,false,false,false,false,false,false,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false],["HOSPITALIZATION","HOSPITALIZATION","HOSPITALIZATION","HOSPITALIZATION","HOSPITALIZATION","HOSPITALIZATION","HOSPITALIZATION","HOSPITALIZATION","HOSPITALIZATION","HOSPITALIZATION","HOSPITALIZATION","HOSPITALIZATION","HOSPITALIZATION","HOSPITALIZATION","HOSPITALIZATION","HOSPITALIZATION","HOSPITALIZATION","HOSPITALIZATION",null,null,"HOSPITALIZATION","HOSPITALIZATION","HOSPITALIZATION","HOSPITALIZATION","HOSPITALIZATION","HOSPITALIZATION",null,null,"HOSPITALIZATION","HOSPITALIZATION","HOSPITALIZATION","HOSPITALIZATION",null,null,"HOSPITALIZATION","HOSPITALIZATION","HOSPITALIZATION","HOSPITALIZATION",null,"HOSPITALIZATION","HOSPITALIZATION","HOSPITALIZATION","HOSPITALIZATION","HOSPITALIZATION","HOSPITALIZATION","HOSPITALIZATION","HOSPITALIZATION",null,"HOSPITALIZATION","HOSPITALIZATION",null,null,null,null,"HOSPITALIZATION",null]],"container":"<table class=\"white-space: nowrap\">\n  <thead>\n    <tr>\n      <th>case_id<\/th>\n      <th>firstName<\/th>\n      <th>lastName<\/th>\n      <th>gender<\/th>\n      <th>age<\/th>\n      <th>age_class<\/th>\n      <th>occupation<\/th>\n      <th>classification<\/th>\n      <th>was_contact<\/th>\n      <th>hospitalization_typeid<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":4}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="données-sur-les-contacts" class="section level4 unnumbered">
<h4>Données sur les contacts<a class="anchor" aria-label="anchor" href="#donn%C3%A9es-sur-les-contacts"><i class="fas fa-link"></i></a>
</h4>
<p>Ces données sont un tableau de tous les contacts et des informations les concernant. Là encore, vous pouvez fournir votre propre chemin de fichier. Après l’importation, nous effectuons quelques étapes préliminaires de nettoyage des données, notamment :</p>
<ul>
<li>Définir age_class comme facteur et inverser l’ordre des niveaux pour que les plus jeunes soient les premiers.<br>
</li>
<li>Sélectionner seulement certaines colonnes, en renommant l’une d’entre elles.<br>
</li>
<li>Attribuer artificiellement les lignes dont le 2 niveau d’administration est manquant à “Djembe”, pour améliorer la clarté de certains exemples de visualisation.</li>
</ul>
<div class="sourceCode" id="cb1206"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">contacts</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/rio/man/import.html">import</a></span><span class="op">(</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html">here</a></span><span class="op">(</span><span class="st">"data"</span>, <span class="st">"godata"</span>, <span class="st">"contacts_clean.rds"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>age_class <span class="op">=</span> <span class="fu">forcats</span><span class="fu">::</span><span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_rev.html">fct_rev</a></span><span class="op">(</span><span class="va">age_class</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">contact_id</span>, <span class="va">contact_status</span>, <span class="va">firstName</span>, <span class="va">lastName</span>, <span class="va">gender</span>, <span class="va">age</span>,</span>
<span>         <span class="va">age_class</span>, <span class="va">occupation</span>, <span class="va">date_of_reporting</span>, <span class="va">date_of_data_entry</span>,</span>
<span>         date_of_last_exposure <span class="op">=</span> <span class="va">date_of_last_contact</span>,</span>
<span>         <span class="va">date_of_followup_start</span>, <span class="va">date_of_followup_end</span>, <span class="va">risk_level</span>, <span class="va">was_case</span>, <span class="va">admin_2_name</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>admin_2_name <span class="op">=</span> <span class="fu"><a href="https://tidyr.tidyverse.org/reference/replace_na.html">replace_na</a></span><span class="op">(</span><span class="va">admin_2_name</span>, <span class="st">"Djembe"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Voici les <code>nrow(contacts)</code> lignes de le <code>contacts</code> dataframe:</p>
<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-9a608a5a7c371e383e0d" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-9a608a5a7c371e383e0d">{"x":{"filter":"none","vertical":false,"data":[["CONTACT-2020-0046","CONTACT-2020-0015","CONTACT-2020-0043","CONTACT-2020-0012","CONTACT-2020-0054","CONTACT-2020-0056","CONTACT-2020-0030","CONTACT-2020-0060","CONTACT-2020-0021","CONTACT-2020-0059","CONTACT-2020-0005","CONTACT-2020-0053","CONTACT-2020-0058","CONTACT-2020-0011","CONTACT-2020-0001","CONTACT-2020-0003","CONTACT-2020-0029","CONTACT-2020-0042","CONTACT-2020-0055","CONTACT-2020-0036","CONTACT-2020-0032","CONTACT-2020-0019","CONTACT-2020-0025","CONTACT-2020-0040","CONTACT-2020-0045","CONTACT-2020-0004","CONTACT-2020-0020","CONTACT-2020-0016","CONTACT-2020-0031","CONTACT-2020-0014","CONTACT-2020-0037","CONTACT-2020-0007","CONTACT-2020-0051","CONTACT-2020-0008","CONTACT-2020-0048","CONTACT-2020-0038","CONTACT-2020-0010","CONTACT-2020-0006","CONTACT-2020-0034","CONTACT-2020-0052","CONTACT-2020-0044","CONTACT-2020-0009","CONTACT-2020-0047","CONTACT-2020-0022","CONTACT-2020-0013","CONTACT-2020-0023","CONTACT-2020-0041","CONTACT-2020-0028","CONTACT-2020-0017","CONTACT-2020-0027","CONTACT-2020-0035","CONTACT-2020-0026","CONTACT-2020-0033","CONTACT-2020-0050","CONTACT-2020-0057","CONTACT-2020-0018","CONTACT-2020-0049","CONTACT-2020-0039",null,null,"CASE-2020-0043","CASE-2020-0044","CASE-2020-0045","CASE-2020-0046","CONTACT-2020-0024","CONTACT-2020-0002"],["UNDER_FOLLOW_UP","LOST_TO_FOLLOW_UP","UNDER_FOLLOW_UP","LOST_TO_FOLLOW_UP","UNDER_FOLLOW_UP","FOLLOW_UP_COMPLETED","FOLLOW_UP_COMPLETED","LOST_TO_FOLLOW_UP","UNDER_FOLLOW_UP","UNDER_FOLLOW_UP","UNDER_FOLLOW_UP","UNDER_FOLLOW_UP","UNDER_FOLLOW_UP","UNDER_FOLLOW_UP","FOLLOW_UP_COMPLETED","FOLLOW_UP_COMPLETED","DIED","FOLLOW_UP_COMPLETED","DIED","UNDER_FOLLOW_UP","FOLLOW_UP_COMPLETED","UNDER_FOLLOW_UP","UNDER_FOLLOW_UP","FOLLOW_UP_COMPLETED","FOLLOW_UP_COMPLETED","FOLLOW_UP_COMPLETED","FOLLOW_UP_COMPLETED","UNDER_FOLLOW_UP","FOLLOW_UP_COMPLETED","UNDER_FOLLOW_UP","FOLLOW_UP_COMPLETED","FOLLOW_UP_COMPLETED","FOLLOW_UP_COMPLETED","FOLLOW_UP_COMPLETED","FOLLOW_UP_COMPLETED","FOLLOW_UP_COMPLETED","UNDER_FOLLOW_UP","FOLLOW_UP_COMPLETED","FOLLOW_UP_COMPLETED","UNDER_FOLLOW_UP","LOST_TO_FOLLOW_UP","UNDER_FOLLOW_UP","UNDER_FOLLOW_UP","UNDER_FOLLOW_UP","UNDER_FOLLOW_UP","UNDER_FOLLOW_UP","UNDER_FOLLOW_UP","UNDER_FOLLOW_UP","FOLLOW_UP_COMPLETED","UNDER_FOLLOW_UP","UNDER_FOLLOW_UP","UNDER_FOLLOW_UP","UNDER_FOLLOW_UP","UNDER_FOLLOW_UP","LOST_TO_FOLLOW_UP","FOLLOW_UP_COMPLETED","UNDER_FOLLOW_UP","LOST_TO_FOLLOW_UP","UNDER_FOLLOW_UP","UNDER_FOLLOW_UP","BECAME_CASE","BECAME_CASE","BECAME_CASE","BECAME_CASE","BECAME_CASE","BECAME_CASE"],["Abou","Adama","Adja","Alfa","Alimatou","Amath","Aminata","Binette","Binta","Bintou","Birima","Birima","Bransan  ","Cheik","Cheik","Cheik","Coura","Dicory","Djeynaba","Djiby","El Hadj","Kalidou","Khadija","Khary","Khary","Khary","Khary","Lamine","Lat","Madia","Maguette","Maguette","Maguette","Malamine","Malamine","Malamine","Malang","Malang","Malang","Mayatta","Mbagnick","Modou","Ndiankou","Ndiaya","Ndiogou","Oulimata","Oumou","Papis","Racine","Sadibou","Sofiatou","Thione","Thiony","Waly","Wasis","Yacouba","Youssouf","Abba","Mayatta","Jelani","Adama","Adji","Alfa","Alfa","Birima","Malang"],[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"Abebe","Obi","Onai",null,null,null,null,null,null],["MALE","MALE","MALE","FEMALE","MALE","MALE","FEMALE","FEMALE","FEMALE","FEMALE","MALE","MALE","FEMALE","MALE","MALE","MALE","MALE","MALE","FEMALE","FEMALE","MALE","MALE","MALE","MALE","FEMALE","FEMALE","FEMALE","FEMALE","FEMALE","MALE","FEMALE","FEMALE","FEMALE","MALE","MALE","MALE","FEMALE","FEMALE","FEMALE","MALE","MALE","MALE","MALE","FEMALE","FEMALE","MALE","MALE","FEMALE","FEMALE","MALE","FEMALE","MALE","FEMALE","MALE","FEMALE","MALE","FEMALE","FEMALE","MALE","MALE","MALE","FEMALE","FEMALE","FEMALE","MALE","FEMALE"],[81,56,47,34,8,54,36,34,32,97,3,3,23,12,12,12,null,15,54,45,21,20,4,21,32,32,32,12,23,34,9,29,9,63,7,7,54,54,54,null,null,18,67,32,56,23,34,null,35,15,null,45,5,56,2,78,null,17,null,24,null,25,34,34,3,54],["80+","50-59","40-49","30-39","5-9","50-59","30-39","30-39","30-39","80+","0-4","0-4","20-29","10-14","10-14","10-14","unknown","15-19","50-59","40-49","20-29","20-29","0-4","20-29","30-39","30-39","30-39","10-14","20-29","30-39","5-9","20-29","5-9","60-64","5-9","5-9","50-59","50-59","50-59","unknown","unknown","15-19","65-69","30-39","50-59","20-29","30-39","unknown","30-39","15-19","unknown","40-49","5-9","50-59","0-4","75-79","unknown","15-19","unknown","20-29","unknown","20-29","30-39","30-39","0-4","50-59"],[null,null,null,null,null,null,null,null,null,null,"CHILD",null,null,null,"CHILD","CHILD",null,null,null,null,null,null,null,null,null,"FARMER",null,null,null,null,null,"OTHER",null,"FARMER",null,null,null,"FARMER",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"HEALTH_CARE_WORKER","STUDENT","HEALTH_CARE_WORKER",null,"BUTCHER","BUTCHER",null,"FARMER"],["2020-04-15","2020-04-16","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-05-25","2020-04-15","2020-05-01","2020-05-25","2020-04-15","2020-05-25","2020-03-22","2020-03-22","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-03-22","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-05-25","2020-03-22","2020-04-15","2020-04-15","2020-04-15","2020-05-25","2020-04-15","2020-05-25","2020-04-15","2020-05-25","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-09-02","2020-09-03","2020-07-08","2020-07-11","2020-07-16","2020-07-07","2020-04-15","2020-03-22"],["2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-09-03","2020-09-04","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08"],["2020-06-22","2020-08-13","2020-06-22","2020-06-15","2020-06-17","2020-09-02","2020-05-15","2020-06-16","2020-05-13","2020-06-20","2020-04-28","2020-04-26","2020-06-22","2020-04-26","2020-06-07","2020-06-07","2020-06-17","2020-06-16","2020-06-20","2020-06-19","2020-05-10","2020-06-24","2020-05-08","2020-06-15","2020-06-05","2020-06-07","2020-06-05","2020-06-22","2020-05-10","2020-06-15","2020-06-05","2020-06-07","2020-06-05","2020-04-28","2020-06-06","2020-06-05","2020-04-29","2020-06-07","2020-06-05","2020-06-17","2020-06-17","2020-05-15","2020-06-20","2020-05-10","2020-06-22","2020-05-13","2020-06-22","2020-06-17","2020-06-15","2020-06-24","2020-06-17","2020-06-22","2020-06-22","2020-06-17","2020-06-17","2020-06-15","2020-06-17","2020-06-24","2020-09-02","2020-09-01","2020-05-06","2020-05-10","2020-07-27","2020-05-06","2020-04-26","2020-04-28"],["2020-08-15","2020-08-14","2020-08-14","2020-06-16","2020-06-18","2020-09-03",null,"2020-06-17","2020-05-14","2020-06-21","2020-04-29","2020-04-27","2020-06-23","2020-04-27","2020-06-08","2020-06-08","2020-06-18","2020-06-17","2020-06-21","2020-06-20",null,"2020-06-25",null,"2020-06-16","2020-06-06","2020-06-08","2020-06-06","2020-06-23",null,"2020-06-16","2020-06-06","2020-06-08","2020-06-06",null,"2020-06-08","2020-06-06","2020-04-30","2020-06-08","2020-06-06","2020-06-18","2020-06-18","2020-05-16","2020-06-21","2020-05-11","2020-06-23","2020-05-14","2020-06-23","2020-06-18","2020-06-16","2020-06-25","2020-06-18","2020-06-23","2020-06-23","2020-06-18","2020-06-18","2020-06-16","2020-06-18","2020-06-25","2020-09-03","2020-09-02",null,null,null,null,"2020-06-06",null],["2020-08-28","2020-08-27","2020-08-27","2020-06-29","2020-07-01","2020-09-16",null,"2020-06-30","2020-05-27","2020-07-04","2020-05-12","2020-05-10","2020-07-06","2020-05-10","2020-06-21","2020-06-21","2020-07-01","2020-06-30","2020-07-04","2020-07-03",null,"2020-07-08",null,"2020-06-29","2020-06-19","2020-06-21","2020-06-19","2020-07-06",null,"2020-06-29","2020-06-19","2020-06-21","2020-06-19",null,"2020-06-21","2020-06-19","2020-05-13","2020-06-21","2020-06-19","2020-07-01","2020-07-01","2020-05-29","2020-07-04","2020-05-24","2020-07-06","2020-05-27","2020-07-06","2020-07-01","2020-06-29","2020-07-08","2020-07-01","2020-07-06","2020-07-06","2020-07-01","2020-07-01","2020-06-29","2020-07-01","2020-07-08","2020-09-16","2020-09-15",null,null,null,null,"2020-06-19",null],[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"1_LOW","3_HIGH","1_LOW",null,null,null,null],[false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,null,null,null,null,null,null],["Djembe","Trumpet","Djembe","Djembe","Trumpet","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Trumpet","Djembe","Djembe","Congas","Venu","Cornet","Venu","Djembe","Djembe"]],"container":"<table class=\"white-space: nowrap\">\n  <thead>\n    <tr>\n      <th>contact_id<\/th>\n      <th>contact_status<\/th>\n      <th>firstName<\/th>\n      <th>lastName<\/th>\n      <th>gender<\/th>\n      <th>age<\/th>\n      <th>age_class<\/th>\n      <th>occupation<\/th>\n      <th>date_of_reporting<\/th>\n      <th>date_of_data_entry<\/th>\n      <th>date_of_last_exposure<\/th>\n      <th>date_of_followup_start<\/th>\n      <th>date_of_followup_end<\/th>\n      <th>risk_level<\/th>\n      <th>was_case<\/th>\n      <th>admin_2_name<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":5}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="données-de-suivi" class="section level4 unnumbered">
<h4>Données de suivi<a class="anchor" aria-label="anchor" href="#donn%C3%A9es-de-suivi"><i class="fas fa-link"></i></a>
</h4>
<p>Ces données sont des enregistrements des interactions de “suivi” avec les contacts. Chaque contact est censé avoir une rencontre chaque jour pendant 14 jours après son exposition.</p>
<p>Nous importons et effectuons quelques étapes de nettoyage. Nous sélectionnons certaines colonnes, et convertissons également une colonne de caractères en toutes les valeurs minuscules.</p>
<div class="sourceCode" id="cb1207"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">followups</span> <span class="op">&lt;-</span> <span class="fu">rio</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/rio/man/import.html">import</a></span><span class="op">(</span><span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html">here</a></span><span class="op">(</span><span class="st">"data"</span>, <span class="st">"godata"</span>, <span class="st">"followups_clean.rds"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">contact_id</span>, <span class="va">followup_status</span>, <span class="va">followup_number</span>,</span>
<span>         <span class="va">date_of_followup</span>, <span class="va">admin_2_name</span>, <span class="va">admin_1_name</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>followup_status <span class="op">=</span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/case.html">str_to_lower</a></span><span class="op">(</span><span class="va">followup_status</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Voici les 50 premières lignes de la base de données <code>nrow(followups)</code>-row <code>followups</code> (chaque ligne est une interaction de suivi, avec le statut du suivi dans la colonne <code>followup_status</code>) :</p>
<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-e74ea24ff68506e78760" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-e74ea24ff68506e78760">{"x":{"filter":"none","vertical":false,"data":[["CONTACT-2020-0012","CONTACT-2020-0015","CONTACT-2020-0015","CONTACT-2020-0015","CONTACT-2020-0015","CONTACT-2020-0043","CONTACT-2020-0046","CONTACT-2020-0012","CONTACT-2020-0046","CONTACT-2020-0043","CONTACT-2020-0056","CONTACT-2020-0054","CONTACT-2020-0012","CONTACT-2020-0054","CONTACT-2020-0054","CONTACT-2020-0012","CONTACT-2020-0056","CONTACT-2020-0054","CONTACT-2020-0056","CONTACT-2020-0056","CONTACT-2020-0060","CONTACT-2020-0059","CONTACT-2020-0060","CONTACT-2020-0060","CONTACT-2020-0060","CONTACT-2020-0059","CONTACT-2020-0059","CONTACT-2020-0059","CONTACT-2020-0005","CONTACT-2020-0058","CONTACT-2020-0029","CONTACT-2020-0029","CONTACT-2020-0029","CONTACT-2020-0042","CONTACT-2020-0058","CONTACT-2020-0003","CONTACT-2020-0001","CONTACT-2020-0029","CONTACT-2020-0042","CONTACT-2020-0036","CONTACT-2020-0042","CONTACT-2020-0036","CONTACT-2020-0036","CONTACT-2020-0042","CONTACT-2020-0004","CONTACT-2020-0036","CONTACT-2020-0040","CONTACT-2020-0040","CONTACT-2020-0040","CONTACT-2020-0014"],["seen_ok","not_attempted","seen_ok","seen_ok","seen_ok","seen_ok","seen_ok","seen_ok","seen_ok","seen_ok","not_performed","seen_ok","seen_ok","seen_not_ok","seen_ok","seen_ok","seen_ok","seen_ok","not_performed","seen_ok","seen_ok","seen_ok","not_attempted","seen_ok","missed","seen_ok","missed","seen_ok","seen_ok","seen_ok","seen_ok","missed","seen_ok","seen_not_ok","missed","seen_ok","missed","seen_ok","seen_ok","seen_ok","missed","seen_ok","seen_ok","seen_ok","seen_ok","seen_ok","seen_ok","seen_ok","seen_not_ok","seen_ok"],[7,8,6,9,7,1,2,6,1,2,9,6,8,7,5,9,7,4,6,8,5,4,6,8,7,3,1,2,14,1,7,5,4,5,2,14,14,6,6,4,7,3,5,8,14,2,6,9,7,8],["2020-06-02","2020-06-03","2020-06-01","2020-06-04","2020-06-02","2020-06-03","2020-06-05","2020-06-01","2020-06-04","2020-06-04","2020-06-04","2020-06-03","2020-06-03","2020-06-04","2020-06-02","2020-06-04","2020-06-02","2020-06-01","2020-06-01","2020-06-03","2020-06-01","2020-06-04","2020-06-02","2020-06-04","2020-06-03","2020-06-03","2020-06-01","2020-06-02","2020-06-01","2020-06-03","2020-06-04","2020-06-02","2020-06-01","2020-06-01","2020-06-04","2020-06-01","2020-06-01","2020-06-03","2020-06-02","2020-06-03","2020-06-03","2020-06-02","2020-06-04","2020-06-04","2020-06-01","2020-06-01","2020-06-01","2020-06-04","2020-06-02","2020-06-03"],["Djembe","Trumpet","Trumpet","Trumpet","Trumpet","Djembe",null,"Djembe",null,"Djembe",null,"Trumpet","Djembe","Trumpet","Trumpet","Djembe",null,"Trumpet",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],["Drums island","Brass island","Brass island","Brass island","Brass island","Drums island",null,"Drums island",null,"Drums island",null,"Brass island","Drums island","Brass island","Brass island","Drums island",null,"Brass island",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null]],"container":"<table class=\"white-space: nowrap\">\n  <thead>\n    <tr>\n      <th>contact_id<\/th>\n      <th>followup_status<\/th>\n      <th>followup_number<\/th>\n      <th>date_of_followup<\/th>\n      <th>admin_2_name<\/th>\n      <th>admin_1_name<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":2}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="données-de-relations" class="section level4 unnumbered">
<h4>Données de relations<a class="anchor" aria-label="anchor" href="#donn%C3%A9es-de-relations"><i class="fas fa-link"></i></a>
</h4>
<p>Ici, nous importons des données montrant la relation entre les cas et les contacts. Nous sélectionnons certaines colonnes à afficher.</p>
<div class="sourceCode" id="cb1208"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">relationships</span> <span class="op">&lt;-</span> <span class="fu">rio</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/rio/man/import.html">import</a></span><span class="op">(</span><span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html">here</a></span><span class="op">(</span><span class="st">"data"</span>, <span class="st">"godata"</span>, <span class="st">"relationships_clean.rds"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">source_visualid</span>, <span class="va">source_gender</span>, <span class="va">source_age</span>, <span class="va">date_of_last_contact</span>,</span>
<span>         <span class="va">date_of_data_entry</span>, <span class="va">target_visualid</span>, <span class="va">target_gender</span>,</span>
<span>         <span class="va">target_age</span>, <span class="va">exposure_type</span><span class="op">)</span></span></code></pre></div>
<p>Vous trouverez ci-dessous les 50 premières lignes du jeu de données <code>relations</code>, qui enregistre toutes les relations entre les cas et les contacts.</p>
<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-460a7001721691e099f1" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-460a7001721691e099f1">{"x":{"filter":"none","vertical":false,"data":[["CASE-2020-0016",null,null,"CASE-2020-0045","CASE-2020-0004","CASE-2020-0010",null,"CASE-2020-0034",null,"CASE-2020-0037","CASE-2020-0005",null,"CASE-2020-0002","CASE-2020-0001","CASE-2020-0005",null,"CASE-2020-0004","CASE-2020-0012","CASE-2020-0022","CASE-2020-0004","CASE-2020-0003","CASE-2020-0001","CASE-2020-0030","CASE-2020-0022","CASE-2020-0010","CASE-2020-0018","CASE-2020-0045","CASE-2020-0030","CASE-2020-0001","CASE-2020-0018","CASE-2020-0008","CASE-2020-0014",null,"CASE-2020-0002","CASE-2020-0030","CASE-2020-0031","CASE-2020-0009","CASE-2020-0031","CASE-2020-0002",null,"CASE-2020-0001","CASE-2020-0001","CASE-2020-0022","CASE-2020-0001","CASE-2020-0012","CASE-2020-0023","CASE-2020-0016","CASE-2020-0001",null,"CASE-2020-0023"],["Female",null,null,"Female","Male","Female",null,"Male",null,"Female","Male",null,"Male","Female","Male",null,"Male","Female","Female","Male","Male","Female","Male","Female","Female","Male","Female","Male","Female","Male","Male","Male",null,"Male","Male","Male","Female","Male","Male",null,"Female","Female","Female","Female","Female","Female","Female","Female","Female","Female"],[80,null,null,34,43,37,null,20,null,80,23,0,52,49,23,null,43,80,51,43,58,49,52,51,37,25,34,52,49,25,7,54,null,52,52,20,57,20,52,null,49,49,51,49,80,43,80,49,43,43],["2020-06-24","2020-05-02","2020-06-15","2020-07-27","2020-06-05","2020-06-05","2020-08-19","2020-06-20","2020-08-19","2020-09-02","2020-08-07","2020-08-13","2020-05-15","2020-07-17","2020-06-15","2020-08-07","2020-06-15","2020-06-17","2020-06-05","2020-06-24","2020-06-07","2020-08-15","2020-06-17","2020-06-22","2020-06-19","2020-06-17","2020-07-27","2020-06-16","2020-04-28","2020-04-26","2020-06-15","2020-06-05","2020-05-02","2020-04-29","2020-06-22","2020-06-06","2020-05-13","2020-06-17","2020-05-01","2020-06-15","2020-06-07","2020-08-14","2020-06-20","2020-09-02","2020-06-24","2020-07-28","2020-06-17","2020-08-14","2020-08-14","2020-07-28"],["2020-06-08","2020-06-08","2020-06-08","2020-06-10","2020-06-08","2020-06-08","2020-08-20","2020-06-08","2020-08-20","2020-09-03","2020-08-21","2020-08-20","2020-06-08","2020-06-08","2020-06-08","2020-08-20","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-10","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-08-27","2020-06-08","2020-09-03","2020-06-08","2020-06-10","2020-06-08","2020-08-27","2020-08-27","2020-06-10"],["CONTACT-2020-0027","CASE-2020-0014","CASE-2020-0031","CASE-2020-0021","CONTACT-2020-0020","CONTACT-2020-0038","CASE-2020-0036","CONTACT-2020-0059","CASE-2020-0037",null,"CASE-2020-0015","CONTACT-2020-0015","CONTACT-2020-0009","CASE-2020-0008",null,"CASE-2020-0010","CONTACT-2020-0018","CONTACT-2020-0029","CONTACT-2020-0045","CONTACT-2020-0019","CONTACT-2020-0007","CASE-2020-0004","CONTACT-2020-0044","CONTACT-2020-0046","CONTACT-2020-0036","CONTACT-2020-0052","CASE-2020-0023","CONTACT-2020-0042","CONTACT-2020-0005","CONTACT-2020-0053","CONTACT-2020-0017","CONTACT-2020-0034","CASE-2020-0012","CASE-2020-0008","CONTACT-2020-0043","CONTACT-2020-0048","CONTACT-2020-0023","CONTACT-2020-0049","CASE-2020-0006","CASE-2020-0018","CONTACT-2020-0003","CASE-2020-0017","CONTACT-2020-0047","CONTACT-2020-0056","CONTACT-2020-0027","CASE-2020-0029","CONTACT-2020-0028","CONTACT-2020-0046","CONTACT-2020-0046","CASE-2020-0027"],["Male","Male","Male","Male","Female","Male","Female","Female","Female","Male","Female","Male","Male","Male",null,"Female","Male","Male","Female","Male","Female","Male","Male","Male","Female","Male","Female","Male","Male","Male","Female","Female","Female","Male","Male","Male","Male","Female","Male","Male","Male","Male","Male","Male","Male","Male","Female","Male","Male","Male"],[15,54,20,46,32,7,40,97,80,0,38,56,18,7,null,37,78,null,32,20,29,43,null,81,45,null,43,15,3,3,35,54,80,7,47,7,23,null,47,25,12,8,67,54,15,46,null,81,81,38],["Direct physical contact ",null,null,null,"Indirect contact (touched contaminated surface/materials/fomites etc.)","Direct non-physical contact (within 1 meter) ",null,"Direct physical contact ",null,"Direct physical contact ","Direct non-physical contact (within 1 meter) ","Direct non-physical contact (within 1 meter) ","Direct non-physical contact (within 1 meter) ","Direct physical contact ",null,"Direct non-physical contact (within 1 meter) ","Indirect contact (touched contaminated surface/materials/fomites etc.)","Indirect contact (touched contaminated surface/materials/fomites etc.)","Direct physical contact ","Direct non-physical contact (within 1 meter) ",null,"Direct physical contact ","Indirect contact (touched contaminated surface/materials/fomites etc.)","Direct physical contact ","Direct physical contact ","Direct non-physical contact (within 1 meter) ",null,"Direct physical contact ",null,"Direct physical contact ","Indirect contact (touched contaminated surface/materials/fomites etc.)","Direct non-physical contact (within 1 meter) ",null,"Direct physical contact ","Direct non-physical contact (within 1 meter) ","Direct non-physical contact (within 1 meter) ","Direct physical contact ","Direct physical contact ",null,null,null,null,"Indirect contact (touched contaminated surface/materials/fomites etc.)","Direct physical contact ","Direct physical contact ",null,"Direct physical contact ",null,null,null]],"container":"<table class=\"white-space: nowrap\">\n  <thead>\n    <tr>\n      <th>source_visualid<\/th>\n      <th>source_gender<\/th>\n      <th>source_age<\/th>\n      <th>date_of_last_contact<\/th>\n      <th>date_of_data_entry<\/th>\n      <th>target_visualid<\/th>\n      <th>target_gender<\/th>\n      <th>target_age<\/th>\n      <th>exposure_type<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":[2,7]}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</div>
<div id="analyses-descriptives" class="section level2" number="25.2">
<h2>
<span class="header-section-number">25.2</span> Analyses descriptives<a class="anchor" aria-label="anchor" href="#analyses-descriptives"><i class="fas fa-link"></i></a>
</h2>
<p>Vous pouvez utiliser les techniques abordées dans d’autres pages de ce manuel pour effectuer des analyses descriptives de vos cas, de vos contacts et de leurs relations. Vous trouverez ci-dessous quelques exemples</p>
<div id="démographie" class="section level3 unnumbered">
<h3>Démographie<a class="anchor" aria-label="anchor" href="#d%C3%A9mographie"><i class="fas fa-link"></i></a>
</h3>
<p>Comme le montre la page consacrée aux <a href="age_pyramid.html#age_pyramid">Pyramides démographiques</a>, vous pouvez visualiser la répartition par âge et par sexe (nous utilisons ici le package <strong>apyramide</strong>).</p>
<div id="age-et-sexe-des-contacts" class="section level4 unnumbered">
<h4>Age et sexe des contacts<a class="anchor" aria-label="anchor" href="#age-et-sexe-des-contacts"><i class="fas fa-link"></i></a>
</h4>
<p>La pyramide ci-dessous compare la répartition par âge des contacts, par sexe. Notez que les contacts dont l’âge est manquant sont inclus dans leur propre barre en haut. Vous pouvez modifier ce comportement par défaut, mais envisagez alors d’indiquer le nombre de contacts manquants dans une légende.</p>
<div class="sourceCode" id="cb1209"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">apyramid</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/apyramid/man/age_pyramid.html">age_pyramid</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">contacts</span>,                                   <span class="co"># utiliser la base de données des contacts</span></span>
<span>  age_group <span class="op">=</span> <span class="st">"age_class"</span>,                           <span class="co"># colonne d'âge catégorielle</span></span>
<span>  split_by <span class="op">=</span> <span class="st">"gender"</span><span class="op">)</span> <span class="op">+</span>                             <span class="co"># genre pour les moitiés de la pyramide</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span></span>
<span>    fill <span class="op">=</span> <span class="st">"Gender"</span>,                                 <span class="co"># titre de la légende</span></span>
<span>    title <span class="op">=</span> <span class="st">"Age/Sex Pyramid of COVID-19 contacts"</span><span class="op">)</span><span class="op">+</span> <span class="co"># titre du graphique</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span>                                    <span class="co"># un fond simple</span></span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-864-1.png" width="672"></div>
<p>Avec la structure de données Go.Data, le jeu de données <code>relations</code> contient les âges des cas et des contacts, vous pourriez donc utiliser ce jeu de données et créer une pyramide des âges montrant les différences entre ces deux groupes de personnes. Le tableau de données <code>relations</code> sera modifié pour transformer les colonnes d’âge numériques en catégories (voir la page <a href="cleaning_data.html#cleaning_data">Nettoyage des données et fonctions de base</a>). Nous faisons également pivoter le tableau de données pour faciliter le traçage avec <strong>ggplot2</strong> (voir <a href="pivoting_data.html#pivoting_data">Pivoter les données</a>).</p>
<div class="sourceCode" id="cb1210"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">relation_age</span> <span class="op">&lt;-</span> <span class="va">relationships</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">source_age</span>, <span class="va">target_age</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/transmute.html">transmute</a></span><span class="op">(</span>        <span class="co"># transmute est comme mutate() mais supprime toutes les autres colonnes non mentionnées</span></span>
<span>    source_age_class <span class="op">=</span> <span class="fu">epikit</span><span class="fu">::</span><span class="fu"><a href="https://r4epi.github.io/epikit/reference/age_categories.html">age_categories</a></span><span class="op">(</span><span class="va">source_age</span>, breakers <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">80</span>, <span class="fl">5</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    target_age_class <span class="op">=</span> <span class="fu">epikit</span><span class="fu">::</span><span class="fu"><a href="https://r4epi.github.io/epikit/reference/age_categories.html">age_categories</a></span><span class="op">(</span><span class="va">target_age</span>, breakers <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">80</span>, <span class="fl">5</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html">pivot_longer</a></span><span class="op">(</span>cols <span class="op">=</span> <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html">contains</a></span><span class="op">(</span><span class="st">"class"</span><span class="op">)</span>, names_to <span class="op">=</span> <span class="st">"category"</span>, values_to <span class="op">=</span> <span class="st">"age_class"</span><span class="op">)</span>  <span class="co"># pivotement plus long</span></span>
<span></span>
<span></span>
<span><span class="va">relation_age</span></span></code></pre></div>
<pre><code>## # A tibble: 200 × 2
##    category         age_class
##    &lt;chr&gt;            &lt;fct&gt;    
##  1 source_age_class 80+      
##  2 target_age_class 15-19    
##  3 source_age_class &lt;NA&gt;     
##  4 target_age_class 50-54    
##  5 source_age_class &lt;NA&gt;     
##  6 target_age_class 20-24    
##  7 source_age_class 30-34    
##  8 target_age_class 45-49    
##  9 source_age_class 40-44    
## 10 target_age_class 30-34    
## # ℹ 190 more rows</code></pre>
<p>Maintenant nous pouvons tracer cet ensemble de données transformées avec <code>age_pyramid()</code> comme avant, mais en remplaçant <code>gender</code> par <code>category</code> (contact, ou cas).</p>
<div class="sourceCode" id="cb1212"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">apyramid</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/apyramid/man/age_pyramid.html">age_pyramid</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">relation_age</span>,                               <span class="co"># utiliser un ensemble de données de relations modifiées</span></span>
<span>  age_group <span class="op">=</span> <span class="st">"age_class"</span>,                           <span class="co"># colonne d'âge catégorielle</span></span>
<span>  split_by <span class="op">=</span> <span class="st">"category"</span><span class="op">)</span> <span class="op">+</span>                           <span class="co"># par cas et contacts</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html">scale_fill_manual</a></span><span class="op">(</span></span>
<span>    values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"orange"</span>, <span class="st">"purple"</span><span class="op">)</span>,                  <span class="co"># pour spécifier les couleurs ET les étiquettes</span></span>
<span>    labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Case"</span>, <span class="st">"Contact"</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span></span>
<span>    fill <span class="op">=</span> <span class="st">"Legend"</span>,                                           <span class="co"># titre de la légende</span></span>
<span>    title <span class="op">=</span> <span class="st">"Pyramides demographiques de cas et contacts de COVID-19"</span><span class="op">)</span><span class="op">+</span> <span class="co"># titre du graph</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span>                                              <span class="co"># fond simple</span></span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-866-1.png" width="672"></div>
<p>Nous pouvons également visualiser d’autres caractéristiques telles que la répartition par profession (par exemple, sous la forme d’un diagramme circulaire).</p>
<div class="sourceCode" id="cb1213"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Clean dataset and get counts by occupation</span></span>
<span><span class="va">occ_plot_data</span> <span class="op">&lt;-</span> <span class="va">cases</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>occupation <span class="op">=</span> <span class="fu">forcats</span><span class="fu">::</span><span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_explicit_na.html">fct_explicit_na</a></span><span class="op">(</span><span class="va">occupation</span><span class="op">)</span>,  <span class="co"># faire des valeurs manquantes NA une catégorie</span></span>
<span>         occupation <span class="op">=</span> <span class="fu">forcats</span><span class="fu">::</span><span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_inorder.html">fct_infreq</a></span><span class="op">(</span><span class="va">occupation</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="co"># ordonner les niveaux de facteurs par ordre de fréquence</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">occupation</span><span class="op">)</span>                                          <span class="co"># obtenir des chiffres par profession</span></span>
<span>  </span>
<span><span class="co"># Make pie chart</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">occ_plot_data</span>, mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">""</span>, y <span class="op">=</span> <span class="va">n</span>, fill <span class="op">=</span> <span class="va">occupation</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span>width <span class="op">=</span> <span class="fl">1</span>, stat <span class="op">=</span> <span class="st">"identity"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_polar.html">coord_polar</a></span><span class="op">(</span><span class="st">"y"</span>, start <span class="op">=</span> <span class="fl">0</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span></span>
<span>    fill <span class="op">=</span> <span class="st">"Occupation"</span>,</span>
<span>    title <span class="op">=</span> <span class="st">"Occupation connue des cas de covid-19"</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>                    </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>axis.line <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>        axis.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>        axis.text <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-867-1.png" width="672"></div>
</div>
</div>
<div id="contacts-par-cas" class="section level3 unnumbered">
<h3>Contacts par cas<a class="anchor" aria-label="anchor" href="#contacts-par-cas"><i class="fas fa-link"></i></a>
</h3>
<p>Le nombre de contacts par cas peut être une unité de mesure importante pour évaluer la qualité du dénombrement des contacts et la conformité de la population à la réponse de santé publique.</p>
<p>En fonction de votre structure de données, cela peut être évalué avec un ensemble de données qui contient tous les cas et les contacts. Dans les ensembles de données de Go.Data, les liens entre les cas (“sources”) et les contacts (“cibles”) sont stockés dans le jeu de données <code>relationships</code>.</p>
<p>Dans cet ensemble de données, chaque ligne est un contact, et le cas source est listé dans la ligne. Aucun contact n’a de relations avec plusieurs affaires. multiples, mais si c’est le cas, vous devrez peut-être en tenir compte avant de faire le graphique (et de les explorer aussi !).</p>
<p>Nous commençons par compter le nombre de lignes (contacts) par cas source. Ceci est enregistré comme un tableau de données.</p>
<div class="sourceCode" id="cb1214"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">contacts_per_case</span> <span class="op">&lt;-</span> <span class="va">relationships</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">source_visualid</span><span class="op">)</span></span>
<span></span>
<span><span class="va">contacts_per_case</span></span></code></pre></div>
<pre><code>## # A tibble: 23 × 2
##    source_visualid     n
##    &lt;chr&gt;           &lt;int&gt;
##  1 CASE-2020-0001     13
##  2 CASE-2020-0002      5
##  3 CASE-2020-0003      2
##  4 CASE-2020-0004      4
##  5 CASE-2020-0005      5
##  6 CASE-2020-0006      3
##  7 CASE-2020-0008      3
##  8 CASE-2020-0009      3
##  9 CASE-2020-0010      3
## 10 CASE-2020-0012      3
## # ℹ 13 more rows</code></pre>
<p>Nous utilisons <code><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram()</a></code> pour représenter ces données sous forme d’histogramme.</p>
<div class="sourceCode" id="cb1216"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">contacts_per_case</span><span class="op">)</span><span class="op">+</span>        <span class="co"># commencer avec le tableau de données créé ci-dessus</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span>mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">n</span><span class="op">)</span><span class="op">)</span><span class="op">+</span>  <span class="co"># afficher l'histogramme du nombre de contacts par cas</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_continuous</a></span><span class="op">(</span>expand <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0</span><span class="op">)</span><span class="op">)</span><span class="op">+</span>   <span class="co"># supprimer l'espace excédentaire en dessous de 0 sur l'axe des ordonnées</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_light</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span>                         <span class="co"># simplifier le fond</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"Number of contacts per case"</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"Cases"</span>,</span>
<span>    x <span class="op">=</span> <span class="st">"Contacts per case"</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-869-1.png" width="672"></div>
</div>
</div>
<div id="suivi-de-contacts" class="section level2" number="25.3">
<h2>
<span class="header-section-number">25.3</span> Suivi de contacts<a class="anchor" aria-label="anchor" href="#suivi-de-contacts"><i class="fas fa-link"></i></a>
</h2>
<p>Les données de recherche des contacts contiennent souvent des données de “suivi”, qui enregistrent les résultats des contrôles quotidiens des symptômes des personnes en quarantaine. L’analyse de ces données permet d’orienter la stratégie de réponse, d’identifier les contacts susceptibles d’être perdus pour le suivi ou de développer la maladie.</p>
<div id="nettoyage-de-données" class="section level3 unnumbered">
<h3>Nettoyage de données<a class="anchor" aria-label="anchor" href="#nettoyage-de-donn%C3%A9es"><i class="fas fa-link"></i></a>
</h3>
<p>Ces données peuvent exister sous différents formats. Elles peuvent exister sous la forme d’une large avec une ligne par contact et une colonne par “jour” de suivi. jour” de suivi. Voir <a href="pivoting_data.html#pivoting_data">Pivoter les données</a> pour obtenir des descriptions des données “longues” et données “larges” et comment faire pivoter des données plus larges ou plus longues.</p>
<p>Dans notre exemple Go.Data, ces données sont stockées dans le tableau <code>followups</code>, qui est dans un format “long” avec une ligne par interaction de suivi. Les 50 premières lignes ressemblent à ceci :</p>
<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-d2bc8ec60ae49790c196" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-d2bc8ec60ae49790c196">{"x":{"filter":"none","vertical":false,"data":[["CONTACT-2020-0012","CONTACT-2020-0015","CONTACT-2020-0015","CONTACT-2020-0015","CONTACT-2020-0015","CONTACT-2020-0043","CONTACT-2020-0046","CONTACT-2020-0012","CONTACT-2020-0046","CONTACT-2020-0043","CONTACT-2020-0056","CONTACT-2020-0054","CONTACT-2020-0012","CONTACT-2020-0054","CONTACT-2020-0054","CONTACT-2020-0012","CONTACT-2020-0056","CONTACT-2020-0054","CONTACT-2020-0056","CONTACT-2020-0056","CONTACT-2020-0060","CONTACT-2020-0059","CONTACT-2020-0060","CONTACT-2020-0060","CONTACT-2020-0060","CONTACT-2020-0059","CONTACT-2020-0059","CONTACT-2020-0059","CONTACT-2020-0005","CONTACT-2020-0058","CONTACT-2020-0029","CONTACT-2020-0029","CONTACT-2020-0029","CONTACT-2020-0042","CONTACT-2020-0058","CONTACT-2020-0003","CONTACT-2020-0001","CONTACT-2020-0029","CONTACT-2020-0042","CONTACT-2020-0036","CONTACT-2020-0042","CONTACT-2020-0036","CONTACT-2020-0036","CONTACT-2020-0042","CONTACT-2020-0004","CONTACT-2020-0036","CONTACT-2020-0040","CONTACT-2020-0040","CONTACT-2020-0040","CONTACT-2020-0014"],["seen_ok","not_attempted","seen_ok","seen_ok","seen_ok","seen_ok","seen_ok","seen_ok","seen_ok","seen_ok","not_performed","seen_ok","seen_ok","seen_not_ok","seen_ok","seen_ok","seen_ok","seen_ok","not_performed","seen_ok","seen_ok","seen_ok","not_attempted","seen_ok","missed","seen_ok","missed","seen_ok","seen_ok","seen_ok","seen_ok","missed","seen_ok","seen_not_ok","missed","seen_ok","missed","seen_ok","seen_ok","seen_ok","missed","seen_ok","seen_ok","seen_ok","seen_ok","seen_ok","seen_ok","seen_ok","seen_not_ok","seen_ok"],[7,8,6,9,7,1,2,6,1,2,9,6,8,7,5,9,7,4,6,8,5,4,6,8,7,3,1,2,14,1,7,5,4,5,2,14,14,6,6,4,7,3,5,8,14,2,6,9,7,8],["2020-06-02","2020-06-03","2020-06-01","2020-06-04","2020-06-02","2020-06-03","2020-06-05","2020-06-01","2020-06-04","2020-06-04","2020-06-04","2020-06-03","2020-06-03","2020-06-04","2020-06-02","2020-06-04","2020-06-02","2020-06-01","2020-06-01","2020-06-03","2020-06-01","2020-06-04","2020-06-02","2020-06-04","2020-06-03","2020-06-03","2020-06-01","2020-06-02","2020-06-01","2020-06-03","2020-06-04","2020-06-02","2020-06-01","2020-06-01","2020-06-04","2020-06-01","2020-06-01","2020-06-03","2020-06-02","2020-06-03","2020-06-03","2020-06-02","2020-06-04","2020-06-04","2020-06-01","2020-06-01","2020-06-01","2020-06-04","2020-06-02","2020-06-03"],["Djembe","Trumpet","Trumpet","Trumpet","Trumpet","Djembe",null,"Djembe",null,"Djembe",null,"Trumpet","Djembe","Trumpet","Trumpet","Djembe",null,"Trumpet",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],["Drums island","Brass island","Brass island","Brass island","Brass island","Drums island",null,"Drums island",null,"Drums island",null,"Brass island","Drums island","Brass island","Brass island","Drums island",null,"Brass island",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null]],"container":"<table class=\"white-space: nowrap\">\n  <thead>\n    <tr>\n      <th>contact_id<\/th>\n      <th>followup_status<\/th>\n      <th>followup_number<\/th>\n      <th>date_of_followup<\/th>\n      <th>admin_2_name<\/th>\n      <th>admin_1_name<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":2}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script><p><span style="color : orange ;"><strong><em>ATTENTION:</em></strong> Méfiez-vous des doublons lorsque vous traitez des données de suivi, car il peut y avoir plusieurs suivis erronés le même jour pour un contact donné. Cela peut sembler être une erreur mais reflète la réalité - par exemple, un agent de recherche de contacts pourrait soumettre un formulaire de suivi en début de journée alors qu’il n’a pas pu joindre le contact, et soumettre un second formulaire lorsqu’il a été joint par la suite. La façon dont vous souhaitez traiter les doublons dépend du contexte opérationnel. - veillez simplement à documenter clairement votre approche.</span></p>
<p>Voyons combien d’instances de lignes “en double” nous avons :</p>
<div class="sourceCode" id="cb1217"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">followups</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">contact_id</span>, <span class="va">date_of_followup</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>   <span class="co"># obtenir des jours de suivi uniques</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">n</span> <span class="op">&gt;</span> <span class="fl">1</span><span class="op">)</span>                             <span class="co"># afficher les enregistrements où le nombre est supérieur à 1 </span></span></code></pre></div>
<pre><code>## # A tibble: 3 × 3
##   contact_id date_of_followup     n
##   &lt;chr&gt;      &lt;date&gt;           &lt;int&gt;
## 1 &lt;NA&gt;       2020-09-03           2
## 2 &lt;NA&gt;       2020-09-04           2
## 3 &lt;NA&gt;       2020-09-05           2</code></pre>
<p>Dans notre exemple de données, les seuls enregistrements auxquels cela s’applique sont ceux auxquels il manque un ID ! Nous pouvons les supprimer. Mais, pour les besoins de la démonstration, nous allons montrer les étapes de la déduplication afin qu’il n’y ait qu’un seul encoutrement de suivi par personne et par jour. Voir la page sur <a href="cleaning_data.html#deduplication">déduplication</a> pour plus de détails. Nous supposerons que l’enregistrement de rencontre le plus récent est le bon. Nous profitons également de l’occasion pour nettoyer la colonne <code>followup_number</code> (le “jour” du suivi qui devrait qui devrait être compris entre 1 et 14).</p>
<div class="sourceCode" id="cb1219"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">followups_clean</span> <span class="op">&lt;-</span> <span class="va">followups</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  </span>
<span>  <span class="co"># Enlever les doublons</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">contact_id</span>, <span class="va">date_of_followup</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>        <span class="co"># grouper les lignes par jour de suivi</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="va">contact_id</span>, <span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html">desc</a></span><span class="op">(</span><span class="va">date_of_followup</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>   <span class="co"># organiser les lignes, par jour de suivi, par date de suivi (le plus récent en haut)</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html">slice_head</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>                                  <span class="co"># ne conserver que la première ligne par id contact</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">ungroup</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  </span>
<span>  <span class="co"># Autres nettoyages</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>followup_number <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/replace.html">replace</a></span><span class="op">(</span><span class="va">followup_number</span>, <span class="va">followup_number</span> <span class="op">&gt;</span> <span class="fl">14</span>, <span class="cn">NA</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="co"># nettoyer des données erronées</span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/drop_na.html">drop_na</a></span><span class="op">(</span><span class="va">contact_id</span><span class="op">)</span>                               <span class="co"># supprimer les id_contact dont les données sont manquantes</span></span></code></pre></div>
<p>Pour chaque rencontre de suivi, nous avons un statut de suivi (tel que si la rencontre a eu lieu et, le cas échéant, si le contact a eu des symptômes ou non). Pour voir toutes les valeurs, nous pouvons exécuter un rapide <code>tabyl()</code> (de <strong>janitor</strong>) ou <code><a href="https://rdrr.io/r/base/table.html">table()</a></code> (de <strong>base</strong> R) (voir <a href="descriptive_tables.html#descriptive_tables">Tableaux descriptifs</a>) par <code>followup_status</code> pour voir la fréquence de chacun des résultats.</p>
<p>Dans cet ensemble de données, “vu_not_ok” signifie “vu avec des symptômes”, et “vu_ok” signifie “vu sans symptômes”.</p>
<div class="sourceCode" id="cb1220"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">followups_clean</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">tabyl</span><span class="op">(</span><span class="va">followup_status</span><span class="op">)</span></span></code></pre></div>
<pre><code>##  followup_status   n    percent
##           missed  10 0.02325581
##    not_attempted   5 0.01162791
##    not_performed 319 0.74186047
##      seen_not_ok   6 0.01395349
##          seen_ok  90 0.20930233</code></pre>
</div>
<div id="graphe-dans-le-temps" class="section level3 unnumbered">
<h3>Graphe dans le temps<a class="anchor" aria-label="anchor" href="#graphe-dans-le-temps"><i class="fas fa-link"></i></a>
</h3>
<p>Comme les données de dates sont continues, nous utiliserons un histogramme pour les représenter avec <code>date_du_suivi</code> assigné à l’axe des abscisses. Nous pouvons obtenir un histogramme “empilé” en spécifiant un argument <code>fill =</code> dans <code><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes()</a></code>, que nous assignons à la colonne <code>followup_status</code>. Par conséquent, vous pouvez définir le titre de la légende en utilisant l’argument <code>fill =</code> de <code><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs()</a></code>.</p>
<p>On constate que les contacts ont été identifiés par vagues (correspondant vraisemblablement aux vagues épidémiques de cas), et que vl’achèvement du suivi ne semble pas s’être amélioré au cours de l’épidémie.</p>
<div class="sourceCode" id="cb1222"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">followups_clean</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span>mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date_of_followup</span>, fill <span class="op">=</span> <span class="va">followup_status</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_colour_discrete.html">scale_fill_discrete</a></span><span class="op">(</span>drop <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span><span class="op">+</span>   <span class="co"># Afficher tous les niveaux de facteurs (followup_status) dans la légende, même ceux qui ne sont pas utilisés.</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_classic</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span></span>
<span>    x <span class="op">=</span> <span class="st">""</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"Number of contacts"</span>,</span>
<span>    title <span class="op">=</span> <span class="st">"Daily Contact Followup Status"</span>,</span>
<span>    fill <span class="op">=</span> <span class="st">"Followup Status"</span>,</span>
<span>    subtitle <span class="op">=</span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_glue.html">str_glue</a></span><span class="op">(</span><span class="st">"Data as of {max(followups$date_of_followup, na.rm=T)}"</span><span class="op">)</span><span class="op">)</span>   <span class="co"># sous-titres dynamiques</span></span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-874-1.png" width="672"></div>
<p><span style="color : orange ;"><strong><em>ATTENTION:</em></strong> Si vous préparez de nombreux graphiques (par exemple pour plusieurs juridictions), vous voudrez que les légendes apparaissent de manière identique, même si les données sont plus ou moins complètes ou composées. Il peut y avoir des graphiques pour lesquels tous les statuts de suivi ne sont pas présents dans les données, mais vous voulez quand même que ces catégories apparaissent dans les légendes. Dans les ggplots (comme ci-dessus), vous pouvez spécifier l’argument <code>drop = FALSE</code> de la fonction <code><a href="https://ggplot2.tidyverse.org/reference/scale_colour_discrete.html">scale_fill_discrete()</a></code>. Dans les tableaux, utilisez <code>tabyl()</code> qui montre les comptes pour tous les niveaux de facteurs, ou si vous utilisez <code><a href="https://dplyr.tidyverse.org/reference/count.html">count()</a></code> de <strong>dplyr</strong> ajoutez l’argument <code>.drop = FALSE</code> pour inclure les comptes pour tous les niveaux de facteurs.</span></p>
</div>
<div id="suivi-quotidien-individuel" class="section level3 unnumbered">
<h3>Suivi quotidien individuel<a class="anchor" aria-label="anchor" href="#suivi-quotidien-individuel"><i class="fas fa-link"></i></a>
</h3>
<p>Si votre épidémie est suffisamment petite, vous voudrez peut-être voir chaque contact individuellement et voir son statut au cours de son suivi. Heureusement, cet tableau de données <code>followups</code> contient déjà une colonne avec le le “numéro” du jour du suivi (1-14). Si cette colonne n’existe pas dans vos données, vous pouvez la créer en calculant la différence entre la date de la dernière rencontre et la date à laquelle le suivi devait commencer pour le contact.</p>
<p>Un mécanisme de visualisation pratique (si le nombre de cas n’est pas trop important) peut être un diagramme de dispersion, réalisé avec <code><a href="https://ggplot2.tidyverse.org/reference/geom_tile.html">geom_tile()</a></code>. Voir plus de détails dans la page <a href="heatmaps.html#heatmaps">heat plot</a>.</p>
<div class="sourceCode" id="cb1223"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">followups_clean</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_tile.html">geom_tile</a></span><span class="op">(</span>mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">followup_number</span>, y <span class="op">=</span> <span class="va">contact_id</span>, fill <span class="op">=</span> <span class="va">followup_status</span><span class="op">)</span>,</span>
<span>            color <span class="op">=</span> <span class="st">"grey"</span><span class="op">)</span><span class="op">+</span>       <span class="co"># lignes grises</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html">scale_fill_manual</a></span><span class="op">(</span> values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"yellow"</span>, <span class="st">"grey"</span>, <span class="st">"orange"</span>, <span class="st">"darkred"</span>, <span class="st">"darkgreen"</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_x_continuous</a></span><span class="op">(</span>breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span>from <span class="op">=</span> <span class="fl">1</span>, to <span class="op">=</span> <span class="fl">14</span>, by <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-875-1.png" width="672"></div>
</div>
<div id="analyse-par-groupe" class="section level3 unnumbered">
<h3>Analyse par groupe<a class="anchor" aria-label="anchor" href="#analyse-par-groupe"><i class="fas fa-link"></i></a>
</h3>
<p>Ces données de suivi sont peut-être consultées journellement ou hebdomadairement pour la prise de décision opérationnelle. Vous souhaitez peut-être des désagrégations plus significatives par zone géographique ou par équipe de suivi des contacts. Nous pouvons le faire en ajustant les colonnes fournies à <code><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by()</a></code>.</p>
<div class="sourceCode" id="cb1224"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">plot_by_region</span> <span class="op">&lt;-</span> <span class="va">followups_clean</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>                                        <span class="co"># commencer par l'ensemble de données de suivi</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">admin_1_name</span>, <span class="va">admin_2_name</span>, <span class="va">followup_status</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>   <span class="co"># obtenir les chiffres par région-statut unique (crée la colonne 'n' avec les chiffres)</span></span>
<span>  </span>
<span>  <span class="co"># begin ggplot()</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>                                         <span class="co"># commencer le ggplot</span></span>
<span>    mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/reorder.factor.html">reorder</a></span><span class="op">(</span><span class="va">admin_2_name</span>, <span class="va">n</span><span class="op">)</span>,     <span class="co"># réorganiser les facteurs administratifs en fonction des valeurs numériques de la colonne 'n'.</span></span>
<span>                  y <span class="op">=</span> <span class="va">n</span>,                            <span class="co"># hauteur de la barre de la colonne 'n'.</span></span>
<span>                  fill <span class="op">=</span> <span class="va">followup_status</span>,           <span class="co"># colorer les barres empilées en fonction de leur statut</span></span>
<span>                  label <span class="op">=</span> <span class="va">n</span><span class="op">)</span><span class="op">)</span><span class="op">+</span>                      <span class="co"># passer à geom_label()              </span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_col</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span>                                     <span class="co"># barres empilées, cartographie obtenue au-dessus</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html">geom_text</a></span><span class="op">(</span>                                      <span class="co"># ajouter du texte, cartographie obtenue à partir de la version précédente</span></span>
<span>    size <span class="op">=</span> <span class="fl">3</span>,                                         </span>
<span>    position <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/position_stack.html">position_stack</a></span><span class="op">(</span>vjust <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span>, </span>
<span>    color <span class="op">=</span> <span class="st">"white"</span>,           </span>
<span>    check_overlap <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    fontface <span class="op">=</span> <span class="st">"bold"</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_flip.html">coord_flip</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span></span>
<span>    x <span class="op">=</span> <span class="st">""</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"Number of contacts"</span>,</span>
<span>    title <span class="op">=</span> <span class="st">"Contact Followup Status, by Region"</span>,</span>
<span>    fill <span class="op">=</span> <span class="st">"Followup Status"</span>,</span>
<span>    subtitle <span class="op">=</span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_glue.html">str_glue</a></span><span class="op">(</span><span class="st">"Data as of {max(followups_clean$date_of_followup, na.rm=T)}"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_classic</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span>                                                                      <span class="co"># Simplifier le fond</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap</a></span><span class="op">(</span><span class="op">~</span><span class="va">admin_1_name</span>, strip.position <span class="op">=</span> <span class="st">"right"</span>, scales <span class="op">=</span> <span class="st">"free_y"</span>, ncol <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>      <span class="co"># introduire les facettes </span></span>
<span></span>
<span><span class="va">plot_by_region</span></span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-876-1.png" width="672"></div>
<!-- If this was disaggregated by contact tracer, perhaps we would want to add a threshold line to display total # contacts that normally one person or area/team can handle, and how the current workload compares. We just do this by using `geom_hline()` function. -->
<!-- ```{r, warning=F, message=F} -->
<!-- plot_by_region +  -->
<!--      geom_hline(aes(yintercept=25), color="#C70039", linetype = "dashed") # fictitious threshold at 25 contacts -->
<!-- ``` -->
</div>
</div>
<div id="tableaux-kpi" class="section level2" number="25.4">
<h2>
<span class="header-section-number">25.4</span> Tableaux KPI<a class="anchor" aria-label="anchor" href="#tableaux-kpi"><i class="fas fa-link"></i></a>
</h2>
<p>Il existe un certain nombre d’indicateurs clés de performance ( KPI) qui peuvent être calculés et suivis à différents niveaux de désagrégation et sur différentes périodes de temps afin de contrôler les performances de la recherche de contacts. Une fois que vous maîtrisez les calculs et le format de base du tableau, il est assez facile d’intervertir les différents KPI.</p>
<p>Il existe de nombreuses sources de KPI pour le suivi des contacts, comme celle de <a href="https://contacttracingplaybook.resolvetosavelives.org/checklists/metrics">ResolveToSaveLives.org</a>. La majeure partie du travail consistera à parcourir votre structure de données et à réfléchir à tous les critères d’inclusion/exclusion. Nous présentons quelques exemples ci-dessous, en utilisant la structure de métadonnées de Go.Data :</p>
<div class="inline-table"><table style="width:89%;" class="table table-sm">
<colgroup>
<col width="19%">
<col width="19%">
<col width="30%">
<col width="19%">
</colgroup>
<thead><tr class="header">
<th>Catégorie</th>
<th>Indicateur</th>
<th>Go.Data Numérateur</th>
<th>Go.Data D
énominateur</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Indicateur
de
processus
-Rapidité
du Suivi de
contact</td>
<td>% cas
interviewé
et isololé
dans les
24h du cas
rapport</td>
<td>NOMBRE DE <code>case_id</code>
OU
(<code>da te_of_reporting</code>
-
<code>da te _of_data_entry</code>)
&lt; 1 jour et
(<code>is ol ation_startdate</code>
-
<code>da te _of_data_entry</code>)
&lt; 1 jour</td>
<td>NOMBRE DE
<code>case_id</code>
</td>
</tr>
<tr class="even">
<td>Indicateur
de
processus
-Rapidité
du Suivi de
contact</td>
<td>% contacts
notifié et
mis en
quarantaine
dans 24h d’
élicitation</td>
<td>NOMBRE DE
<code>contact_id</code> OÙ
<code>followup_status</code>
== “SEEN_NOT_OK” OR
“SEEN_OK” ET
<code>d ate_of_followup</code>
-
<code>da te_of_reporting</code>
&lt; 1 jour</td>
<td>NOMBRE DE
<code>c  ontact_id</code>
</td>
</tr>
<tr class="odd">
<td>Indicateur
de
processus -
Complétude
des tests</td>
<td>% nouveaux
symptômes
cas testés
et
interviewé
dans les 3
jours de
début de
symptôme</td>
<td>NOMBRE DE <code>case_id</code>
OÙ
(<code>da te_of_reporting</code>
- <code>date_of_onset</code>)
&lt; =3 jours</td>
<td>NOMBRE DE
<code>case_id</code>
</td>
</tr>
<tr class="even">
<td>Indicateur
de résultat
- Globale
ment</td>
<td>% nouveaux
cas parmi
les
contacts
listés</td>
<td>NOMBRE DE <code>case_id</code>
OÙ <code>was_contact</code> ==
“TRUE”</td>
<td>NOMBRE DE
<code>case_id</code>
</td>
</tr>
</tbody>
</table></div>
<p>Nous vous proposons ci-dessous un exemple de création d’un tableau visuel pour afficher le suivi des contacts dans les différentes zones d’administration. À la fin, nous le convertirons en tableau de présentation avec le package <strong>formattable</strong> (mais vous pouvez utiliser d’autres packages comme <strong>flextable</strong> - voir <a href="tables_presentation.html#tables_presentation">Tableaux de présentation</a>).</p>
<p>La manière de créer un tel tableau dépend de la structure de vos données de suivi des contacts. Utilisez la page <a href="descriptive_tables.html#descriptive_tables">Tableaux descriptifs</a> pour apprendre à résumer les données à l’aide des fonctions <strong>dplyr</strong>.</p>
<p>Nous allons créer une table qui sera dynamique et changera au fur et à mesure que les données changeront. Pour rendre les résultats intéressants, nous allons définir une “date de rapport” pour nous permettre de simuler l’exécution du tableau à un certain jour (nous choisissons le 10 juin 2020). Les données sont filtrées à cette date.</p>
<div class="sourceCode" id="cb1225"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Définissez "Date du rapport" pour simuler l'exécution du rapport avec des données "à partir de" cette date.</span></span>
<span><span class="va">report_date</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span><span class="op">(</span><span class="st">"2020-06-10"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Créez des données de suivi pour refléter la date du rapport.</span></span>
<span><span class="va">table_data</span> <span class="op">&lt;-</span> <span class="va">followups_clean</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">date_of_followup</span> <span class="op">&lt;=</span> <span class="va">report_date</span><span class="op">)</span></span></code></pre></div>
<p>Maintenant, sur la base de notre structure de données, nous allons faire ce qui suit :</p>
<ol style="list-style-type: decimal">
<li>Commencez par les données <code>followups</code> et résumez-les pour inclure, pour chaque contact unique :<br>
</li>
</ol>
<ul>
<li>La date du dernier enregistrement (quel que soit le statut du suivi).<br>
</li>
<li>La date de la dernière suivi où le contact a été “vu”<br>
</li>
<li>le statut du suivi lors de cette dernière suivi (par exemple, avec des symptômes, sans symptômes)<br>
</li>
</ul>
<ol start="2" style="list-style-type: decimal">
<li>Joignez ces données aux données des contacts, qui contiennent d’autres informations telles que le statut général du contact, la date de la dernière exposition à un cas, etc. Nous allons également calculer des indicateurs intéressants pour chaque contact, comme le nombre de jours depuis la dernière exposition.<br>
</li>
<li>Nous regroupons les données de contact élargies par région géographique (<code>admin_2_name</code>) et calculons des statistiques sommaires par région<br>
</li>
<li>Enfin, nous mettons en forme le tableau pour qu’il soit bien présenté.</li>
</ol>
<p>Tout d’abord, nous résumons les données de suivi pour obtenir les informations qui nous intéressent :</p>
<div class="sourceCode" id="cb1226"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">followup_info</span> <span class="op">&lt;-</span> <span class="va">table_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">contact_id</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span></span>
<span>    date_last_record   <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">date_of_followup</span>, na.rm<span class="op">=</span><span class="cn">T</span><span class="op">)</span>,</span>
<span>    date_last_seen     <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">date_of_followup</span><span class="op">[</span><span class="va">followup_status</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"seen_ok"</span>, <span class="st">"seen_not_ok"</span><span class="op">)</span><span class="op">]</span>, na.rm<span class="op">=</span><span class="cn">T</span><span class="op">)</span>,</span>
<span>    status_last_record <span class="op">=</span> <span class="va">followup_status</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/which.html">which</a></span><span class="op">(</span><span class="va">date_of_followup</span> <span class="op">==</span> <span class="va">date_last_record</span><span class="op">)</span><span class="op">]</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">ungroup</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>Voici à quoi ressemblent ces données :</p>
<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-6a2b04a242738aa18abe" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-6a2b04a242738aa18abe">{"x":{"filter":"none","vertical":false,"data":[["CONTACT-2020-0001","CONTACT-2020-0003","CONTACT-2020-0004","CONTACT-2020-0005","CONTACT-2020-0006","CONTACT-2020-0007","CONTACT-2020-0012","CONTACT-2020-0013","CONTACT-2020-0014","CONTACT-2020-0015","CONTACT-2020-0016","CONTACT-2020-0017","CONTACT-2020-0018","CONTACT-2020-0019","CONTACT-2020-0026","CONTACT-2020-0027","CONTACT-2020-0028","CONTACT-2020-0029","CONTACT-2020-0033","CONTACT-2020-0035","CONTACT-2020-0036","CONTACT-2020-0039","CONTACT-2020-0040","CONTACT-2020-0041","CONTACT-2020-0042","CONTACT-2020-0043","CONTACT-2020-0044","CONTACT-2020-0046","CONTACT-2020-0047","CONTACT-2020-0048","CONTACT-2020-0049","CONTACT-2020-0050","CONTACT-2020-0052","CONTACT-2020-0054","CONTACT-2020-0055","CONTACT-2020-0056","CONTACT-2020-0057","CONTACT-2020-0058","CONTACT-2020-0059","CONTACT-2020-0060"],["2020-06-01","2020-06-01","2020-06-01","2020-06-01","2020-06-01","2020-06-01","2020-06-05","2020-06-05","2020-06-05","2020-06-05","2020-06-05","2020-06-05","2020-06-05","2020-06-05","2020-06-05","2020-06-05","2020-06-05","2020-06-05","2020-06-05","2020-06-05","2020-06-05","2020-06-06","2020-06-05","2020-06-05","2020-06-05","2020-06-05","2020-06-05","2020-06-06","2020-06-05","2020-06-01","2020-06-05","2020-06-05","2020-06-05","2020-06-05","2020-06-05","2020-06-05","2020-06-05","2020-06-05","2020-06-05","2020-06-05"],["-Inf","2020-06-01","2020-06-01","2020-06-01","2020-06-01","2020-06-01","2020-06-04","2020-06-04","2020-06-04","2020-06-04","2020-06-04","2020-06-03","2020-06-03","2020-06-05","2020-06-03","2020-06-05","2020-06-05","2020-06-05","-Inf","2020-06-03","2020-06-05","2020-06-06","2020-06-04","2020-06-04","2020-06-05","2020-06-04","2020-06-05","2020-06-05","2020-06-04","2020-06-01","2020-06-05","2020-06-05","2020-06-05","2020-06-04","2020-06-05","2020-06-03","2020-06-02","2020-06-03","2020-06-05","2020-06-05"],["missed","seen_ok","seen_ok","seen_ok","seen_ok","seen_ok","not_performed","not_performed","not_performed","not_performed","not_performed","not_performed","not_performed","seen_ok","not_performed","seen_ok","seen_ok","seen_ok","not_performed","missed","seen_ok","seen_ok","not_performed","not_performed","seen_ok","not_performed","seen_not_ok","not_performed","not_performed","seen_ok","seen_ok","seen_ok","seen_ok","not_performed","seen_ok","not_performed","not_performed","not_performed","seen_ok","seen_ok"]],"container":"<table class=\"white-space: nowrap\">\n  <thead>\n    <tr>\n      <th>contact_id<\/th>\n      <th>date_last_record<\/th>\n      <th>date_last_seen<\/th>\n      <th>status_last_record<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":12,"scrollX":true,"columnDefs":[],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[10,12,25,50,100]},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script><p>Maintenant, nous allons ajouter ces informations à l’ensemble de données <code>contacts</code>, et calculer quelques colonnes supplémentaires.</p>
<div class="sourceCode" id="cb1227"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">contacts_info</span> <span class="op">&lt;-</span> <span class="va">followup_info</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">right_join</a></span><span class="op">(</span><span class="va">contacts</span>, by <span class="op">=</span> <span class="st">"contact_id"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span></span>
<span>    database_date       <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">date_last_record</span>, na.rm<span class="op">=</span><span class="cn">T</span><span class="op">)</span>,</span>
<span>    days_since_seen     <span class="op">=</span> <span class="va">database_date</span> <span class="op">-</span> <span class="va">date_last_seen</span>,</span>
<span>    days_since_exposure <span class="op">=</span> <span class="va">database_date</span> <span class="op">-</span> <span class="va">date_of_last_exposure</span></span>
<span>    <span class="op">)</span></span></code></pre></div>
<p>Voici à quoi ressemblent ces données. Il faut noter la colonne <code>contacts</code> à droite, et la nouvelle colonne calculée à l’extrême droite.</p>
<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-3ec9354263abd51c5d33" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-3ec9354263abd51c5d33">{"x":{"filter":"none","vertical":false,"data":[["CONTACT-2020-0001","CONTACT-2020-0003","CONTACT-2020-0004","CONTACT-2020-0005","CONTACT-2020-0006","CONTACT-2020-0007","CONTACT-2020-0012","CONTACT-2020-0013","CONTACT-2020-0014","CONTACT-2020-0015","CONTACT-2020-0016","CONTACT-2020-0017","CONTACT-2020-0018","CONTACT-2020-0019","CONTACT-2020-0026","CONTACT-2020-0027","CONTACT-2020-0028","CONTACT-2020-0029","CONTACT-2020-0033","CONTACT-2020-0035","CONTACT-2020-0036","CONTACT-2020-0039","CONTACT-2020-0040","CONTACT-2020-0041","CONTACT-2020-0042","CONTACT-2020-0043","CONTACT-2020-0044","CONTACT-2020-0046","CONTACT-2020-0047","CONTACT-2020-0048","CONTACT-2020-0049","CONTACT-2020-0050","CONTACT-2020-0052","CONTACT-2020-0054","CONTACT-2020-0055","CONTACT-2020-0056","CONTACT-2020-0057","CONTACT-2020-0058","CONTACT-2020-0059","CONTACT-2020-0060","CONTACT-2020-0030","CONTACT-2020-0021","CONTACT-2020-0053","CONTACT-2020-0011","CONTACT-2020-0032","CONTACT-2020-0025","CONTACT-2020-0045","CONTACT-2020-0020","CONTACT-2020-0031","CONTACT-2020-0037","CONTACT-2020-0051","CONTACT-2020-0008","CONTACT-2020-0038","CONTACT-2020-0010","CONTACT-2020-0034","CONTACT-2020-0009","CONTACT-2020-0022","CONTACT-2020-0023",null,null,"CASE-2020-0043","CASE-2020-0044","CASE-2020-0045","CASE-2020-0046","CONTACT-2020-0024","CONTACT-2020-0002"],["2020-06-01","2020-06-01","2020-06-01","2020-06-01","2020-06-01","2020-06-01","2020-06-05","2020-06-05","2020-06-05","2020-06-05","2020-06-05","2020-06-05","2020-06-05","2020-06-05","2020-06-05","2020-06-05","2020-06-05","2020-06-05","2020-06-05","2020-06-05","2020-06-05","2020-06-06","2020-06-05","2020-06-05","2020-06-05","2020-06-05","2020-06-05","2020-06-06","2020-06-05","2020-06-01","2020-06-05","2020-06-05","2020-06-05","2020-06-05","2020-06-05","2020-06-05","2020-06-05","2020-06-05","2020-06-05","2020-06-05",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],["-Inf","2020-06-01","2020-06-01","2020-06-01","2020-06-01","2020-06-01","2020-06-04","2020-06-04","2020-06-04","2020-06-04","2020-06-04","2020-06-03","2020-06-03","2020-06-05","2020-06-03","2020-06-05","2020-06-05","2020-06-05","-Inf","2020-06-03","2020-06-05","2020-06-06","2020-06-04","2020-06-04","2020-06-05","2020-06-04","2020-06-05","2020-06-05","2020-06-04","2020-06-01","2020-06-05","2020-06-05","2020-06-05","2020-06-04","2020-06-05","2020-06-03","2020-06-02","2020-06-03","2020-06-05","2020-06-05",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],["missed","seen_ok","seen_ok","seen_ok","seen_ok","seen_ok","not_performed","not_performed","not_performed","not_performed","not_performed","not_performed","not_performed","seen_ok","not_performed","seen_ok","seen_ok","seen_ok","not_performed","missed","seen_ok","seen_ok","not_performed","not_performed","seen_ok","not_performed","seen_not_ok","not_performed","not_performed","seen_ok","seen_ok","seen_ok","seen_ok","not_performed","seen_ok","not_performed","not_performed","not_performed","seen_ok","seen_ok",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],["FOLLOW_UP_COMPLETED","FOLLOW_UP_COMPLETED","FOLLOW_UP_COMPLETED","UNDER_FOLLOW_UP","FOLLOW_UP_COMPLETED","FOLLOW_UP_COMPLETED","LOST_TO_FOLLOW_UP","UNDER_FOLLOW_UP","UNDER_FOLLOW_UP","LOST_TO_FOLLOW_UP","UNDER_FOLLOW_UP","FOLLOW_UP_COMPLETED","FOLLOW_UP_COMPLETED","UNDER_FOLLOW_UP","UNDER_FOLLOW_UP","UNDER_FOLLOW_UP","UNDER_FOLLOW_UP","DIED","UNDER_FOLLOW_UP","UNDER_FOLLOW_UP","UNDER_FOLLOW_UP","LOST_TO_FOLLOW_UP","FOLLOW_UP_COMPLETED","UNDER_FOLLOW_UP","FOLLOW_UP_COMPLETED","UNDER_FOLLOW_UP","LOST_TO_FOLLOW_UP","UNDER_FOLLOW_UP","UNDER_FOLLOW_UP","FOLLOW_UP_COMPLETED","UNDER_FOLLOW_UP","UNDER_FOLLOW_UP","UNDER_FOLLOW_UP","UNDER_FOLLOW_UP","DIED","FOLLOW_UP_COMPLETED","LOST_TO_FOLLOW_UP","UNDER_FOLLOW_UP","UNDER_FOLLOW_UP","LOST_TO_FOLLOW_UP","FOLLOW_UP_COMPLETED","UNDER_FOLLOW_UP","UNDER_FOLLOW_UP","UNDER_FOLLOW_UP","FOLLOW_UP_COMPLETED","UNDER_FOLLOW_UP","FOLLOW_UP_COMPLETED","FOLLOW_UP_COMPLETED","FOLLOW_UP_COMPLETED","FOLLOW_UP_COMPLETED","FOLLOW_UP_COMPLETED","FOLLOW_UP_COMPLETED","FOLLOW_UP_COMPLETED","UNDER_FOLLOW_UP","FOLLOW_UP_COMPLETED","UNDER_FOLLOW_UP","UNDER_FOLLOW_UP","UNDER_FOLLOW_UP","UNDER_FOLLOW_UP","UNDER_FOLLOW_UP","BECAME_CASE","BECAME_CASE","BECAME_CASE","BECAME_CASE","BECAME_CASE","BECAME_CASE"],["Cheik","Cheik","Khary","Birima","Malang","Maguette","Alfa","Ndiogou","Madia","Adama","Lamine","Racine","Yacouba","Kalidou","Thione","Sadibou","Papis","Coura","Thiony","Sofiatou","Djiby","Abba","Khary","Oumou","Dicory","Adja","Mbagnick","Abou","Ndiankou","Malamine","Youssouf","Waly","Mayatta","Alimatou","Djeynaba","Amath","Wasis","Bransan  ","Bintou","Binette","Aminata","Binta","Birima","Cheik","El Hadj","Khadija","Khary","Khary","Lat","Maguette","Maguette","Malamine","Malamine","Malang","Malang","Modou","Ndiaya","Oulimata","Mayatta","Jelani","Adama","Adji","Alfa","Alfa","Birima","Malang"],[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"Abebe",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"Obi","Onai",null,null,null,null,null,null],["MALE","MALE","FEMALE","MALE","FEMALE","FEMALE","FEMALE","FEMALE","MALE","MALE","FEMALE","FEMALE","MALE","MALE","MALE","MALE","FEMALE","MALE","FEMALE","FEMALE","FEMALE","FEMALE","MALE","MALE","MALE","MALE","MALE","MALE","MALE","MALE","FEMALE","MALE","MALE","MALE","FEMALE","MALE","FEMALE","FEMALE","FEMALE","FEMALE","FEMALE","FEMALE","MALE","MALE","MALE","MALE","FEMALE","FEMALE","FEMALE","FEMALE","FEMALE","MALE","MALE","FEMALE","FEMALE","MALE","FEMALE","MALE","MALE","MALE","MALE","FEMALE","FEMALE","FEMALE","MALE","FEMALE"],[12,12,32,3,54,29,34,56,34,56,12,35,78,20,45,15,null,null,5,null,45,17,21,34,15,47,null,81,67,7,null,56,null,8,54,54,2,23,97,34,36,32,3,12,21,4,32,32,23,9,9,63,7,54,54,18,32,23,null,24,null,25,34,34,3,54],["10-14","10-14","30-39","0-4","50-59","20-29","30-39","50-59","30-39","50-59","10-14","30-39","75-79","20-29","40-49","15-19","unknown","unknown","5-9","unknown","40-49","15-19","20-29","30-39","15-19","40-49","unknown","80+","65-69","5-9","unknown","50-59","unknown","5-9","50-59","50-59","0-4","20-29","80+","30-39","30-39","30-39","0-4","10-14","20-29","0-4","30-39","30-39","20-29","5-9","5-9","60-64","5-9","50-59","50-59","15-19","30-39","20-29","unknown","20-29","unknown","20-29","30-39","30-39","0-4","50-59"],["CHILD","CHILD","FARMER","CHILD","FARMER","OTHER",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"FARMER",null,null,null,null,null,null,"HEALTH_CARE_WORKER","STUDENT","HEALTH_CARE_WORKER",null,"BUTCHER","BUTCHER",null,"FARMER"],["2020-03-22","2020-03-22","2020-03-22","2020-05-01","2020-03-22","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-16","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-05-25","2020-05-25","2020-05-25","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-04-15","2020-05-25","2020-04-15","2020-05-25","2020-05-25","2020-05-25","2020-09-02","2020-09-03","2020-07-08","2020-07-11","2020-07-16","2020-07-07","2020-04-15","2020-03-22"],["2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-09-03","2020-09-04","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08"],["2020-06-07","2020-06-07","2020-06-07","2020-04-28","2020-06-07","2020-06-07","2020-06-15","2020-06-22","2020-06-15","2020-08-13","2020-06-22","2020-06-15","2020-06-15","2020-06-24","2020-06-22","2020-06-24","2020-06-17","2020-06-17","2020-06-22","2020-06-17","2020-06-19","2020-06-24","2020-06-15","2020-06-22","2020-06-16","2020-06-22","2020-06-17","2020-06-22","2020-06-20","2020-06-06","2020-06-17","2020-06-17","2020-06-17","2020-06-17","2020-06-20","2020-09-02","2020-06-17","2020-06-22","2020-06-20","2020-06-16","2020-05-15","2020-05-13","2020-04-26","2020-04-26","2020-05-10","2020-05-08","2020-06-05","2020-06-05","2020-05-10","2020-06-05","2020-06-05","2020-04-28","2020-06-05","2020-04-29","2020-06-05","2020-05-15","2020-05-10","2020-05-13","2020-09-02","2020-09-01","2020-05-06","2020-05-10","2020-07-27","2020-05-06","2020-04-26","2020-04-28"],["2020-06-08","2020-06-08","2020-06-08","2020-04-29","2020-06-08","2020-06-08","2020-06-16","2020-06-23","2020-06-16","2020-08-14","2020-06-23","2020-06-16","2020-06-16","2020-06-25","2020-06-23","2020-06-25","2020-06-18","2020-06-18","2020-06-23","2020-06-18","2020-06-20","2020-06-25","2020-06-16","2020-06-23","2020-06-17","2020-08-14","2020-06-18","2020-08-15","2020-06-21","2020-06-08","2020-06-18","2020-06-18","2020-06-18","2020-06-18","2020-06-21","2020-09-03","2020-06-18","2020-06-23","2020-06-21","2020-06-17",null,"2020-05-14","2020-04-27","2020-04-27",null,null,"2020-06-06","2020-06-06",null,"2020-06-06","2020-06-06",null,"2020-06-06","2020-04-30","2020-06-06","2020-05-16","2020-05-11","2020-05-14","2020-09-03","2020-09-02",null,null,null,null,"2020-06-06",null],["2020-06-21","2020-06-21","2020-06-21","2020-05-12","2020-06-21","2020-06-21","2020-06-29","2020-07-06","2020-06-29","2020-08-27","2020-07-06","2020-06-29","2020-06-29","2020-07-08","2020-07-06","2020-07-08","2020-07-01","2020-07-01","2020-07-06","2020-07-01","2020-07-03","2020-07-08","2020-06-29","2020-07-06","2020-06-30","2020-08-27","2020-07-01","2020-08-28","2020-07-04","2020-06-21","2020-07-01","2020-07-01","2020-07-01","2020-07-01","2020-07-04","2020-09-16","2020-07-01","2020-07-06","2020-07-04","2020-06-30",null,"2020-05-27","2020-05-10","2020-05-10",null,null,"2020-06-19","2020-06-19",null,"2020-06-19","2020-06-19",null,"2020-06-19","2020-05-13","2020-06-19","2020-05-29","2020-05-24","2020-05-27","2020-09-16","2020-09-15",null,null,null,null,"2020-06-19",null],[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"1_LOW","3_HIGH","1_LOW",null,null,null,null],[false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,null,null,null,null,null,null],["Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Trumpet","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Trumpet","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Trumpet","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Djembe","Congas","Venu","Cornet","Venu","Djembe","Djembe"],["2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06","2020-06-06"],[null,5,5,5,5,5,2,2,2,2,2,3,3,1,3,1,1,1,null,3,1,0,2,2,1,2,1,1,2,5,1,1,1,2,1,3,4,3,1,1,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],[-1,-1,-1,39,-1,-1,-9,-16,-9,-68,-16,-9,-9,-18,-16,-18,-11,-11,-16,-11,-13,-18,-9,-16,-10,-16,-11,-16,-14,0,-11,-11,-11,-11,-14,-88,-11,-16,-14,-10,22,24,41,41,27,29,1,1,27,1,1,39,1,38,1,22,27,24,-88,-87,31,27,-51,31,41,39]],"container":"<table class=\"white-space: nowrap\">\n  <thead>\n    <tr>\n      <th>contact_id<\/th>\n      <th>date_last_record<\/th>\n      <th>date_last_seen<\/th>\n      <th>status_last_record<\/th>\n      <th>contact_status<\/th>\n      <th>firstName<\/th>\n      <th>lastName<\/th>\n      <th>gender<\/th>\n      <th>age<\/th>\n      <th>age_class<\/th>\n      <th>occupation<\/th>\n      <th>date_of_reporting<\/th>\n      <th>date_of_data_entry<\/th>\n      <th>date_of_last_exposure<\/th>\n      <th>date_of_followup_start<\/th>\n      <th>date_of_followup_end<\/th>\n      <th>risk_level<\/th>\n      <th>was_case<\/th>\n      <th>admin_2_name<\/th>\n      <th>database_date<\/th>\n      <th>days_since_seen<\/th>\n      <th>days_since_exposure<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":12,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":8}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[10,12,25,50,100]},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script><p>Ensuite, nous résumons les données sur les contacts par région, afin d’obtenir un tableaux de synthèse des colonnes de statistiques.</p>
<div class="sourceCode" id="cb1228"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">contacts_table</span> <span class="op">&lt;-</span> <span class="va">contacts_info</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span>`Admin 2` <span class="op">=</span> <span class="va">admin_2_name</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span></span>
<span>    `Registered contacts` <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    `Active contacts`     <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">contact_status</span> <span class="op">==</span> <span class="st">"UNDER_FOLLOW_UP"</span>, na.rm<span class="op">=</span><span class="cn">T</span><span class="op">)</span>,</span>
<span>    `In first week`       <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">days_since_exposure</span> <span class="op">&lt;</span> <span class="fl">8</span>, na.rm<span class="op">=</span><span class="cn">T</span><span class="op">)</span>,</span>
<span>    `In second week`      <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">days_since_exposure</span> <span class="op">&gt;=</span> <span class="fl">8</span> <span class="op">&amp;</span> <span class="va">days_since_exposure</span> <span class="op">&lt;</span> <span class="fl">15</span>, na.rm<span class="op">=</span><span class="cn">T</span><span class="op">)</span>,</span>
<span>    `Became case`         <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">contact_status</span> <span class="op">==</span> <span class="st">"BECAME_CASE"</span>, na.rm<span class="op">=</span><span class="cn">T</span><span class="op">)</span>,</span>
<span>    `Lost to follow up`   <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">days_since_seen</span> <span class="op">&gt;=</span> <span class="fl">3</span>, na.rm<span class="op">=</span><span class="cn">T</span><span class="op">)</span>,</span>
<span>    `Never seen`          <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">date_last_seen</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    `Followed up - signs` <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">status_last_record</span> <span class="op">==</span> <span class="st">"Seen_not_ok"</span> <span class="op">&amp;</span> <span class="va">date_last_record</span> <span class="op">==</span> <span class="va">database_date</span>, na.rm<span class="op">=</span><span class="cn">T</span><span class="op">)</span>,</span>
<span>    `Followed up - no signs` <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">status_last_record</span> <span class="op">==</span> <span class="st">"Seen_ok"</span> <span class="op">&amp;</span> <span class="va">date_last_record</span> <span class="op">==</span> <span class="va">database_date</span>, na.rm<span class="op">=</span><span class="cn">T</span><span class="op">)</span>,</span>
<span>    `Not Followed up`     <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span></span>
<span>      <span class="op">(</span><span class="va">status_last_record</span> <span class="op">==</span> <span class="st">"NOT_ATTEMPTED"</span> <span class="op">|</span> <span class="va">status_last_record</span> <span class="op">==</span> <span class="st">"NOT_PERFORMED"</span><span class="op">)</span> <span class="op">&amp;</span></span>
<span>        <span class="va">date_last_record</span> <span class="op">==</span> <span class="va">database_date</span>, na.rm<span class="op">=</span><span class="cn">T</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>    </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html">desc</a></span><span class="op">(</span><span class="va">`Registered contacts`</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-c4205a0788bc904a840d" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-c4205a0788bc904a840d">{"x":{"filter":"none","vertical":false,"data":[["Djembe","Trumpet","Venu","Congas","Cornet"],[59,3,2,1,1],[30,1,0,0,0],[44,3,0,0,1],[0,0,0,0,0],[2,0,2,1,1],[15,0,0,0,0],[22,0,2,1,1],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0]],"container":"<table class=\"white-space: nowrap\">\n  <thead>\n    <tr>\n      <th>Admin 2<\/th>\n      <th>Registered contacts<\/th>\n      <th>Active contacts<\/th>\n      <th>In first week<\/th>\n      <th>In second week<\/th>\n      <th>Became case<\/th>\n      <th>Lost to follow up<\/th>\n      <th>Never seen<\/th>\n      <th>Followed up - signs<\/th>\n      <th>Followed up - no signs<\/th>\n      <th>Not Followed up<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":12,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6,7,8,9,10]}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[10,12,25,50,100]},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script><p>Et maintenant, nous appliquons le style des paquets <strong>formattable</strong> et <strong>knitr</strong>. y compris une note de pied de page qui indique la date “en date du”.</p>
<div class="sourceCode" id="cb1229"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">contacts_table</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span></span>
<span>    `Admin 2` <span class="op">=</span> <span class="fu">formatter</span><span class="op">(</span><span class="st">"span"</span>, style <span class="op">=</span> <span class="op">~</span> <span class="fu">formattable</span><span class="fu">::</span><span class="fu"><a href="https://renkun-ken.github.io/formattable/reference/style.html">style</a></span><span class="op">(</span></span>
<span>      color <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">`Admin 2`</span> <span class="op">==</span> <span class="cn">NA</span>, <span class="st">"red"</span>, <span class="st">"grey"</span><span class="op">)</span>,</span>
<span>      font.weight <span class="op">=</span> <span class="st">"bold"</span>,font.style <span class="op">=</span> <span class="st">"italic"</span><span class="op">)</span><span class="op">)</span><span class="op">(</span><span class="va">`Admin 2`</span><span class="op">)</span>,</span>
<span>    `Followed up - signs`<span class="op">=</span> <span class="fu">color_tile</span><span class="op">(</span><span class="st">"white"</span>, <span class="st">"orange"</span><span class="op">)</span><span class="op">(</span><span class="va">`Followed up - signs`</span><span class="op">)</span>,</span>
<span>    `Followed up - no signs`<span class="op">=</span> <span class="fu">color_tile</span><span class="op">(</span><span class="st">"white"</span>, <span class="st">"#A0E2BD"</span><span class="op">)</span><span class="op">(</span><span class="va">`Followed up - no signs`</span><span class="op">)</span>,</span>
<span>    `Became case`<span class="op">=</span> <span class="fu">color_tile</span><span class="op">(</span><span class="st">"white"</span>, <span class="st">"grey"</span><span class="op">)</span><span class="op">(</span><span class="va">`Became case`</span><span class="op">)</span>,</span>
<span>    `Lost to follow up`<span class="op">=</span> <span class="fu">color_tile</span><span class="op">(</span><span class="st">"white"</span>, <span class="st">"grey"</span><span class="op">)</span><span class="op">(</span><span class="va">`Lost to follow up`</span><span class="op">)</span>, </span>
<span>    `Never seen`<span class="op">=</span> <span class="fu">color_tile</span><span class="op">(</span><span class="st">"white"</span>, <span class="st">"red"</span><span class="op">)</span><span class="op">(</span><span class="va">`Never seen`</span><span class="op">)</span>,</span>
<span>    `Active contacts` <span class="op">=</span> <span class="fu">color_tile</span><span class="op">(</span><span class="st">"white"</span>, <span class="st">"#81A4CE"</span><span class="op">)</span><span class="op">(</span><span class="va">`Active contacts`</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">kable</span><span class="op">(</span><span class="st">"html"</span>, escape <span class="op">=</span> <span class="cn">F</span>, align <span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"l"</span>,<span class="st">"c"</span>,<span class="st">"c"</span>,<span class="st">"c"</span>,<span class="st">"c"</span>,<span class="st">"c"</span>,<span class="st">"c"</span>,<span class="st">"c"</span>,<span class="st">"c"</span>,<span class="st">"c"</span>,<span class="st">"c"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">kable_styling</span><span class="op">(</span><span class="st">"hover"</span>, full_width <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">add_header_above</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">" "</span> <span class="op">=</span> <span class="fl">3</span>, </span>
<span>                     <span class="st">"Of contacts currently under follow up"</span> <span class="op">=</span> <span class="fl">5</span>,</span>
<span>                     <span class="st">"Status of last visit"</span> <span class="op">=</span> <span class="fl">3</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">kableExtra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/footnote.html">footnote</a></span><span class="op">(</span>general <span class="op">=</span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_glue.html">str_glue</a></span><span class="op">(</span><span class="st">"Data are current to {format(report_date, '%b %d %Y')}"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="inline-table"><table class="table table-hover" style="width: auto !important; margin-left: auto; margin-right: auto;border-bottom: 0;">
<thead>
<tr>
<th style="empty-cells: hide;border-bottom:hidden;" colspan="3">
</th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="5">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
Of contacts currently under follow up
</div>
</th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="3">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
Status of last visit
</div>
</th>
</tr>
<tr>
<th style="text-align:left;">
Admin 2
</th>
<th style="text-align:center;">
Registered contacts
</th>
<th style="text-align:center;">
Active contacts
</th>
<th style="text-align:center;">
In first week
</th>
<th style="text-align:center;">
In second week
</th>
<th style="text-align:center;">
Became case
</th>
<th style="text-align:center;">
Lost to follow up
</th>
<th style="text-align:center;">
Never seen
</th>
<th style="text-align:center;">
Followed up - signs
</th>
<th style="text-align:center;">
Followed up - no signs
</th>
<th style="text-align:center;">
Not Followed up
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
<span style="font-weight: bold; font-style: italic">Djembe </span>
</td>
<td style="text-align:center;">
59
</td>
<td style="text-align:center;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: #81a4ce">30</span>
</td>
<td style="text-align:center;">
44
</td>
<td style="text-align:center;">
0
</td>
<td style="text-align:center;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: #bebebe">2</span>
</td>
<td style="text-align:center;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: #bebebe">15</span>
</td>
<td style="text-align:center;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: #ff0000">22</span>
</td>
<td style="text-align:center;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: #ffffff">0</span>
</td>
<td style="text-align:center;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: #ffffff">0</span>
</td>
<td style="text-align:center;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
<span style="font-weight: bold; font-style: italic">Trumpet</span>
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: #fafbfd">1</span>
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
0
</td>
<td style="text-align:center;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: #ffffff">0</span>
</td>
<td style="text-align:center;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: #ffffff">0</span>
</td>
<td style="text-align:center;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: #ffffff">0</span>
</td>
<td style="text-align:center;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: #ffffff">0</span>
</td>
<td style="text-align:center;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: #ffffff">0</span>
</td>
<td style="text-align:center;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
<span style="font-weight: bold; font-style: italic">Venu </span>
</td>
<td style="text-align:center;">
2
</td>
<td style="text-align:center;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: #ffffff">0</span>
</td>
<td style="text-align:center;">
0
</td>
<td style="text-align:center;">
0
</td>
<td style="text-align:center;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: #bebebe">2</span>
</td>
<td style="text-align:center;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: #ffffff">0</span>
</td>
<td style="text-align:center;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: #ffe7e7">2</span>
</td>
<td style="text-align:center;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: #ffffff">0</span>
</td>
<td style="text-align:center;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: #ffffff">0</span>
</td>
<td style="text-align:center;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
<span style="font-weight: bold; font-style: italic">Congas </span>
</td>
<td style="text-align:center;">
1
</td>
<td style="text-align:center;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: #ffffff">0</span>
</td>
<td style="text-align:center;">
0
</td>
<td style="text-align:center;">
0
</td>
<td style="text-align:center;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: #dedede">1</span>
</td>
<td style="text-align:center;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: #ffffff">0</span>
</td>
<td style="text-align:center;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: #fff3f3">1</span>
</td>
<td style="text-align:center;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: #ffffff">0</span>
</td>
<td style="text-align:center;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: #ffffff">0</span>
</td>
<td style="text-align:center;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
<span style="font-weight: bold; font-style: italic">Cornet </span>
</td>
<td style="text-align:center;">
1
</td>
<td style="text-align:center;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: #ffffff">0</span>
</td>
<td style="text-align:center;">
1
</td>
<td style="text-align:center;">
0
</td>
<td style="text-align:center;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: #dedede">1</span>
</td>
<td style="text-align:center;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: #ffffff">0</span>
</td>
<td style="text-align:center;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: #fff3f3">1</span>
</td>
<td style="text-align:center;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: #ffffff">0</span>
</td>
<td style="text-align:center;">
<span style="display: block; padding: 0 4px; border-radius: 4px; background-color: #ffffff">0</span>
</td>
<td style="text-align:center;">
0
</td>
</tr>
</tbody>
<tfoot>
<tr>
<td style="padding: 0; " colspan="100%">
<span style="font-style: italic;">Note: </span>
</td>
</tr>
<tr>
<td style="padding: 0; " colspan="100%">
<sup></sup> Data are current to Jun 10 2020
</td>
</tr>
</tfoot>
</table></div>
</div>
<div id="matrices-de-transmission" class="section level2" number="25.5">
<h2>
<span class="header-section-number">25.5</span> Matrices de transmission<a class="anchor" aria-label="anchor" href="#matrices-de-transmission"><i class="fas fa-link"></i></a>
</h2>
<p>Comme indiqué sur la page <a href="heatmaps.html#heatmaps">Heat plots</a>, vous pouvez créer une matrice de “qui a infecté qui” en utilisant <code><a href="https://ggplot2.tidyverse.org/reference/geom_tile.html">geom_tile()</a></code>.</p>
<p>Lorsque de nouveaux contacts sont créés, Go.Data stocke ces informations de liens dans le lien <code>relationships</code> de l’API ; et nous pouvons voir les 50 premières lignes de cet ensemble de données ci-dessous. Cela signifie que nous pouvons créer un diagramme de chaleur avec relativement peu d’étapes étant donné que chaque contact est déjà joint à son cas source.</p>
<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-b79bfc363ef7351710dc" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-b79bfc363ef7351710dc">{"x":{"filter":"none","vertical":false,"data":[["CASE-2020-0016",null,null,"CASE-2020-0045","CASE-2020-0004","CASE-2020-0010",null,"CASE-2020-0034",null,"CASE-2020-0037","CASE-2020-0005",null,"CASE-2020-0002","CASE-2020-0001","CASE-2020-0005",null,"CASE-2020-0004","CASE-2020-0012","CASE-2020-0022","CASE-2020-0004","CASE-2020-0003","CASE-2020-0001","CASE-2020-0030","CASE-2020-0022","CASE-2020-0010","CASE-2020-0018","CASE-2020-0045","CASE-2020-0030","CASE-2020-0001","CASE-2020-0018","CASE-2020-0008","CASE-2020-0014",null,"CASE-2020-0002","CASE-2020-0030","CASE-2020-0031","CASE-2020-0009","CASE-2020-0031","CASE-2020-0002",null,"CASE-2020-0001","CASE-2020-0001","CASE-2020-0022","CASE-2020-0001","CASE-2020-0012","CASE-2020-0023","CASE-2020-0016","CASE-2020-0001",null,"CASE-2020-0023"],["Female",null,null,"Female","Male","Female",null,"Male",null,"Female","Male",null,"Male","Female","Male",null,"Male","Female","Female","Male","Male","Female","Male","Female","Female","Male","Female","Male","Female","Male","Male","Male",null,"Male","Male","Male","Female","Male","Male",null,"Female","Female","Female","Female","Female","Female","Female","Female","Female","Female"],[80,null,null,34,43,37,null,20,null,80,23,0,52,49,23,null,43,80,51,43,58,49,52,51,37,25,34,52,49,25,7,54,null,52,52,20,57,20,52,null,49,49,51,49,80,43,80,49,43,43],["2020-06-24","2020-05-02","2020-06-15","2020-07-27","2020-06-05","2020-06-05","2020-08-19","2020-06-20","2020-08-19","2020-09-02","2020-08-07","2020-08-13","2020-05-15","2020-07-17","2020-06-15","2020-08-07","2020-06-15","2020-06-17","2020-06-05","2020-06-24","2020-06-07","2020-08-15","2020-06-17","2020-06-22","2020-06-19","2020-06-17","2020-07-27","2020-06-16","2020-04-28","2020-04-26","2020-06-15","2020-06-05","2020-05-02","2020-04-29","2020-06-22","2020-06-06","2020-05-13","2020-06-17","2020-05-01","2020-06-15","2020-06-07","2020-08-14","2020-06-20","2020-09-02","2020-06-24","2020-07-28","2020-06-17","2020-08-14","2020-08-14","2020-07-28"],["2020-06-08","2020-06-08","2020-06-08","2020-06-10","2020-06-08","2020-06-08","2020-08-20","2020-06-08","2020-08-20","2020-09-03","2020-08-21","2020-08-20","2020-06-08","2020-06-08","2020-06-08","2020-08-20","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-10","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-06-08","2020-08-27","2020-06-08","2020-09-03","2020-06-08","2020-06-10","2020-06-08","2020-08-27","2020-08-27","2020-06-10"],["CONTACT-2020-0027","CASE-2020-0014","CASE-2020-0031","CASE-2020-0021","CONTACT-2020-0020","CONTACT-2020-0038","CASE-2020-0036","CONTACT-2020-0059","CASE-2020-0037",null,"CASE-2020-0015","CONTACT-2020-0015","CONTACT-2020-0009","CASE-2020-0008",null,"CASE-2020-0010","CONTACT-2020-0018","CONTACT-2020-0029","CONTACT-2020-0045","CONTACT-2020-0019","CONTACT-2020-0007","CASE-2020-0004","CONTACT-2020-0044","CONTACT-2020-0046","CONTACT-2020-0036","CONTACT-2020-0052","CASE-2020-0023","CONTACT-2020-0042","CONTACT-2020-0005","CONTACT-2020-0053","CONTACT-2020-0017","CONTACT-2020-0034","CASE-2020-0012","CASE-2020-0008","CONTACT-2020-0043","CONTACT-2020-0048","CONTACT-2020-0023","CONTACT-2020-0049","CASE-2020-0006","CASE-2020-0018","CONTACT-2020-0003","CASE-2020-0017","CONTACT-2020-0047","CONTACT-2020-0056","CONTACT-2020-0027","CASE-2020-0029","CONTACT-2020-0028","CONTACT-2020-0046","CONTACT-2020-0046","CASE-2020-0027"],["Male","Male","Male","Male","Female","Male","Female","Female","Female","Male","Female","Male","Male","Male",null,"Female","Male","Male","Female","Male","Female","Male","Male","Male","Female","Male","Female","Male","Male","Male","Female","Female","Female","Male","Male","Male","Male","Female","Male","Male","Male","Male","Male","Male","Male","Male","Female","Male","Male","Male"],[15,54,20,46,32,7,40,97,80,0,38,56,18,7,null,37,78,null,32,20,29,43,null,81,45,null,43,15,3,3,35,54,80,7,47,7,23,null,47,25,12,8,67,54,15,46,null,81,81,38],["Direct physical contact ",null,null,null,"Indirect contact (touched contaminated surface/materials/fomites etc.)","Direct non-physical contact (within 1 meter) ",null,"Direct physical contact ",null,"Direct physical contact ","Direct non-physical contact (within 1 meter) ","Direct non-physical contact (within 1 meter) ","Direct non-physical contact (within 1 meter) ","Direct physical contact ",null,"Direct non-physical contact (within 1 meter) ","Indirect contact (touched contaminated surface/materials/fomites etc.)","Indirect contact (touched contaminated surface/materials/fomites etc.)","Direct physical contact ","Direct non-physical contact (within 1 meter) ",null,"Direct physical contact ","Indirect contact (touched contaminated surface/materials/fomites etc.)","Direct physical contact ","Direct physical contact ","Direct non-physical contact (within 1 meter) ",null,"Direct physical contact ",null,"Direct physical contact ","Indirect contact (touched contaminated surface/materials/fomites etc.)","Direct non-physical contact (within 1 meter) ",null,"Direct physical contact ","Direct non-physical contact (within 1 meter) ","Direct non-physical contact (within 1 meter) ","Direct physical contact ","Direct physical contact ",null,null,null,null,"Indirect contact (touched contaminated surface/materials/fomites etc.)","Direct physical contact ","Direct physical contact ",null,"Direct physical contact ",null,null,null]],"container":"<table class=\"white-space: nowrap\">\n  <thead>\n    <tr>\n      <th>source_visualid<\/th>\n      <th>source_gender<\/th>\n      <th>source_age<\/th>\n      <th>date_of_last_contact<\/th>\n      <th>date_of_data_entry<\/th>\n      <th>target_visualid<\/th>\n      <th>target_gender<\/th>\n      <th>target_age<\/th>\n      <th>exposure_type<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":[2,7]}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script><p>Comme nous l’avons fait ci-dessus pour la pyramide des âges comparant les cas et les contacts, nous pouvons sélectionner les quelques variables dont nous avons besoin et créer des colonnes avec des groupes d’âge catégoriques pour les sources (cas) et les cibles (contacts).</p>
<div class="sourceCode" id="cb1230"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">heatmap_ages</span> <span class="op">&lt;-</span> <span class="va">relationships</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">source_age</span>, <span class="va">target_age</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>                              <span class="co"># transmute est comme mutate() mais supprime toutes les autres colonnes</span></span>
<span>    source_age_class <span class="op">=</span> <span class="fu">epikit</span><span class="fu">::</span><span class="fu"><a href="https://r4epi.github.io/epikit/reference/age_categories.html">age_categories</a></span><span class="op">(</span><span class="va">source_age</span>, breakers <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">80</span>, <span class="fl">5</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    target_age_class <span class="op">=</span> <span class="fu">epikit</span><span class="fu">::</span><span class="fu"><a href="https://r4epi.github.io/epikit/reference/age_categories.html">age_categories</a></span><span class="op">(</span><span class="va">target_age</span>, breakers <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">80</span>, <span class="fl">5</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> </span></code></pre></div>
<p>Comme décrit précédemment, nous créons des tableaux croisés ;</p>
<div class="sourceCode" id="cb1231"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cross_tab</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span></span>
<span>  source_cases <span class="op">=</span> <span class="va">heatmap_ages</span><span class="op">$</span><span class="va">source_age_class</span>,</span>
<span>  target_cases <span class="op">=</span> <span class="va">heatmap_ages</span><span class="op">$</span><span class="va">target_age_class</span><span class="op">)</span></span>
<span></span>
<span><span class="va">cross_tab</span></span></code></pre></div>
<pre><code>##             target_cases
## source_cases 0-4 5-9 10-14 15-19 20-24 25-29 30-34 35-39 40-44 45-49 50-54 55-59 60-64 65-69 70-74 75-79 80+
##        0-4     0   0     0     0     0     0     0     0     0     1     0     1     0     0     0     0   0
##        5-9     0   0     1     0     0     0     0     1     0     0     0     1     0     0     0     0   0
##        10-14   0   0     0     0     0     0     0     0     0     0     0     0     0     0     0     0   0
##        15-19   0   0     0     0     0     0     0     0     0     0     0     0     0     0     0     0   0
##        20-24   1   1     0     1     2     0     2     1     0     0     0     1     0     0     0     0   1
##        25-29   1   2     0     0     0     0     0     0     0     0     0     0     0     0     0     0   0
##        30-34   0   0     0     0     0     0     0     0     1     1     0     1     0     0     0     0   0
##        35-39   0   2     0     0     0     0     0     0     0     1     0     0     0     0     0     0   0
##        40-44   0   0     0     0     1     0     2     1     0     3     1     1     0     0     0     1   1
##        45-49   1   2     2     0     0     0     3     0     1     0     3     2     1     0     0     0   1
##        50-54   1   2     1     2     0     0     1     0     0     3     4     1     0     1     0     0   1
##        55-59   0   1     0     0     1     1     2     0     0     0     0     0     0     0     0     0   0
##        60-64   0   0     0     0     0     0     0     0     0     0     0     0     0     0     0     0   0
##        65-69   0   0     0     0     0     0     0     0     0     0     0     0     0     0     0     0   0
##        70-74   0   0     0     0     0     0     0     0     0     0     0     0     0     0     0     0   0
##        75-79   0   0     0     0     0     0     0     0     0     0     0     0     0     0     0     0   0
##        80+     1   0     0     2     1     0     0     0     1     0     0     0     0     0     0     0   0</code></pre>
<p>convertir en format long avec des proportions ;</p>
<div class="sourceCode" id="cb1233"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">long_prop</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/proportions.html">prop.table</a></span><span class="op">(</span><span class="va">cross_tab</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>et créer une carte géographique pour l’âge.</p>
<div class="sourceCode" id="cb1234"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">long_prop</span><span class="op">)</span><span class="op">+</span>       <span class="co"># utiliser des données longues, avec des proportions comme Freq</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_tile.html">geom_tile</a></span><span class="op">(</span>                    <span class="co"># visualisez-le en tuiles</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span></span>
<span>      x <span class="op">=</span> <span class="va">target_cases</span>,         <span class="co"># l'axe des x est l'âge du cas</span></span>
<span>      y <span class="op">=</span> <span class="va">source_cases</span>,     <span class="co"># l'axe y est l'âge de l'infecteur</span></span>
<span>      fill <span class="op">=</span> <span class="va">Freq</span><span class="op">)</span><span class="op">)</span><span class="op">+</span>            <span class="co"># La couleur de la tuile est la colonne Freq dans les données</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_gradient.html">scale_fill_gradient</a></span><span class="op">(</span>          <span class="co"># ajuster la couleur de remplissage des tuiles</span></span>
<span>    low <span class="op">=</span> <span class="st">"blue"</span>,</span>
<span>    high <span class="op">=</span> <span class="st">"orange"</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>axis.text.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>angle <span class="op">=</span> <span class="fl">90</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>                         <span class="co"># labels</span></span>
<span>    x <span class="op">=</span> <span class="st">"Target case age"</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"Source case age"</span>,</span>
<span>    title <span class="op">=</span> <span class="st">"Who infected whom"</span>,</span>
<span>    subtitle <span class="op">=</span> <span class="st">"Frequency matrix of transmission events"</span>,</span>
<span>    fill <span class="op">=</span> <span class="st">"Proportion of all\ntranmsission events"</span>     <span class="co"># legend title</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-889-1.png" width="672"></div>
</div>
<div id="resources-6" class="section level2" number="25.6">
<h2>
<span class="header-section-number">25.6</span> Resources<a class="anchor" aria-label="anchor" href="#resources-6"><i class="fas fa-link"></i></a>
</h2>
<p><a href="https://github.com/WorldHealthOrganization/godata/tree/master/analytics/r-reporting" class="uri">https://github.com/WorldHealthOrganization/godata/tree/master/analytics/r-reporting</a></p>
<p><a href="https://worldhealthorganization.github.io/godata/" class="uri">https://worldhealthorganization.github.io/godata/</a></p>
<p><a href="https://community-godata.who.int/" class="uri">https://community-godata.who.int/</a></p>

</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="epidemic_models.html"><span class="header-section-number">24</span> Modélisation des épidémies</a></div>
<div class="next"><a href="survey_analysis.html"><span class="header-section-number">26</span> Analyse d’enquête</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#contact_tracing"><span class="header-section-number">25</span> Suivi des contacts</a></li>
<li>
<a class="nav-link" href="#pr%C3%A9paration-8"><span class="header-section-number">25.1</span> Préparation</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#chargement-de-packages">Chargement de packages</a></li>
<li><a class="nav-link" href="#importation-de-donn%C3%A9es-2">Importation de données</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#analyses-descriptives"><span class="header-section-number">25.2</span> Analyses descriptives</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#d%C3%A9mographie">Démographie</a></li>
<li><a class="nav-link" href="#contacts-par-cas">Contacts par cas</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#suivi-de-contacts"><span class="header-section-number">25.3</span> Suivi de contacts</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#nettoyage-de-donn%C3%A9es">Nettoyage de données</a></li>
<li><a class="nav-link" href="#graphe-dans-le-temps">Graphe dans le temps</a></li>
<li><a class="nav-link" href="#suivi-quotidien-individuel">Suivi quotidien individuel</a></li>
<li><a class="nav-link" href="#analyse-par-groupe">Analyse par groupe</a></li>
</ul>
</li>
<li><a class="nav-link" href="#tableaux-kpi"><span class="header-section-number">25.4</span> Tableaux KPI</a></li>
<li><a class="nav-link" href="#matrices-de-transmission"><span class="header-section-number">25.5</span> Matrices de transmission</a></li>
<li><a class="nav-link" href="#resources-6"><span class="header-section-number">25.6</span> Resources</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
          
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Le Epi R Handbook</strong>" was written by the handbook team. It was last built on 2023-05-24.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
