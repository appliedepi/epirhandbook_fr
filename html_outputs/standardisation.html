<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>21 Taux standardisés | Le Epi R Handbook</title>
<meta name="author" content="the handbook team">
<meta name="description" content="Cette page vous montre deux façons de normaliser un résultat, tel que les hospitalisations ou la mortalité, en fonction de caractéristiques telles que l’âge et le sexe. Utilisation du paquet dsr...">
<meta name="generator" content="bookdown 0.34 with bs4_book()">
<meta property="og:title" content="21 Taux standardisés | Le Epi R Handbook">
<meta property="og:type" content="book">
<meta property="og:description" content="Cette page vous montre deux façons de normaliser un résultat, tel que les hospitalisations ou la mortalité, en fonction de caractéristiques telles que l’âge et le sexe. Utilisation du paquet dsr...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="21 Taux standardisés | Le Epi R Handbook">
<meta name="twitter:description" content="Cette page vous montre deux façons de normaliser un résultat, tel que les hospitalisations ou la mortalité, en fonction de caractéristiques telles que l’âge et le sexe. Utilisation du paquet dsr...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.4.2/transition.js"></script><script src="libs/bs3compat-0.4.2/tabs.js"></script><script src="libs/bs3compat-0.4.2/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/htmlwidgets-1.6.2/htmlwidgets.js"></script><link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="libs/datatables-binding-0.28/datatables.js"></script><link href="libs/dt-core-1.13.4/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="libs/dt-core-1.13.4/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="libs/dt-core-1.13.4/js/jquery.dataTables.min.js"></script><link href="libs/nouislider-7.0.10/jquery.nouislider.min.css" rel="stylesheet">
<script src="libs/nouislider-7.0.10/jquery.nouislider.min.js"></script><link href="libs/selectize-0.12.0/selectize.bootstrap3.css" rel="stylesheet">
<script src="libs/selectize-0.12.0/selectize.min.js"></script><link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script><script src="libs/kePrint-0.0.1/kePrint.js"></script><link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<link href="libs/tabwid-1.1.3/tabwid.css" rel="stylesheet">
<script src="libs/tabwid-1.1.3/tabwid.js"></script><link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet">
<script src="libs/leaflet-1.3.1/leaflet.js"></script><link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet">
<script src="libs/proj4-2.6.2/proj4.min.js"></script><script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script><link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet">
<script src="libs/leaflet-binding-2.1.2/leaflet.js"></script><script src="libs/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script><script src="libs/leaflet-providers-plugin-2.1.2/leaflet-providers-plugin.js"></script><script src="libs/viz-1.8.2/viz.js"></script><link href="libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet">
<script src="libs/grViz-binding-1.0.10/grViz.js"></script><script src="libs/d3-4.5.0/d3.min.js"></script><script src="libs/sankey-1/sankey.js"></script><script src="libs/sankeyNetwork-binding-0.4/sankeyNetwork.js"></script><script src="libs/plotly-binding-4.10.1/plotly.js"></script><script src="libs/typedarray-0.1/typedarray.min.js"></script><link href="libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="libs/plotly-main-2.11.1/plotly-latest.min.js"></script><link href="libs/vis-9.1.0/vis-network.min.css" rel="stylesheet">
<script src="libs/vis-9.1.0/vis-network.min.js"></script><script src="libs/visNetwork-binding-2.1.2/visNetwork.js"></script><link href="libs/font-awesome-4.7.0/css/font-awesome.min.css" rel="stylesheet">
<script src="libs/plotly-basic-2.11.1/plotly-basic-2.11.1.min.js"></script><script src="libs/plotly-cartesian-2.11.1/plotly-cartesian-2.11.1.min.js"></script><script src="libs/proj4js-2.3.15/proj4.js"></script><link href="libs/highcharts-9.3.1/css/motion.css" rel="stylesheet">
<script src="libs/highcharts-9.3.1/highcharts.js"></script><script src="libs/highcharts-9.3.1/highcharts-3d.js"></script><script src="libs/highcharts-9.3.1/highcharts-more.js"></script><script src="libs/highcharts-9.3.1/modules/stock.js"></script><script src="libs/highcharts-9.3.1/modules/map.js"></script><script src="libs/highcharts-9.3.1/modules/data.js"></script><script src="libs/highcharts-9.3.1/modules/exporting.js"></script><script src="libs/highcharts-9.3.1/modules/offline-exporting.js"></script><script src="libs/highcharts-9.3.1/modules/drilldown.js"></script><script src="libs/highcharts-9.3.1/modules/item-series.js"></script><script src="libs/highcharts-9.3.1/modules/overlapping-datalabels.js"></script><script src="libs/highcharts-9.3.1/modules/annotations.js"></script><script src="libs/highcharts-9.3.1/modules/export-data.js"></script><script src="libs/highcharts-9.3.1/modules/funnel.js"></script><script src="libs/highcharts-9.3.1/modules/heatmap.js"></script><script src="libs/highcharts-9.3.1/modules/treemap.js"></script><script src="libs/highcharts-9.3.1/modules/sankey.js"></script><script src="libs/highcharts-9.3.1/modules/dependency-wheel.js"></script><script src="libs/highcharts-9.3.1/modules/organization.js"></script><script src="libs/highcharts-9.3.1/modules/solid-gauge.js"></script><script src="libs/highcharts-9.3.1/modules/streamgraph.js"></script><script src="libs/highcharts-9.3.1/modules/sunburst.js"></script><script src="libs/highcharts-9.3.1/modules/vector.js"></script><script src="libs/highcharts-9.3.1/modules/wordcloud.js"></script><script src="libs/highcharts-9.3.1/modules/xrange.js"></script><script src="libs/highcharts-9.3.1/modules/tilemap.js"></script><script src="libs/highcharts-9.3.1/modules/venn.js"></script><script src="libs/highcharts-9.3.1/modules/gantt.js"></script><script src="libs/highcharts-9.3.1/modules/timeline.js"></script><script src="libs/highcharts-9.3.1/modules/parallel-coordinates.js"></script><script src="libs/highcharts-9.3.1/modules/bullet.js"></script><script src="libs/highcharts-9.3.1/modules/coloraxis.js"></script><script src="libs/highcharts-9.3.1/modules/dumbbell.js"></script><script src="libs/highcharts-9.3.1/modules/lollipop.js"></script><script src="libs/highcharts-9.3.1/modules/series-label.js"></script><script src="libs/highcharts-9.3.1/plugins/motion.js"></script><script src="libs/highcharts-9.3.1/custom/reset.js"></script><script src="libs/highcharts-9.3.1/modules/boost.js"></script><script src="libs/highchart-binding-0.9.4/highchart.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<link rel="stylesheet" href="style_bs4.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Le Epi R Handbook</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html"></a></li>
<li class="book-part">About this book</li>
<li><a class="" href="editorial_notes.html"><span class="header-section-number">1</span> Notes techniques et choix éditoriaux</a></li>
<li><a class="" href="download_book_data.html"><span class="header-section-number">2</span> Télécharger le manuel et les données</a></li>
<li class="book-part">Basics</li>
<li><a class="" href="rbasics.html"><span class="header-section-number">3</span> R - les bases</a></li>
<li><a class="" href="transition_to_r.html"><span class="header-section-number">4</span> Transition vers R</a></li>
<li><a class="" href="suggested_packages.html"><span class="header-section-number">5</span> Paquets conseillés</a></li>
<li><a class="" href="r_projects.html"><span class="header-section-number">6</span> Projets R</a></li>
<li><a class="" href="import_export.html"><span class="header-section-number">7</span> Importer et exporter des données</a></li>
<li class="book-part">Data Management</li>
<li><a class="" href="cleaning_data.html"><span class="header-section-number">8</span> Nettoyage de données et fonctions essentielles</a></li>
<li><a class="" href="working_dates.html"><span class="header-section-number">9</span> Manipuler les dates</a></li>
<li><a class="" href="character_strings.html"><span class="header-section-number">10</span> Caractères et chaînes de caractères</a></li>
<li><a class="" href="factors.html"><span class="header-section-number">11</span> Facteurs</a></li>
<li><a class="" href="pivoting_data.html"><span class="header-section-number">12</span> Restructurer les données</a></li>
<li><a class="" href="grouping_data.html"><span class="header-section-number">13</span> Travailler sur des données groupées</a></li>
<li><a class="" href="joining_matching.html"><span class="header-section-number">14</span> Joindre des données</a></li>
<li><a class="" href="deduplication.html"><span class="header-section-number">15</span> De-duplication</a></li>
<li><a class="" href="iteration.html"><span class="header-section-number">16</span> Itération, boucles et listes</a></li>
<li class="book-part">Analysis</li>
<li><a class="" href="descriptive_tables.html"><span class="header-section-number">17</span> Tableaux descriptifs</a></li>
<li><a class="" href="stats_test.html"><span class="header-section-number">18</span> Tests statistiques simples</a></li>
<li><a class="" href="regression.html"><span class="header-section-number">19</span> Régression univariée et multivariable</a></li>
<li><a class="" href="missing_data.html"><span class="header-section-number">20</span> Données manquantes</a></li>
<li><a class="active" href="standardisation.html"><span class="header-section-number">21</span> Taux standardisés</a></li>
<li><a class="" href="moving_average.html"><span class="header-section-number">22</span> Moyennes mobiles</a></li>
<li><a class="" href="time_series.html"><span class="header-section-number">23</span> Série temporelle et détection des épidémies</a></li>
<li><a class="" href="contact_tracing.html"><span class="header-section-number">24</span> Suivi des contacts</a></li>
<li><a class="" href="survey_analysis.html"><span class="header-section-number">25</span> Analyse d’enquête</a></li>
<li><a class="" href="survival_analysis.html"><span class="header-section-number">26</span> Analyse de survie</a></li>
<li><a class="" href="gis.html"><span class="header-section-number">27</span> GIS basics</a></li>
<li class="book-part">Data Visualization</li>
<li><a class="" href="tables_presentation.html"><span class="header-section-number">28</span> Présenter avec des tables</a></li>
<li><a class="" href="ggplot_basics.html"><span class="header-section-number">29</span> Les bases de ggplot</a></li>
<li><a class="" href="ggplot_tips.html"><span class="header-section-number">30</span> Trucs et Astuces avec ggplot</a></li>
<li><a class="" href="epicurves.html"><span class="header-section-number">31</span> Courbes épidémiques</a></li>
<li><a class="" href="age_pyramid.html"><span class="header-section-number">32</span> Pyramides démographiques et échelles de Likert</a></li>
<li><a class="" href="heatmaps.html"><span class="header-section-number">33</span> Graphiques thermiques</a></li>
<li><a class="" href="diagrams.html"><span class="header-section-number">34</span> Diagrammes et schémas</a></li>
<li><a class="" href="combination_analysis.html"><span class="header-section-number">35</span> Analyse des combinaisons</a></li>
<li><a class="" href="transmission_chains.html"><span class="header-section-number">36</span> Chaînes de transmission</a></li>
<li><a class="" href="phylogenetic_trees.html"><span class="header-section-number">37</span> Les arbres phylogénétiques</a></li>
<li><a class="" href="interactive_plots.html"><span class="header-section-number">38</span> Graphiques interactifs</a></li>
<li class="book-part">Reports and dashboards</li>
<li><a class="" href="rmarkdown.html"><span class="header-section-number">39</span> Production de rapports avec R Markdown</a></li>
<li><a class="" href="reportfactory.html"><span class="header-section-number">40</span> Organisation des rapports de routine</a></li>
<li><a class="" href="dashboards.html"><span class="header-section-number">41</span> Tableaux de bord avec R Markdown</a></li>
<li><a class="" href="shiny.html"><span class="header-section-number">42</span> Tableaux de bord avec Shiny</a></li>
<li class="book-part">Miscellaneous</li>
<li><a class="" href="writing_functions.html"><span class="header-section-number">43</span> Fonctions d’écriture</a></li>
<li><a class="" href="directories.html"><span class="header-section-number">44</span> Interactions avec les répertoires</a></li>
<li><a class="" href="collaboration.html"><span class="header-section-number">45</span> Contrôle de version et collaboration avec Git et Github</a></li>
<li><a class="" href="errors.html"><span class="header-section-number">46</span> Erreurs fréquentes</a></li>
<li><a class="" href="help.html"><span class="header-section-number">47</span> Obtenir de l’aide</a></li>
<li><a class="" href="network_drives.html"><span class="header-section-number">48</span> R sur les lecteurs réseau</a></li>
<li><a class="" href="data_table.html"><span class="header-section-number">49</span> Tableau de données</a></li>
</ul>

        <div class="book-extra">
          
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="standardisation" class="section level1" number="21">
<h1>
<span class="header-section-number">21</span> Taux standardisés<a class="anchor" aria-label="anchor" href="#standardisation"><i class="fas fa-link"></i></a>
</h1>
<p>Cette page vous montre deux façons de normaliser un résultat, tel que les hospitalisations ou la mortalité, en fonction de caractéristiques telles que l’âge et le sexe.</p>
<ul>
<li>Utilisation du paquet <strong>dsr</strong>
</li>
<li>Utilisation du paquet <strong>PHEindicatormethods</strong>.</li>
</ul>
<p>Nous commençons par démontrer de manière extensive les processus de préparation/nettoyage/jonction des données, car cela est courant lorsqu’on combine des données de population provenant de plusieurs pays, des données de population standard, des décès, etc.</p>
<div id="vue-densemble-1" class="section level2" number="21.1">
<h2>
<span class="header-section-number">21.1</span> Vue d’ensemble<a class="anchor" aria-label="anchor" href="#vue-densemble-1"><i class="fas fa-link"></i></a>
</h2>
<p>Il existe deux manières principales de normaliser : la normalisation directe et la normalisation indirecte.
Supposons que nous voulions normaliser le taux de mortalité par âge et par sexe pour le pays A et le pays B, et comparer les taux normalisés entre ces pays.</p>
<ul>
<li>Pour une standardisation directe, vous devrez connaître le nombre de personnes à risque et le nombre de décès pour chaque strate d’âge et de sexe, pour le pays A et le pays B. Une strate dans notre exemple pourrait être les femmes âgées de 15 à 44 ans.<br>
</li>
<li>Pour une standardisation indirecte, il suffit de connaître le nombre total de décès et la structure d’âge et de sexe de chaque pays. Cette option est donc envisageable si les taux de mortalité ou les chiffres de population par âge et par sexe ne sont pas disponibles. La standardisation indirecte est en outre préférable en cas de petits effectifs par strate, car les estimations en standardisation directe seraient influencées par une variation d’échantillonnage importante.</li>
</ul>
<!-- ======================================================= -->
</div>
<div id="préparation-4" class="section level2" number="21.2">
<h2>
<span class="header-section-number">21.2</span> Préparation<a class="anchor" aria-label="anchor" href="#pr%C3%A9paration-4"><i class="fas fa-link"></i></a>
</h2>
<p>Pour montrer comment se fait la standardisation, nous allons utiliser des comptages fictifs de population et de décès du pays A et du pays B, par âge (en catégories de 5 ans) et par sexe (femme, homme). Pour que les ensembles de données soient prêts à être utilisés, nous allons effectuer les étapes de préparation suivantes :</p>
<ol style="list-style-type: decimal">
<li>Charger les paquets<br>
</li>
<li>Charger les jeux de données<br>
</li>
<li>Joignez les données de population et de décès des deux pays.</li>
<li>Pivoter plus longtemps pour qu’il y ait une ligne par strate âge-sexe.</li>
<li>Nettoyez la population de référence (population standard mondiale) et joignez-la aux données du pays.</li>
</ol>
<p>Dans votre scénario, vos données peuvent se présenter sous un format différent. Peut-être vos données sont-elles présentées par province, ville ou autre zone d’attraction. Vous avez peut-être une ligne pour chaque décès et des informations sur l’âge et le sexe pour chacun (ou une proportion importante) de ces décès. Dans ce cas, consultez les pages sur le <a href="grouping_data.html#grouping_data">Travailler sur des données groupées</a>, <a href="pivoting_data.html#pivoting_data">Pivoter les données</a>, and <a href="descriptive_tables.html#descriptive_tables">Tableaux descriptifs</a> pour créer un ensemble de données avec des comptes d’événements et de population par strate âge-sexe.</p>
<p>Nous avons également besoin d’une population de référence, la population standard. Pour les besoins de cet exercice, nous utiliserons la <code>world_standard_population_by_sex</code> (population standard mondiale par sexe). La population standard mondiale est basée sur les populations de 46 pays et a été développée en 1960. Il existe de nombreuses populations “standard” - à titre d’exemple, le site web de <a href="https://www.opendata.nhs.scot/dataset/standard-populations">NHS Scotland</a> est assez informatif sur la population standard européenne, la population standard mondiale et la population standard écossaise.</p>
<!-- ======================================================= -->
<div id="chargement-des-paquets-3" class="section level3 unnumbered">
<h3>Chargement des paquets<a class="anchor" aria-label="anchor" href="#chargement-des-paquets-3"><i class="fas fa-link"></i></a>
</h3>
<p>Ce chunk de code montre le chargement des paquets nécessaires aux analyses. Dans ce manuel, nous mettons l’accent sur <code><a href="https://rdrr.io/pkg/pacman/man/p_load.html">p_load()</a></code> de <strong>pacman</strong>, qui installe le paquet si nécessaire <em>et</em> le charge pour l’utiliser. Vous pouvez également charger les paquets installés avec <code><a href="https://rdrr.io/r/base/library.html">library()</a></code> de <strong>base</strong> R. Voir la page sur <a href="rbasics.html#rbasics">bases de R</a> pour plus d’informations sur les paquets R.</p>
<div class="sourceCode" id="cb1074"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">pacman</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pacman/man/p_load.html">p_load</a></span><span class="op">(</span></span>
<span>     <span class="va">rio</span>, <span class="co"># importer/exporter des données</span></span>
<span>     <span class="va">here</span>, <span class="co"># localisation des fichiers</span></span>
<span>     <span class="va">tidyverse</span>, <span class="co"># gestion et visualisation des données</span></span>
<span>     <span class="va">stringr</span>, <span class="co"># nettoyage des caractères et des chaînes de caractères</span></span>
<span>     <span class="va">frailtypack</span>, <span class="co"># nécessaire pour dsr, pour les modèles de frailty</span></span>
<span>     <span class="va">dsr</span>, <span class="co"># standardiser les taux</span></span>
<span>     <span class="va">PHEindicatormethods</span><span class="op">)</span> <span class="co"># alternative pour la standardisation des taux</span></span></code></pre></div>
<p><span style="color : orange ;">**ATTENTION:_** Si vous avez une version plus récente de R, le paquet <strong>dsr</strong> ne peut pas être téléchargé directement avec CRAN. Cependant, il est toujours disponible de l’archive CRAN. Vous pouvez installer et utiliser celui-ci. </span></p>
<p>Pour les utilisateurs non-Mac :</p>
<div class="sourceCode" id="cb1075"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">packageurl</span> <span class="op">&lt;-</span> <span class="st">"https://cran.r-project.org/src/contrib/Archive/dsr/dsr_0.2.2.tar.gz"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="va">packageurl</span>, repos<span class="op">=</span><span class="cn">NULL</span>, type<span class="op">=</span><span class="st">"source"</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb1076"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Autre solution qui peut fonctionner</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span><span class="op">(</span><span class="va"><a href="https://devtools.r-lib.org/">devtools</a></span><span class="op">)</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_version</span><span class="op">(</span><span class="st">"dsr"</span>, version<span class="op">=</span><span class="st">"0.2.2"</span>, repos<span class="op">=</span><span class="st">"http:/cran.us.r.project.org"</span><span class="op">)</span></span></code></pre></div>
<p>Pour les utilisateurs de Mac :</p>
<div class="sourceCode" id="cb1077"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span><span class="op">(</span><span class="va"><a href="https://devtools.r-lib.org/">devtools</a></span><span class="op">)</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_version</span><span class="op">(</span><span class="st">"dsr"</span>, version<span class="op">=</span><span class="st">"0.2.2"</span>, repos<span class="op">=</span><span class="st">"https://mac.R-project.org"</span><span class="op">)</span></span></code></pre></div>
</div>
<div id="charger-les-données-de-la-population" class="section level3 unnumbered">
<h3>Charger les données de la population<a class="anchor" aria-label="anchor" href="#charger-les-donn%C3%A9es-de-la-population"><i class="fas fa-link"></i></a>
</h3>
<p>Voir la page <a href="download_book_data.html#download_book_data">Télécharger le manuel et les données</a> pour savoir comment télécharger tous les exemples de données du manuel. Vous pouvez importer les données de la page de normalisation directement dans R depuis notre dépôt Github en exécutant les commandes <code><a href="https://rdrr.io/pkg/rio/man/import.html">import()</a></code> suivantes :</p>
<div class="sourceCode" id="cb1078"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># importer les données démographiques du pays A directement depuis Github</span></span>
<span><span class="va">A_demo</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/rio/man/import.html">import</a></span><span class="op">(</span><span class="st">"https://github.com/epirhandbook/Epi_R_handbook/raw/master/data/standardization/country_demographics.csv"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># importer les décès pour le pays A directement depuis Github</span></span>
<span><span class="va">A_deaths</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/rio/man/import.html">import</a></span><span class="op">(</span><span class="st">"https://github.com/epirhandbook/Epi_R_handbook/raw/master/data/standardization/deaths_countryA.csv"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Importez les données démographiques pour le pays B directement depuis Github.</span></span>
<span><span class="va">B_demo</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/rio/man/import.html">import</a></span><span class="op">(</span><span class="st">"https://github.com/epirhandbook/Epi_R_handbook/raw/master/data/standardization/country_demographics_2.csv"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># importer les décès pour le pays B directement depuis Github.</span></span>
<span><span class="va">B_deaths</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/rio/man/import.html">import</a></span><span class="op">(</span><span class="st">"https://github.com/epirhandbook/Epi_R_handbook/raw/master/data/standardization/deaths_countryB.csv"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Importez les données démographiques pour le pays B directement depuis Github.</span></span>
<span><span class="va">standard_pop_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/rio/man/import.html">import</a></span><span class="op">(</span><span class="st">"https://github.com/epirhandbook/Epi_R_handbook/raw/master/data/standardization/world_standard_population_by_sex.csv"</span><span class="op">)</span></span></code></pre></div>
<p>Tout d’abord, nous chargeons les données démographiques (comptage des hommes et des femmes par catégorie d’âge de 5 ans) pour les deux pays que nous allons comparer, le “pays A” et le “pays B”.</p>
<div class="sourceCode" id="cb1079"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Pays A</span></span>
<span><span class="va">A_demo</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/rio/man/import.html">import</a></span><span class="op">(</span><span class="st">"country_demographics.csv"</span><span class="op">)</span></span></code></pre></div>
<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-4bdbef3d18e938475808" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-4bdbef3d18e938475808">{"x":{"filter":"none","vertical":false,"data":[["A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A"],["0-4","5-9","10-14","15-19","20-24","25-29","30-34","35-39","40-44","45-49","50-54","55-59","60-64","65-69","70-74","75-79","80-84","85"],[7828087,6705882,5601230,4576430,3734111,3111651,2571215,2121247,1735468,1418749,1145345,900239,685141,500248,347093,202240,94325,40402],[7674675,6592449,5522555,4533885,3726537,3118040,2592416,2150490,1771213,1459439,1193903,956070,745682,563894,416543,258538,130479,64656]],"container":"<table class=\"white-space: nowrap\">\n  <thead>\n    <tr>\n      <th>Country<\/th>\n      <th>age_cat5<\/th>\n      <th>m<\/th>\n      <th>f<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":[2,3]}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script><div class="sourceCode" id="cb1080"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Pays B</span></span>
<span><span class="va">B_demo</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/rio/man/import.html">import</a></span><span class="op">(</span><span class="st">"country_demographics_2.csv"</span><span class="op">)</span></span></code></pre></div>
<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-c927b74816a7dcda244e" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-c927b74816a7dcda244e">{"x":{"filter":"none","vertical":false,"data":[["B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B"],["0-4","5-9","10-14","15-19","20-24","25-29","30-34","35-39","40-44","45-49","50-54","55-59","60-64","65-69","70-74","75-79","80-84","85"],[513458,508728,673522,844532,965423,1243552,1400065,1428773,1546221,1562880,2355220,2324555,2988200,2527110,1552200,1466902,876251,1073611],[503262,559249,652455,145453,965237,1238640,1392676,1505040,1671213,1459439,2218733,3528103,3204770,2500130,1683925,1683828,987362,1147563]],"container":"<table class=\"white-space: nowrap\">\n  <thead>\n    <tr>\n      <th>Country<\/th>\n      <th>age_cat5<\/th>\n      <th>m<\/th>\n      <th>f<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":[2,3]}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="chargement-du-nombre-de-morts" class="section level3 unnumbered">
<h3>Chargement du nombre de morts<a class="anchor" aria-label="anchor" href="#chargement-du-nombre-de-morts"><i class="fas fa-link"></i></a>
</h3>
<p>De manière pratique, nous disposons également du nombre de décès survenus pendant la période qui nous intéresse, par âge et par sexe. Les chiffres de chaque pays sont dans un fichier séparé, comme indiqué ci-dessous.</p>
<p>Décès dans le pays A</p>
<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-9efcba3120b4b78df990" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-9efcba3120b4b78df990">{"x":{"filter":"none","vertical":false,"data":[["A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A"],["0-4","5-9","10-14","15-19","20-24","25-29","30-34","35-39","40-44","45-49","50-54","55-59","60-64","65-69","70-74","75-79","80-84","85"],[224,257,251,245,334,245,154,189,334,342,565,432,543,432,245,543,234,354],[194,254,232,214,316,224,163,167,354,354,463,574,493,295,175,380,177,392]],"container":"<table class=\"white-space: nowrap\">\n  <thead>\n    <tr>\n      <th>Country<\/th>\n      <th>AgeCat<\/th>\n      <th>Male<\/th>\n      <th>Female<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":[2,3]}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script><p>Décès dans le pays B</p>
<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-7c5774cc7d51d8161843" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-7c5774cc7d51d8161843">{"x":{"filter":"none","vertical":false,"data":[["B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B"],["0-4","5-9","10-14","15-19","20-24","25-29","30-34","35-39","40-44","45-49","50-54","55-59","60-64","65-69","70-74","75-79","80-84","85"],[34,37,51,145,434,120,100,143,307,354,463,639,706,232,275,543,234,274],[54,24,32,154,276,254,123,164,254,354,453,654,435,354,165,432,287,395]],"container":"<table class=\"white-space: nowrap\">\n  <thead>\n    <tr>\n      <th>Country<\/th>\n      <th>AgeCat<\/th>\n      <th>Male<\/th>\n      <th>Female<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":[2,3]}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="nettoyer-les-populations-et-les-décès" class="section level3 unnumbered">
<h3>Nettoyer les populations et les décès<a class="anchor" aria-label="anchor" href="#nettoyer-les-populations-et-les-d%C3%A9c%C3%A8s"><i class="fas fa-link"></i></a>
</h3>
<p>Nous devons joindre et transformer ces données de la manière suivante :</p>
<ul>
<li>Combiner les populations des pays en un seul ensemble de données et faire un pivot “long” pour que chaque strate âge-sexe soit une ligne.<br>
</li>
<li>Combiner le nombre de décès par pays dans un ensemble de données et faire pivoter “long” pour que chaque strate âge-sexe soit une ligne.<br>
</li>
<li>Joindre les décès aux populations</li>
</ul>
<p>Tout d’abord, nous combinons les ensembles de données sur les populations des pays, nous effectuons un pivot plus long et un nettoyage mineur. Voir la page <a href="pivoting_data.html#pivoting_data">Pivoter les données</a> pour plus de détails.</p>
<div class="sourceCode" id="cb1081"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pop_countries</span> <span class="op">&lt;-</span> <span class="va">A_demo</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="co"># Commencez avec l'ensemble de données du pays A</span></span>
<span>     <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html">bind_rows</a></span><span class="op">(</span><span class="va">B_demo</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="co"># lier les lignes, car les colonnes portent le même nom</span></span>
<span>     <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html">pivot_longer</a></span><span class="op">(</span> <span class="co"># pivot plus long</span></span>
<span>          cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">m</span>, <span class="va">f</span><span class="op">)</span>, <span class="co"># colonnes à combiner en une seule</span></span>
<span>          names_to <span class="op">=</span> <span class="st">"Sex"</span>, <span class="co"># nom de la nouvelle colonne contenant la catégorie ("m" ou "f") </span></span>
<span>          values_to <span class="op">=</span> <span class="st">"Population"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="co"># nom de la nouvelle colonne contenant les valeurs numériques pivotées</span></span>
<span>     <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>Sex <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/recode.html">recode</a></span><span class="op">(</span><span class="va">Sex</span>, <span class="co"># re-code les valeurs pour plus de clarté</span></span>
<span>          <span class="st">"m"</span> <span class="op">=</span> <span class="st">"Male"</span>,</span>
<span>          <span class="st">"f"</span> <span class="op">=</span> <span class="st">"Female"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Les données de population combinées ressemblent maintenant à ceci (cliquez pour voir les pays A et B) :</p>
<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-f040b9e71a82f444f685" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-f040b9e71a82f444f685">{"x":{"filter":"none","vertical":false,"data":[["A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B"],["0-4","0-4","5-9","5-9","10-14","10-14","15-19","15-19","20-24","20-24","25-29","25-29","30-34","30-34","35-39","35-39","40-44","40-44","45-49","45-49","50-54","50-54","55-59","55-59","60-64","60-64","65-69","65-69","70-74","70-74","75-79","75-79","80-84","80-84","85","85","0-4","0-4","5-9","5-9","10-14","10-14","15-19","15-19","20-24","20-24","25-29","25-29","30-34","30-34","35-39","35-39","40-44","40-44","45-49","45-49","50-54","50-54","55-59","55-59","60-64","60-64","65-69","65-69","70-74","70-74","75-79","75-79","80-84","80-84","85","85"],["Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female"],[7828087,7674675,6705882,6592449,5601230,5522555,4576430,4533885,3734111,3726537,3111651,3118040,2571215,2592416,2121247,2150490,1735468,1771213,1418749,1459439,1145345,1193903,900239,956070,685141,745682,500248,563894,347093,416543,202240,258538,94325,130479,40402,64656,513458,503262,508728,559249,673522,652455,844532,145453,965423,965237,1243552,1238640,1400065,1392676,1428773,1505040,1546221,1671213,1562880,1459439,2355220,2218733,2324555,3528103,2988200,3204770,2527110,2500130,1552200,1683925,1466902,1683828,876251,987362,1073611,1147563]],"container":"<table class=\"white-space: nowrap\">\n  <thead>\n    <tr>\n      <th>Country<\/th>\n      <th>age_cat5<\/th>\n      <th>Sex<\/th>\n      <th>Population<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":3}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script><p>Et maintenant, nous effectuons des opérations similaires sur les deux ensembles de données de décès.</p>
<div class="sourceCode" id="cb1082"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">deaths_countries</span> <span class="op">&lt;-</span> <span class="va">A_deaths</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="co"># Commencez avec l'ensemble de données des décès du pays A</span></span>
<span>     <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html">bind_rows</a></span><span class="op">(</span><span class="va">B_deaths</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="co"># lier les lignes avec l'ensemble de données B, parce que les colonnes sont nommées de manière identique</span></span>
<span>     <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html">pivot_longer</a></span><span class="op">(</span> <span class="co"># pivot plus long</span></span>
<span>          cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">Male</span>, <span class="va">Female</span><span class="op">)</span>, <span class="co"># colonne à transformer en une seule</span></span>
<span>          names_to <span class="op">=</span> <span class="st">"Sex"</span>, <span class="co"># nom de la nouvelle colonne contenant la catégorie ("m" ou "f") </span></span>
<span>          values_to <span class="op">=</span> <span class="st">"Deaths"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="co"># nom pour la nouvelle colonne contenant les valeurs numériques pivotées</span></span>
<span>     <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html">rename</a></span><span class="op">(</span>age_cat5 <span class="op">=</span> <span class="va">AgeCat</span><span class="op">)</span> <span class="co"># renomme pour plus de clarté</span></span></code></pre></div>
<p>Les données de décès ressemblent maintenant à ceci, et contiennent les données des deux pays :</p>
<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-5d0a92e962b35969fd37" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-5d0a92e962b35969fd37">{"x":{"filter":"none","vertical":false,"data":[["A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B"],["0-4","0-4","5-9","5-9","10-14","10-14","15-19","15-19","20-24","20-24","25-29","25-29","30-34","30-34","35-39","35-39","40-44","40-44","45-49","45-49","50-54","50-54","55-59","55-59","60-64","60-64","65-69","65-69","70-74","70-74","75-79","75-79","80-84","80-84","85","85","0-4","0-4","5-9","5-9","10-14","10-14","15-19","15-19","20-24","20-24","25-29","25-29","30-34","30-34","35-39","35-39","40-44","40-44","45-49","45-49","50-54","50-54","55-59","55-59","60-64","60-64","65-69","65-69","70-74","70-74","75-79","75-79","80-84","80-84","85","85"],["Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female"],[224,194,257,254,251,232,245,214,334,316,245,224,154,163,189,167,334,354,342,354,565,463,432,574,543,493,432,295,245,175,543,380,234,177,354,392,34,54,37,24,51,32,145,154,434,276,120,254,100,123,143,164,307,254,354,354,463,453,639,654,706,435,232,354,275,165,543,432,234,287,274,395]],"container":"<table class=\"white-space: nowrap\">\n  <thead>\n    <tr>\n      <th>Country<\/th>\n      <th>age_cat5<\/th>\n      <th>Sex<\/th>\n      <th>Deaths<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":3}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script><p>Nous joignons maintenant les données de décès et de population sur la base des colonnes communes <code>Country</code>, <code>age_cat5</code>, et <code>Sex</code>. Cela ajoute la colonne <code>Deaths</code>.</p>
<div class="sourceCode" id="cb1083"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">country_data</span> <span class="op">&lt;-</span> <span class="va">pop_countries</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>     <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join</a></span><span class="op">(</span><span class="va">deaths_countries</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Country"</span>, <span class="st">"age_cat5"</span>, <span class="st">"Sex"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Nous pouvons maintenant classer <code>Country</code>, <code>age_cat5</code>, et <code>Sex</code> comme facteurs et définir l’ordre des niveaux en utilisant la fonction <code><a href="https://forcats.tidyverse.org/reference/fct_relevel.html">fct_relevel()</a></code> du paquet <strong>forcats</strong>, comme décrit dans la page sur <a href="factors.html#factors">Facteurs</a>. Notez que le classement des niveaux des facteurs ne change pas visiblement les données, mais la commande <code><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange()</a></code> les trie par Pays, catégorie d’âge et sexe.</p>
<div class="sourceCode" id="cb1084"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">country_data</span> <span class="op">&lt;-</span> <span class="va">country_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span></span>
<span>    Country <span class="op">=</span> <span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_relevel.html">fct_relevel</a></span><span class="op">(</span><span class="va">Country</span>, <span class="st">"A"</span>, <span class="st">"B"</span><span class="op">)</span>,</span>
<span>      </span>
<span>    Sex <span class="op">=</span> <span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_relevel.html">fct_relevel</a></span><span class="op">(</span><span class="va">Sex</span>, <span class="st">"Male"</span>, <span class="st">"Female"</span><span class="op">)</span>,</span>
<span>        </span>
<span>    age_cat5 <span class="op">=</span> <span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_relevel.html">fct_relevel</a></span><span class="op">(</span></span>
<span>      <span class="va">age_cat5</span>,</span>
<span>      <span class="st">"0-4"</span>, <span class="st">"5-9"</span>, <span class="st">"10-14"</span>, <span class="st">"15-19"</span>,</span>
<span>      <span class="st">"20-24"</span>, <span class="st">"25-29"</span>,  <span class="st">"30-34"</span>, <span class="st">"35-39"</span>,</span>
<span>      <span class="st">"40-44"</span>, <span class="st">"45-49"</span>, <span class="st">"50-54"</span>, <span class="st">"55-59"</span>,</span>
<span>      <span class="st">"60-64"</span>, <span class="st">"65-69"</span>, <span class="st">"70-74"</span>,</span>
<span>      <span class="st">"75-79"</span>, <span class="st">"80-84"</span>, <span class="st">"85"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>          </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="va">Country</span>, <span class="va">age_cat5</span>, <span class="va">Sex</span><span class="op">)</span></span></code></pre></div>
<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-785b25b515fdd7b57b94" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-785b25b515fdd7b57b94">{"x":{"filter":"none","vertical":false,"data":[["A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B"],["0-4","0-4","5-9","5-9","10-14","10-14","15-19","15-19","20-24","20-24","25-29","25-29","30-34","30-34","35-39","35-39","40-44","40-44","45-49","45-49","50-54","50-54","55-59","55-59","60-64","60-64","65-69","65-69","70-74","70-74","75-79","75-79","80-84","80-84","85","85","0-4","0-4","5-9","5-9","10-14","10-14","15-19","15-19","20-24","20-24","25-29","25-29","30-34","30-34","35-39","35-39","40-44","40-44","45-49","45-49","50-54","50-54","55-59","55-59","60-64","60-64","65-69","65-69","70-74","70-74","75-79","75-79","80-84","80-84","85","85"],["Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female"],[7828087,7674675,6705882,6592449,5601230,5522555,4576430,4533885,3734111,3726537,3111651,3118040,2571215,2592416,2121247,2150490,1735468,1771213,1418749,1459439,1145345,1193903,900239,956070,685141,745682,500248,563894,347093,416543,202240,258538,94325,130479,40402,64656,513458,503262,508728,559249,673522,652455,844532,145453,965423,965237,1243552,1238640,1400065,1392676,1428773,1505040,1546221,1671213,1562880,1459439,2355220,2218733,2324555,3528103,2988200,3204770,2527110,2500130,1552200,1683925,1466902,1683828,876251,987362,1073611,1147563],[224,194,257,254,251,232,245,214,334,316,245,224,154,163,189,167,334,354,342,354,565,463,432,574,543,493,432,295,245,175,543,380,234,177,354,392,34,54,37,24,51,32,145,154,434,276,120,254,100,123,143,164,307,254,354,354,463,453,639,654,706,435,232,354,275,165,543,432,234,287,274,395]],"container":"<table class=\"white-space: nowrap\">\n  <thead>\n    <tr>\n      <th>Country<\/th>\n      <th>age_cat5<\/th>\n      <th>Sex<\/th>\n      <th>Population<\/th>\n      <th>Deaths<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":[3,4]}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script><p><span style="color : orange ;">**__ATTENTION:_** Si vous avez peu de décès par strate, envisagez d’utiliser des catégories de 10, ou 15 ans, au lieu de catégories de 5 ans pour l’âge.</span></p>
</div>
<div id="chargement-de-la-population-de-référence" class="section level3 unnumbered">
<h3>Chargement de la population de référence<a class="anchor" aria-label="anchor" href="#chargement-de-la-population-de-r%C3%A9f%C3%A9rence"><i class="fas fa-link"></i></a>
</h3>
<p>Enfin, pour la standardisation directe, nous importons la population de référence (la “population standard” mondiale par sexe).</p>
<div class="sourceCode" id="cb1085"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Population de référence</span></span>
<span><span class="va">standard_pop_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/rio/man/import.html">import</a></span><span class="op">(</span><span class="st">"world_standard_population_by_sex.csv"</span><span class="op">)</span></span></code></pre></div>
<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-9bdef0609255a5bcb72c" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-9bdef0609255a5bcb72c">{"x":{"filter":"none","vertical":false,"data":[["0-4 years","0-4 years","5-9 years","5-9 years","10-14 years","10-14 years","15-19 years","15-19 years","20-24 years","20-24 years","25-29 years","25-29 years","30-34 years","30-34 years","35-39 years","35-39 years","40-44 years","40-44 years","45-49 years","45-49 years","50-54 years","50-54 years","55-59 years","55-59 years","60-64 years","60-64 years","65-69 years","65-69 years","70-74 years","70-74 years","75-79 years","75-79 years","80-84 years","80-84 years","85plus years","85plus years"],["Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female"],[12000,12000,10000,10000,9000,9000,9000,9000,8000,8000,8000,8000,6000,6000,6000,6000,6000,6000,6000,6000,5000,5000,4000,4000,4000,4000,3000,3000,2000,2000,1000,1000,500,500,500,500]],"container":"<table class=\"white-space: nowrap\">\n  <thead>\n    <tr>\n      <th>age_cat5<\/th>\n      <th>Sex<\/th>\n      <th>WorldStandardPopulation<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":2}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script><!-- ======================================================= -->
</div>
<div id="nettoyer-la-population-de-référence" class="section level3 unnumbered">
<h3>Nettoyer la population de référence<a class="anchor" aria-label="anchor" href="#nettoyer-la-population-de-r%C3%A9f%C3%A9rence"><i class="fas fa-link"></i></a>
</h3>
<p>Les valeurs des catégories d’âge dans les cadres de données <code>country_data</code> et <code>standard_pop_data</code> devront être alignées.</p>
<p>Actuellement, les valeurs de la colonne <code>age_cat5</code> du cadre de données <code>standard_pop_data</code> contiennent le mot “years” et “plus”, alors que celles du cadre de données <code>country_data</code> ne le font pas. Nous devrons faire correspondre les valeurs des catégories d’âge. Nous utilisons <code><a href="https://stringr.tidyverse.org/reference/str_replace.html">str_replace_all()</a></code> du paquet <strong>stringr</strong>, comme décrit dans la page <a href="character_strings.html#character_strings">Caractères et chaînes de caractères</a>, pour remplacer ces motifs par des <code>""</code> sans espace.</p>
<p>De plus, le paquet <strong>dsr</strong> s’attend à ce que dans la population standard, la colonne contenant les comptes soit appelée <code>"pop"</code>. Nous renommons donc cette colonne en conséquence.</p>
<div class="sourceCode" id="cb1086"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Suppression d'une chaîne spécifique des valeurs de la colonne</span></span>
<span><span class="va">standard_pop_clean</span> <span class="op">&lt;-</span> <span class="va">standard_pop_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>     <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span></span>
<span>          age_cat5 <span class="op">=</span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html">str_replace_all</a></span><span class="op">(</span><span class="va">age_cat5</span>, <span class="st">"years"</span>, <span class="st">""</span><span class="op">)</span>, <span class="co"># supprime "year" (année)</span></span>
<span>          age_cat5 <span class="op">=</span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html">str_replace_all</a></span><span class="op">(</span><span class="va">age_cat5</span>, <span class="st">"plus"</span>, <span class="st">""</span><span class="op">)</span>, <span class="co"># supprimez "plus".</span></span>
<span>          age_cat5 <span class="op">=</span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html">str_replace_all</a></span><span class="op">(</span><span class="va">age_cat5</span>, <span class="st">" "</span>, <span class="st">""</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="co"># supprime l'espace " ".</span></span>
<span>     </span>
<span>     <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html">rename</a></span><span class="op">(</span>pop <span class="op">=</span> <span class="va">WorldStandardPopulation</span><span class="op">)</span> <span class="co"># change le nom de la colonne en "pop", car cela est attendu par le paquet dsr</span></span></code></pre></div>
<p><span style="color : orange ;"><strong><em>CAUTION:</em></strong> Si vous essayez d’utiliser <code><a href="https://stringr.tidyverse.org/reference/str_replace.html">str_replace_all()</a></code> pour supprimer un <em>symbole plus</em>, cela ne fonctionnera pas car c’est un symbole spécial. “Échappez” au spécial en mettant deux barres obliques inverses devant, comme dans <code>str_replace_call(column, "\\+", "")</code>. </span></p>
</div>
<div id="standard_all" class="section level3" number="21.2.1">
<h3>
<span class="header-section-number">21.2.1</span> Créer un jeu de données avec une population standard<a class="anchor" aria-label="anchor" href="#standard_all"><i class="fas fa-link"></i></a>
</h3>
<p>Enfin, le package <strong>PHEindicatormethods</strong>, détaillé <a href="standardisation.html#standard_phe">ci-dessous</a>, attend les populations standards jointes aux événements et aux comptages de population du pays. Nous allons donc créer un jeu de données <code>all_data</code> à cet effet.</p>
<div class="sourceCode" id="cb1087"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">all_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join</a></span><span class="op">(</span><span class="va">country_data</span>, <span class="va">standard_pop_clean</span>, by<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"age_cat5"</span>, <span class="st">"Sex"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Cet ensemble de données complet ressemble à ceci :</p>
<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-3536d66459595ef175a9" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-3536d66459595ef175a9">{"x":{"filter":"none","vertical":false,"data":[["A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B"],["0-4","0-4","5-9","5-9","10-14","10-14","15-19","15-19","20-24","20-24","25-29","25-29","30-34","30-34","35-39","35-39","40-44","40-44","45-49","45-49","50-54","50-54","55-59","55-59","60-64","60-64","65-69","65-69","70-74","70-74","75-79","75-79","80-84","80-84","85","85","0-4","0-4","5-9","5-9","10-14","10-14","15-19","15-19","20-24","20-24","25-29","25-29","30-34","30-34","35-39","35-39","40-44","40-44","45-49","45-49","50-54","50-54","55-59","55-59","60-64","60-64","65-69","65-69","70-74","70-74","75-79","75-79","80-84","80-84","85","85"],["Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female","Male","Female"],[7828087,7674675,6705882,6592449,5601230,5522555,4576430,4533885,3734111,3726537,3111651,3118040,2571215,2592416,2121247,2150490,1735468,1771213,1418749,1459439,1145345,1193903,900239,956070,685141,745682,500248,563894,347093,416543,202240,258538,94325,130479,40402,64656,513458,503262,508728,559249,673522,652455,844532,145453,965423,965237,1243552,1238640,1400065,1392676,1428773,1505040,1546221,1671213,1562880,1459439,2355220,2218733,2324555,3528103,2988200,3204770,2527110,2500130,1552200,1683925,1466902,1683828,876251,987362,1073611,1147563],[224,194,257,254,251,232,245,214,334,316,245,224,154,163,189,167,334,354,342,354,565,463,432,574,543,493,432,295,245,175,543,380,234,177,354,392,34,54,37,24,51,32,145,154,434,276,120,254,100,123,143,164,307,254,354,354,463,453,639,654,706,435,232,354,275,165,543,432,234,287,274,395],[12000,12000,10000,10000,9000,9000,9000,9000,8000,8000,8000,8000,6000,6000,6000,6000,6000,6000,6000,6000,5000,5000,4000,4000,4000,4000,3000,3000,2000,2000,1000,1000,500,500,500,500,12000,12000,10000,10000,9000,9000,9000,9000,8000,8000,8000,8000,6000,6000,6000,6000,6000,6000,6000,6000,5000,5000,4000,4000,4000,4000,3000,3000,2000,2000,1000,1000,500,500,500,500]],"container":"<table class=\"white-space: nowrap\">\n  <thead>\n    <tr>\n      <th>Country<\/th>\n      <th>age_cat5<\/th>\n      <th>Sex<\/th>\n      <th>Population<\/th>\n      <th>Deaths<\/th>\n      <th>pop<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":[3,4,5]}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script><!-- ======================================================= -->
</div>
</div>
<div id="dsr-package" class="section level2" number="21.3">
<h2>
<span class="header-section-number">21.3</span> <strong>dsr</strong> package<a class="anchor" aria-label="anchor" href="#dsr-package"><i class="fas fa-link"></i></a>
</h2>
<p>Nous démontrons ci-dessous le calcul et la comparaison de taux directement standardisés à l’aide du package <strong>dsr</strong>. Le package <strong>dsr</strong> vous permet de calculer et de comparer des taux directement standardisés (pas de taux indirectement standardisés !).</p>
<p>Dans la section Préparation des données, nous avons créé des jeux de données distincts pour le nombre de pays et la population standard :</p>
<ol style="list-style-type: decimal">
<li>l’objet <code>country_data</code>, qui est un tableau de population avec le nombre de population et le nombre de décès par strate par pays<br>
</li>
<li>l’objet <code>standard_pop_clean</code>, contenant le nombre de personnes par strate pour notre population de référence, la population standard mondiale.</li>
</ol>
<p>Nous utiliserons ces ensembles de données distincts pour l’approche <strong>dsr</strong>.</p>
<!-- ======================================================= -->
<div id="taux-standardisés" class="section level3 unnumbered">
<h3>Taux standardisés<a class="anchor" aria-label="anchor" href="#taux-standardis%C3%A9s"><i class="fas fa-link"></i></a>
</h3>
<p>Ci-dessous, nous calculons les taux par pays directement standardisés pour l’âge et le sexe. Nous utilisons la fonction <code>dsr()</code>.</p>
<p>A noter - <code>dsr()</code> s’attend à un cadre de données pour les populations des pays et le nombre d’événements (décès), <strong>et un autre cadre de données avec la population de référence</strong>. Il s’attend également à ce que dans cette base de données de la population de référence, le nom de la colonne unité-temps soit “pop” (nous nous en sommes assurés dans la section Préparation des données).</p>
<p>Il y a de nombreux arguments, comme annoté dans le code ci-dessous. Notamment, <code>event =</code> est fixé à la colonne <code>Deaths</code>, et le <code>fu =</code> (“follow-up”) est fixé à la colonne <code>Population</code>. Nous définissons les sous-groupes de comparaison comme la colonne <code>Country</code> et nous standardisons sur la base de <code>age_cat5</code> et <code>Sex</code>. Ces deux dernières colonnes n’ont pas d’argument nommé particulier. Voir <code>?dsr</code> pour plus de détails.</p>
<div class="sourceCode" id="cb1088"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Calculez les taux par pays directement standardisés pour l'âge et le sexe</span></span>
<span><span class="va">mortality_rate</span> <span class="op">&lt;-</span> <span class="fu">dsr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/dsr/man/dsr.html">dsr</a></span><span class="op">(</span></span>
<span>     data <span class="op">=</span> <span class="va">country_data</span>, <span class="co"># spécifier l'objet contenant le nombre de décès par strate</span></span>
<span>     event <span class="op">=</span> <span class="va">Deaths</span>, <span class="co"># colonne contenant le nombre de décès par strate </span></span>
<span>     fu <span class="op">=</span> <span class="va">Population</span>, <span class="co"># colonne contenant le nombre de population par strate</span></span>
<span>     subgroup <span class="op">=</span> <span class="va">Country</span>, <span class="co"># unités que nous souhaitons comparer</span></span>
<span>     <span class="va">age_cat5</span>, <span class="co"># autres colonnes - les taux seront standardisés par celles-ci</span></span>
<span>     <span class="va">Sex</span>,</span>
<span>     refdata <span class="op">=</span> <span class="va">standard_pop_clean</span>, <span class="co"># cadre de données de la population de référence, avec une colonne appelée "pop".</span></span>
<span>     method <span class="op">=</span> <span class="st">"gamma"</span>, <span class="co"># méthode pour calculer l'IC à 95%.</span></span>
<span>     sig <span class="op">=</span> <span class="fl">0</span>,<span class="fl">95</span>, <span class="co"># niveau de signification</span></span>
<span>     mp <span class="op">=</span> <span class="fl">100000</span>, <span class="co"># nous voulons les taux pour 100.000 habitants</span></span>
<span>     decimals <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="co"># nombre de décimales)</span></span>
<span></span>
<span></span>
<span><span class="co"># Imprimez la sortie sous la forme d'un joli tableau HTML</span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span><span class="va">mortality_rate</span><span class="op">)</span> <span class="co"># Afficher le taux de mortalité avant et après la standardisation directe</span></span></code></pre></div>
<div class="inline-table"><table class="table table-sm">
<thead><tr>
<th style="text-align:left;">
Subgroup
</th>
<th style="text-align:right;">
Numerator
</th>
<th style="text-align:right;">
Denominator
</th>
<th style="text-align:right;">
Crude Rate (per 100000)
</th>
<th style="text-align:right;">
0% LCL (Crude)
</th>
<th style="text-align:right;">
0% UCL (Crude)
</th>
<th style="text-align:right;">
Std Rate (per 100000)
</th>
<th style="text-align:right;">
0% LCL (Std)
</th>
<th style="text-align:right;">
0% UCL (Std)
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
A
</td>
<td style="text-align:right;">
11344
</td>
<td style="text-align:right;">
86790567
</td>
<td style="text-align:right;">
13.07
</td>
<td style="text-align:right;">
13.07
</td>
<td style="text-align:right;">
13.07
</td>
<td style="text-align:right;">
23.57
</td>
<td style="text-align:right;">
23.57
</td>
<td style="text-align:right;">
23.57
</td>
</tr>
<tr>
<td style="text-align:left;">
B
</td>
<td style="text-align:right;">
9955
</td>
<td style="text-align:right;">
52898281
</td>
<td style="text-align:right;">
18.82
</td>
<td style="text-align:right;">
18.82
</td>
<td style="text-align:right;">
18.82
</td>
<td style="text-align:right;">
19.33
</td>
<td style="text-align:right;">
19.32
</td>
<td style="text-align:right;">
19.33
</td>
</tr>
</tbody>
</table></div>
<p>Ci-dessus, nous voyons que même si le pays A avait un taux de mortalité brut plus faible que le pays B, il a un taux standardisé plus élevé après standardisation directe par âge et par sexe.</p>
<!-- ======================================================= -->
</div>
<div id="ratios-de-taux-standardisés" class="section level3 unnumbered">
<h3>Ratios de taux standardisés<a class="anchor" aria-label="anchor" href="#ratios-de-taux-standardis%C3%A9s"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb1089"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Calculer le RR</span></span>
<span><span class="va">mortality_rr</span> <span class="op">&lt;-</span> <span class="fu">dsr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/dsr/man/dsrr.html">dsrr</a></span><span class="op">(</span></span>
<span>     data <span class="op">=</span> <span class="va">country_data</span>, <span class="co"># spécifier l'objet contenant le nombre de décès par strate</span></span>
<span>     event <span class="op">=</span> <span class="va">Deaths</span>, <span class="co"># colonne contenant le nombre de décès par strate </span></span>
<span>     fu <span class="op">=</span> <span class="va">Population</span>, <span class="co"># colonne contenant le nombre de population par strate</span></span>
<span>     subgroup <span class="op">=</span> <span class="va">Country</span>, <span class="co"># unités que nous souhaitons comparer</span></span>
<span>     <span class="va">age_cat5</span>,</span>
<span>     <span class="va">Sex</span>, <span class="co"># caractéristiques sur lesquelles nous aimerions nous standardiser </span></span>
<span>     refdata <span class="op">=</span> <span class="va">standard_pop_clean</span>, <span class="co"># population de référence, avec des chiffres dans la colonne appelée pop</span></span>
<span>     refgroup <span class="op">=</span> <span class="st">"B"</span>, <span class="co"># référence pour la comparaison</span></span>
<span>     estimate <span class="op">=</span> <span class="st">"ratio"</span>, <span class="co"># type d'estimation</span></span>
<span>     sig <span class="op">=</span> <span class="fl">0.95</span>, <span class="co"># niveau de signification</span></span>
<span>     mp <span class="op">=</span> <span class="fl">100000</span>, <span class="co"># nous voulons des taux pour 100.000 habitants</span></span>
<span>     decimals <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="co"># nombre de décimales</span></span>
<span></span>
<span><span class="co"># Imprimer le tableau</span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span><span class="va">mortality_rr</span><span class="op">)</span> </span></code></pre></div>
<div class="inline-table"><table class="table table-sm">
<thead><tr>
<th style="text-align:left;">
Comparator
</th>
<th style="text-align:left;">
Reference
</th>
<th style="text-align:right;">
Std Rate (per 100000)
</th>
<th style="text-align:right;">
Rate Ratio (RR)
</th>
<th style="text-align:right;">
95% LCL (RR)
</th>
<th style="text-align:right;">
95% UCL (RR)
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
A
</td>
<td style="text-align:left;">
B
</td>
<td style="text-align:right;">
23.57
</td>
<td style="text-align:right;">
1.22
</td>
<td style="text-align:right;">
1.17
</td>
<td style="text-align:right;">
1.27
</td>
</tr>
<tr>
<td style="text-align:left;">
B
</td>
<td style="text-align:left;">
B
</td>
<td style="text-align:right;">
19.33
</td>
<td style="text-align:right;">
1.00
</td>
<td style="text-align:right;">
0.94
</td>
<td style="text-align:right;">
1.06
</td>
</tr>
</tbody>
</table></div>
<p>Le taux de mortalité standardisé est 1,22 fois plus élevé dans le pays A que dans le pays B (IC 95 % 1.17-1.27).</p>
<!-- ======================================================= -->
</div>
<div id="différence-de-taux-standardisé" class="section level3 unnumbered">
<h3>Différence de taux standardisé<a class="anchor" aria-label="anchor" href="#diff%C3%A9rence-de-taux-standardis%C3%A9"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb1090"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Calculer RD</span></span>
<span><span class="va">mortality_rd</span> <span class="op">&lt;-</span> <span class="fu">dsr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/dsr/man/dsrr.html">dsrr</a></span><span class="op">(</span></span>
<span>     data <span class="op">=</span> <span class="va">country_data</span>, <span class="co"># spécifier l'objet contenant le nombre de décès par strate</span></span>
<span>     event <span class="op">=</span> <span class="va">Deaths</span>, <span class="co"># colonne contenant le nombre de décès par strate </span></span>
<span>     fu <span class="op">=</span> <span class="va">Population</span>, <span class="co"># colonne contenant le nombre de population par strate</span></span>
<span>     subgroup <span class="op">=</span> <span class="va">Country</span>, <span class="co"># unités que nous souhaitons comparer</span></span>
<span>     <span class="va">age_cat5</span>, <span class="co"># caractéristiques sur lesquelles nous voulons nous standardiser</span></span>
<span>     <span class="va">Sex</span>,                        </span>
<span>     refdata <span class="op">=</span> <span class="va">standard_pop_clean</span>, <span class="co"># population de référence, avec des chiffres dans la colonne appelée pop</span></span>
<span>     refgroup <span class="op">=</span> <span class="st">"B"</span>, <span class="co"># référence pour la comparaison</span></span>
<span>     estimate <span class="op">=</span> <span class="st">"difference"</span>, <span class="co"># type d'estimation</span></span>
<span>     sig <span class="op">=</span> <span class="fl">0.95</span>, <span class="co"># niveau de signification</span></span>
<span>     mp <span class="op">=</span> <span class="fl">100000</span>, <span class="co"># nous voulons des taux pour 100.000 habitants</span></span>
<span>     decimals <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="co"># nombre de décimales</span></span>
<span></span>
<span><span class="co"># Imprimer le tableau</span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span><span class="va">mortality_rd</span><span class="op">)</span> </span></code></pre></div>
<div class="inline-table"><table class="table table-sm">
<thead><tr>
<th style="text-align:left;">
Comparator
</th>
<th style="text-align:left;">
Reference
</th>
<th style="text-align:right;">
Std Rate (per 100000)
</th>
<th style="text-align:right;">
Rate Difference (RD)
</th>
<th style="text-align:right;">
95% LCL (RD)
</th>
<th style="text-align:right;">
95% UCL (RD)
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
A
</td>
<td style="text-align:left;">
B
</td>
<td style="text-align:right;">
23.57
</td>
<td style="text-align:right;">
4.24
</td>
<td style="text-align:right;">
3.24
</td>
<td style="text-align:right;">
5.24
</td>
</tr>
<tr>
<td style="text-align:left;">
B
</td>
<td style="text-align:left;">
B
</td>
<td style="text-align:right;">
19.33
</td>
<td style="text-align:right;">
0.00
</td>
<td style="text-align:right;">
-1.24
</td>
<td style="text-align:right;">
1.24
</td>
</tr>
</tbody>
</table></div>
<p>Le pays A a 4.24 décès supplémentaires pour 100.000 habitants (IC 95% 3.24-5.24) par rapport au pays A.</p>
<!-- ======================================================= -->
</div>
</div>
<div id="standard_phe" class="section level2" number="21.4">
<h2>
<span class="header-section-number">21.4</span> <strong>PHEindicatormethods</strong> package<a class="anchor" aria-label="anchor" href="#standard_phe"><i class="fas fa-link"></i></a>
</h2>
<p>Une autre façon de calculer les taux standardisés est avec le paquet <strong>PHEindicatormethods</strong>. Ce package vous permet de calculer les taux standardisés directement et indirectement. Nous allons montrer les deux.</p>
<p>Cette section utilisera le cadre de données <code>all_data</code> créé à la fin de la section Préparation. Ce cadre de données inclut les populations des pays, les événements de décès, et la population de référence standard mondiale. Vous pouvez le visualiser <a href="standardisation.html#standard_all">ici</a>.</p>
<!-- ======================================================= -->
<div id="taux-directement-standardisés" class="section level3 unnumbered">
<h3>Taux directement standardisés<a class="anchor" aria-label="anchor" href="#taux-directement-standardis%C3%A9s"><i class="fas fa-link"></i></a>
</h3>
<p>Ci-dessous, nous regroupons d’abord les données par Pays, puis nous les passons à la fonction <code>phe_dsr()</code> pour obtenir les taux directement standardisés par pays.</p>
<p>A noter - la population de référence (standard) peut être fournie comme une <strong>colonne dans le cadre de données spécifique au pays</strong> ou comme un <strong>vecteur séparé</strong>. Si elle est fournie dans le cadre de données spécifique au pays, vous devez définir <code>stdpoptype = "field"</code>. Si elle est fournie sous forme de vecteur, définissez <code>stdpoptype = "vector"</code>. Dans ce dernier cas, vous devez vous assurer que l’ordre des rangées par strate est similaire dans le cadre de données spécifique au pays et dans la population de référence, car les enregistrements seront appariés par position. Dans notre exemple ci-dessous, nous avons fourni la population de référence sous forme de colonne dans le cadre de données spécifique au pays.</p>
<p>Consultez l’aide de <code>?phe_dsr</code> ou les liens dans la section Références pour plus d’informations.</p>
<div class="sourceCode" id="cb1091"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Calculez les taux par pays directement normalisés pour l'âge et le sexe.</span></span>
<span><span class="va">mortality_ds_rate_phe</span> <span class="op">&lt;-</span> <span class="va">all_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>     <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">Country</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>     <span class="fu">PHEindicatormethods</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/PHEindicatormethods/man/phe_dsr.html">phe_dsr</a></span><span class="op">(</span></span>
<span>          x <span class="op">=</span> <span class="va">Deaths</span>, <span class="co"># colonne avec le nombre d'événements observés</span></span>
<span>          n <span class="op">=</span> <span class="va">Population</span>, <span class="co"># colonne avec les pops non standard pour chaque strate</span></span>
<span>          stdpop <span class="op">=</span> <span class="va">pop</span>, <span class="co"># populations standard pour chaque strate</span></span>
<span>          stdpoptype <span class="op">=</span> <span class="st">"field"</span><span class="op">)</span>       <span class="co"># soit "vector" pour un vecteur autonome, soit "field" pour signifier que les populations std sont dans les données.  </span></span>
<span></span>
<span><span class="co"># Imprimer le tableau</span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span><span class="va">mortality_ds_rate_phe</span><span class="op">)</span></span></code></pre></div>
<div class="inline-table"><table class="table table-sm">
<thead><tr>
<th style="text-align:left;">
Country
</th>
<th style="text-align:right;">
total_count
</th>
<th style="text-align:right;">
total_pop
</th>
<th style="text-align:right;">
value
</th>
<th style="text-align:right;">
lowercl
</th>
<th style="text-align:right;">
uppercl
</th>
<th style="text-align:left;">
confidence
</th>
<th style="text-align:left;">
statistic
</th>
<th style="text-align:left;">
method
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
A
</td>
<td style="text-align:right;">
11344
</td>
<td style="text-align:right;">
86790567
</td>
<td style="text-align:right;">
23.56686
</td>
<td style="text-align:right;">
23.08107
</td>
<td style="text-align:right;">
24.05944
</td>
<td style="text-align:left;">
95%
</td>
<td style="text-align:left;">
dsr per 100000
</td>
<td style="text-align:left;">
Dobson
</td>
</tr>
<tr>
<td style="text-align:left;">
B
</td>
<td style="text-align:right;">
9955
</td>
<td style="text-align:right;">
52898281
</td>
<td style="text-align:right;">
19.32549
</td>
<td style="text-align:right;">
18.45516
</td>
<td style="text-align:right;">
20.20882
</td>
<td style="text-align:left;">
95%
</td>
<td style="text-align:left;">
dsr per 100000
</td>
<td style="text-align:left;">
Dobson
</td>
</tr>
</tbody>
</table></div>
<!-- ======================================================= -->
</div>
<div id="standard_indirect" class="section level3 unnumbered">
<h3>Taux standardisés indirectement<a class="anchor" aria-label="anchor" href="#standard_indirect"><i class="fas fa-link"></i></a>
</h3>
<p>Pour la standardisation indirecte, vous avez besoin d’une population de référence avec le nombre de décès et le nombre de population par strate. Dans cet exemple, nous allons calculer les taux pour le pays A <em>en utilisant le pays B comme population de référence</em>, car la population de référence <code>standard_pop_clean</code> n’inclut pas le nombre de décès par strate.</p>
<p>Ci-dessous, nous créons d’abord la population de référence du pays B. Ensuite, nous passons les données de mortalité et de population pour le pays A, nous les combinons avec la population de référence, et nous les passons à la fonction <code>phe_isr()</code>, pour obtenir des taux indirectement standardisés. Bien sûr, vous pouvez aussi faire l’inverse.</p>
<p>A noter - dans notre exemple ci-dessous, la population de référence est fournie comme un cadre de données séparé. Dans ce cas, nous nous assurons que les vecteurs <code>x =</code>, <code>n =</code>, <code>x_ref =</code> et <code>n_ref =</code> sont tous ordonnés par les mêmes valeurs de catégorie de standardisation (strate) que celles de notre cadre de données spécifique au pays, puisque les enregistrements seront appariés par position.</p>
<p>Consultez l’aide de <code>?phe_isr</code> (maintenant <code>calculate_ISRate</code> depuis dec 2022) ou les liens dans la section Références pour plus d’informations.</p>
<div class="sourceCode" id="cb1092"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Créez la population de référence</span></span>
<span><span class="va">refpopCountryB</span> <span class="op">&lt;-</span> <span class="va">country_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">Country</span> <span class="op">==</span> <span class="st">"B"</span><span class="op">)</span> </span>
<span></span>
<span><span class="co"># Calculer les taux pour le pays A indirectement standardisés par âge et sexe</span></span>
<span><span class="va">mortality_is_rate_phe_A</span> <span class="op">&lt;-</span> <span class="va">country_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>     <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">Country</span> <span class="op">==</span> <span class="st">"A"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>     <span class="fu">PHEindicatormethods</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/PHEindicatormethods/man/calculate_ISRate.html">calculate_ISRate</a></span><span class="op">(</span> <span class="co">#avant c'etait phe_isr()</span></span>
<span>          x <span class="op">=</span> <span class="va">Deaths</span>, <span class="co"># colonne avec le nombre d'événements observés</span></span>
<span>          n <span class="op">=</span> <span class="va">Population</span>, <span class="co"># colonne avec les pops non standard pour chaque strate</span></span>
<span>          x_ref <span class="op">=</span> <span class="va">refpopCountryB</span><span class="op">$</span><span class="va">Deaths</span>, <span class="co"># nombre de décès de référence pour chaque strate</span></span>
<span>          n_ref <span class="op">=</span> <span class="va">refpopCountryB</span><span class="op">$</span><span class="va">Population</span><span class="op">)</span> <span class="co"># population de référence pour chaque strate</span></span>
<span></span>
<span><span class="co"># Imprimez le tableau</span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span><span class="va">mortality_is_rate_phe_A</span><span class="op">)</span></span></code></pre></div>
<div class="inline-table"><table class="table table-sm">
<thead><tr>
<th style="text-align:right;">
observed
</th>
<th style="text-align:right;">
expected
</th>
<th style="text-align:right;">
ref_rate
</th>
<th style="text-align:right;">
value
</th>
<th style="text-align:right;">
lowercl
</th>
<th style="text-align:right;">
uppercl
</th>
<th style="text-align:left;">
confidence
</th>
<th style="text-align:left;">
statistic
</th>
<th style="text-align:left;">
method
</th>
</tr></thead>
<tbody><tr>
<td style="text-align:right;">
11344
</td>
<td style="text-align:right;">
15847.42
</td>
<td style="text-align:right;">
18.81914
</td>
<td style="text-align:right;">
13.47123
</td>
<td style="text-align:right;">
13.22446
</td>
<td style="text-align:right;">
13.72145
</td>
<td style="text-align:left;">
95%
</td>
<td style="text-align:left;">
indirectly standardised rate per 100000
</td>
<td style="text-align:left;">
Byars
</td>
</tr></tbody>
</table></div>
<!-- ======================================================= -->
</div>
</div>
<div id="ressources-8" class="section level2" number="21.5">
<h2>
<span class="header-section-number">21.5</span> Ressources<a class="anchor" aria-label="anchor" href="#ressources-8"><i class="fas fa-link"></i></a>
</h2>
<p>Si vous souhaitez voir un autre exemple reproductible utilisant <strong>dsr</strong>, veuillez consulter <a href="https://mran.microsoft.com/snapshot/2020-02-12/web/packages/dsr/vignettes/dsr.html">cette vignette</a>.</p>
<p>Pour un autre exemple utilisant <strong>PHEindicatormethods</strong>, veuillez vous rendre sur <a href="https://mran.microsoft.com/snapshot/2018-10-22/web/packages/PHEindicatormethods/vignettes/IntroductiontoPHEindicatormethods.html">ce site Web</a></p>
<p>Voir les <strong>PHEindicatormethods</strong> <a href="https://cran.r-project.org/web/packages/PHEindicatormethods/PHEindicatormethods.pdf">fichier pdf de référence</a></p>

</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="missing_data.html"><span class="header-section-number">20</span> Données manquantes</a></div>
<div class="next"><a href="moving_average.html"><span class="header-section-number">22</span> Moyennes mobiles</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#standardisation"><span class="header-section-number">21</span> Taux standardisés</a></li>
<li><a class="nav-link" href="#vue-densemble-1"><span class="header-section-number">21.1</span> Vue d’ensemble</a></li>
<li>
<a class="nav-link" href="#pr%C3%A9paration-4"><span class="header-section-number">21.2</span> Préparation</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#chargement-des-paquets-3">Chargement des paquets</a></li>
<li><a class="nav-link" href="#charger-les-donn%C3%A9es-de-la-population">Charger les données de la population</a></li>
<li><a class="nav-link" href="#chargement-du-nombre-de-morts">Chargement du nombre de morts</a></li>
<li><a class="nav-link" href="#nettoyer-les-populations-et-les-d%C3%A9c%C3%A8s">Nettoyer les populations et les décès</a></li>
<li><a class="nav-link" href="#chargement-de-la-population-de-r%C3%A9f%C3%A9rence">Chargement de la population de référence</a></li>
<li><a class="nav-link" href="#nettoyer-la-population-de-r%C3%A9f%C3%A9rence">Nettoyer la population de référence</a></li>
<li><a class="nav-link" href="#standard_all"><span class="header-section-number">21.2.1</span> Créer un jeu de données avec une population standard</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#dsr-package"><span class="header-section-number">21.3</span> dsr package</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#taux-standardis%C3%A9s">Taux standardisés</a></li>
<li><a class="nav-link" href="#ratios-de-taux-standardis%C3%A9s">Ratios de taux standardisés</a></li>
<li><a class="nav-link" href="#diff%C3%A9rence-de-taux-standardis%C3%A9">Différence de taux standardisé</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#standard_phe"><span class="header-section-number">21.4</span> PHEindicatormethods package</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#taux-directement-standardis%C3%A9s">Taux directement standardisés</a></li>
<li><a class="nav-link" href="#standard_indirect">Taux standardisés indirectement</a></li>
</ul>
</li>
<li><a class="nav-link" href="#ressources-8"><span class="header-section-number">21.5</span> Ressources</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
          
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Le Epi R Handbook</strong>" was written by the handbook team. It was last built on 2023-05-21.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
