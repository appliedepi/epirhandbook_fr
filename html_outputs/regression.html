<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>19 Régression univariée et multivariable | The Epidemiologist R Handbook</title>

    <meta name="author" content="the handbook team" />
  
   <meta name="description" content="The Epi R Handbook est un manuel de référence sur l’utilisation de R en épidémiologie appliquée et santé publique." />
   <meta name="generator" content="placeholder" />
  <meta property="og:title" content="19 Régression univariée et multivariable | The Epidemiologist R Handbook" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="The Epi R Handbook est un manuel de référence sur l’utilisation de R en épidémiologie appliquée et santé publique." />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="19 Régression univariée et multivariable | The Epidemiologist R Handbook" />
  
  <meta name="twitter:description" content="The Epi R Handbook est un manuel de référence sur l’utilisation de R en épidémiologie appliquée et santé publique." />
  
  <!-- JS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script>
  <script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script>
    <script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet" />
    <script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script>
    <script src="libs/bs3compat-0.4.2/transition.js"></script>
    <script src="libs/bs3compat-0.4.2/tabs.js"></script>
    <script src="libs/bs3compat-0.4.2/bs3compat.js"></script>
    <link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet" />
    <script src="libs/bs4_book-1.0.0/bs4_book.js"></script>
    <script src="libs/htmlwidgets-1.6.2/htmlwidgets.js"></script>
    <link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
    <script src="libs/datatables-binding-0.27/datatables.js"></script>
    <link href="libs/dt-core-1.12.1/css/jquery.dataTables.min.css" rel="stylesheet" />
    <link href="libs/dt-core-1.12.1/css/jquery.dataTables.extra.css" rel="stylesheet" />
    <script src="libs/dt-core-1.12.1/js/jquery.dataTables.min.js"></script>
    <link href="libs/nouislider-7.0.10/jquery.nouislider.min.css" rel="stylesheet" />
    <script src="libs/nouislider-7.0.10/jquery.nouislider.min.js"></script>
    <link href="libs/selectize-0.12.0/selectize.bootstrap3.css" rel="stylesheet" />
    <script src="libs/selectize-0.12.0/selectize.min.js"></script>
    <link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
    <script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
    <script src="libs/kePrint-0.0.1/kePrint.js"></script>
    <link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
    <link href="libs/tabwid-1.1.3/tabwid.css" rel="stylesheet" />
    <script src="libs/tabwid-1.1.3/tabwid.js"></script>
    <link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
    <script src="libs/leaflet-1.3.1/leaflet.js"></script>
    <link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
    <script src="libs/proj4-2.6.2/proj4.min.js"></script>
    <script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
    <link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
    <script src="libs/leaflet-binding-2.1.2/leaflet.js"></script>
    <script src="libs/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script>
    <script src="libs/leaflet-providers-plugin-2.1.2/leaflet-providers-plugin.js"></script>
    <script src="libs/viz-1.8.2/viz.js"></script>
    <link href="libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet" />
    <script src="libs/grViz-binding-1.0.9/grViz.js"></script>
    <script src="libs/d3-4.5.0/d3.min.js"></script>
    <script src="libs/sankey-1/sankey.js"></script>
    <script src="libs/sankeyNetwork-binding-0.4/sankeyNetwork.js"></script>
    <script src="libs/plotly-binding-4.10.1/plotly.js"></script>
    <script src="libs/typedarray-0.1/typedarray.min.js"></script>
    <link href="libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet" />
    <script src="libs/plotly-main-2.11.1/plotly-latest.min.js"></script>
    <link href="libs/vis-9.1.0/vis-network.min.css" rel="stylesheet" />
    <script src="libs/vis-9.1.0/vis-network.min.js"></script>
    <script src="libs/visNetwork-binding-2.1.2/visNetwork.js"></script>
    <link href="libs/font-awesome-4.7.0/css/font-awesome.min.css" rel="stylesheet" />
    <script src="libs/plotly-basic-2.11.1/plotly-basic-2.11.1.min.js"></script>
    <script src="libs/plotly-cartesian-2.11.1/plotly-cartesian-2.11.1.min.js"></script>
    <script src="libs/proj4js-2.3.15/proj4.js"></script>
    <link href="libs/highcharts-9.3.1/css/motion.css" rel="stylesheet" />
    <script src="libs/highcharts-9.3.1/highcharts.js"></script>
    <script src="libs/highcharts-9.3.1/highcharts-3d.js"></script>
    <script src="libs/highcharts-9.3.1/highcharts-more.js"></script>
    <script src="libs/highcharts-9.3.1/modules/stock.js"></script>
    <script src="libs/highcharts-9.3.1/modules/map.js"></script>
    <script src="libs/highcharts-9.3.1/modules/data.js"></script>
    <script src="libs/highcharts-9.3.1/modules/exporting.js"></script>
    <script src="libs/highcharts-9.3.1/modules/offline-exporting.js"></script>
    <script src="libs/highcharts-9.3.1/modules/drilldown.js"></script>
    <script src="libs/highcharts-9.3.1/modules/item-series.js"></script>
    <script src="libs/highcharts-9.3.1/modules/overlapping-datalabels.js"></script>
    <script src="libs/highcharts-9.3.1/modules/annotations.js"></script>
    <script src="libs/highcharts-9.3.1/modules/export-data.js"></script>
    <script src="libs/highcharts-9.3.1/modules/funnel.js"></script>
    <script src="libs/highcharts-9.3.1/modules/heatmap.js"></script>
    <script src="libs/highcharts-9.3.1/modules/treemap.js"></script>
    <script src="libs/highcharts-9.3.1/modules/sankey.js"></script>
    <script src="libs/highcharts-9.3.1/modules/dependency-wheel.js"></script>
    <script src="libs/highcharts-9.3.1/modules/organization.js"></script>
    <script src="libs/highcharts-9.3.1/modules/solid-gauge.js"></script>
    <script src="libs/highcharts-9.3.1/modules/streamgraph.js"></script>
    <script src="libs/highcharts-9.3.1/modules/sunburst.js"></script>
    <script src="libs/highcharts-9.3.1/modules/vector.js"></script>
    <script src="libs/highcharts-9.3.1/modules/wordcloud.js"></script>
    <script src="libs/highcharts-9.3.1/modules/xrange.js"></script>
    <script src="libs/highcharts-9.3.1/modules/tilemap.js"></script>
    <script src="libs/highcharts-9.3.1/modules/venn.js"></script>
    <script src="libs/highcharts-9.3.1/modules/gantt.js"></script>
    <script src="libs/highcharts-9.3.1/modules/timeline.js"></script>
    <script src="libs/highcharts-9.3.1/modules/parallel-coordinates.js"></script>
    <script src="libs/highcharts-9.3.1/modules/bullet.js"></script>
    <script src="libs/highcharts-9.3.1/modules/coloraxis.js"></script>
    <script src="libs/highcharts-9.3.1/modules/dumbbell.js"></script>
    <script src="libs/highcharts-9.3.1/modules/lollipop.js"></script>
    <script src="libs/highcharts-9.3.1/modules/series-label.js"></script>
    <script src="libs/highcharts-9.3.1/plugins/motion.js"></script>
    <script src="libs/highcharts-9.3.1/custom/reset.js"></script>
    <script src="libs/highcharts-9.3.1/modules/boost.js"></script>
    <script src="libs/highchart-binding-0.9.4/highchart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script>

  <!-- CSS -->
  <style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
      <link rel="stylesheet" href="style_bs4.css" />
  
</head>

<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book">
    <a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">The Epidemiologist R Handbook</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
      </form>

      <nav aria-label="Table of contents">
        <h2>Table of contents</h2>
        <div id="book-toc"></div>

        <div class="book-extra">
          <p><a id="book-repo" href="#">View book source <i class="fab fa-github"></i></a></li></p>
        </div>
      </nav>
    </div>
  </header>

  <main class="col-sm-12 col-md-9 col-lg-7" id="content">
<div id="regression" class="section level1" number="19">
<h1><span class="header-section-number">19</span> Régression univariée et multivariable</h1>
<!-- ======================================================= -->
<p>Cette page montre comment utiliser des fonctions de régression <strong>base</strong> de R telles que <code>glm()</code> et le package <strong>gtsummary</strong> pour
examiner les relations entre les variables (par exemple, les rapports de cotes, les rapports de risque et les
ratios de risque). Il utilise également des fonctions comme <code>tidy()</code> du package <strong>broom</strong> pour nettoyer les sorties de régression.</p>
<ol style="list-style-type: decimal">
<li>Univarié : tableaux deux par deux</li>
<li>Stratifié : estimations mantel-haenszel<br />
</li>
<li>Multivariable : sélection des variables, sélection du modèle, tableau final</li>
<li>Forest graphe</li>
</ol>
<p>Pour la régression des risques proportionnels de Cox, voir la page <a href="survival_analysis.html#survival_analysis">Analyse d’enquête</a>.</p>
<p><span style="color: black;"><strong><em>NOTE:</em></strong> Nous utilisons le terme <em>multivariable</em> pour faire référence à une régression avec plusieurs variables explicatives. En effet, un modèle <em>multivarié</em> serait une régression avec plusieurs résultats - voir ceci <a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC3518362/">éditorial</a> pour plus de detail </span></p>
<!-- ======================================================= -->
<div id="preparation-2" class="section level2" number="19.1">
<h2><span class="header-section-number">19.1</span> Preparation</h2>
<div id="chargement-des-packages-1" class="section level3 unnumbered">
<h3>Chargement des packages</h3>
<p>Ce bout de code montre le chargement des packages nécessaires aux analyses. Dans ce manuel, nous mettons l’accent sur <code>p_load()</code> du package <strong>pacman</strong>, qui installe le package si nécessaire <em>et</em> le charge pour l’utiliser. Vous pouvez également charger les packages installés avec <code>library()</code> de <strong>base</strong> R. Voir la page sur <a href="rbasics.html#rbasics">R basics</a> pour plus d’informations sur les packages de R.</p>
<div class="sourceCode" id="cb965"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb965-1"><a href="regression.html#cb965-1" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(</span>
<span id="cb965-2"><a href="regression.html#cb965-2" aria-hidden="true" tabindex="-1"></a>  rio, <span class="co"># Importation du fichier</span></span>
<span id="cb965-3"><a href="regression.html#cb965-3" aria-hidden="true" tabindex="-1"></a>  here, <span class="co"># Localisation de fichiers</span></span>
<span id="cb965-4"><a href="regression.html#cb965-4" aria-hidden="true" tabindex="-1"></a>  tidyverse, <span class="co"># gestion des données + graphiques ggplot2, </span></span>
<span id="cb965-5"><a href="regression.html#cb965-5" aria-hidden="true" tabindex="-1"></a>  stringr, <span class="co"># manipuler des chaînes de texte </span></span>
<span id="cb965-6"><a href="regression.html#cb965-6" aria-hidden="true" tabindex="-1"></a>  purrr, <span class="co"># boucle sur les objets d&#39;une manière ordonnée</span></span>
<span id="cb965-7"><a href="regression.html#cb965-7" aria-hidden="true" tabindex="-1"></a>  gtsummary, <span class="co"># statistiques et tests sommaires </span></span>
<span id="cb965-8"><a href="regression.html#cb965-8" aria-hidden="true" tabindex="-1"></a>  broom, <span class="co"># met de l&#39;ordre dans les résultats des régressions</span></span>
<span id="cb965-9"><a href="regression.html#cb965-9" aria-hidden="true" tabindex="-1"></a>  lmtest, <span class="co"># tests du rapport de vraisemblance</span></span>
<span id="cb965-10"><a href="regression.html#cb965-10" aria-hidden="true" tabindex="-1"></a>  parameters, <span class="co"># alternative pour mettre de l&#39;ordre dans les résultats des régressions</span></span>
<span id="cb965-11"><a href="regression.html#cb965-11" aria-hidden="true" tabindex="-1"></a>  see <span class="co"># alternative pour visualiser les parcelles forestières</span></span>
<span id="cb965-12"><a href="regression.html#cb965-12" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
</div>
<div id="importation-de-données-1" class="section level3 unnumbered">
<h3>Importation de données</h3>
<p>Nous importons le jeu de données des cas d’une épidémie d’Ebola simulée. Si vous voulez continuer dans le processus d’acquisition de données suivait ce lien, <a href='https://github.com/epirhandbook/Epi_R_handbook/raw/master/data/case_linelists/linelist_cleaned.rds' class='download-button'>cliquer pour téléchager le jeu de données linelist “propre”</a> (as .rds file). Importez vos données avec la fonction <code>import()</code> du packages <strong>rio</strong> (elle accepte de nombreux types de fichiers comme .xlsx, .rds, .csv - voir la page <a href="import_export.html#import_export">Importer et exporter des données</a> pour plus de détails)..</p>
<div class="sourceCode" id="cb966"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb966-1"><a href="regression.html#cb966-1" aria-hidden="true" tabindex="-1"></a><span class="co"># importer la liste de lignes</span></span>
<span id="cb966-2"><a href="regression.html#cb966-2" aria-hidden="true" tabindex="-1"></a>linelist <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="st">&quot;linelist_cleaned.rds&quot;</span>)</span></code></pre></div>
<p>Les 50 premières lignes de linelist sont affichées ci-dessous.</p>
<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-06c524bb0377690ef122" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-06c524bb0377690ef122">{"x":{"filter":"none","vertical":false,"data":[["5fe599","8689b7","11f8ea","b8812a","893f25","be99c8","07e3e8","369449","f393b4","1389ca","2978ac","57a565","fc15ef","2eaa9a","bbfa93","c97dd9","f50e8a","3a7673","7f5a01","ddddee","99e8fa","567136","9371a9","bc2adf","403057","8bd1e8","f327be","42e1a9","90e5fe","959170","8ebf6e","e56412","6d788e","a47529","67be4e","da8ecb","148f18","2cb9a5","f5c142","70a9fe","3ad520","062638","c76676","baacc1","497372","23e499","38cc4a","3789ee","c71dcd","6b70f0"],[4,4,2,3,3,3,4,4,4,4,4,4,6,5,6,9,10,8,7,6,7,6,8,6,10,8,6,12,5,8,7,9,11,5,8,5,6,11,7,9,7,8,9,12,13,9,8,10,8,7],["2014-05-08",null,null,"2014-05-04","2014-05-18","2014-05-03","2014-05-22","2014-05-28",null,null,"2014-05-30","2014-05-28","2014-06-14","2014-06-07","2014-06-09",null,null,null,"2014-06-23","2014-06-18","2014-06-24",null,null,"2014-07-03",null,"2014-07-10","2014-06-14",null,"2014-06-18","2014-06-29","2014-07-02","2014-07-12","2014-07-12","2014-06-13","2014-07-15","2014-06-20",null,null,"2014-07-20",null,"2014-07-12","2014-07-19","2014-07-18","2014-07-18","2014-07-27",null,"2014-07-19","2014-07-26","2014-07-24",null],["2014-05-13","2014-05-13","2014-05-16","2014-05-18","2014-05-21","2014-05-22","2014-05-27","2014-06-02","2014-06-05","2014-06-05","2014-06-06","2014-06-13","2014-06-16","2014-06-17","2014-06-18","2014-06-19","2014-06-22","2014-06-23","2014-06-25","2014-06-26","2014-06-28","2014-07-02","2014-07-08","2014-07-09","2014-07-09","2014-07-10","2014-07-12","2014-07-12","2014-07-13","2014-07-13","2014-07-14","2014-07-15","2014-07-16","2014-07-17","2014-07-17","2014-07-18","2014-07-19","2014-07-22","2014-07-22","2014-07-24","2014-07-24","2014-07-25","2014-07-25","2014-07-27","2014-07-29","2014-07-30",null,"2014-08-01","2014-08-02","2014-08-03"],["2014-05-15","2014-05-14","2014-05-18","2014-05-20","2014-05-22","2014-05-23","2014-05-29","2014-06-03","2014-06-06","2014-06-07","2014-06-08","2014-06-15","2014-06-17","2014-06-17","2014-06-20","2014-06-19","2014-06-23","2014-06-24","2014-06-27","2014-06-28","2014-06-29","2014-07-03","2014-07-09","2014-07-09","2014-07-11","2014-07-11","2014-07-13","2014-07-14","2014-07-14","2014-07-13","2014-07-14","2014-07-17","2014-07-17","2014-07-18","2014-07-19","2014-07-20","2014-07-20","2014-07-22","2014-07-24","2014-07-26","2014-07-24","2014-07-27","2014-07-25","2014-07-27","2014-07-31","2014-08-01","2014-08-03","2014-08-02","2014-08-02","2014-08-04"],[null,"2014-05-18","2014-05-30",null,"2014-05-29","2014-05-24","2014-06-01","2014-06-07","2014-06-18","2014-06-09","2014-06-15",null,"2014-07-09",null,"2014-06-30","2014-07-11","2014-07-01","2014-06-25","2014-07-06","2014-07-02","2014-07-09","2014-07-07","2014-07-20",null,"2014-07-22","2014-07-16","2014-07-14","2014-07-20","2014-07-16","2014-07-19","2014-07-27","2014-07-19",null,"2014-07-26","2014-08-14","2014-08-01","2014-07-23","2014-08-28","2014-07-28","2014-07-19",null,"2014-08-03",null,null,null,"2014-08-06","2014-08-21","2014-09-13","2014-08-04",null],[null,"Recover","Recover",null,"Recover","Recover","Recover","Death","Recover","Death","Death","Death","Recover","Recover",null,"Recover",null,null,"Death","Death","Recover",null,null,null,"Death",null,"Death","Death",null,"Death","Recover","Death","Recover","Death","Recover",null,"Death","Recover","Recover","Death",null,null,"Death","Death","Death","Death","Recover",null,"Death","Death"],["m","f","m","f","m","f","f","f","m","f","m","m","m","f","f","m","f","f","f","f","m","m","f","m","f","m","m","f","m","f","f","f","m","m","f","m","f","f","f","m","f","m","f","m","m","f","m","f","m","m"],[2,3,56,18,3,16,16,0,61,27,12,42,19,7,7,13,35,17,11,11,19,54,14,28,6,3,31,6,67,14,10,21,20,45,1,12,3,15,20,36,7,13,14,3,10,1,0,20,26,14],["years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years"],[2,3,56,18,3,16,16,0,61,27,12,42,19,7,7,13,35,17,11,11,19,54,14,28,6,3,31,6,67,14,10,21,20,45,1,12,3,15,20,36,7,13,14,3,10,1,0,20,26,14],["0-4","0-4","50-69","15-19","0-4","15-19","15-19","0-4","50-69","20-29","10-14","30-49","15-19","5-9","5-9","10-14","30-49","15-19","10-14","10-14","15-19","50-69","10-14","20-29","5-9","0-4","30-49","5-9","50-69","10-14","10-14","20-29","20-29","30-49","0-4","10-14","0-4","15-19","20-29","30-49","5-9","10-14","10-14","0-4","10-14","0-4","0-4","20-29","20-29","10-14"],["0-4","0-4","55-59","15-19","0-4","15-19","15-19","0-4","60-64","25-29","10-14","40-44","15-19","5-9","5-9","10-14","35-39","15-19","10-14","10-14","15-19","50-54","10-14","25-29","5-9","0-4","30-34","5-9","65-69","10-14","10-14","20-24","20-24","45-49","0-4","10-14","0-4","15-19","20-24","35-39","5-9","10-14","10-14","0-4","10-14","0-4","0-4","20-24","25-29","10-14"],["Other","Missing","St. Mark's Maternity Hospital (SMMH)","Port Hospital","Military Hospital","Port Hospital","Missing","Missing","Missing","Missing","Port Hospital","Military Hospital","Missing","Missing","Other","Port Hospital","Port Hospital","Port Hospital","Missing","Other","Port Hospital","Port Hospital","St. Mark's Maternity Hospital (SMMH)","Missing","Other","Missing","St. Mark's Maternity Hospital (SMMH)","Military Hospital","Port Hospital","Central Hospital","Military Hospital","Central Hospital","Missing","Military Hospital","Other","Missing","Missing","Port Hospital","Port Hospital","Port Hospital","Missing","Central Hospital","Military Hospital","Other","Other","Other","Missing","St. Mark's Maternity Hospital (SMMH)","St. Mark's Maternity Hospital (SMMH)","Missing"],[-13.2157351064963,-13.2152339775486,-13.212910703914,-13.2363711169728,-13.2228638912441,-13.222625321098,-13.2331547837254,-13.2320975453153,-13.2225511595637,-13.2572163655863,-13.2206286746001,-13.253989309478,-13.2385127873491,-13.209391925612,-13.2157278814899,-13.2243437095992,-13.2336087079551,-13.21422143145,-13.2339681355349,-13.2535640411465,-13.2250089377786,-13.2160657166043,-13.2680671272333,-13.2266742923612,-13.2160179088168,-13.2482584611565,-13.2156319199566,-13.2142410663192,-13.2614879104088,-13.2452992638476,-13.2630592726116,-13.2343341712241,-13.2199077448676,-13.2227293309912,-13.2343062806506,-13.218781651651,-13.2483677722899,-13.2097478342339,-13.2680867723786,-13.2587535457526,-13.262635786914,-13.2697246824573,-13.2209026809759,-13.2330734719715,-13.2680923666905,-13.2547212675054,-13.2573683214693,-13.2137356012883,-13.2175973322257,-13.2486407324245],[8.46897295100924,8.45171855856465,8.46481700596819,8.4754761613651,8.46082377490923,8.46183062600728,8.46272931462646,8.46144367534271,8.46191259217774,8.47292327643506,8.48401630165138,8.45837125340844,8.47761705512509,8.47570184950483,8.47779946878972,8.47145134147474,8.47804840685363,8.48528034195779,8.46957530395867,8.45957352078114,8.47404889511544,8.48802917129884,8.473437335922,8.48408263734462,8.46242233645879,8.47026822126572,8.46398447480533,8.4641347894342,8.45623094629607,8.48334624336805,8.47493999153642,8.47832062438022,8.4693933891765,8.48480589906514,8.47121232619015,8.48438437371817,8.48466158574339,8.47714159984428,8.46238127010609,8.45568597813113,8.4632880274758,8.47940722413856,8.46353857052336,8.46178968158864,8.47508713872833,8.45825808128071,8.4532568143863,8.4732571907655,8.47911586641933,8.48480340615605],["f547d6",null,null,"f90f5f","11f8ea","aec8ec","893f25","133ee7",null,null,"996f3a","133ee7","37a6f6","9f6884","4802b1",null,null,null,"a75c7f","8e104d","ab634e",null,null,"b799eb",null,"5d9e4d","a15e13",null,"ea3740","beb26e","567136","894024","36e2e7","a2086d","7baf73","eb2277",null,null,"d6584f",null,"312ecf","52ea64","cfd79c","d145b7","174288",null,"53608c","3b096b","f5c142",null],["other",null,null,"other","other","other","other","other",null,null,"other","other","other","other","other",null,null,null,"other","other","other",null,null,"other",null,"other","other",null,"other","funeral","other","funeral","other","other","other","funeral",null,null,"other",null,"other","other","other","other","other",null,"funeral","other","other",null],[27,25,91,41,36,56,47,0,86,69,67,84,68,44,34,66,78,47,53,47,71,86,53,69,38,46,68,37,100,56,50,57,65,72,29,69,37,48,54,71,47,61,47,35,53,16,13,59,69,67],[48,59,238,135,71,116,87,11,226,174,112,186,174,90,91,152,214,137,117,131,150,241,131,161,80,69,188,66,233,142,110,182,164,214,26,157,39,154,133,168,100,125,123,67,134,31,36,125,183,169],[22,22,21,23,23,21,21,22,22,22,22,22,22,21,23,22,23,21,22,23,21,23,21,24,23,22,24,23,20,24,24,20,24,21,22,21,23,22,23,23,23,22,23,22,22,22,23,22,22,22],["no",null,null,"no","no","no",null,"no","no","no","no","no","no","no","no","no","no","no",null,"no","no","no","no","no",null,"no","no","no",null,null,"no","no",null,"no","no",null,null,"no","no",null,"no","no",null,"no","no","no","no","no","no",null],["no",null,null,"no","no","no",null,"no","no","no","no","no","no","no","no","no","yes","no",null,"no","no","no","yes","no",null,"no","no","yes",null,null,"no","no",null,"no","no",null,null,"no","no",null,"no","no",null,"no","yes","no","no","no","no",null],["yes",null,null,"no","yes","yes",null,"yes","yes","yes","yes","yes","yes","yes","yes","yes","yes","yes",null,"yes","yes","yes","yes","yes",null,"yes","yes","yes",null,null,"yes","yes",null,"yes","yes",null,null,"yes","yes",null,"yes","yes",null,"yes","yes","yes","yes","yes","no",null],["no",null,null,"no","no","no",null,"no","no","no","no","no","no","no","no","yes","no","no",null,"no","no","no","no","no",null,"no","no","no",null,null,"no","no",null,"no","no",null,null,"yes","yes",null,"no","no",null,"no","no","no","no","no","no",null],["yes",null,null,"no","yes","yes",null,"yes","yes","no","yes","no","no","no","yes","no","no","no",null,"no","yes","no","no","no",null,"no","no","no",null,null,"no","yes",null,"yes","yes",null,null,"yes","yes",null,"yes","yes",null,"yes","yes","no","yes","yes","yes",null],[36.8,36.9,36.9,36.8,36.9,37.6,37.3,37,36.4,35.9,36.5,36.9,36.5,37.1,36.5,37.3,37,38,38,36,37,36.7,36.9,36.5,37,36.5,37.6,36.6,36.6,36.2,36.4,37.1,37.5,37.5,37.4,36.9,36.4,37.3,37,37.8,36.5,37.5,36.7,37,37.3,36.6,36.5,36.6,37.6,36.8],[null,"09:36","16:48","11:22","12:60","14:13","14:33","09:25","11:16","10:55","16:03","11:14","12:42","11:06","09:10","08:45",null,"15:41","13:34","18:58","12:43","16:33","14:29","07:18","08:11","16:32","16:17","07:32","17:45",null,"13:24","14:43","02:33","11:36","17:28","16:27",null,"20:49",null,"11:38","14:25","13:42","21:22","13:33","19:06","17:14","20:09",null,"10:23","09:09"],[117.1875,71.8184429761563,16.0652496292635,22.4965706447188,71.4144019043841,41.6171224732461,62.0953890870657,0,16.8376536925366,22.7903289734443,53.4119897959184,24.2802636142907,22.4600343506408,54.320987654321,41.0578432556455,28.5664819944598,17.0320552013276,25.0412914912888,38.7172182043977,27.3876813705495,31.5555555555556,14.8069075945662,30.8839811199813,26.6193433895297,59.375,96.6183574879227,19.2394748755093,84.9403122130395,18.4199377406104,27.7722674072605,41.3223140495868,17.2080666586161,24.1671624033314,15.7218971089178,428.994082840237,27.9930220292912,243.261012491782,20.2395007589813,30.527446435638,25.15589569161,47,39.04,31.0661643201798,77.9683671196257,29.5165961238583,166.493236212279,100.308641975309,37.76,20.6037803457852,23.458562375267],[2,1,2,2,1,1,2,1,1,2,2,2,1,0,2,0,1,1,2,2,1,1,1,0,2,1,1,2,1,0,0,2,1,1,2,2,1,0,2,2,0,2,0,0,2,2,null,1,0,1]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>case_id<\/th>\n      <th>generation<\/th>\n      <th>date_infection<\/th>\n      <th>date_onset<\/th>\n      <th>date_hospitalisation<\/th>\n      <th>date_outcome<\/th>\n      <th>outcome<\/th>\n      <th>gender<\/th>\n      <th>age<\/th>\n      <th>age_unit<\/th>\n      <th>age_years<\/th>\n      <th>age_cat<\/th>\n      <th>age_cat5<\/th>\n      <th>hospital<\/th>\n      <th>lon<\/th>\n      <th>lat<\/th>\n      <th>infector<\/th>\n      <th>source<\/th>\n      <th>wt_kg<\/th>\n      <th>ht_cm<\/th>\n      <th>ct_blood<\/th>\n      <th>fever<\/th>\n      <th>chills<\/th>\n      <th>cough<\/th>\n      <th>aches<\/th>\n      <th>vomit<\/th>\n      <th>temp<\/th>\n      <th>time_admission<\/th>\n      <th>bmi<\/th>\n      <th>days_onset_hosp<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":[1,8,10,14,15,18,19,20,26,28,29]}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="nettoyer-les-données" class="section level3 unnumbered">
<h3>Nettoyer les données</h3>
<div id="stocker-les-variables-explicatives" class="section level4 unnumbered">
<h4>Stocker les variables explicatives</h4>
<p>Nous stockons les noms des colonnes explicatives sous la forme d’un vecteur de caractères. Il sera référencé plus tard.</p>
<div class="sourceCode" id="cb967"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb967-1"><a href="regression.html#cb967-1" aria-hidden="true" tabindex="-1"></a><span class="do">## definir les variables d&#39;interet </span></span>
<span id="cb967-2"><a href="regression.html#cb967-2" aria-hidden="true" tabindex="-1"></a>explanatory_vars <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;gender&quot;</span>, <span class="st">&quot;fever&quot;</span>, <span class="st">&quot;chills&quot;</span>, <span class="st">&quot;cough&quot;</span>, <span class="st">&quot;aches&quot;</span>, <span class="st">&quot;vomit&quot;</span>)</span></code></pre></div>
</div>
<div id="convertir-en-1-et-0-.non-numéroté" class="section level4" number="19.1.0.1">
<h4><span class="header-section-number">19.1.0.1</span> Convertir en 1 et 0 {.non numéroté}</h4>
<p>Ci-dessous, nous convertissons les colonnes explicatives de “yes”/“no”, “m”/“f”, et “dead”/“alive” en <strong>1 / 0</strong>, pour se conformer avec les attentes des modèles de régression logistique. Pour faire cela efficacement, nous avons utilisé <code>across()</code> de <strong>dplyr</strong> pour transformer plusieurs colonnes en une seule fois. La fonction que nous appliquons à chaque colonne est <code>case_when()</code> (également <strong>dplyr</strong>) qui applique une logique pour convertir les valeurs spécifiées en 1 et 0. Voir les sections sur <code>across()</code> et <code>case_when()</code> dans la page <a href="cleaning_data.html#cleaning_data">Nettoyage de données et fonctions essentielles</a>).</p>
<p>Note : le “.” ci-dessous représente la colonne qui est traitée par <code>across()</code> à ce moment-là.</p>
<div class="sourceCode" id="cb968"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb968-1"><a href="regression.html#cb968-1" aria-hidden="true" tabindex="-1"></a><span class="do">## convertir les  variables dichotomique   en  0/1 </span></span>
<span id="cb968-2"><a href="regression.html#cb968-2" aria-hidden="true" tabindex="-1"></a>linelist <span class="ot">&lt;-</span> linelist <span class="sc">%&gt;%</span>  </span>
<span id="cb968-3"><a href="regression.html#cb968-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(                                      </span>
<span id="cb968-4"><a href="regression.html#cb968-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">.cols =</span> <span class="fu">all_of</span>(<span class="fu">c</span>(explanatory_vars, <span class="st">&quot;outcome&quot;</span>)),  <span class="do">## pour chaque colonne listée et &quot;résultat&quot;</span></span>
<span id="cb968-5"><a href="regression.html#cb968-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">.fns =</span> <span class="sc">~</span><span class="fu">case_when</span>(                              </span>
<span id="cb968-6"><a href="regression.html#cb968-6" aria-hidden="true" tabindex="-1"></a>      . <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;m&quot;</span>, <span class="st">&quot;yes&quot;</span>, <span class="st">&quot;Death&quot;</span>)   <span class="sc">~</span> <span class="dv">1</span>,           <span class="do">## recoder male, yes et death en 1</span></span>
<span id="cb968-7"><a href="regression.html#cb968-7" aria-hidden="true" tabindex="-1"></a>      . <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;f&quot;</span>, <span class="st">&quot;no&quot;</span>,  <span class="st">&quot;Recover&quot;</span>) <span class="sc">~</span> <span class="dv">0</span>,           <span class="do">## female, no and recover en 0</span></span>
<span id="cb968-8"><a href="regression.html#cb968-8" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span>                            <span class="sc">~</span> <span class="cn">NA_real_</span>)    <span class="do">## autre definir comme valeurs manquantes</span></span>
<span id="cb968-9"><a href="regression.html#cb968-9" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb968-10"><a href="regression.html#cb968-10" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
</div>
<div id="supprimer-les-lignes-avec-des-valeurs-manquantes" class="section level4 unnumbered">
<h4>Supprimer les lignes avec des valeurs manquantes</h4>
<p>Pour supprimer les lignes avec des valeurs manquantes, vous pouvez utiliser la fonction <strong>tidyr</strong> <code>drop_na()</code>. Cependant, nous ne voulons l’utiliser que pour les lignes qui ont des valeurs manquantes dans les colonnes qui nous intéressent.</p>
<p>La première chose que nous devons faire est de nous assurer que notre vecteur <code>explanatory_vars</code> exlu la colonne <code>age</code> (<code>age</code> aurait produit une erreur dans l’opération précédente <code>case_when()</code>, qui ne concernait que les variables dichotomiques). Ensuite, nous envoyons la liste de lignes à <code>drop_na()</code> pour enlever toutes les lignes avec des valeurs manquantes dans la colonne <code>outcome</code> ou dans l’une des colonnes <code>explanatory_vars</code>.</p>
<p>Avant d’exécuter le code, le nombre de lignes dans la <code>linelist</code> est <code>nrow(linelist)</code>.</p>
<div class="sourceCode" id="cb969"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb969-1"><a href="regression.html#cb969-1" aria-hidden="true" tabindex="-1"></a><span class="do">## ajout de la catégorie d&#39;âge aux variables explicatives </span></span>
<span id="cb969-2"><a href="regression.html#cb969-2" aria-hidden="true" tabindex="-1"></a>explanatory_vars <span class="ot">&lt;-</span> <span class="fu">c</span>(explanatory_vars, <span class="st">&quot;age_cat&quot;</span>)</span>
<span id="cb969-3"><a href="regression.html#cb969-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb969-4"><a href="regression.html#cb969-4" aria-hidden="true" tabindex="-1"></a><span class="do">## supprimer les lignes avec des informations manquantes pour les variables d&#39;intérêt </span></span>
<span id="cb969-5"><a href="regression.html#cb969-5" aria-hidden="true" tabindex="-1"></a>linelist <span class="ot">&lt;-</span> linelist <span class="sc">%&gt;%</span> </span>
<span id="cb969-6"><a href="regression.html#cb969-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>(<span class="fu">any_of</span>(<span class="fu">c</span>(<span class="st">&quot;outcome&quot;</span>, explanatory_vars)))</span></code></pre></div>
<p>le nombre de lignes restant dans <code>linelist</code> est de <code>nrow(linelist)</code>.</p>
<!-- ======================================================= -->
</div>
</div>
</div>
<div id="univarié" class="section level2" number="19.2">
<h2><span class="header-section-number">19.2</span> Univarié</h2>
<p>Tout comme dans la page sur les <a href="descriptive_tables.html#descriptive_tables">Tableaux descriptifs</a>, votre cas d’utilisation déterminera le package R que vous utiliserez. Nous vous présentons deux options pour effectuer une analyse univariée :</p>
<ul>
<li>Utiliser les fonctions disponibles dans <strong>base</strong> R pour afficher rapidement les résultats sur la console. Utilisez le package <strong>broom</strong> pour mettre de l’ordre dans les résultats.<br />
</li>
<li>Utilisez le package <strong>gtsummary</strong> pour modéliser et obtenir des résultats prêts à être publiés.</li>
</ul>
<!-- ======================================================= -->
<div id="base-r-2" class="section level3 unnumbered">
<h3><strong>base</strong> R</h3>
<div id="régression-linéaire" class="section level4 unnumbered">
<h4>Régression linéaire</h4>
<p>La fonction <strong>base</strong> R <code>lm()</code> effectue une régression linéaire, évaluant la relation entre une réponse numérique et des variables explicatives qui sont supposées avoir une relation linéaire.</p>
<p>Fournissez l’équation sous forme de formule, avec les noms des colonnes de réponse et d’explication séparés par un tilde <code>~</code>. Spécifiez également l’ensemble de données à <code>data =</code>. Définissez les résultats du modèle comme un objet R, à utiliser ultérieurement.</p>
<div class="sourceCode" id="cb970"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb970-1"><a href="regression.html#cb970-1" aria-hidden="true" tabindex="-1"></a>lm_results <span class="ot">&lt;-</span> <span class="fu">lm</span>(ht_cm <span class="sc">~</span> age, <span class="at">data =</span> linelist)</span></code></pre></div>
<p>Vous pouvez ensuite exécuter <code>summary()</code> sur les résultats du modèle pour voir les coefficients (Estimations), la valeur P, les résidus, et d’autres mesures.</p>
<div class="sourceCode" id="cb971"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb971-1"><a href="regression.html#cb971-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(lm_results)</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = ht_cm ~ age, data = linelist)
## 
## Residuals:
##      Min       1Q   Median       3Q      Max 
## -128.579  -15.854    1.177   15.887  175.483 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)  69.9051     0.5979   116.9   &lt;2e-16 ***
## age           3.4354     0.0293   117.2   &lt;2e-16 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 23.75 on 4165 degrees of freedom
## Multiple R-squared:  0.7675, Adjusted R-squared:  0.7674 
## F-statistic: 1.375e+04 on 1 and 4165 DF,  p-value: &lt; 2.2e-16</code></pre>
<p>Vous pouvez également utiliser la fonction <code>tidy()</code> du package <strong>broom</strong> pour afficher les résultats dans un tableau.
les résultats dans un tableau. Les résultats nous indiquent que pour chaque année de plus dans l’âge d’un individu, la taille augmente de de 3,5 cm, ce qui est statistiquement significatif.</p>
<div class="sourceCode" id="cb973"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb973-1"><a href="regression.html#cb973-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tidy</span>(lm_results)</span></code></pre></div>
<pre><code>## # A tibble: 2 × 5
##   term        estimate std.error statistic p.value
##   &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;
## 1 (Intercept)    69.9     0.598       117.       0
## 2 age             3.44    0.0293      117.       0</code></pre>
<p>Vous pouvez également utiliser cette régression pour l’ajouter à un <strong>ggplot</strong>.
d’abord prendre les points des données observées et la colonne predite à partir de la ligne ajustée dans un dataframe en utilisant la fonction <code>augment()</code> de <strong>broom</strong>.</p>
<div class="sourceCode" id="cb975"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb975-1"><a href="regression.html#cb975-1" aria-hidden="true" tabindex="-1"></a><span class="do">## rassembler les points de régression et les données observées dans un seul ensemble de données</span></span>
<span id="cb975-2"><a href="regression.html#cb975-2" aria-hidden="true" tabindex="-1"></a>points <span class="ot">&lt;-</span> <span class="fu">augment</span>(lm_results)</span>
<span id="cb975-3"><a href="regression.html#cb975-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb975-4"><a href="regression.html#cb975-4" aria-hidden="true" tabindex="-1"></a><span class="do">## creer un graphique  avec age comme   axe  des abscisses</span></span>
<span id="cb975-5"><a href="regression.html#cb975-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(points, <span class="fu">aes</span>(<span class="at">x =</span> age)) <span class="sc">+</span> </span>
<span id="cb975-6"><a href="regression.html#cb975-6" aria-hidden="true" tabindex="-1"></a>  <span class="do">## ajouter point pour l&#39;ordonné</span></span>
<span id="cb975-7"><a href="regression.html#cb975-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">y =</span> ht_cm)) <span class="sc">+</span> </span>
<span id="cb975-8"><a href="regression.html#cb975-8" aria-hidden="true" tabindex="-1"></a>  <span class="do">## ajouter de la droite de régression linéaire</span></span>
<span id="cb975-9"><a href="regression.html#cb975-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> .fitted), <span class="at">colour =</span> <span class="st">&quot;red&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/lin_reg_res_plot-1.png" width="672" /></p>
<p>Il est également possible d’ajouter une droite de régression linéaire simple dans <strong>ggplot</strong>
en utilisant la fonction <code>geom_smooth()</code>.</p>
<div class="sourceCode" id="cb976"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb976-1"><a href="regression.html#cb976-1" aria-hidden="true" tabindex="-1"></a><span class="do">## ajoute ta donnée dans le graphe</span></span>
<span id="cb976-2"><a href="regression.html#cb976-2" aria-hidden="true" tabindex="-1"></a> <span class="fu">ggplot</span>(linelist, <span class="fu">aes</span>(<span class="at">x =</span> age, <span class="at">y =</span> ht_cm)) <span class="sc">+</span> </span>
<span id="cb976-3"><a href="regression.html#cb976-3" aria-hidden="true" tabindex="-1"></a>  <span class="do">## montrer les points</span></span>
<span id="cb976-4"><a href="regression.html#cb976-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb976-5"><a href="regression.html#cb976-5" aria-hidden="true" tabindex="-1"></a>  <span class="do">## ajouter une regression linéaire</span></span>
<span id="cb976-6"><a href="regression.html#cb976-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;lm&quot;</span>, <span class="at">se =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<pre><code>## `geom_smooth()` using formula = &#39;y ~ x&#39;</code></pre>
<p><img src="_main_files/figure-html/geom_smooth-1.png" width="672" /></p>
<p>Consultez la section Ressources à la fin de ce chapitre pour obtenir des didacticiels plus détaillés.</p>
</div>
<div id="régression-logistique" class="section level4 unnumbered">
<h4>Régression logistique</h4>
<p>La fonction <code>glm()</code> du package <strong>stats</strong> (faisant partie de <strong>base</strong> R) est utilisée pour ajuster les modèles linéaires généralisés (GLM).</p>
<p><code>glm()</code> peut être utilisée pour la régression logistique univariée et multivariée (par exemple pour obtenir des Odds Ratios). Voici les parties principales :</p>
<div class="sourceCode" id="cb978"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb978-1"><a href="regression.html#cb978-1" aria-hidden="true" tabindex="-1"></a><span class="co"># arguments for glm()</span></span>
<span id="cb978-2"><a href="regression.html#cb978-2" aria-hidden="true" tabindex="-1"></a><span class="fu">glm</span>(formula, family, data, weights, subset, ...)</span></code></pre></div>
<ul>
<li><code>formula =</code> Le modèle est fourni à <code>glm()</code> sous forme d’équation, avec le résultat à gauche et les variables explicatives à droite d’un tilde <code>~</code>.<br />
</li>
<li><code>family =</code> Ceci détermine le type de modèle à exécuter. Pour la régression logistique, utilisez <code>famille = "binomiale"</code>, pour le poisson utilisez <code>famille = "poisson"</code>. D’autres exemples sont dans le tableau ci-dessous.<br />
</li>
<li><code>data =</code> Spécifiez votre dataframe</li>
</ul>
<p>Si nécessaire, vous pouvez également spécifier la fonction de lien via la syntaxe <code>family = familytype(link = "linkfunction"))</code>. Vous pouvez en savoir plus dans la documentation sur les autres familles et les arguments optionnels tels que <code>weights =</code> et <code>subset =</code> (<code>?glm</code>).</p>
<table>
<thead>
<tr class="header">
<th>Famille</th>
<th>Fonction de liaison par défaut</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>"binomial"</code></td>
<td><code>(lien = "logit")</code></td>
</tr>
<tr class="even">
<td><code>"gaussian"</code></td>
<td><code>(lien = "identity")</code></td>
</tr>
<tr class="odd">
<td><code>"Gamma"</code></td>
<td><code>(lien = "inverse")</code></td>
</tr>
<tr class="even">
<td><code>"inverse.gaussian"</code></td>
<td><code>(link = "1/mu^2")</code></td>
</tr>
<tr class="odd">
<td><code>"poisson"</code></td>
<td><code>(lien = "log")</code></td>
</tr>
<tr class="even">
<td><code>"quasi"</code></td>
<td><code>(lien = "identity", variance = "constant")</code></td>
</tr>
<tr class="odd">
<td><code>"quasibinomial"</code></td>
<td><code>(lien = "logit")</code></td>
</tr>
<tr class="even">
<td><code>"quasipoisson"</code></td>
<td><code>(lien = "log")</code></td>
</tr>
</tbody>
</table>
<p>Lorsque vous exécutez <code>glm()</code>, il est plus courant de sauvegarder les résultats comme un objet R nommé. Vous pouvez ensuite afficher les résultats sur votre console en utilisant <code>summary()</code> comme indiqué ci-dessous, ou effectuer d’autres opérations sur les résultats (par exemple, exponentiation).</p>
<p>Si vous avez besoin d’exécuter une régression binomiale négative, vous pouvez utiliser le package <strong>MASS</strong> ; le <code>glm.nb()</code> utilise la même syntaxe que <code>glm()</code>.
Pour une présentation des différentes régressions, consultez la <a href="https://stats.idre.ucla.edu/other/dae/">UCLA stats page</a>.</p>
</div>
<div id="univarié-glm" class="section level4 unnumbered">
<h4>Univarié <code>glm()</code></h4>
<p>Dans cet exemple, nous évaluons la relation entre différentes catégories d’âge et le résultat du décès (codé 1 dans la section Préparation). Nous présentons ci-dessous un modèle univarié de <code>outcome</code> par <code>age_cat</code>. Nous enregistrons la sortie du modèle sous le nom de <code>model</code> et nous l’affichons ensuite avec <code>summary()</code> sur la console. Notez que les estimations fournies sont les <em>log odds</em> et que le niveau de base est le premier niveau du facteur <code>age_cat</code> (“0-4”).</p>
<div class="sourceCode" id="cb979"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb979-1"><a href="regression.html#cb979-1" aria-hidden="true" tabindex="-1"></a>model <span class="ot">&lt;-</span> <span class="fu">glm</span>(outcome <span class="sc">~</span> age_cat, <span class="at">family =</span> <span class="st">&quot;binomial&quot;</span>, <span class="at">data =</span> linelist)</span>
<span id="cb979-2"><a href="regression.html#cb979-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model)</span></code></pre></div>
<pre><code>## 
## Call:
## glm(formula = outcome ~ age_cat, family = &quot;binomial&quot;, data = linelist)
## 
## Deviance Residuals: 
##    Min      1Q  Median      3Q     Max  
## -1.339  -1.278   1.024   1.080   1.354  
## 
## Coefficients:
##               Estimate Std. Error z value Pr(&gt;|z|)   
## (Intercept)   0.233738   0.072805   3.210  0.00133 **
## age_cat5-9   -0.062898   0.101733  -0.618  0.53640   
## age_cat10-14  0.138204   0.107186   1.289  0.19726   
## age_cat15-19 -0.005565   0.113343  -0.049  0.96084   
## age_cat20-29  0.027511   0.102133   0.269  0.78765   
## age_cat30-49  0.063764   0.113771   0.560  0.57517   
## age_cat50-69 -0.387889   0.259240  -1.496  0.13459   
## age_cat70+   -0.639203   0.915770  -0.698  0.48518   
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## (Dispersion parameter for binomial family taken to be 1)
## 
##     Null deviance: 5712.4  on 4166  degrees of freedom
## Residual deviance: 5705.1  on 4159  degrees of freedom
## AIC: 5721.1
## 
## Number of Fisher Scoring iterations: 4</code></pre>
<p>Pour modifier le niveau de base d’une variable donnée, assurez-vous que la colonne est de classe facteur et déplacez le niveau désiré à la première position avec <code>fct_relevel()</code> (voir la page sur <a href="factors.html#factors">Factors</a>). Par exemple, ci-dessous, nous prenons la colonne <code>age_cat</code> et définissons “20-29” comme niveau de base avant de passer le dataframe modifié dans <code>glm()</code>.</p>
<div class="sourceCode" id="cb981"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb981-1"><a href="regression.html#cb981-1" aria-hidden="true" tabindex="-1"></a>linelist <span class="sc">%&gt;%</span></span>
<span id="cb981-2"><a href="regression.html#cb981-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">age_cat =</span> <span class="fu">fct_relevel</span>(age_cat, <span class="st">&quot;20-29&quot;</span>, <span class="at">after =</span> <span class="dv">0</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb981-3"><a href="regression.html#cb981-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">glm</span>(<span class="at">formula =</span> outcome <span class="sc">~</span> age_cat, <span class="at">family =</span> <span class="st">&quot;binomial&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb981-4"><a href="regression.html#cb981-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summary</span>()</span></code></pre></div>
<pre><code>## 
## Call:
## glm(formula = outcome ~ age_cat, family = &quot;binomial&quot;, data = .)
## 
## Deviance Residuals: 
##    Min      1Q  Median      3Q     Max  
## -1.339  -1.278   1.024   1.080   1.354  
## 
## Coefficients:
##              Estimate Std. Error z value Pr(&gt;|z|)    
## (Intercept)   0.26125    0.07163   3.647 0.000265 ***
## age_cat0-4   -0.02751    0.10213  -0.269 0.787652    
## age_cat5-9   -0.09041    0.10090  -0.896 0.370220    
## age_cat10-14  0.11069    0.10639   1.040 0.298133    
## age_cat15-19 -0.03308    0.11259  -0.294 0.768934    
## age_cat30-49  0.03625    0.11302   0.321 0.748390    
## age_cat50-69 -0.41540    0.25891  -1.604 0.108625    
## age_cat70+   -0.66671    0.91568  -0.728 0.466546    
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## (Dispersion parameter for binomial family taken to be 1)
## 
##     Null deviance: 5712.4  on 4166  degrees of freedom
## Residual deviance: 5705.1  on 4159  degrees of freedom
## AIC: 5721.1
## 
## Number of Fisher Scoring iterations: 4</code></pre>
</div>
<div id="affichage-des-résultats" class="section level4 unnumbered">
<h4>Affichage des résultats</h4>
<p>Pour la plupart des utilisations, plusieurs modifications doivent être apportées aux sorties ci-dessus. La fonction <code>tidy()</code> du package <strong>broom</strong> est pratique pour rendre les résultats du modèle lisibles et comprehensibles.</p>
<p>Nous montrons ici comment combiner les sorties du modèle avec une table de comptage.</p>
<ol style="list-style-type: decimal">
<li>Obtenez les estimations du logarithm de l’odd ratio <em>exponentiées</em> et les intervalles de confiance en passant le modèle à <code>tidy()</code> et en définissant <code>exponentiate = TRUE</code> et <code>conf.int = TRUE</code>.</li>
</ol>
<div class="sourceCode" id="cb983"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb983-1"><a href="regression.html#cb983-1" aria-hidden="true" tabindex="-1"></a>model <span class="ot">&lt;-</span> <span class="fu">glm</span>(outcome <span class="sc">~</span> age_cat, <span class="at">family =</span> <span class="st">&quot;binomial&quot;</span>, <span class="at">data =</span> linelist) <span class="sc">%&gt;%</span> </span>
<span id="cb983-2"><a href="regression.html#cb983-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tidy</span>(<span class="at">exponentiate =</span> <span class="cn">TRUE</span>, <span class="at">conf.int =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span>        <span class="co"># exponentiée et  généré IC</span></span>
<span id="cb983-3"><a href="regression.html#cb983-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric), round, <span class="at">digits =</span> <span class="dv">2</span>))  <span class="co"># arrondir tous les colonnes numeriques</span></span></code></pre></div>
<p>Voici la sortie du tibble <code>model</code> :</p>
<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-cecbbd16d713534e9d55" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-cecbbd16d713534e9d55">{"x":{"filter":"none","vertical":false,"data":[["(Intercept)","age_cat5-9","age_cat10-14","age_cat15-19","age_cat20-29","age_cat30-49","age_cat50-69","age_cat70+"],[1.26,0.94,1.15,0.99,1.03,1.07,0.68,0.53],[0.07,0.1,0.11,0.11,0.1,0.11,0.26,0.92],[3.21,-0.62,1.29,-0.05,0.27,0.56,-1.5,-0.7],[0,0.54,0.2,0.96,0.79,0.58,0.13,0.49],[1.1,0.77,0.93,0.8,0.84,0.85,0.41,0.07],[1.46,1.15,1.42,1.24,1.26,1.33,1.13,3.2]],"container":"<table class=\"white-space: nowrap\">\n  <thead>\n    <tr>\n      <th>term<\/th>\n      <th>estimate<\/th>\n      <th>std.error<\/th>\n      <th>statistic<\/th>\n      <th>p.value<\/th>\n      <th>conf.low<\/th>\n      <th>conf.high<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":8,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6]}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[8,10,25,50,100]},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script>
<ol start="2" style="list-style-type: decimal">
<li>Combinez les résultats de ces modèles avec un tableau de comptage. Ci-dessous, nous créons un tableau de comptage croisé avec la fonction <code>tabyl()</code> de <strong>janitor</strong>, comme indiqué dans la page <a href="descriptive_tables.html#descriptive_tables">Tableaux descriptifs</a>.</li>
</ol>
<div class="sourceCode" id="cb984"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb984-1"><a href="regression.html#cb984-1" aria-hidden="true" tabindex="-1"></a>counts_table <span class="ot">&lt;-</span> linelist <span class="sc">%&gt;%</span> </span>
<span id="cb984-2"><a href="regression.html#cb984-2" aria-hidden="true" tabindex="-1"></a>  janitor<span class="sc">::</span><span class="fu">tabyl</span>(age_cat, outcome)</span></code></pre></div>
<!-- * Grouper les lignes par résultat, et obtenir les effectifs par catégorie d'âge -->
<!-- * Effectuez un pivot plus large pour que les colonnes soient `age_cat`, `0`, et `1` -->
<!-- * Supprimez la ligne pour `NA` `age_cat`, si applicable, pour l'aligner avec les résultats du modèle -->
<!-- ```{r} -->
<!-- counts_table <- linelist %>% -->
<!-- filter(!is.na(outcome) & !is.na(age_cat)) %>% # s'assurer que outcome et age_cat sont présents -->
<!-- group_by(outcome) %>% # obtient les effectifs de la variable d'intérêt groupés par outcome -->
<!-- count(age_cat) %>% ## obtient le nombre ou les lignes par combinaisons uniques outcome-catégorie d'âge -->
<!-- pivot_wider(names_from = outcome, values_from = n) ## étaler les données dans un format large (comme dans un tableau croisé) -->
<!-- ``` -->
<p>Voici à quoi ressemble ce dataframe <code>counts_table</code> :</p>
<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-e0f3f85e92a1db9890e8" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-e0f3f85e92a1db9890e8">{"x":{"filter":"none","vertical":false,"data":[["0-4","5-9","10-14","15-19","20-29","30-49","50-69","70+"],[338,365,273,238,345,228,35,3],[427,433,396,299,448,307,30,2]],"container":"<table class=\"white-space: nowrap\">\n  <thead>\n    <tr>\n      <th>age_cat<\/th>\n      <th>0<\/th>\n      <th>1<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":8,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":[1,2]}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[8,10,25,50,100]},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script>
<p>Maintenant, nous pouvons lier les résultats de <code>counts_table</code> et de <code>model</code> ensemble horizontalement avec <code>bind_cols()</code> (<strong>dplyr</strong>). Rappelez-vous qu’avec <code>bind_cols()</code> les lignes des deux dataframes doivent être parfaitement alignées. Dans ce code, comme nous effectuons des liaisons dans une chaîne de commandes, nous utilisons <code>.</code> pour représenter l’objet <code>counts_table</code> lorsque nous le lions à <code>model</code>. Pour terminer le processus, nous utilisons <code>select()</code> pour choisir les colonnes souhaitées et leur ordre, et enfin nous appliquons la fonction <strong>base</strong> R <code>round()</code> sur toutes les colonnes numériques pour spécifier 2 décimales.</p>
<div class="sourceCode" id="cb985"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb985-1"><a href="regression.html#cb985-1" aria-hidden="true" tabindex="-1"></a>combined <span class="ot">&lt;-</span> counts_table <span class="sc">%&gt;%</span>           <span class="co"># debutons avec un tableau de comptage</span></span>
<span id="cb985-2"><a href="regression.html#cb985-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_cols</span>(., model) <span class="sc">%&gt;%</span>              <span class="co"># combiner avec les sorties de la regression</span></span>
<span id="cb985-3"><a href="regression.html#cb985-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(term, <span class="dv">2</span><span class="sc">:</span><span class="dv">3</span>, estimate,          <span class="co"># selectionner and arranger les cols</span></span>
<span id="cb985-4"><a href="regression.html#cb985-4" aria-hidden="true" tabindex="-1"></a>         conf.low, conf.high, p.value) <span class="sc">%&gt;%</span> </span>
<span id="cb985-5"><a href="regression.html#cb985-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric), round, <span class="at">digits =</span> <span class="dv">2</span>)) <span class="do">## arrondir à deux chiffres apres la virgule</span></span></code></pre></div>
<p>Voici à quoi ressemble le dataframe combiné, affiché joliment comme une image avec une fonction de <strong>flextable</strong>. La section <a href="tables_presentation.html#tables_presentation">Tableau pour la presentationn</a> explique comment personnaliser de tels tableaux avec <strong>flextable</strong>, ou vous pouvez utiliser de nombreux autres packages tels que <strong>knitr</strong> ou <strong>GT</strong>.</p>
<div class="sourceCode" id="cb986"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb986-1"><a href="regression.html#cb986-1" aria-hidden="true" tabindex="-1"></a>combined <span class="ot">&lt;-</span> combined <span class="sc">%&gt;%</span> </span>
<span id="cb986-2"><a href="regression.html#cb986-2" aria-hidden="true" tabindex="-1"></a>  flextable<span class="sc">::</span><span class="fu">qflextable</span>()</span></code></pre></div>
</div>
<div id="mettre-en-boucle-plusieurs-modèles-univariés" class="section level4 unnumbered">
<h4>Mettre en Boucle plusieurs modèles univariés</h4>
<p>Nous présentons ci-dessous une méthode utilisant <code>glm()</code> et <code>tidy()</code> pour une approche plus simple, voir la section sur <strong>gtsummary</strong>.</p>
<p>Pour exécuter les modèles sur plusieurs variables d’explicative afin de produire des odds ratios univariés (c’est-à-dire sans contrôle des autres variables), vous pouvez utiliser l’approche ci-dessous. Elle utilise <code>str_c()</code> de <strong>stringr</strong> pour créer des formules univariées (voir <a href="character_strings.html#character_strings">Caractères et chaînes de caractères</a>), exécute la régression <code>glm()</code> sur chaque formule, passe chaque sortie <code>glm()</code> à <code>tidy()</code> et enfin rassemble toutes les sorties du modèle avec <code>bind_rows()</code> de <strong>tidyr</strong>. Cette approche utilise <code>map()</code> du packages <strong>purrr</strong> pour itérer - voir la page sur [Iteration, loops, and lists] pour plus d’informations sur cet outil.</p>
<ol style="list-style-type: decimal">
<li><p>Créez un vecteur de noms de colonnes des variables explicatives. Nous l’avons déjà en tant que <code>explanatory_vars</code> dans la section Préparation de cette page.</p></li>
<li><p>Utilisez <code>str_c()</code> pour créer plusieurs formules de chaîne, avec <code>outcome</code> à gauche, et un nom de colonne de <code>explanatory_vars</code> à droite. Le point <code>.</code> remplace le nom de la colonne dans <code>explanatory_vars</code>.</p></li>
</ol>
<div class="sourceCode" id="cb987"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb987-1"><a href="regression.html#cb987-1" aria-hidden="true" tabindex="-1"></a>explanatory_vars <span class="sc">%&gt;%</span> <span class="fu">str_c</span>(<span class="st">&quot;outcome ~ &quot;</span>, .)</span></code></pre></div>
<pre><code>## [1] &quot;outcome ~ gender&quot;  &quot;outcome ~ fever&quot;   &quot;outcome ~ chills&quot;  &quot;outcome ~ cough&quot;   &quot;outcome ~ aches&quot;   &quot;outcome ~ vomit&quot;  
## [7] &quot;outcome ~ age_cat&quot;</code></pre>
<ol start="3" style="list-style-type: decimal">
<li><p>Passez ces formules de chaîne à <code>map()</code> et définissez <code>~glm()</code> comme la fonction à appliquer à chaque entrée. Dans <code>glm()</code>, définissez la formule de régression comme <code>as.formula(.x)</code> où <code>.x</code> sera remplacé par la formule de chaîne définie dans l’étape précédente. <code>map()</code> bouclera sur chacune des formules en format chaîne de caractères, en effectuant des régressions pour chacune d’entre elles.</p></li>
<li><p>Les résultats de cette première <code>map()</code> sont passés à une seconde commande <code>map()</code>, qui applique <code>tidy()</code> aux résultats de la régression.</p></li>
<li><p>Finalement, la sortie de la seconde commande <code>map()</code> (une liste de dataframe triés) est condensée avec <code>bind_rows()</code>, qui donne un dataframe avec tous les résultats univariés.</p></li>
</ol>
<div class="sourceCode" id="cb989"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb989-1"><a href="regression.html#cb989-1" aria-hidden="true" tabindex="-1"></a>models <span class="ot">&lt;-</span> explanatory_vars <span class="sc">%&gt;%</span>       <span class="co"># commencer avec les variables d&#39;interets</span></span>
<span id="cb989-2"><a href="regression.html#cb989-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_c</span>(<span class="st">&quot;outcome ~ &quot;</span>, .) <span class="sc">%&gt;%</span>         <span class="co"># combiner chaque variable dans une formule (&quot;outcome ~ variable of interest&quot;)</span></span>
<span id="cb989-3"><a href="regression.html#cb989-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb989-4"><a href="regression.html#cb989-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># itérer à travers chaque formule univariée</span></span>
<span id="cb989-5"><a href="regression.html#cb989-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(                               </span>
<span id="cb989-6"><a href="regression.html#cb989-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">.f =</span> <span class="sc">~</span><span class="fu">glm</span>(                       <span class="co"># passer les formules une par une à glm()</span></span>
<span id="cb989-7"><a href="regression.html#cb989-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">formula =</span> <span class="fu">as.formula</span>(.x),      <span class="co"># dans glm(), la formule de la chaîne de caractère est .x</span></span>
<span id="cb989-8"><a href="regression.html#cb989-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">family =</span> <span class="st">&quot;binomial&quot;</span>,           <span class="co"># spécifier le type de glm (logistique)</span></span>
<span id="cb989-9"><a href="regression.html#cb989-9" aria-hidden="true" tabindex="-1"></a>      <span class="at">data =</span> linelist)) <span class="sc">%&gt;%</span>          <span class="co"># jeu de données</span></span>
<span id="cb989-10"><a href="regression.html#cb989-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb989-11"><a href="regression.html#cb989-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># mettre en ordre chacun des résultats de la régression glm ci-dessus</span></span>
<span id="cb989-12"><a href="regression.html#cb989-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(</span>
<span id="cb989-13"><a href="regression.html#cb989-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">.f =</span> <span class="sc">~</span><span class="fu">tidy</span>(</span>
<span id="cb989-14"><a href="regression.html#cb989-14" aria-hidden="true" tabindex="-1"></a>      .x, </span>
<span id="cb989-15"><a href="regression.html#cb989-15" aria-hidden="true" tabindex="-1"></a>      <span class="at">exponentiate =</span> <span class="cn">TRUE</span>,           <span class="co"># exponentiation </span></span>
<span id="cb989-16"><a href="regression.html#cb989-16" aria-hidden="true" tabindex="-1"></a>      <span class="at">conf.int =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span>          <span class="co"># retourne les intervalles de confiance</span></span>
<span id="cb989-17"><a href="regression.html#cb989-17" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb989-18"><a href="regression.html#cb989-18" aria-hidden="true" tabindex="-1"></a>  <span class="co"># réduire la liste des résultats de la régression en un seul dataframe</span></span>
<span id="cb989-19"><a href="regression.html#cb989-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_rows</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb989-20"><a href="regression.html#cb989-20" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb989-21"><a href="regression.html#cb989-21" aria-hidden="true" tabindex="-1"></a>  <span class="co"># arrondir tous les colonnes numeriques</span></span>
<span id="cb989-22"><a href="regression.html#cb989-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric), round, <span class="at">digits =</span> <span class="dv">2</span>))</span></code></pre></div>
<p>Cette fois, l’objet final <code>models</code> est plus long car il représente maintenant les résultats combinés de plusieurs régressions univariées. Cliquez pour voir toutes les lignes de <code>model</code>.</p>
<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-dc5492602a0374032423" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-dc5492602a0374032423">{"x":{"filter":"none","vertical":false,"data":[["(Intercept)","gender","(Intercept)","fever","(Intercept)","chills","(Intercept)","cough","(Intercept)","aches","(Intercept)","vomit","(Intercept)","age_cat5-9","age_cat10-14","age_cat15-19","age_cat20-29","age_cat30-49","age_cat50-69","age_cat70+"],[1.28,1,1.28,1,1.28,1.03,1.14,1.15,1.29,0.93,1.23,1.09,1.26,0.94,1.15,0.99,1.03,1.07,0.68,0.53],[0.04,0.06,0.07,0.08,0.03,0.08,0.08,0.09,0.03,0.1,0.04,0.06,0.07,0.1,0.11,0.11,0.1,0.11,0.26,0.92],[5.67,-0.04,3.44,0.01,6.98,0.41,1.53,1.58,7.78,-0.66,4.67,1.39,3.21,-0.62,1.29,-0.05,0.27,0.56,-1.5,-0.7],[0,0.97,0,0.99,0,0.68,0.13,0.11,0,0.51,0,0.17,0,0.54,0.2,0.96,0.79,0.58,0.13,0.49],[1.18,0.88,1.11,0.85,1.19,0.89,0.97,0.97,1.21,0.76,1.13,0.96,1.1,0.77,0.93,0.8,0.84,0.85,0.41,0.07],[1.4,1.13,1.48,1.17,1.37,1.21,1.34,1.37,1.38,1.14,1.34,1.23,1.46,1.15,1.42,1.24,1.26,1.33,1.13,3.2]],"container":"<table class=\"white-space: nowrap\">\n  <thead>\n    <tr>\n      <th>term<\/th>\n      <th>estimate<\/th>\n      <th>std.error<\/th>\n      <th>statistic<\/th>\n      <th>p.value<\/th>\n      <th>conf.low<\/th>\n      <th>conf.high<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6]}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script>
<p>Comme précédemment, nous pouvons créer une table des effectifs à partir de la <code>linelist</code> pour chaque variable explicative, la lier à <code>models</code>, et faire une belle table. Nous commençons par les variables, et nous les parcourons avec <code>map()</code>. Nous itérons à travers une fonction définie par l’utilisateur qui implique la création d’une table d’effectifs avec les fonctions <strong>dplyr</strong>. Ensuite, les résultats sont combinés et liés aux résultats du modèle <code>models</code>.</p>
<div class="sourceCode" id="cb990"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb990-1"><a href="regression.html#cb990-1" aria-hidden="true" tabindex="-1"></a><span class="do">## pour chaque variable explicative</span></span>
<span id="cb990-2"><a href="regression.html#cb990-2" aria-hidden="true" tabindex="-1"></a>univ_tab_base <span class="ot">&lt;-</span> explanatory_vars <span class="sc">%&gt;%</span> </span>
<span id="cb990-3"><a href="regression.html#cb990-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(<span class="at">.f =</span> </span>
<span id="cb990-4"><a href="regression.html#cb990-4" aria-hidden="true" tabindex="-1"></a>    <span class="sc">~</span>{linelist <span class="sc">%&gt;%</span>                <span class="do">## debuter avec  linelist</span></span>
<span id="cb990-5"><a href="regression.html#cb990-5" aria-hidden="true" tabindex="-1"></a>        <span class="fu">group_by</span>(outcome) <span class="sc">%&gt;%</span>     <span class="do">## grouper le jeu de donnée par outcome</span></span>
<span id="cb990-6"><a href="regression.html#cb990-6" aria-hidden="true" tabindex="-1"></a>        <span class="fu">count</span>(.data[[.x]]) <span class="sc">%&gt;%</span>    <span class="do">## produire des comptages pour la variable d&#39;intérêt</span></span>
<span id="cb990-7"><a href="regression.html#cb990-7" aria-hidden="true" tabindex="-1"></a>        <span class="fu">pivot_wider</span>(              <span class="do">## étendre à un format large (comme dans un tableau croisé)</span></span>
<span id="cb990-8"><a href="regression.html#cb990-8" aria-hidden="true" tabindex="-1"></a>          <span class="at">names_from =</span> outcome,</span>
<span id="cb990-9"><a href="regression.html#cb990-9" aria-hidden="true" tabindex="-1"></a>          <span class="at">values_from =</span> n) <span class="sc">%&gt;%</span> </span>
<span id="cb990-10"><a href="regression.html#cb990-10" aria-hidden="true" tabindex="-1"></a>        <span class="fu">drop_na</span>(.data[[.x]]) <span class="sc">%&gt;%</span>         <span class="do">## éliminer les lignes avec des valeurs manquantes</span></span>
<span id="cb990-11"><a href="regression.html#cb990-11" aria-hidden="true" tabindex="-1"></a>        <span class="fu">rename</span>(<span class="st">&quot;variable&quot;</span> <span class="ot">=</span> .x) <span class="sc">%&gt;%</span>      <span class="do">## changer la colonne de la variable d&#39;intérêt en &quot;variable&quot;.</span></span>
<span id="cb990-12"><a href="regression.html#cb990-12" aria-hidden="true" tabindex="-1"></a>        <span class="fu">mutate</span>(<span class="at">variable =</span> <span class="fu">as.character</span>(variable))} <span class="do">## convertir en caractères, sinon les variables non-dichotomiques (catégorielles) apparaissent comme des facteurs et ne peuvent pas être fusionnées.</span></span>
<span id="cb990-13"><a href="regression.html#cb990-13" aria-hidden="true" tabindex="-1"></a>      ) <span class="sc">%&gt;%</span> </span>
<span id="cb990-14"><a href="regression.html#cb990-14" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb990-15"><a href="regression.html#cb990-15" aria-hidden="true" tabindex="-1"></a>  <span class="do">## Réduire la liste des sorties de comptage à un seul dataframe</span></span>
<span id="cb990-16"><a href="regression.html#cb990-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_rows</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb990-17"><a href="regression.html#cb990-17" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb990-18"><a href="regression.html#cb990-18" aria-hidden="true" tabindex="-1"></a>  <span class="do">## fusionner avec les sorties de la régression </span></span>
<span id="cb990-19"><a href="regression.html#cb990-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_cols</span>(., models) <span class="sc">%&gt;%</span> </span>
<span id="cb990-20"><a href="regression.html#cb990-20" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb990-21"><a href="regression.html#cb990-21" aria-hidden="true" tabindex="-1"></a>  <span class="do">## ne garder que les colonnes intéressées </span></span>
<span id="cb990-22"><a href="regression.html#cb990-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(term, <span class="dv">2</span><span class="sc">:</span><span class="dv">3</span>, estimate, conf.low, conf.high, p.value) <span class="sc">%&gt;%</span> </span>
<span id="cb990-23"><a href="regression.html#cb990-23" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb990-24"><a href="regression.html#cb990-24" aria-hidden="true" tabindex="-1"></a>  <span class="do">## arrondir les décimales</span></span>
<span id="cb990-25"><a href="regression.html#cb990-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric), round, <span class="at">digits =</span> <span class="dv">2</span>))</span></code></pre></div>
<p>Voici à quoi ressemble le dataframe. Voir la page sur les <a href="tables_presentation.html#tables_presentation">Tableau pour la presentationn</a> pour des idées sur la façon de convertir ce tableau en une jolie sortie HTML (par exemple avec <strong>flextable</strong>).</p>
<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-305401a0d9281b31d071" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-305401a0d9281b31d071">{"x":{"filter":"none","vertical":false,"data":[["(Intercept)","gender","(Intercept)","fever","(Intercept)","chills","(Intercept)","cough","(Intercept)","aches","(Intercept)","vomit","(Intercept)","age_cat5-9","age_cat10-14","age_cat15-19","age_cat20-29","age_cat30-49","age_cat50-69","age_cat70+"],[909,916,340,1485,1472,353,272,1553,1636,189,931,894,338,365,273,238,345,228,35,3],[1168,1174,436,1906,1877,465,309,2033,2114,228,1144,1198,427,433,396,299,448,307,30,2],[1.28,1,1.28,1,1.28,1.03,1.14,1.15,1.29,0.93,1.23,1.09,1.26,0.94,1.15,0.99,1.03,1.07,0.68,0.53],[1.18,0.88,1.11,0.85,1.19,0.89,0.97,0.97,1.21,0.76,1.13,0.96,1.1,0.77,0.93,0.8,0.84,0.85,0.41,0.07],[1.4,1.13,1.48,1.17,1.37,1.21,1.34,1.37,1.38,1.14,1.34,1.23,1.46,1.15,1.42,1.24,1.26,1.33,1.13,3.2],[0,0.97,0,0.99,0,0.68,0.13,0.11,0,0.51,0,0.17,0,0.54,0.2,0.96,0.79,0.58,0.13,0.49]],"container":"<table class=\"white-space: nowrap\">\n  <thead>\n    <tr>\n      <th>term<\/th>\n      <th>0<\/th>\n      <th>1<\/th>\n      <th>estimate<\/th>\n      <th>conf.low<\/th>\n      <th>conf.high<\/th>\n      <th>p.value<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6]}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script>
<!-- ======================================================= -->
</div>
</div>
<div id="reg_gt_uni" class="section level3 unnumbered">
<h3><strong>gtsummary</strong> package</h3>
<p>Nous présentons ci-dessous l’utilisation de <code>tbl_uvregression()</code> du package <strong>gtsummary</strong>. Tout comme dans la page sur les <a href="descriptive_tables.html#descriptive_tables">Tableaux descriptifs</a>, les fonctions <strong>gtsummary</strong> font un bon travail pour exécuter des statistiques <em>et</em> produire des résultats à usage professionnel. Cette fonction produit un tableau des résultats d’une régression univariée.</p>
<p>Nous ne sélectionnons que les colonnes nécessaires de la <code>linelist</code> (les variables explicatives et la variable de résultat) et les introduisons dans <code>tbl_uvregression()</code>. Nous allons exécuter une régression univariée sur chacune des colonnes que nous avons définies comme <code>explanatory_vars</code> dans la section Préparation des données (sexe, fièvre, frissons, toux, courbatures, vomissements, et age_cat).</p>
<p>Dans la fonction elle-même, nous fournissons la <code>method =</code> comme <code>glm</code> (sans guillemets), la colonne <code>y =</code> outcome (<code>outcome</code>), nous spécifions à <code>method.args =</code> que nous voulons exécuter une régression logistique via <code>family = binomial</code>, et nous lui disons d’exponentiser les résultats.</p>
<p>La sortie est en HTML et contient les comptes</p>
<div class="sourceCode" id="cb991"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb991-1"><a href="regression.html#cb991-1" aria-hidden="true" tabindex="-1"></a>univ_tab <span class="ot">&lt;-</span> linelist <span class="sc">%&gt;%</span> </span>
<span id="cb991-2"><a href="regression.html#cb991-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(explanatory_vars, outcome) <span class="sc">%&gt;%</span> <span class="do">## selectionner variables d&#39;interet</span></span>
<span id="cb991-3"><a href="regression.html#cb991-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb991-4"><a href="regression.html#cb991-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tbl_uvregression</span>(                         <span class="do">## produire un tableau univarié</span></span>
<span id="cb991-5"><a href="regression.html#cb991-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">method =</span> glm,                           <span class="do">## définir la régression que l&#39;on veut exécuter (modèle linéaire généralisé)</span></span>
<span id="cb991-6"><a href="regression.html#cb991-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> outcome,                            <span class="do">## définir la variable de résultat</span></span>
<span id="cb991-7"><a href="regression.html#cb991-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">method.args =</span> <span class="fu">list</span>(<span class="at">family =</span> binomial),  <span class="do">## définir le type de glm que l&#39;on veut exécuter (logistique)</span></span>
<span id="cb991-8"><a href="regression.html#cb991-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">exponentiate =</span> <span class="cn">TRUE</span>                     <span class="do">## exponentiez pour produire des odds ratios (plutôt que des odds logarithmiques)</span></span>
<span id="cb991-9"><a href="regression.html#cb991-9" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb991-10"><a href="regression.html#cb991-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb991-11"><a href="regression.html#cb991-11" aria-hidden="true" tabindex="-1"></a><span class="do">## visualiser le tableau des résultats univariés </span></span>
<span id="cb991-12"><a href="regression.html#cb991-12" aria-hidden="true" tabindex="-1"></a>univ_tab</span></code></pre></div>
<div id="wnlltunzia" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#wnlltunzia table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#wnlltunzia thead, #wnlltunzia tbody, #wnlltunzia tfoot, #wnlltunzia tr, #wnlltunzia td, #wnlltunzia th {
  border-style: none;
}

#wnlltunzia p {
  margin: 0;
  padding: 0;
}

#wnlltunzia .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#wnlltunzia .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#wnlltunzia .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#wnlltunzia .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#wnlltunzia .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#wnlltunzia .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#wnlltunzia .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#wnlltunzia .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#wnlltunzia .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#wnlltunzia .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#wnlltunzia .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#wnlltunzia .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#wnlltunzia .gt_spanner_row {
  border-bottom-style: hidden;
}

#wnlltunzia .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#wnlltunzia .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#wnlltunzia .gt_from_md > :first-child {
  margin-top: 0;
}

#wnlltunzia .gt_from_md > :last-child {
  margin-bottom: 0;
}

#wnlltunzia .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#wnlltunzia .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#wnlltunzia .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#wnlltunzia .gt_row_group_first td {
  border-top-width: 2px;
}

#wnlltunzia .gt_row_group_first th {
  border-top-width: 2px;
}

#wnlltunzia .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#wnlltunzia .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#wnlltunzia .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#wnlltunzia .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#wnlltunzia .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#wnlltunzia .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#wnlltunzia .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#wnlltunzia .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#wnlltunzia .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#wnlltunzia .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#wnlltunzia .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#wnlltunzia .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#wnlltunzia .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#wnlltunzia .gt_left {
  text-align: left;
}

#wnlltunzia .gt_center {
  text-align: center;
}

#wnlltunzia .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#wnlltunzia .gt_font_normal {
  font-weight: normal;
}

#wnlltunzia .gt_font_bold {
  font-weight: bold;
}

#wnlltunzia .gt_font_italic {
  font-style: italic;
}

#wnlltunzia .gt_super {
  font-size: 65%;
}

#wnlltunzia .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#wnlltunzia .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#wnlltunzia .gt_indent_1 {
  text-indent: 5px;
}

#wnlltunzia .gt_indent_2 {
  text-indent: 10px;
}

#wnlltunzia .gt_indent_3 {
  text-indent: 15px;
}

#wnlltunzia .gt_indent_4 {
  text-indent: 20px;
}

#wnlltunzia .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="&lt;strong&gt;Characteristic&lt;/strong&gt;"><strong>Characteristic</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="&lt;strong&gt;N&lt;/strong&gt;"><strong>N</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="&lt;strong&gt;OR&lt;/strong&gt;&lt;span class=&quot;gt_footnote_marks&quot; style=&quot;white-space:nowrap;font-style:italic;font-weight:normal;&quot;&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/span&gt;"><strong>OR</strong><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="&lt;strong&gt;95% CI&lt;/strong&gt;&lt;span class=&quot;gt_footnote_marks&quot; style=&quot;white-space:nowrap;font-style:italic;font-weight:normal;&quot;&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/span&gt;"><strong>95% CI</strong><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="&lt;strong&gt;p-value&lt;/strong&gt;"><strong>p-value</strong></th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="label" class="gt_row gt_left">gender</td>
<td headers="stat_n" class="gt_row gt_center">4,167</td>
<td headers="estimate" class="gt_row gt_center">1.00</td>
<td headers="ci" class="gt_row gt_center">0.88, 1.13</td>
<td headers="p.value" class="gt_row gt_center">>0.9</td></tr>
    <tr><td headers="label" class="gt_row gt_left">fever</td>
<td headers="stat_n" class="gt_row gt_center">4,167</td>
<td headers="estimate" class="gt_row gt_center">1.00</td>
<td headers="ci" class="gt_row gt_center">0.85, 1.17</td>
<td headers="p.value" class="gt_row gt_center">>0.9</td></tr>
    <tr><td headers="label" class="gt_row gt_left">chills</td>
<td headers="stat_n" class="gt_row gt_center">4,167</td>
<td headers="estimate" class="gt_row gt_center">1.03</td>
<td headers="ci" class="gt_row gt_center">0.89, 1.21</td>
<td headers="p.value" class="gt_row gt_center">0.7</td></tr>
    <tr><td headers="label" class="gt_row gt_left">cough</td>
<td headers="stat_n" class="gt_row gt_center">4,167</td>
<td headers="estimate" class="gt_row gt_center">1.15</td>
<td headers="ci" class="gt_row gt_center">0.97, 1.37</td>
<td headers="p.value" class="gt_row gt_center">0.11</td></tr>
    <tr><td headers="label" class="gt_row gt_left">aches</td>
<td headers="stat_n" class="gt_row gt_center">4,167</td>
<td headers="estimate" class="gt_row gt_center">0.93</td>
<td headers="ci" class="gt_row gt_center">0.76, 1.14</td>
<td headers="p.value" class="gt_row gt_center">0.5</td></tr>
    <tr><td headers="label" class="gt_row gt_left">vomit</td>
<td headers="stat_n" class="gt_row gt_center">4,167</td>
<td headers="estimate" class="gt_row gt_center">1.09</td>
<td headers="ci" class="gt_row gt_center">0.96, 1.23</td>
<td headers="p.value" class="gt_row gt_center">0.2</td></tr>
    <tr><td headers="label" class="gt_row gt_left">age_cat</td>
<td headers="stat_n" class="gt_row gt_center">4,167</td>
<td headers="estimate" class="gt_row gt_center"></td>
<td headers="ci" class="gt_row gt_center"></td>
<td headers="p.value" class="gt_row gt_center"></td></tr>
    <tr><td headers="label" class="gt_row gt_left">    0-4</td>
<td headers="stat_n" class="gt_row gt_center"></td>
<td headers="estimate" class="gt_row gt_center">—</td>
<td headers="ci" class="gt_row gt_center">—</td>
<td headers="p.value" class="gt_row gt_center"></td></tr>
    <tr><td headers="label" class="gt_row gt_left">    5-9</td>
<td headers="stat_n" class="gt_row gt_center"></td>
<td headers="estimate" class="gt_row gt_center">0.94</td>
<td headers="ci" class="gt_row gt_center">0.77, 1.15</td>
<td headers="p.value" class="gt_row gt_center">0.5</td></tr>
    <tr><td headers="label" class="gt_row gt_left">    10-14</td>
<td headers="stat_n" class="gt_row gt_center"></td>
<td headers="estimate" class="gt_row gt_center">1.15</td>
<td headers="ci" class="gt_row gt_center">0.93, 1.42</td>
<td headers="p.value" class="gt_row gt_center">0.2</td></tr>
    <tr><td headers="label" class="gt_row gt_left">    15-19</td>
<td headers="stat_n" class="gt_row gt_center"></td>
<td headers="estimate" class="gt_row gt_center">0.99</td>
<td headers="ci" class="gt_row gt_center">0.80, 1.24</td>
<td headers="p.value" class="gt_row gt_center">>0.9</td></tr>
    <tr><td headers="label" class="gt_row gt_left">    20-29</td>
<td headers="stat_n" class="gt_row gt_center"></td>
<td headers="estimate" class="gt_row gt_center">1.03</td>
<td headers="ci" class="gt_row gt_center">0.84, 1.26</td>
<td headers="p.value" class="gt_row gt_center">0.8</td></tr>
    <tr><td headers="label" class="gt_row gt_left">    30-49</td>
<td headers="stat_n" class="gt_row gt_center"></td>
<td headers="estimate" class="gt_row gt_center">1.07</td>
<td headers="ci" class="gt_row gt_center">0.85, 1.33</td>
<td headers="p.value" class="gt_row gt_center">0.6</td></tr>
    <tr><td headers="label" class="gt_row gt_left">    50-69</td>
<td headers="stat_n" class="gt_row gt_center"></td>
<td headers="estimate" class="gt_row gt_center">0.68</td>
<td headers="ci" class="gt_row gt_center">0.41, 1.13</td>
<td headers="p.value" class="gt_row gt_center">0.13</td></tr>
    <tr><td headers="label" class="gt_row gt_left">    70+</td>
<td headers="stat_n" class="gt_row gt_center"></td>
<td headers="estimate" class="gt_row gt_center">0.53</td>
<td headers="ci" class="gt_row gt_center">0.07, 3.20</td>
<td headers="p.value" class="gt_row gt_center">0.5</td></tr>
  </tbody>
  
  <tfoot class="gt_footnotes">
    <tr>
      <td class="gt_footnote" colspan="5"><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span> OR = Odds Ratio, CI = Confidence Interval</td>
    </tr>
  </tfoot>
</table>
</div>
<p>Vous pouvez apporter de nombreuses modifications à ce tableau, par exemple en ajustant les étiquettes de texte, en mettant en gras les lignes en fonction de leur valeur p, etc. Voir les didacticiels <a href="http://www.danieldsjoberg.com/gtsummary/articles/tbl_regression.html">ici</a> et ailleurs en ligne.</p>
<!-- ======================================================= -->
</div>
</div>
<div id="stratifié" class="section level2" number="19.3">
<h2><span class="header-section-number">19.3</span> Stratifié</h2>
<p>L’analyse stratifiée est actuellement en cours de développement pour <strong>gtsummary</strong>,
cette page sera mise à jour en temps voulu.</p>
</div>
<div id="multivariable" class="section level2" number="19.4">
<h2><span class="header-section-number">19.4</span> Multivariable</h2>
<p>Pour l’analyse multivariable, nous présentons à nouveau deux approches :</p>
<ul>
<li><code>glm()</code> et <code>tidy()</code>.<br />
</li>
<li>package <strong>gtsummary</strong>.</li>
</ul>
<p>La methodologie est similaire pour chacune d’entre elles et seule la dernière étape, celle de l’élaboration d’un tableau final, est différente.</p>
<div id="conduite-multivariable" class="section level3 unnumbered">
<h3>Conduite multivariable</h3>
<p>Ici, nous utilisons <code>glm()</code> mais ajoutons plus de variables au côté droit de l’équation, séparées par des symboles plus (<code>+</code>).</p>
<p>Pour exécuter le modèle avec toutes nos variables explicatives, nous devrions exécuter :</p>
<div class="sourceCode" id="cb992"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb992-1"><a href="regression.html#cb992-1" aria-hidden="true" tabindex="-1"></a>mv_reg <span class="ot">&lt;-</span> <span class="fu">glm</span>(outcome <span class="sc">~</span> gender <span class="sc">+</span> fever <span class="sc">+</span> chills <span class="sc">+</span> cough <span class="sc">+</span> aches <span class="sc">+</span> vomit <span class="sc">+</span> age_cat, <span class="at">family =</span> <span class="st">&quot;binomial&quot;</span>, <span class="at">data =</span> linelist)</span>
<span id="cb992-2"><a href="regression.html#cb992-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb992-3"><a href="regression.html#cb992-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mv_reg)</span></code></pre></div>
<pre><code>## 
## Call:
## glm(formula = outcome ~ gender + fever + chills + cough + aches + 
##     vomit + age_cat, family = &quot;binomial&quot;, data = linelist)
## 
## Deviance Residuals: 
##    Min      1Q  Median      3Q     Max  
## -1.383  -1.279   1.029   1.078   1.346  
## 
## Coefficients:
##               Estimate Std. Error z value Pr(&gt;|z|)
## (Intercept)   0.069054   0.131726   0.524    0.600
## gender        0.002448   0.065133   0.038    0.970
## fever         0.004309   0.080522   0.054    0.957
## chills        0.034112   0.078924   0.432    0.666
## cough         0.138584   0.089909   1.541    0.123
## aches        -0.070705   0.104078  -0.679    0.497
## vomit         0.086098   0.062618   1.375    0.169
## age_cat5-9   -0.063562   0.101851  -0.624    0.533
## age_cat10-14  0.136372   0.107275   1.271    0.204
## age_cat15-19 -0.011074   0.113640  -0.097    0.922
## age_cat20-29  0.026552   0.102780   0.258    0.796
## age_cat30-49  0.059569   0.116402   0.512    0.609
## age_cat50-69 -0.388964   0.262384  -1.482    0.138
## age_cat70+   -0.647443   0.917375  -0.706    0.480
## 
## (Dispersion parameter for binomial family taken to be 1)
## 
##     Null deviance: 5712.4  on 4166  degrees of freedom
## Residual deviance: 5700.2  on 4153  degrees of freedom
## AIC: 5728.2
## 
## Number of Fisher Scoring iterations: 4</code></pre>
<p>Si vous voulez inclure deux variables et une interaction entre elles, vous pouvez les séparer avec un astérisque <code>*</code> au lieu d’un <code>+</code>. Séparez-les par un deux-points <code>:</code> si vous ne spécifiez que l’interaction. Par exemple :</p>
<div class="sourceCode" id="cb994"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb994-1"><a href="regression.html#cb994-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glm</span>(outcome <span class="sc">~</span> gender <span class="sc">+</span> age_cat <span class="sc">*</span> fever, <span class="at">family =</span> <span class="st">&quot;binomial&quot;</span>, <span class="at">data =</span> linelist)</span></code></pre></div>
<p><em>Optionnellement</em>, vous pouvez utiliser ce code pour exploiter le vecteur prédéfini des noms de colonnes et recréer la commande ci-dessus en utilisant <code>str_c()</code>. Cela peut être utile si les noms de vos variables explicatives changent, ou si vous ne voulez pas les taper à nouveau.</p>
<div class="sourceCode" id="cb995"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb995-1"><a href="regression.html#cb995-1" aria-hidden="true" tabindex="-1"></a><span class="do">## effectuer une régression avec toutes les variables d&#39;intérêt </span></span>
<span id="cb995-2"><a href="regression.html#cb995-2" aria-hidden="true" tabindex="-1"></a>mv_reg <span class="ot">&lt;-</span> explanatory_vars <span class="sc">%&gt;%</span>  <span class="do">## commencer par un vecteur de noms de colonnes explicatives</span></span>
<span id="cb995-3"><a href="regression.html#cb995-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_c</span>(<span class="at">collapse =</span> <span class="st">&quot;+&quot;</span>) <span class="sc">%&gt;%</span>     <span class="do">## combiner tous les noms des variables d&#39;intérêt séparés par un plus</span></span>
<span id="cb995-4"><a href="regression.html#cb995-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_c</span>(<span class="st">&quot;outcome ~ &quot;</span>, .) <span class="sc">%&gt;%</span>    <span class="do">## combiner les noms des variables d&#39;intérêt avec le résultat dans le style d&#39;une formule</span></span>
<span id="cb995-5"><a href="regression.html#cb995-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">glm</span>(<span class="at">family =</span> <span class="st">&quot;binomial&quot;</span>,      <span class="do">## définir le type de glm comme logistique,</span></span>
<span id="cb995-6"><a href="regression.html#cb995-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">data =</span> linelist)          <span class="do">## définir votre jeu de données</span></span></code></pre></div>
<div id="construire-le-modèle" class="section level4 unnumbered">
<h4>Construire le modèle</h4>
<p>Vous pouvez construire votre modèle étape par étape, en enregistrant plusieurs modèles qui incluent certaines variables explicatives. Vous pouvez comparer ces modèles avec des tests de rapport de vraisemblance en utilisant <code>lrtest()</code> du package <strong>lmtest</strong>, comme ci-dessous :</p>
<p><span style="color: black;"><strong><em>NOTE:</em></strong> L’utilisation de <strong>base</strong> <code>anova(model1, model2, test = "Chisq)</code> produit les mêmes résultats </span></p>
<div class="sourceCode" id="cb996"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb996-1"><a href="regression.html#cb996-1" aria-hidden="true" tabindex="-1"></a>model1 <span class="ot">&lt;-</span> <span class="fu">glm</span>(outcome <span class="sc">~</span> age_cat, <span class="at">family =</span> <span class="st">&quot;binomial&quot;</span>, <span class="at">data =</span> linelist)</span>
<span id="cb996-2"><a href="regression.html#cb996-2" aria-hidden="true" tabindex="-1"></a>model2 <span class="ot">&lt;-</span> <span class="fu">glm</span>(outcome <span class="sc">~</span> age_cat <span class="sc">+</span> gender, <span class="at">family =</span> <span class="st">&quot;binomial&quot;</span>, <span class="at">data =</span> linelist)</span>
<span id="cb996-3"><a href="regression.html#cb996-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb996-4"><a href="regression.html#cb996-4" aria-hidden="true" tabindex="-1"></a>lmtest<span class="sc">::</span><span class="fu">lrtest</span>(model1, model2)</span></code></pre></div>
<pre><code>## Likelihood ratio test
## 
## Model 1: outcome ~ age_cat
## Model 2: outcome ~ age_cat + gender
##   #Df  LogLik Df  Chisq Pr(&gt;Chisq)
## 1   8 -2852.6                     
## 2   9 -2852.6  1 0.0002     0.9883</code></pre>
<p>Une autre option consiste à prendre l’objet modèle et à appliquer la fonction <code>step()</code> du package <strong>stats</strong>. Spécifiez la direction de sélection des variables que vous souhaitez utiliser lors de la construction du modèle.</p>
<div class="sourceCode" id="cb998"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb998-1"><a href="regression.html#cb998-1" aria-hidden="true" tabindex="-1"></a><span class="do">## choisir un modèle en utilisant la sélection avant basée sur l&#39;AIC</span></span>
<span id="cb998-2"><a href="regression.html#cb998-2" aria-hidden="true" tabindex="-1"></a><span class="do">## vous pouvez aussi faire &quot;backward&quot; ou &quot;both&quot; en ajustant la direction.</span></span>
<span id="cb998-3"><a href="regression.html#cb998-3" aria-hidden="true" tabindex="-1"></a>final_mv_reg <span class="ot">&lt;-</span> mv_reg <span class="sc">%&gt;%</span></span>
<span id="cb998-4"><a href="regression.html#cb998-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step</span>(<span class="at">direction =</span> <span class="st">&quot;forward&quot;</span>, <span class="at">trace =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p>Vous pouvez également désactiver la notation scientifique dans votre session R, pour plus de clarté :</p>
<div class="sourceCode" id="cb999"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb999-1"><a href="regression.html#cb999-1" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">scipen=</span><span class="dv">999</span>)</span></code></pre></div>
<p>Comme décrit dans la section sur l’analyse univariée, nous passons la sortie du modèle à <code>tidy()</code> pour exponentialiser les probabilités logarithmiques et les IC. Enfin, nous arrondissons toutes les colonnes numériques à deux décimales. Faites défiler pour voir toutes les lignes.</p>
<div class="sourceCode" id="cb1000"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1000-1"><a href="regression.html#cb1000-1" aria-hidden="true" tabindex="-1"></a>mv_tab_base <span class="ot">&lt;-</span> final_mv_reg <span class="sc">%&gt;%</span> </span>
<span id="cb1000-2"><a href="regression.html#cb1000-2" aria-hidden="true" tabindex="-1"></a>  broom<span class="sc">::</span><span class="fu">tidy</span>(<span class="at">exponentiate =</span> <span class="cn">TRUE</span>, <span class="at">conf.int =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span>  <span class="do">## obtenir un tidy  dataframe d&#39;estimations </span></span>
<span id="cb1000-3"><a href="regression.html#cb1000-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric), round, <span class="at">digits =</span> <span class="dv">2</span>))          <span class="do">## arrondir</span></span></code></pre></div>
<p>Voici à quoi ressemble le dataframe obtenu :</p>
<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-4ceb0cf4264cbbc1847a" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-4ceb0cf4264cbbc1847a">{"x":{"filter":"none","vertical":false,"data":[["(Intercept)","gender","fever","chills","cough","aches","vomit","age_cat5-9","age_cat10-14","age_cat15-19","age_cat20-29","age_cat30-49","age_cat50-69","age_cat70+"],[1.07,1,1,1.03,1.15,0.93,1.09,0.94,1.15,0.99,1.03,1.06,0.68,0.52],[0.13,0.07,0.08,0.08,0.09,0.1,0.06,0.1,0.11,0.11,0.1,0.12,0.26,0.92],[0.52,0.04,0.05,0.43,1.54,-0.68,1.37,-0.62,1.27,-0.1,0.26,0.51,-1.48,-0.71],[0.6,0.97,0.96,0.67,0.12,0.5,0.17,0.53,0.2,0.92,0.8,0.61,0.14,0.48],[0.83,0.88,0.86,0.89,0.96,0.76,0.96,0.77,0.93,0.79,0.84,0.85,0.4,0.07],[1.39,1.14,1.18,1.21,1.37,1.14,1.23,1.15,1.41,1.24,1.26,1.33,1.13,3.19]],"container":"<table class=\"white-space: nowrap\">\n  <thead>\n    <tr>\n      <th>term<\/th>\n      <th>estimate<\/th>\n      <th>std.error<\/th>\n      <th>statistic<\/th>\n      <th>p.value<\/th>\n      <th>conf.low<\/th>\n      <th>conf.high<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":10,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6]}],"order":[],"autoWidth":false,"orderClasses":false},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script>
<!-- ======================================================= -->
</div>
</div>
<div id="combiner-univarié-et-multivariable" class="section level3 unnumbered">
<h3>Combiner univarié et multivariable</h3>
<div id="combinez-avec-gtsummary" class="section level4 unnumbered">
<h4>Combinez avec <strong>gtsummary</strong></h4>
<p>Le package <strong>gtsummary</strong> fournit la fonction <code>tbl_regression()</code>, qui prendra . les sorties d’une régression (<code>glm()</code> dans ce cas) et produira un joli tableau de synthèse.
tableau récapitulatif.</p>
<div class="sourceCode" id="cb1001"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1001-1"><a href="regression.html#cb1001-1" aria-hidden="true" tabindex="-1"></a><span class="do">## montrer le tableau des résultats de la régression finale </span></span>
<span id="cb1001-2"><a href="regression.html#cb1001-2" aria-hidden="true" tabindex="-1"></a>mv_tab <span class="ot">&lt;-</span> <span class="fu">tbl_regression</span>(final_mv_reg, <span class="at">exponentiate =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p>Voyons le tableau :</p>
<div class="sourceCode" id="cb1002"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1002-1"><a href="regression.html#cb1002-1" aria-hidden="true" tabindex="-1"></a>mv_tab</span></code></pre></div>
<div id="onrhyvfeih" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#onrhyvfeih table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#onrhyvfeih thead, #onrhyvfeih tbody, #onrhyvfeih tfoot, #onrhyvfeih tr, #onrhyvfeih td, #onrhyvfeih th {
  border-style: none;
}

#onrhyvfeih p {
  margin: 0;
  padding: 0;
}

#onrhyvfeih .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#onrhyvfeih .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#onrhyvfeih .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#onrhyvfeih .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#onrhyvfeih .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#onrhyvfeih .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#onrhyvfeih .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#onrhyvfeih .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#onrhyvfeih .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#onrhyvfeih .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#onrhyvfeih .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#onrhyvfeih .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#onrhyvfeih .gt_spanner_row {
  border-bottom-style: hidden;
}

#onrhyvfeih .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#onrhyvfeih .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#onrhyvfeih .gt_from_md > :first-child {
  margin-top: 0;
}

#onrhyvfeih .gt_from_md > :last-child {
  margin-bottom: 0;
}

#onrhyvfeih .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#onrhyvfeih .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#onrhyvfeih .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#onrhyvfeih .gt_row_group_first td {
  border-top-width: 2px;
}

#onrhyvfeih .gt_row_group_first th {
  border-top-width: 2px;
}

#onrhyvfeih .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#onrhyvfeih .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#onrhyvfeih .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#onrhyvfeih .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#onrhyvfeih .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#onrhyvfeih .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#onrhyvfeih .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#onrhyvfeih .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#onrhyvfeih .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#onrhyvfeih .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#onrhyvfeih .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#onrhyvfeih .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#onrhyvfeih .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#onrhyvfeih .gt_left {
  text-align: left;
}

#onrhyvfeih .gt_center {
  text-align: center;
}

#onrhyvfeih .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#onrhyvfeih .gt_font_normal {
  font-weight: normal;
}

#onrhyvfeih .gt_font_bold {
  font-weight: bold;
}

#onrhyvfeih .gt_font_italic {
  font-style: italic;
}

#onrhyvfeih .gt_super {
  font-size: 65%;
}

#onrhyvfeih .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#onrhyvfeih .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#onrhyvfeih .gt_indent_1 {
  text-indent: 5px;
}

#onrhyvfeih .gt_indent_2 {
  text-indent: 10px;
}

#onrhyvfeih .gt_indent_3 {
  text-indent: 15px;
}

#onrhyvfeih .gt_indent_4 {
  text-indent: 20px;
}

#onrhyvfeih .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="&lt;strong&gt;Characteristic&lt;/strong&gt;"><strong>Characteristic</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="&lt;strong&gt;OR&lt;/strong&gt;&lt;span class=&quot;gt_footnote_marks&quot; style=&quot;white-space:nowrap;font-style:italic;font-weight:normal;&quot;&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/span&gt;"><strong>OR</strong><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="&lt;strong&gt;95% CI&lt;/strong&gt;&lt;span class=&quot;gt_footnote_marks&quot; style=&quot;white-space:nowrap;font-style:italic;font-weight:normal;&quot;&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/span&gt;"><strong>95% CI</strong><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="&lt;strong&gt;p-value&lt;/strong&gt;"><strong>p-value</strong></th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="label" class="gt_row gt_left">gender</td>
<td headers="estimate" class="gt_row gt_center">1.00</td>
<td headers="ci" class="gt_row gt_center">0.88, 1.14</td>
<td headers="p.value" class="gt_row gt_center">>0.9</td></tr>
    <tr><td headers="label" class="gt_row gt_left">fever</td>
<td headers="estimate" class="gt_row gt_center">1.00</td>
<td headers="ci" class="gt_row gt_center">0.86, 1.18</td>
<td headers="p.value" class="gt_row gt_center">>0.9</td></tr>
    <tr><td headers="label" class="gt_row gt_left">chills</td>
<td headers="estimate" class="gt_row gt_center">1.03</td>
<td headers="ci" class="gt_row gt_center">0.89, 1.21</td>
<td headers="p.value" class="gt_row gt_center">0.7</td></tr>
    <tr><td headers="label" class="gt_row gt_left">cough</td>
<td headers="estimate" class="gt_row gt_center">1.15</td>
<td headers="ci" class="gt_row gt_center">0.96, 1.37</td>
<td headers="p.value" class="gt_row gt_center">0.12</td></tr>
    <tr><td headers="label" class="gt_row gt_left">aches</td>
<td headers="estimate" class="gt_row gt_center">0.93</td>
<td headers="ci" class="gt_row gt_center">0.76, 1.14</td>
<td headers="p.value" class="gt_row gt_center">0.5</td></tr>
    <tr><td headers="label" class="gt_row gt_left">vomit</td>
<td headers="estimate" class="gt_row gt_center">1.09</td>
<td headers="ci" class="gt_row gt_center">0.96, 1.23</td>
<td headers="p.value" class="gt_row gt_center">0.2</td></tr>
    <tr><td headers="label" class="gt_row gt_left">age_cat</td>
<td headers="estimate" class="gt_row gt_center"></td>
<td headers="ci" class="gt_row gt_center"></td>
<td headers="p.value" class="gt_row gt_center"></td></tr>
    <tr><td headers="label" class="gt_row gt_left">    0-4</td>
<td headers="estimate" class="gt_row gt_center">—</td>
<td headers="ci" class="gt_row gt_center">—</td>
<td headers="p.value" class="gt_row gt_center"></td></tr>
    <tr><td headers="label" class="gt_row gt_left">    5-9</td>
<td headers="estimate" class="gt_row gt_center">0.94</td>
<td headers="ci" class="gt_row gt_center">0.77, 1.15</td>
<td headers="p.value" class="gt_row gt_center">0.5</td></tr>
    <tr><td headers="label" class="gt_row gt_left">    10-14</td>
<td headers="estimate" class="gt_row gt_center">1.15</td>
<td headers="ci" class="gt_row gt_center">0.93, 1.41</td>
<td headers="p.value" class="gt_row gt_center">0.2</td></tr>
    <tr><td headers="label" class="gt_row gt_left">    15-19</td>
<td headers="estimate" class="gt_row gt_center">0.99</td>
<td headers="ci" class="gt_row gt_center">0.79, 1.24</td>
<td headers="p.value" class="gt_row gt_center">>0.9</td></tr>
    <tr><td headers="label" class="gt_row gt_left">    20-29</td>
<td headers="estimate" class="gt_row gt_center">1.03</td>
<td headers="ci" class="gt_row gt_center">0.84, 1.26</td>
<td headers="p.value" class="gt_row gt_center">0.8</td></tr>
    <tr><td headers="label" class="gt_row gt_left">    30-49</td>
<td headers="estimate" class="gt_row gt_center">1.06</td>
<td headers="ci" class="gt_row gt_center">0.85, 1.33</td>
<td headers="p.value" class="gt_row gt_center">0.6</td></tr>
    <tr><td headers="label" class="gt_row gt_left">    50-69</td>
<td headers="estimate" class="gt_row gt_center">0.68</td>
<td headers="ci" class="gt_row gt_center">0.40, 1.13</td>
<td headers="p.value" class="gt_row gt_center">0.14</td></tr>
    <tr><td headers="label" class="gt_row gt_left">    70+</td>
<td headers="estimate" class="gt_row gt_center">0.52</td>
<td headers="ci" class="gt_row gt_center">0.07, 3.19</td>
<td headers="p.value" class="gt_row gt_center">0.5</td></tr>
  </tbody>
  
  <tfoot class="gt_footnotes">
    <tr>
      <td class="gt_footnote" colspan="4"><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span> OR = Odds Ratio, CI = Confidence Interval</td>
    </tr>
  </tfoot>
</table>
</div>
<p>Vous pouvez également combiner plusieurs tableaux de sortie différents produits par <strong>gtsummary</strong> avec
la fonction <code>tbl_merge()</code>. Nous combinons maintenant les résultats multivariables avec les résultats <em>univariés</em> de <strong>gtsummary</strong> que nous avons créés <a href="regression.html#reg_gt_uni">ci-dessus</a>:</p>
<div class="sourceCode" id="cb1003"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1003-1"><a href="regression.html#cb1003-1" aria-hidden="true" tabindex="-1"></a><span class="do">## combiner avec les résultats univariés </span></span>
<span id="cb1003-2"><a href="regression.html#cb1003-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tbl_merge</span>(</span>
<span id="cb1003-3"><a href="regression.html#cb1003-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">tbls =</span> <span class="fu">list</span>(univ_tab, mv_tab),                          <span class="co"># combiner</span></span>
<span id="cb1003-4"><a href="regression.html#cb1003-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">tab_spanner =</span> <span class="fu">c</span>(<span class="st">&quot;**Univariate**&quot;</span>, <span class="st">&quot;**Multivariable**&quot;</span>)) <span class="co"># definier les entetes des colonnes</span></span></code></pre></div>
<div id="xickapjjhd" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#xickapjjhd table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#xickapjjhd thead, #xickapjjhd tbody, #xickapjjhd tfoot, #xickapjjhd tr, #xickapjjhd td, #xickapjjhd th {
  border-style: none;
}

#xickapjjhd p {
  margin: 0;
  padding: 0;
}

#xickapjjhd .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#xickapjjhd .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#xickapjjhd .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#xickapjjhd .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#xickapjjhd .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#xickapjjhd .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#xickapjjhd .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#xickapjjhd .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#xickapjjhd .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#xickapjjhd .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#xickapjjhd .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#xickapjjhd .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#xickapjjhd .gt_spanner_row {
  border-bottom-style: hidden;
}

#xickapjjhd .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#xickapjjhd .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#xickapjjhd .gt_from_md > :first-child {
  margin-top: 0;
}

#xickapjjhd .gt_from_md > :last-child {
  margin-bottom: 0;
}

#xickapjjhd .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#xickapjjhd .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#xickapjjhd .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#xickapjjhd .gt_row_group_first td {
  border-top-width: 2px;
}

#xickapjjhd .gt_row_group_first th {
  border-top-width: 2px;
}

#xickapjjhd .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#xickapjjhd .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#xickapjjhd .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#xickapjjhd .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#xickapjjhd .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#xickapjjhd .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#xickapjjhd .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#xickapjjhd .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#xickapjjhd .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#xickapjjhd .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#xickapjjhd .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#xickapjjhd .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#xickapjjhd .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#xickapjjhd .gt_left {
  text-align: left;
}

#xickapjjhd .gt_center {
  text-align: center;
}

#xickapjjhd .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#xickapjjhd .gt_font_normal {
  font-weight: normal;
}

#xickapjjhd .gt_font_bold {
  font-weight: bold;
}

#xickapjjhd .gt_font_italic {
  font-style: italic;
}

#xickapjjhd .gt_super {
  font-size: 65%;
}

#xickapjjhd .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#xickapjjhd .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#xickapjjhd .gt_indent_1 {
  text-indent: 5px;
}

#xickapjjhd .gt_indent_2 {
  text-indent: 10px;
}

#xickapjjhd .gt_indent_3 {
  text-indent: 15px;
}

#xickapjjhd .gt_indent_4 {
  text-indent: 20px;
}

#xickapjjhd .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    
    <tr class="gt_col_headings gt_spanner_row">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="2" colspan="1" scope="col" id="&lt;strong&gt;Characteristic&lt;/strong&gt;"><strong>Characteristic</strong></th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="4" scope="colgroup" id="&lt;strong&gt;Univariate&lt;/strong&gt;">
        <span class="gt_column_spanner"><strong>Univariate</strong></span>
      </th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="3" scope="colgroup" id="&lt;strong&gt;Multivariable&lt;/strong&gt;">
        <span class="gt_column_spanner"><strong>Multivariable</strong></span>
      </th>
    </tr>
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="&lt;strong&gt;N&lt;/strong&gt;"><strong>N</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="&lt;strong&gt;OR&lt;/strong&gt;&lt;span class=&quot;gt_footnote_marks&quot; style=&quot;white-space:nowrap;font-style:italic;font-weight:normal;&quot;&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/span&gt;"><strong>OR</strong><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="&lt;strong&gt;95% CI&lt;/strong&gt;&lt;span class=&quot;gt_footnote_marks&quot; style=&quot;white-space:nowrap;font-style:italic;font-weight:normal;&quot;&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/span&gt;"><strong>95% CI</strong><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="&lt;strong&gt;p-value&lt;/strong&gt;"><strong>p-value</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="&lt;strong&gt;OR&lt;/strong&gt;&lt;span class=&quot;gt_footnote_marks&quot; style=&quot;white-space:nowrap;font-style:italic;font-weight:normal;&quot;&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/span&gt;"><strong>OR</strong><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="&lt;strong&gt;95% CI&lt;/strong&gt;&lt;span class=&quot;gt_footnote_marks&quot; style=&quot;white-space:nowrap;font-style:italic;font-weight:normal;&quot;&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/span&gt;"><strong>95% CI</strong><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="&lt;strong&gt;p-value&lt;/strong&gt;"><strong>p-value</strong></th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="label" class="gt_row gt_left">gender</td>
<td headers="stat_n_1" class="gt_row gt_center">4,167</td>
<td headers="estimate_1" class="gt_row gt_center">1.00</td>
<td headers="ci_1" class="gt_row gt_center">0.88, 1.13</td>
<td headers="p.value_1" class="gt_row gt_center">>0.9</td>
<td headers="estimate_2" class="gt_row gt_center">1.00</td>
<td headers="ci_2" class="gt_row gt_center">0.88, 1.14</td>
<td headers="p.value_2" class="gt_row gt_center">>0.9</td></tr>
    <tr><td headers="label" class="gt_row gt_left">fever</td>
<td headers="stat_n_1" class="gt_row gt_center">4,167</td>
<td headers="estimate_1" class="gt_row gt_center">1.00</td>
<td headers="ci_1" class="gt_row gt_center">0.85, 1.17</td>
<td headers="p.value_1" class="gt_row gt_center">>0.9</td>
<td headers="estimate_2" class="gt_row gt_center">1.00</td>
<td headers="ci_2" class="gt_row gt_center">0.86, 1.18</td>
<td headers="p.value_2" class="gt_row gt_center">>0.9</td></tr>
    <tr><td headers="label" class="gt_row gt_left">chills</td>
<td headers="stat_n_1" class="gt_row gt_center">4,167</td>
<td headers="estimate_1" class="gt_row gt_center">1.03</td>
<td headers="ci_1" class="gt_row gt_center">0.89, 1.21</td>
<td headers="p.value_1" class="gt_row gt_center">0.7</td>
<td headers="estimate_2" class="gt_row gt_center">1.03</td>
<td headers="ci_2" class="gt_row gt_center">0.89, 1.21</td>
<td headers="p.value_2" class="gt_row gt_center">0.7</td></tr>
    <tr><td headers="label" class="gt_row gt_left">cough</td>
<td headers="stat_n_1" class="gt_row gt_center">4,167</td>
<td headers="estimate_1" class="gt_row gt_center">1.15</td>
<td headers="ci_1" class="gt_row gt_center">0.97, 1.37</td>
<td headers="p.value_1" class="gt_row gt_center">0.11</td>
<td headers="estimate_2" class="gt_row gt_center">1.15</td>
<td headers="ci_2" class="gt_row gt_center">0.96, 1.37</td>
<td headers="p.value_2" class="gt_row gt_center">0.12</td></tr>
    <tr><td headers="label" class="gt_row gt_left">aches</td>
<td headers="stat_n_1" class="gt_row gt_center">4,167</td>
<td headers="estimate_1" class="gt_row gt_center">0.93</td>
<td headers="ci_1" class="gt_row gt_center">0.76, 1.14</td>
<td headers="p.value_1" class="gt_row gt_center">0.5</td>
<td headers="estimate_2" class="gt_row gt_center">0.93</td>
<td headers="ci_2" class="gt_row gt_center">0.76, 1.14</td>
<td headers="p.value_2" class="gt_row gt_center">0.5</td></tr>
    <tr><td headers="label" class="gt_row gt_left">vomit</td>
<td headers="stat_n_1" class="gt_row gt_center">4,167</td>
<td headers="estimate_1" class="gt_row gt_center">1.09</td>
<td headers="ci_1" class="gt_row gt_center">0.96, 1.23</td>
<td headers="p.value_1" class="gt_row gt_center">0.2</td>
<td headers="estimate_2" class="gt_row gt_center">1.09</td>
<td headers="ci_2" class="gt_row gt_center">0.96, 1.23</td>
<td headers="p.value_2" class="gt_row gt_center">0.2</td></tr>
    <tr><td headers="label" class="gt_row gt_left">age_cat</td>
<td headers="stat_n_1" class="gt_row gt_center">4,167</td>
<td headers="estimate_1" class="gt_row gt_center"></td>
<td headers="ci_1" class="gt_row gt_center"></td>
<td headers="p.value_1" class="gt_row gt_center"></td>
<td headers="estimate_2" class="gt_row gt_center"></td>
<td headers="ci_2" class="gt_row gt_center"></td>
<td headers="p.value_2" class="gt_row gt_center"></td></tr>
    <tr><td headers="label" class="gt_row gt_left">    0-4</td>
<td headers="stat_n_1" class="gt_row gt_center"></td>
<td headers="estimate_1" class="gt_row gt_center">—</td>
<td headers="ci_1" class="gt_row gt_center">—</td>
<td headers="p.value_1" class="gt_row gt_center"></td>
<td headers="estimate_2" class="gt_row gt_center">—</td>
<td headers="ci_2" class="gt_row gt_center">—</td>
<td headers="p.value_2" class="gt_row gt_center"></td></tr>
    <tr><td headers="label" class="gt_row gt_left">    5-9</td>
<td headers="stat_n_1" class="gt_row gt_center"></td>
<td headers="estimate_1" class="gt_row gt_center">0.94</td>
<td headers="ci_1" class="gt_row gt_center">0.77, 1.15</td>
<td headers="p.value_1" class="gt_row gt_center">0.5</td>
<td headers="estimate_2" class="gt_row gt_center">0.94</td>
<td headers="ci_2" class="gt_row gt_center">0.77, 1.15</td>
<td headers="p.value_2" class="gt_row gt_center">0.5</td></tr>
    <tr><td headers="label" class="gt_row gt_left">    10-14</td>
<td headers="stat_n_1" class="gt_row gt_center"></td>
<td headers="estimate_1" class="gt_row gt_center">1.15</td>
<td headers="ci_1" class="gt_row gt_center">0.93, 1.42</td>
<td headers="p.value_1" class="gt_row gt_center">0.2</td>
<td headers="estimate_2" class="gt_row gt_center">1.15</td>
<td headers="ci_2" class="gt_row gt_center">0.93, 1.41</td>
<td headers="p.value_2" class="gt_row gt_center">0.2</td></tr>
    <tr><td headers="label" class="gt_row gt_left">    15-19</td>
<td headers="stat_n_1" class="gt_row gt_center"></td>
<td headers="estimate_1" class="gt_row gt_center">0.99</td>
<td headers="ci_1" class="gt_row gt_center">0.80, 1.24</td>
<td headers="p.value_1" class="gt_row gt_center">>0.9</td>
<td headers="estimate_2" class="gt_row gt_center">0.99</td>
<td headers="ci_2" class="gt_row gt_center">0.79, 1.24</td>
<td headers="p.value_2" class="gt_row gt_center">>0.9</td></tr>
    <tr><td headers="label" class="gt_row gt_left">    20-29</td>
<td headers="stat_n_1" class="gt_row gt_center"></td>
<td headers="estimate_1" class="gt_row gt_center">1.03</td>
<td headers="ci_1" class="gt_row gt_center">0.84, 1.26</td>
<td headers="p.value_1" class="gt_row gt_center">0.8</td>
<td headers="estimate_2" class="gt_row gt_center">1.03</td>
<td headers="ci_2" class="gt_row gt_center">0.84, 1.26</td>
<td headers="p.value_2" class="gt_row gt_center">0.8</td></tr>
    <tr><td headers="label" class="gt_row gt_left">    30-49</td>
<td headers="stat_n_1" class="gt_row gt_center"></td>
<td headers="estimate_1" class="gt_row gt_center">1.07</td>
<td headers="ci_1" class="gt_row gt_center">0.85, 1.33</td>
<td headers="p.value_1" class="gt_row gt_center">0.6</td>
<td headers="estimate_2" class="gt_row gt_center">1.06</td>
<td headers="ci_2" class="gt_row gt_center">0.85, 1.33</td>
<td headers="p.value_2" class="gt_row gt_center">0.6</td></tr>
    <tr><td headers="label" class="gt_row gt_left">    50-69</td>
<td headers="stat_n_1" class="gt_row gt_center"></td>
<td headers="estimate_1" class="gt_row gt_center">0.68</td>
<td headers="ci_1" class="gt_row gt_center">0.41, 1.13</td>
<td headers="p.value_1" class="gt_row gt_center">0.13</td>
<td headers="estimate_2" class="gt_row gt_center">0.68</td>
<td headers="ci_2" class="gt_row gt_center">0.40, 1.13</td>
<td headers="p.value_2" class="gt_row gt_center">0.14</td></tr>
    <tr><td headers="label" class="gt_row gt_left">    70+</td>
<td headers="stat_n_1" class="gt_row gt_center"></td>
<td headers="estimate_1" class="gt_row gt_center">0.53</td>
<td headers="ci_1" class="gt_row gt_center">0.07, 3.20</td>
<td headers="p.value_1" class="gt_row gt_center">0.5</td>
<td headers="estimate_2" class="gt_row gt_center">0.52</td>
<td headers="ci_2" class="gt_row gt_center">0.07, 3.19</td>
<td headers="p.value_2" class="gt_row gt_center">0.5</td></tr>
  </tbody>
  
  <tfoot class="gt_footnotes">
    <tr>
      <td class="gt_footnote" colspan="8"><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span> OR = Odds Ratio, CI = Confidence Interval</td>
    </tr>
  </tfoot>
</table>
</div>
</div>
<div id="combiner-avec-dplyr" class="section level4 unnumbered">
<h4>Combiner avec <strong>dplyr</strong></h4>
<p>Une autre façon de combiner les sorties univariées et multivariées de <code>glm()</code>/<code>tidy()</code> est d’utiliser les fonctions de jonction <strong>dplyr</strong>.</p>
<ul>
<li>fusionner les résultats univariés de tout à l’heure (<code>univ_tab_base</code>, qui contient les comptages) avec les résultats multivariables triés <code>mv_tab_base</code>.<br />
</li>
<li>Utilisez <code>select()</code> pour ne garder que les colonnes que nous voulons, spécifier leur ordre, et les renommer.<br />
</li>
<li>Utilisez <code>round()</code> avec deux décimales sur toutes les colonnes qui sont classe Double</li>
</ul>
<div class="sourceCode" id="cb1004"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1004-1"><a href="regression.html#cb1004-1" aria-hidden="true" tabindex="-1"></a><span class="do">## combiner des tableaux univariés et multivariés </span></span>
<span id="cb1004-2"><a href="regression.html#cb1004-2" aria-hidden="true" tabindex="-1"></a><span class="fu">left_join</span>(univ_tab_base, mv_tab_base, <span class="at">by =</span> <span class="st">&quot;term&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb1004-3"><a href="regression.html#cb1004-3" aria-hidden="true" tabindex="-1"></a>  <span class="do">##choisir les colonnes et les renommer</span></span>
<span id="cb1004-4"><a href="regression.html#cb1004-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>( <span class="co"># nouveau nom = ancien nom</span></span>
<span id="cb1004-5"><a href="regression.html#cb1004-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;characteristic&quot;</span> <span class="ot">=</span> term, </span>
<span id="cb1004-6"><a href="regression.html#cb1004-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;recovered&quot;</span>      <span class="ot">=</span> <span class="st">&quot;0&quot;</span>, </span>
<span id="cb1004-7"><a href="regression.html#cb1004-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;dead&quot;</span>           <span class="ot">=</span> <span class="st">&quot;1&quot;</span>, </span>
<span id="cb1004-8"><a href="regression.html#cb1004-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;univ_or&quot;</span>        <span class="ot">=</span> estimate.x, </span>
<span id="cb1004-9"><a href="regression.html#cb1004-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;univ_ci_low&quot;</span>    <span class="ot">=</span> conf.low.x, </span>
<span id="cb1004-10"><a href="regression.html#cb1004-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;univ_ci_high&quot;</span>   <span class="ot">=</span> conf.high.x,</span>
<span id="cb1004-11"><a href="regression.html#cb1004-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;univ_pval&quot;</span>      <span class="ot">=</span> p.value.x, </span>
<span id="cb1004-12"><a href="regression.html#cb1004-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;mv_or&quot;</span>          <span class="ot">=</span> estimate.y, </span>
<span id="cb1004-13"><a href="regression.html#cb1004-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;mvv_ci_low&quot;</span>     <span class="ot">=</span> conf.low.y, </span>
<span id="cb1004-14"><a href="regression.html#cb1004-14" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;mv_ci_high&quot;</span>     <span class="ot">=</span> conf.high.y,</span>
<span id="cb1004-15"><a href="regression.html#cb1004-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;mv_pval&quot;</span>        <span class="ot">=</span> p.value.y </span>
<span id="cb1004-16"><a href="regression.html#cb1004-16" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb1004-17"><a href="regression.html#cb1004-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.double), round, <span class="dv">2</span>))   </span></code></pre></div>
<pre><code>## # A tibble: 20 × 11
##    characteristic recovered  dead univ_or univ_ci_low univ_ci_high univ_pval mv_or mvv_ci_low mv_ci_high mv_pval
##    &lt;chr&gt;              &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;     &lt;dbl&gt; &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt;   &lt;dbl&gt;
##  1 (Intercept)          909  1168    1.28        1.18         1.4       0     1.07       0.83       1.39    0.6 
##  2 gender               916  1174    1           0.88         1.13      0.97  1          0.88       1.14    0.97
##  3 (Intercept)          340   436    1.28        1.11         1.48      0     1.07       0.83       1.39    0.6 
##  4 fever               1485  1906    1           0.85         1.17      0.99  1          0.86       1.18    0.96
##  5 (Intercept)         1472  1877    1.28        1.19         1.37      0     1.07       0.83       1.39    0.6 
##  6 chills               353   465    1.03        0.89         1.21      0.68  1.03       0.89       1.21    0.67
##  7 (Intercept)          272   309    1.14        0.97         1.34      0.13  1.07       0.83       1.39    0.6 
##  8 cough               1553  2033    1.15        0.97         1.37      0.11  1.15       0.96       1.37    0.12
##  9 (Intercept)         1636  2114    1.29        1.21         1.38      0     1.07       0.83       1.39    0.6 
## 10 aches                189   228    0.93        0.76         1.14      0.51  0.93       0.76       1.14    0.5 
## 11 (Intercept)          931  1144    1.23        1.13         1.34      0     1.07       0.83       1.39    0.6 
## 12 vomit                894  1198    1.09        0.96         1.23      0.17  1.09       0.96       1.23    0.17
## 13 (Intercept)          338   427    1.26        1.1          1.46      0     1.07       0.83       1.39    0.6 
## 14 age_cat5-9           365   433    0.94        0.77         1.15      0.54  0.94       0.77       1.15    0.53
## 15 age_cat10-14         273   396    1.15        0.93         1.42      0.2   1.15       0.93       1.41    0.2 
## 16 age_cat15-19         238   299    0.99        0.8          1.24      0.96  0.99       0.79       1.24    0.92
## 17 age_cat20-29         345   448    1.03        0.84         1.26      0.79  1.03       0.84       1.26    0.8 
## 18 age_cat30-49         228   307    1.07        0.85         1.33      0.58  1.06       0.85       1.33    0.61
## 19 age_cat50-69          35    30    0.68        0.41         1.13      0.13  0.68       0.4        1.13    0.14
## 20 age_cat70+             3     2    0.53        0.07         3.2       0.49  0.52       0.07       3.19    0.48</code></pre>
<!-- ======================================================= -->
</div>
</div>
</div>
<div id="forest-plot" class="section level2" number="19.5">
<h2><span class="header-section-number">19.5</span> Forest plot</h2>
<p>Cette section montre comment produire un graphique avec les résultats de votre régression.
Il y a deux options, vous pouvez construire un graphique vous-même en utilisant <strong>ggplot2</strong> ou utiliser un méta-package appelé <strong>easystats</strong> (un package qui inclut plusieurs packages).
méta-package appelé <strong>easystats</strong> (un package qui inclut plusieurs packages).</p>
<p>Consultez la page sur <a href="ggplot_basics.html#ggplot_basics">Les bases de ggplot</a> si vous n’êtes pas familier avec le package de traçage <strong>ggplot2</strong>.</p>
<!-- ======================================================= -->
<div id="ggplot2-package" class="section level3 unnumbered">
<h3><strong>ggplot2</strong> package</h3>
<p>Vous pouvez construire un graphique forest avec <code>ggplot()</code> en traçant les éléments des résultats de la régression multivariable. Ajoutez les couches des tracés en utilisant ces “geoms” :</p>
<ul>
<li>estimations avec <code>geom_point()</code><br />
</li>
<li>intervalles de confiance avec “geom_errorbar()`”.<br />
</li>
<li>une ligne verticale à OR = 1 avec <code>geom_vline()</code>.</li>
</ul>
<p>Avant de tracer un graphique, vous pouvez utiliser <code>fct_relevel()</code> du package <strong>forcats</strong> pour définir l’ordre des variables/niveaux sur l’axe des ordonnées. <code>ggplot()</code> peut les afficher dans l’ordre alpha-numérique, ce qui ne fonctionnerait pas bien pour ces valeurs de catégories d’âge (“30” apparaîtrait avant “5”). Voir la page sur les <a href="factors.html#factors">facteurs</a> pour plus de détails.</p>
<div class="sourceCode" id="cb1006"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1006-1"><a href="regression.html#cb1006-1" aria-hidden="true" tabindex="-1"></a><span class="do">## enlever le terme intercept dans le resultats multivariables</span></span>
<span id="cb1006-2"><a href="regression.html#cb1006-2" aria-hidden="true" tabindex="-1"></a>mv_tab_base <span class="sc">%&gt;%</span> </span>
<span id="cb1006-3"><a href="regression.html#cb1006-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1006-4"><a href="regression.html#cb1006-4" aria-hidden="true" tabindex="-1"></a>  <span class="co">#definir l&#39;odre d&#39;apparition des niveaux  le long de l&#39;axe y </span></span>
<span id="cb1006-5"><a href="regression.html#cb1006-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">term =</span> <span class="fu">fct_relevel</span>(</span>
<span id="cb1006-6"><a href="regression.html#cb1006-6" aria-hidden="true" tabindex="-1"></a>    term,</span>
<span id="cb1006-7"><a href="regression.html#cb1006-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;vomit&quot;</span>, <span class="st">&quot;gender&quot;</span>, <span class="st">&quot;fever&quot;</span>, <span class="st">&quot;cough&quot;</span>, <span class="st">&quot;chills&quot;</span>, <span class="st">&quot;aches&quot;</span>,</span>
<span id="cb1006-8"><a href="regression.html#cb1006-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;age_cat5-9&quot;</span>, <span class="st">&quot;age_cat10-14&quot;</span>, <span class="st">&quot;age_cat15-19&quot;</span>, <span class="st">&quot;age_cat20-29&quot;</span>,</span>
<span id="cb1006-9"><a href="regression.html#cb1006-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;age_cat30-49&quot;</span>, <span class="st">&quot;age_cat50-69&quot;</span>, <span class="st">&quot;age_cat70+&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb1006-10"><a href="regression.html#cb1006-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1006-11"><a href="regression.html#cb1006-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># supprimer la ligne denommé &quot;intercept&quot; dans le graphique</span></span>
<span id="cb1006-12"><a href="regression.html#cb1006-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(term <span class="sc">!=</span> <span class="st">&quot;(Intercept)&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb1006-13"><a href="regression.html#cb1006-13" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1006-14"><a href="regression.html#cb1006-14" aria-hidden="true" tabindex="-1"></a>  <span class="do">## concevoir un graphe avec la variable sur l&#39;axe des y et l&#39;estimation (OR) sur l&#39;axe des x</span></span>
<span id="cb1006-15"><a href="regression.html#cb1006-15" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1006-16"><a href="regression.html#cb1006-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> estimate, <span class="at">y =</span> term)) <span class="sc">+</span></span>
<span id="cb1006-17"><a href="regression.html#cb1006-17" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1006-18"><a href="regression.html#cb1006-18" aria-hidden="true" tabindex="-1"></a>  <span class="do">## montrer  estimate  comme un point</span></span>
<span id="cb1006-19"><a href="regression.html#cb1006-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb1006-20"><a href="regression.html#cb1006-20" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1006-21"><a href="regression.html#cb1006-21" aria-hidden="true" tabindex="-1"></a>  <span class="do">## ajouter une barre d&#39;erreur pour les intervalles de confiance</span></span>
<span id="cb1006-22"><a href="regression.html#cb1006-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(<span class="fu">aes</span>(<span class="at">xmin =</span> conf.low, <span class="at">xmax =</span> conf.high)) <span class="sc">+</span> </span>
<span id="cb1006-23"><a href="regression.html#cb1006-23" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1006-24"><a href="regression.html#cb1006-24" aria-hidden="true" tabindex="-1"></a>  <span class="do">## montrer où OR = 1 est pour référence comme une ligne pointillée</span></span>
<span id="cb1006-25"><a href="regression.html#cb1006-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">1</span>, <span class="at">linetype =</span> <span class="st">&quot;dashed&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/ggplot_forest-1.png" width="672" /></p>
<!-- ======================================================= -->
</div>
<div id="packages-easystats" class="section level3 unnumbered">
<h3>Packages <strong>easystats</strong></h3>
<p>Une alternative, si vous ne voulez pas le bon niveau de contrôle que <strong>ggplot2</strong> fournit, est d’utiliser une combinaison des packages <strong>easystats</strong>.</p>
<p>La fonction <code>model_parameters()</code> du package <strong>parameters</strong> fait l’équivalent de la fonction du package <strong>broom</strong>.
de la fonction <code>tidy()</code> du package <strong>broom</strong>. Le package <strong>see</strong> accepte alors ces sorties
et crée un graphique forest par défaut sous la forme d’un objet <code>ggplot()</code>.</p>
<div class="sourceCode" id="cb1007"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1007-1"><a href="regression.html#cb1007-1" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(easystats)</span>
<span id="cb1007-2"><a href="regression.html#cb1007-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1007-3"><a href="regression.html#cb1007-3" aria-hidden="true" tabindex="-1"></a><span class="do">## supprimer le terme interception de vos résultats multivariables</span></span>
<span id="cb1007-4"><a href="regression.html#cb1007-4" aria-hidden="true" tabindex="-1"></a>final_mv_reg <span class="sc">%&gt;%</span> </span>
<span id="cb1007-5"><a href="regression.html#cb1007-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">model_parameters</span>(<span class="at">exponentiate =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb1007-6"><a href="regression.html#cb1007-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/easystats_forest-1.png" width="672" /></p>
<!-- ======================================================= -->
</div>
</div>
<div id="ressources-7" class="section level2" number="19.6">
<h2><span class="header-section-number">19.6</span> Ressources</h2>
<p>Le contenu de cette page a été alimenté par ces ressources et vignettes en ligne :</p>
<p><a href="https://www.datacamp.com/community/tutorials/linear-regression-R">Linear regression in R</a></p>
<p><a href="http://www.danieldsjoberg.com/gtsummary/articles/tbl_regression.html">gtsummary</a></p>
<p><a href="https://stats.idre.ucla.edu/other/dae/">UCLA stats page</a></p>
<p><a href="http://www.sthda.com/english/articles/36-classification-methods-essentials/150-stepwise-logistic-regression-essentials-in-r/">sthda stepwise regression</a></p>

</div>
</div>
  </main>

  <div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page">
      <h2>On this page</h2>
      <div id="book-on-this-page"></div>

      <div class="book-extra">
        <ul class="list-unstyled">
          <li><a id="book-source" href="#">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="#">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
      </div>
    </nav>
  </div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5">
  <div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>The Epidemiologist R Handbook</strong>" was written by the handbook team. It was last built on 2023-05-17.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer>


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
<script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>

</html>
